(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function Hr(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const At={},ai=[],xe=()=>{},ca=()=>!1,zn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Vr=t=>t.startsWith("onUpdate:"),jt=Object.assign,Wr=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},jl=Object.prototype.hasOwnProperty,Pt=(t,e)=>jl.call(t,e),mt=Array.isArray,li=t=>_n(t)==="[object Map]",jn=t=>_n(t)==="[object Set]",ws=t=>_n(t)==="[object Date]",yt=t=>typeof t=="function",Bt=t=>typeof t=="string",we=t=>typeof t=="symbol",Mt=t=>t!==null&&typeof t=="object",ua=t=>(Mt(t)||yt(t))&&yt(t.then)&&yt(t.catch),da=Object.prototype.toString,_n=t=>da.call(t),Kl=t=>_n(t).slice(8,-1),fa=t=>_n(t)==="[object Object]",qr=t=>Bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,sn=Hr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kn=t=>{const e=Object.create(null);return(i=>e[i]||(e[i]=t(i)))},Yl=/-\w/g,fe=Kn(t=>t.replace(Yl,e=>e.slice(1).toUpperCase())),Xl=/\B([A-Z])/g,ei=Kn(t=>t.replace(Xl,"-$1").toLowerCase()),Yn=Kn(t=>t.charAt(0).toUpperCase()+t.slice(1)),lr=Kn(t=>t?`on${Yn(t)}`:""),He=(t,e)=>!Object.is(t,e),Rn=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},ga=(t,e,i,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:i})},Xn=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ps;const $n=()=>Ps||(Ps=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function zr(t){if(mt(t)){const e={};for(let i=0;i<t.length;i++){const r=t[i],n=Bt(r)?Zl(r):zr(r);if(n)for(const s in n)e[s]=n[s]}return e}else if(Bt(t)||Mt(t))return t}const $l=/;(?![^(]*\))/g,Jl=/:([^]+)/,Ql=/\/\*[^]*?\*\//g;function Zl(t){const e={};return t.replace(Ql,"").split($l).forEach(i=>{if(i){const r=i.split(Jl);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qe(t){let e="";if(Bt(t))e=t;else if(mt(t))for(let i=0;i<t.length;i++){const r=Qe(t[i]);r&&(e+=r+" ")}else if(Mt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const th="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eh=Hr(th);function pa(t){return!!t||t===""}function ih(t,e){if(t.length!==e.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=Jn(t[r],e[r]);return i}function Jn(t,e){if(t===e)return!0;let i=ws(t),r=ws(e);if(i||r)return i&&r?t.getTime()===e.getTime():!1;if(i=we(t),r=we(e),i||r)return t===e;if(i=mt(t),r=mt(e),i||r)return i&&r?ih(t,e):!1;if(i=Mt(t),r=Mt(e),i||r){if(!i||!r)return!1;const n=Object.keys(t).length,s=Object.keys(e).length;if(n!==s)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Jn(t[a],e[a]))return!1}}return String(t)===String(e)}function nh(t,e){return t.findIndex(i=>Jn(i,e))}const ma=t=>!!(t&&t.__v_isRef===!0),Ot=t=>Bt(t)?t:t==null?"":mt(t)||Mt(t)&&(t.toString===da||!yt(t.toString))?ma(t)?Ot(t.value):JSON.stringify(t,_a,2):String(t),_a=(t,e)=>ma(e)?_a(t,e.value):li(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[r,n],s)=>(i[hr(r,s)+" =>"]=n,i),{})}:jn(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>hr(i))}:we(e)?hr(e):Mt(e)&&!mt(e)&&!fa(e)?String(e):e,hr=(t,e="")=>{var i;return we(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};let oe;class rh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=oe,!e&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=oe;try{return oe=this,e()}finally{oe=i}}}on(){++this._on===1&&(this.prevScope=oe,oe=this)}off(){this._on>0&&--this._on===0&&(oe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function sh(){return oe}let Ft;const cr=new WeakSet;class ya{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,oe&&oe.active&&oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cr.has(this)&&(cr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ba(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ts(this),Sa(this);const e=Ft,i=ge;Ft=this,ge=!0;try{return this.fn()}finally{Ca(this),Ft=e,ge=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Yr(e);this.deps=this.depsTail=void 0,Ts(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ar(this)&&this.run()}get dirty(){return Ar(this)}}let va=0,on,an;function ba(t,e=!1){if(t.flags|=8,e){t.next=an,an=t;return}t.next=on,on=t}function jr(){va++}function Kr(){if(--va>0)return;if(an){let e=an;for(an=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;on;){let e=on;for(on=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=i}}if(t)throw t}function Sa(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ca(t){let e,i=t.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),Yr(r),oh(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=i}function Ar(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(xa(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function xa(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===dn)||(t.globalVersion=dn,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Ar(t))))return;t.flags|=2;const e=t.dep,i=Ft,r=ge;Ft=t,ge=!0;try{Sa(t);const n=t.fn(t._value);(e.version===0||He(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{Ft=i,ge=r,Ca(t),t.flags&=-3}}function Yr(t,e=!1){const{dep:i,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),i.subs===t&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)Yr(s,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function oh(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let ge=!0;const wa=[];function Oe(){wa.push(ge),ge=!1}function Ne(){const t=wa.pop();ge=t===void 0?!0:t}function Ts(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=Ft;Ft=void 0;try{e()}finally{Ft=i}}}let dn=0;class ah{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Xr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ft||!ge||Ft===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Ft)i=this.activeLink=new ah(Ft,this),Ft.deps?(i.prevDep=Ft.depsTail,Ft.depsTail.nextDep=i,Ft.depsTail=i):Ft.deps=Ft.depsTail=i,Pa(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=Ft.depsTail,i.nextDep=void 0,Ft.depsTail.nextDep=i,Ft.depsTail=i,Ft.deps===i&&(Ft.deps=r)}return i}trigger(e){this.version++,dn++,this.notify(e)}notify(e){jr();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Kr()}}}function Pa(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Pa(r)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const Mr=new WeakMap,Ze=Symbol(""),Fr=Symbol(""),fn=Symbol("");function Kt(t,e,i){if(ge&&Ft){let r=Mr.get(t);r||Mr.set(t,r=new Map);let n=r.get(i);n||(r.set(i,n=new Xr),n.map=r,n.key=i),n.track()}}function Me(t,e,i,r,n,s){const a=Mr.get(t);if(!a){dn++;return}const o=l=>{l&&l.trigger()};if(jr(),e==="clear")a.forEach(o);else{const l=mt(t),u=l&&qr(i);if(l&&i==="length"){const c=Number(r);a.forEach((_,p)=>{(p==="length"||p===fn||!we(p)&&p>=c)&&o(_)})}else switch((i!==void 0||a.has(void 0))&&o(a.get(i)),u&&o(a.get(fn)),e){case"add":l?u&&o(a.get("length")):(o(a.get(Ze)),li(t)&&o(a.get(Fr)));break;case"delete":l||(o(a.get(Ze)),li(t)&&o(a.get(Fr)));break;case"set":li(t)&&o(a.get(Ze));break}}Kr()}function ni(t){const e=wt(t);return e===t?e:(Kt(e,"iterate",fn),de(t)?e:e.map(pe))}function Qn(t){return Kt(t=wt(t),"iterate",fn),t}function Ge(t,e){return ke(t)?di(ti(t)?pe(e):e):pe(e)}const lh={__proto__:null,[Symbol.iterator](){return ur(this,Symbol.iterator,t=>Ge(this,t))},concat(...t){return ni(this).concat(...t.map(e=>mt(e)?ni(e):e))},entries(){return ur(this,"entries",t=>(t[1]=Ge(this,t[1]),t))},every(t,e){return Te(this,"every",t,e,void 0,arguments)},filter(t,e){return Te(this,"filter",t,e,i=>i.map(r=>Ge(this,r)),arguments)},find(t,e){return Te(this,"find",t,e,i=>Ge(this,i),arguments)},findIndex(t,e){return Te(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Te(this,"findLast",t,e,i=>Ge(this,i),arguments)},findLastIndex(t,e){return Te(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Te(this,"forEach",t,e,void 0,arguments)},includes(...t){return dr(this,"includes",t)},indexOf(...t){return dr(this,"indexOf",t)},join(t){return ni(this).join(t)},lastIndexOf(...t){return dr(this,"lastIndexOf",t)},map(t,e){return Te(this,"map",t,e,void 0,arguments)},pop(){return gi(this,"pop")},push(...t){return gi(this,"push",t)},reduce(t,...e){return Rs(this,"reduce",t,e)},reduceRight(t,...e){return Rs(this,"reduceRight",t,e)},shift(){return gi(this,"shift")},some(t,e){return Te(this,"some",t,e,void 0,arguments)},splice(...t){return gi(this,"splice",t)},toReversed(){return ni(this).toReversed()},toSorted(t){return ni(this).toSorted(t)},toSpliced(...t){return ni(this).toSpliced(...t)},unshift(...t){return gi(this,"unshift",t)},values(){return ur(this,"values",t=>Ge(this,t))}};function ur(t,e,i){const r=Qn(t),n=r[e]();return r!==t&&!de(t)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.done||(s.value=i(s.value)),s}),n}const hh=Array.prototype;function Te(t,e,i,r,n,s){const a=Qn(t),o=a!==t&&!de(t),l=a[e];if(l!==hh[e]){const _=l.apply(t,s);return o?pe(_):_}let u=i;a!==t&&(o?u=function(_,p){return i.call(this,Ge(t,_),p,t)}:i.length>2&&(u=function(_,p){return i.call(this,_,p,t)}));const c=l.call(a,u,r);return o&&n?n(c):c}function Rs(t,e,i,r){const n=Qn(t);let s=i;return n!==t&&(de(t)?i.length>3&&(s=function(a,o,l){return i.call(this,a,o,l,t)}):s=function(a,o,l){return i.call(this,a,Ge(t,o),l,t)}),n[e](s,...r)}function dr(t,e,i){const r=wt(t);Kt(r,"iterate",fn);const n=r[e](...i);return(n===-1||n===!1)&&Qr(i[0])?(i[0]=wt(i[0]),r[e](...i)):n}function gi(t,e,i=[]){Oe(),jr();const r=wt(t)[e].apply(t,i);return Kr(),Ne(),r}const ch=Hr("__proto__,__v_isRef,__isVue"),Ta=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(we));function uh(t){we(t)||(t=String(t));const e=wt(this);return Kt(e,"has",t),e.hasOwnProperty(t)}class Ra{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,r){if(i==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return s;if(i==="__v_raw")return r===(n?s?Sh:Fa:s?Ma:Aa).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=mt(e);if(!n){let l;if(a&&(l=lh[i]))return l;if(i==="hasOwnProperty")return uh}const o=Reflect.get(e,i,Xt(e)?e:r);if((we(i)?Ta.has(i):ch(i))||(n||Kt(e,"get",i),s))return o;if(Xt(o)){const l=a&&qr(i)?o:o.value;return n&&Mt(l)?Nr(l):l}return Mt(o)?n?Nr(o):Ce(o):o}}class Ea extends Ra{constructor(e=!1){super(!1,e)}set(e,i,r,n){let s=e[i];const a=mt(e)&&qr(i);if(!this._isShallow){const u=ke(s);if(!de(r)&&!ke(r)&&(s=wt(s),r=wt(r)),!a&&Xt(s)&&!Xt(r))return u||(s.value=r),!0}const o=a?Number(i)<e.length:Pt(e,i),l=Reflect.set(e,i,r,Xt(e)?e:n);return e===wt(n)&&(o?He(r,s)&&Me(e,"set",i,r):Me(e,"add",i,r)),l}deleteProperty(e,i){const r=Pt(e,i);e[i];const n=Reflect.deleteProperty(e,i);return n&&r&&Me(e,"delete",i,void 0),n}has(e,i){const r=Reflect.has(e,i);return(!we(i)||!Ta.has(i))&&Kt(e,"has",i),r}ownKeys(e){return Kt(e,"iterate",mt(e)?"length":Ze),Reflect.ownKeys(e)}}class dh extends Ra{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const fh=new Ea,gh=new dh,ph=new Ea(!0);const Or=t=>t,wn=t=>Reflect.getPrototypeOf(t);function mh(t,e,i){return function(...r){const n=this.__v_raw,s=wt(n),a=li(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=n[t](...r),c=i?Or:e?di:pe;return!e&&Kt(s,"iterate",l?Fr:Ze),jt(Object.create(u),{next(){const{value:_,done:p}=u.next();return p?{value:_,done:p}:{value:o?[c(_[0]),c(_[1])]:c(_),done:p}}})}}function Pn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function _h(t,e){const i={get(n){const s=this.__v_raw,a=wt(s),o=wt(n);t||(He(n,o)&&Kt(a,"get",n),Kt(a,"get",o));const{has:l}=wn(a),u=e?Or:t?di:pe;if(l.call(a,n))return u(s.get(n));if(l.call(a,o))return u(s.get(o));s!==a&&s.get(n)},get size(){const n=this.__v_raw;return!t&&Kt(wt(n),"iterate",Ze),n.size},has(n){const s=this.__v_raw,a=wt(s),o=wt(n);return t||(He(n,o)&&Kt(a,"has",n),Kt(a,"has",o)),n===o?s.has(n):s.has(n)||s.has(o)},forEach(n,s){const a=this,o=a.__v_raw,l=wt(o),u=e?Or:t?di:pe;return!t&&Kt(l,"iterate",Ze),o.forEach((c,_)=>n.call(s,u(c),u(_),a))}};return jt(i,t?{add:Pn("add"),set:Pn("set"),delete:Pn("delete"),clear:Pn("clear")}:{add(n){!e&&!de(n)&&!ke(n)&&(n=wt(n));const s=wt(this);return wn(s).has.call(s,n)||(s.add(n),Me(s,"add",n,n)),this},set(n,s){!e&&!de(s)&&!ke(s)&&(s=wt(s));const a=wt(this),{has:o,get:l}=wn(a);let u=o.call(a,n);u||(n=wt(n),u=o.call(a,n));const c=l.call(a,n);return a.set(n,s),u?He(s,c)&&Me(a,"set",n,s):Me(a,"add",n,s),this},delete(n){const s=wt(this),{has:a,get:o}=wn(s);let l=a.call(s,n);l||(n=wt(n),l=a.call(s,n)),o&&o.call(s,n);const u=s.delete(n);return l&&Me(s,"delete",n,void 0),u},clear(){const n=wt(this),s=n.size!==0,a=n.clear();return s&&Me(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=mh(n,t,e)}),i}function $r(t,e){const i=_h(t,e);return(r,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(Pt(i,n)&&n in r?i:r,n,s)}const yh={get:$r(!1,!1)},vh={get:$r(!1,!0)},bh={get:$r(!0,!1)};const Aa=new WeakMap,Ma=new WeakMap,Fa=new WeakMap,Sh=new WeakMap;function Ch(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xh(t){return t.__v_skip||!Object.isExtensible(t)?0:Ch(Kl(t))}function Ce(t){return ke(t)?t:Jr(t,!1,fh,yh,Aa)}function wh(t){return Jr(t,!1,ph,vh,Ma)}function Nr(t){return Jr(t,!0,gh,bh,Fa)}function Jr(t,e,i,r,n){if(!Mt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=xh(t);if(s===0)return t;const a=n.get(t);if(a)return a;const o=new Proxy(t,s===2?r:i);return n.set(t,o),o}function ti(t){return ke(t)?ti(t.__v_raw):!!(t&&t.__v_isReactive)}function ke(t){return!!(t&&t.__v_isReadonly)}function de(t){return!!(t&&t.__v_isShallow)}function Qr(t){return t?!!t.__v_raw:!1}function wt(t){const e=t&&t.__v_raw;return e?wt(e):t}function Ph(t){return!Pt(t,"__v_skip")&&Object.isExtensible(t)&&ga(t,"__v_skip",!0),t}const pe=t=>Mt(t)?Ce(t):t,di=t=>Mt(t)?Nr(t):t;function Xt(t){return t?t.__v_isRef===!0:!1}function Ut(t){return Th(t,!1)}function Th(t,e){return Xt(t)?t:new Rh(t,e)}class Rh{constructor(e,i){this.dep=new Xr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:wt(e),this._value=i?e:pe(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,r=this.__v_isShallow||de(e)||ke(e);e=r?e:wt(e),He(e,i)&&(this._rawValue=e,this._value=r?e:pe(e),this.dep.trigger())}}function Eh(t){return Xt(t)?t.value:t}const Ah={get:(t,e,i)=>e==="__v_raw"?t:Eh(Reflect.get(t,e,i)),set:(t,e,i,r)=>{const n=t[e];return Xt(n)&&!Xt(i)?(n.value=i,!0):Reflect.set(t,e,i,r)}};function Oa(t){return ti(t)?t:new Proxy(t,Ah)}class Mh{constructor(e,i,r){this.fn=e,this.setter=i,this._value=void 0,this.dep=new Xr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=dn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ft!==this)return ba(this,!0),!0}get value(){const e=this.dep.track();return xa(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Fh(t,e,i=!1){let r,n;return yt(t)?r=t:(r=t.get,n=t.set),new Mh(r,n,i)}const Tn={},kn=new WeakMap;let $e;function Oh(t,e=!1,i=$e){if(i){let r=kn.get(i);r||kn.set(i,r=[]),r.push(t)}}function Nh(t,e,i=At){const{immediate:r,deep:n,once:s,scheduler:a,augmentJob:o,call:l}=i,u=m=>n?m:de(m)||n===!1||n===0?Fe(m,1):Fe(m);let c,_,p,d,f=!1,v=!1;if(Xt(t)?(_=()=>t.value,f=de(t)):ti(t)?(_=()=>u(t),f=!0):mt(t)?(v=!0,f=t.some(m=>ti(m)||de(m)),_=()=>t.map(m=>{if(Xt(m))return m.value;if(ti(m))return u(m);if(yt(m))return l?l(m,2):m()})):yt(t)?e?_=l?()=>l(t,2):t:_=()=>{if(p){Oe();try{p()}finally{Ne()}}const m=$e;$e=c;try{return l?l(t,3,[d]):t(d)}finally{$e=m}}:_=xe,e&&n){const m=_,S=n===!0?1/0:n;_=()=>Fe(m(),S)}const C=sh(),w=()=>{c.stop(),C&&C.active&&Wr(C.effects,c)};if(s&&e){const m=e;e=(...S)=>{m(...S),w()}}let g=v?new Array(t.length).fill(Tn):Tn;const h=m=>{if(!(!(c.flags&1)||!c.dirty&&!m))if(e){const S=c.run();if(n||f||(v?S.some((R,D)=>He(R,g[D])):He(S,g))){p&&p();const R=$e;$e=c;try{const D=[S,g===Tn?void 0:v&&g[0]===Tn?[]:g,d];g=S,l?l(e,3,D):e(...D)}finally{$e=R}}}else c.run()};return o&&o(h),c=new ya(_),c.scheduler=a?()=>a(h,!1):h,d=m=>Oh(m,!1,c),p=c.onStop=()=>{const m=kn.get(c);if(m){if(l)l(m,4);else for(const S of m)S();kn.delete(c)}},e?r?h(!0):g=c.run():a?a(h.bind(null,!0),!0):c.run(),w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function Fe(t,e=1/0,i){if(e<=0||!Mt(t)||t.__v_skip||(i=i||new Map,(i.get(t)||0)>=e))return t;if(i.set(t,e),e--,Xt(t))Fe(t.value,e,i);else if(mt(t))for(let r=0;r<t.length;r++)Fe(t[r],e,i);else if(jn(t)||li(t))t.forEach(r=>{Fe(r,e,i)});else if(fa(t)){for(const r in t)Fe(t[r],e,i);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Fe(t[r],e,i)}return t}function yn(t,e,i,r){try{return r?t(...r):t()}catch(n){Zn(n,e,i)}}function Pe(t,e,i,r){if(yt(t)){const n=yn(t,e,i,r);return n&&ua(n)&&n.catch(s=>{Zn(s,e,i)}),n}if(mt(t)){const n=[];for(let s=0;s<t.length;s++)n.push(Pe(t[s],e,i,r));return n}}function Zn(t,e,i,r=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||At;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let _=0;_<c.length;_++)if(c[_](t,l,u)===!1)return}o=o.parent}if(s){Oe(),yn(s,null,10,[t,l,u]),Ne();return}}kh(t,i,n,r,a)}function kh(t,e,i,r=!0,n=!1){if(n)throw t;console.error(t)}const Qt=[];let be=-1;const hi=[];let Ue=null,si=0;const Na=Promise.resolve();let Ln=null;function zt(t){const e=Ln||Na;return t?e.then(this?t.bind(this):t):e}function Lh(t){let e=be+1,i=Qt.length;for(;e<i;){const r=e+i>>>1,n=Qt[r],s=gn(n);s<t||s===t&&n.flags&2?e=r+1:i=r}return e}function Zr(t){if(!(t.flags&1)){const e=gn(t),i=Qt[Qt.length-1];!i||!(t.flags&2)&&e>=gn(i)?Qt.push(t):Qt.splice(Lh(e),0,t),t.flags|=1,ka()}}function ka(){Ln||(Ln=Na.then(Ia))}function Ih(t){mt(t)?hi.push(...t):Ue&&t.id===-1?Ue.splice(si+1,0,t):t.flags&1||(hi.push(t),t.flags|=1),ka()}function Es(t,e,i=be+1){for(;i<Qt.length;i++){const r=Qt[i];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Qt.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function La(t){if(hi.length){const e=[...new Set(hi)].sort((i,r)=>gn(i)-gn(r));if(hi.length=0,Ue){Ue.push(...e);return}for(Ue=e,si=0;si<Ue.length;si++){const i=Ue[si];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Ue=null,si=0}}const gn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ia(t){try{for(be=0;be<Qt.length;be++){const e=Qt[be];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;be<Qt.length;be++){const e=Qt[be];e&&(e.flags&=-2)}be=-1,Qt.length=0,La(),Ln=null,(Qt.length||hi.length)&&Ia()}}let ce=null,Da=null;function In(t){const e=ce;return ce=t,Da=t&&t.type.__scopeId||null,e}function En(t,e=ce,i){if(!e||t._n)return t;const r=(...n)=>{r._d&&Un(-1);const s=In(e);let a;try{a=t(...n)}finally{In(s),r._d&&Un(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ee(t,e){if(ce===null)return t;const i=rr(ce),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[s,a,o,l=At]=e[n];s&&(yt(s)&&(s={mounted:s,updated:s}),s.deep&&Fe(a),r.push({dir:s,instance:i,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function je(t,e,i,r){const n=t.dirs,s=e&&e.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Oe(),Pe(l,i,8,[t.el,o,t,e]),Ne())}}function Dh(t,e){if(Yt){let i=Yt.provides;const r=Yt.parent&&Yt.parent.provides;r===i&&(i=Yt.provides=Object.create(r)),i[t]=e}}function An(t,e,i=!1){const r=as();if(r||ci){let n=ci?ci._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return i&&yt(e)?e.call(r&&r.proxy):e}}const Gh=Symbol.for("v-scx"),Uh=()=>An(Gh);function Ve(t,e,i){return Ga(t,e,i)}function Ga(t,e,i=At){const{immediate:r,deep:n,flush:s,once:a}=i,o=jt({},i),l=e&&r||!e&&s!=="post";let u;if(mn){if(s==="sync"){const d=Uh();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=xe,d.resume=xe,d.pause=xe,d}}const c=Yt;o.call=(d,f,v)=>Pe(d,c,f,v);let _=!1;s==="post"?o.scheduler=d=>{le(d,c&&c.suspense)}:s!=="sync"&&(_=!0,o.scheduler=(d,f)=>{f?d():Zr(d)}),o.augmentJob=d=>{e&&(d.flags|=4),_&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const p=Nh(t,e,o);return mn&&(u?u.push(p):l&&p()),p}function Bh(t,e,i){const r=this.proxy,n=Bt(t)?t.includes(".")?Ua(r,t):()=>r[t]:t.bind(r,r);let s;yt(e)?s=e:(s=e.handler,i=e);const a=vn(this),o=Ga(n,s.bind(r),i);return a(),o}function Ua(t,e){const i=e.split(".");return()=>{let r=t;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const Hh=Symbol("_vte"),Vh=t=>t.__isTeleport,Wh=Symbol("_leaveCb");function ts(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ts(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ba(t,e){return yt(t)?jt({name:t.name},e,{setup:t}):t}function Ha(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Dn=new WeakMap;function ln(t,e,i,r,n=!1){if(mt(t)){t.forEach((f,v)=>ln(f,e&&(mt(e)?e[v]:e),i,r,n));return}if(hn(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ln(t,e,i,r.component.subTree);return}const s=r.shapeFlag&4?rr(r.component):r.el,a=n?null:s,{i:o,r:l}=t,u=e&&e.r,c=o.refs===At?o.refs={}:o.refs,_=o.setupState,p=wt(_),d=_===At?ca:f=>Pt(p,f);if(u!=null&&u!==l){if(As(e),Bt(u))c[u]=null,d(u)&&(_[u]=null);else if(Xt(u)){u.value=null;const f=e;f.k&&(c[f.k]=null)}}if(yt(l))yn(l,o,12,[a,c]);else{const f=Bt(l),v=Xt(l);if(f||v){const C=()=>{if(t.f){const w=f?d(l)?_[l]:c[l]:l.value;if(n)mt(w)&&Wr(w,s);else if(mt(w))w.includes(s)||w.push(s);else if(f)c[l]=[s],d(l)&&(_[l]=c[l]);else{const g=[s];l.value=g,t.k&&(c[t.k]=g)}}else f?(c[l]=a,d(l)&&(_[l]=a)):v&&(l.value=a,t.k&&(c[t.k]=a))};if(a){const w=()=>{C(),Dn.delete(t)};w.id=-1,Dn.set(t,w),le(w,i)}else As(t),C()}}}function As(t){const e=Dn.get(t);e&&(e.flags|=8,Dn.delete(t))}$n().requestIdleCallback;$n().cancelIdleCallback;const hn=t=>!!t.type.__asyncLoader,Va=t=>t.type.__isKeepAlive;function qh(t,e){Wa(t,"a",e)}function zh(t,e){Wa(t,"da",e)}function Wa(t,e,i=Yt){const r=t.__wdc||(t.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(tr(e,r,i),i){let n=i.parent;for(;n&&n.parent;)Va(n.parent.vnode)&&jh(r,e,i,n),n=n.parent}}function jh(t,e,i,r){const n=tr(e,t,r,!0);ns(()=>{Wr(r[e],n)},i)}function tr(t,e,i=Yt,r=!1){if(i){const n=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...a)=>{Oe();const o=vn(i),l=Pe(e,i,t,a);return o(),Ne(),l});return r?n.unshift(s):n.push(s),s}}const Le=t=>(e,i=Yt)=>{(!mn||t==="sp")&&tr(t,(...r)=>e(...r),i)},Kh=Le("bm"),er=Le("m"),Yh=Le("bu"),es=Le("u"),is=Le("bum"),ns=Le("um"),Xh=Le("sp"),$h=Le("rtg"),Jh=Le("rtc");function Qh(t,e=Yt){tr("ec",t,e)}const Zh="components";function Ke(t,e){return ec(Zh,t,!0,e)||t}const tc=Symbol.for("v-ndc");function ec(t,e,i=!0,r=!1){const n=ce||Yt;if(n){const s=n.type;{const o=Uc(s,!1);if(o&&(o===e||o===fe(e)||o===Yn(fe(e))))return s}const a=Ms(n[t]||s[t],e)||Ms(n.appContext[t],e);return!a&&r?s:a}}function Ms(t,e){return t&&(t[e]||t[fe(e)]||t[Yn(fe(e))])}function fr(t,e,i,r){let n;const s=i,a=mt(t);if(a||Bt(t)){const o=a&&ti(t);let l=!1,u=!1;o&&(l=!de(t),u=ke(t),t=Qn(t)),n=new Array(t.length);for(let c=0,_=t.length;c<_;c++)n[c]=e(l?u?di(pe(t[c])):pe(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){n=new Array(t);for(let o=0;o<t;o++)n[o]=e(o+1,o,void 0,s)}else if(Mt(t))if(t[Symbol.iterator])n=Array.from(t,(o,l)=>e(o,l,void 0,s));else{const o=Object.keys(t);n=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];n[l]=e(t[c],c,l,s)}}else n=[];return n}const kr=t=>t?ll(t)?rr(t):kr(t.parent):null,cn=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>kr(t.parent),$root:t=>kr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>za(t),$forceUpdate:t=>t.f||(t.f=()=>{Zr(t.update)}),$nextTick:t=>t.n||(t.n=zt.bind(t.proxy)),$watch:t=>Bh.bind(t)}),gr=(t,e)=>t!==At&&!t.__isScriptSetup&&Pt(t,e),ic={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=t;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return n[e];case 4:return i[e];case 3:return s[e]}else{if(gr(r,e))return a[e]=1,r[e];if(n!==At&&Pt(n,e))return a[e]=2,n[e];if(Pt(s,e))return a[e]=3,s[e];if(i!==At&&Pt(i,e))return a[e]=4,i[e];Lr&&(a[e]=0)}}const u=cn[e];let c,_;if(u)return e==="$attrs"&&Kt(t.attrs,"get",""),u(t);if((c=o.__cssModules)&&(c=c[e]))return c;if(i!==At&&Pt(i,e))return a[e]=4,i[e];if(_=l.config.globalProperties,Pt(_,e))return _[e]},set({_:t},e,i){const{data:r,setupState:n,ctx:s}=t;return gr(n,e)?(n[e]=i,!0):r!==At&&Pt(r,e)?(r[e]=i,!0):Pt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:r,appContext:n,props:s,type:a}},o){let l;return!!(i[o]||t!==At&&o[0]!=="$"&&Pt(t,o)||gr(e,o)||Pt(s,o)||Pt(r,o)||Pt(cn,o)||Pt(n.config.globalProperties,o)||(l=a.__cssModules)&&l[o])},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Pt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Fs(t){return mt(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let Lr=!0;function nc(t){const e=za(t),i=t.proxy,r=t.ctx;Lr=!1,e.beforeCreate&&Os(e.beforeCreate,t,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:_,mounted:p,beforeUpdate:d,updated:f,activated:v,deactivated:C,beforeDestroy:w,beforeUnmount:g,destroyed:h,unmounted:m,render:S,renderTracked:R,renderTriggered:D,errorCaptured:y,serverPrefetch:x,expose:T,inheritAttrs:k,components:U,directives:H,filters:V}=e;if(u&&rc(u,r,null),a)for(const b in a){const P=a[b];yt(P)&&(r[b]=P.bind(i))}if(n){const b=n.call(i,i);Mt(b)&&(t.data=Ce(b))}if(Lr=!0,s)for(const b in s){const P=s[b],N=yt(P)?P.bind(i,i):yt(P.get)?P.get.bind(i,i):xe,F=!yt(P)&&yt(P.set)?P.set.bind(i):xe,I=re({get:N,set:F});Object.defineProperty(r,b,{enumerable:!0,configurable:!0,get:()=>I.value,set:K=>I.value=K})}if(o)for(const b in o)qa(o[b],r,i,b);if(l){const b=yt(l)?l.call(i):l;Reflect.ownKeys(b).forEach(P=>{Dh(P,b[P])})}c&&Os(c,t,"c");function $(b,P){mt(P)?P.forEach(N=>b(N.bind(i))):P&&b(P.bind(i))}if($(Kh,_),$(er,p),$(Yh,d),$(es,f),$(qh,v),$(zh,C),$(Qh,y),$(Jh,R),$($h,D),$(is,g),$(ns,m),$(Xh,x),mt(T))if(T.length){const b=t.exposed||(t.exposed={});T.forEach(P=>{Object.defineProperty(b,P,{get:()=>i[P],set:N=>i[P]=N,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===xe&&(t.render=S),k!=null&&(t.inheritAttrs=k),U&&(t.components=U),H&&(t.directives=H),x&&Ha(t)}function rc(t,e,i=xe){mt(t)&&(t=Ir(t));for(const r in t){const n=t[r];let s;Mt(n)?"default"in n?s=An(n.from||r,n.default,!0):s=An(n.from||r):s=An(n),Xt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function Os(t,e,i){Pe(mt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,i)}function qa(t,e,i,r){let n=r.includes(".")?Ua(i,r):()=>i[r];if(Bt(t)){const s=e[t];yt(s)&&Ve(n,s)}else if(yt(t))Ve(n,t.bind(i));else if(Mt(t))if(mt(t))t.forEach(s=>qa(s,e,i,r));else{const s=yt(t.handler)?t.handler.bind(i):e[t.handler];yt(s)&&Ve(n,s,t)}}function za(t){const e=t.type,{mixins:i,extends:r}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!n.length&&!i&&!r?l=e:(l={},n.length&&n.forEach(u=>Gn(l,u,a,!0)),Gn(l,e,a)),Mt(e)&&s.set(e,l),l}function Gn(t,e,i,r=!1){const{mixins:n,extends:s}=e;s&&Gn(t,s,i,!0),n&&n.forEach(a=>Gn(t,a,i,!0));for(const a in e)if(!(r&&a==="expose")){const o=sc[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const sc={data:Ns,props:ks,emits:ks,methods:rn,computed:rn,beforeCreate:Jt,created:Jt,beforeMount:Jt,mounted:Jt,beforeUpdate:Jt,updated:Jt,beforeDestroy:Jt,beforeUnmount:Jt,destroyed:Jt,unmounted:Jt,activated:Jt,deactivated:Jt,errorCaptured:Jt,serverPrefetch:Jt,components:rn,directives:rn,watch:ac,provide:Ns,inject:oc};function Ns(t,e){return e?t?function(){return jt(yt(t)?t.call(this,this):t,yt(e)?e.call(this,this):e)}:e:t}function oc(t,e){return rn(Ir(t),Ir(e))}function Ir(t){if(mt(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Jt(t,e){return t?[...new Set([].concat(t,e))]:e}function rn(t,e){return t?jt(Object.create(null),t,e):e}function ks(t,e){return t?mt(t)&&mt(e)?[...new Set([...t,...e])]:jt(Object.create(null),Fs(t),Fs(e??{})):e}function ac(t,e){if(!t)return e;if(!e)return t;const i=jt(Object.create(null),t);for(const r in e)i[r]=Jt(t[r],e[r]);return i}function ja(){return{app:null,config:{isNativeTag:ca,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lc=0;function hc(t,e){return function(r,n=null){yt(r)||(r=jt({},r)),n!=null&&!Mt(n)&&(n=null);const s=ja(),a=new WeakSet,o=[];let l=!1;const u=s.app={_uid:lc++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Hc,get config(){return s.config},set config(c){},use(c,..._){return a.has(c)||(c&&yt(c.install)?(a.add(c),c.install(u,..._)):yt(c)&&(a.add(c),c(u,..._))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,_){return _?(s.components[c]=_,u):s.components[c]},directive(c,_){return _?(s.directives[c]=_,u):s.directives[c]},mount(c,_,p){if(!l){const d=u._ceVNode||Vt(r,n);return d.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),t(d,c,p),l=!0,u._container=c,c.__vue_app__=u,rr(d.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Pe(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,_){return s.provides[c]=_,u},runWithContext(c){const _=ci;ci=u;try{return c()}finally{ci=_}}};return u}}let ci=null;const cc=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${fe(e)}Modifiers`]||t[`${ei(e)}Modifiers`];function uc(t,e,...i){if(t.isUnmounted)return;const r=t.vnode.props||At;let n=i;const s=e.startsWith("update:"),a=s&&cc(r,e.slice(7));a&&(a.trim&&(n=i.map(c=>Bt(c)?c.trim():c)),a.number&&(n=i.map(Xn)));let o,l=r[o=lr(e)]||r[o=lr(fe(e))];!l&&s&&(l=r[o=lr(ei(e))]),l&&Pe(l,t,6,n);const u=r[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Pe(u,t,6,n)}}const dc=new WeakMap;function Ka(t,e,i=!1){const r=i?dc:e.emitsCache,n=r.get(t);if(n!==void 0)return n;const s=t.emits;let a={},o=!1;if(!yt(t)){const l=u=>{const c=Ka(u,e,!0);c&&(o=!0,jt(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(Mt(t)&&r.set(t,null),null):(mt(s)?s.forEach(l=>a[l]=null):jt(a,s),Mt(t)&&r.set(t,a),a)}function ir(t,e){return!t||!zn(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pt(t,e[0].toLowerCase()+e.slice(1))||Pt(t,ei(e))||Pt(t,e))}function Ls(t){const{type:e,vnode:i,proxy:r,withProxy:n,propsOptions:[s],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:_,data:p,setupState:d,ctx:f,inheritAttrs:v}=t,C=In(t);let w,g;try{if(i.shapeFlag&4){const m=n||r,S=m;w=Se(u.call(S,m,c,_,d,p,f)),g=o}else{const m=e;w=Se(m.length>1?m(_,{attrs:o,slots:a,emit:l}):m(_,null)),g=e.props?o:fc(o)}}catch(m){un.length=0,Zn(m,t,1),w=Vt(qe)}let h=w;if(g&&v!==!1){const m=Object.keys(g),{shapeFlag:S}=h;m.length&&S&7&&(s&&m.some(Vr)&&(g=gc(g,s)),h=fi(h,g,!1,!0))}return i.dirs&&(h=fi(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(i.dirs):i.dirs),i.transition&&ts(h,i.transition),w=h,In(C),w}const fc=t=>{let e;for(const i in t)(i==="class"||i==="style"||zn(i))&&((e||(e={}))[i]=t[i]);return e},gc=(t,e)=>{const i={};for(const r in t)(!Vr(r)||!(r.slice(9)in e))&&(i[r]=t[r]);return i};function pc(t,e,i){const{props:r,children:n,component:s}=t,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?Is(r,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let _=0;_<c.length;_++){const p=c[_];if(a[p]!==r[p]&&!ir(u,p))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Is(r,a,u):!0:!!a;return!1}function Is(t,e,i){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(e[s]!==t[s]&&!ir(i,s))return!0}return!1}function mc({vnode:t,parent:e},i){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=i,e=e.parent;else break}}const Ya={},Xa=()=>Object.create(Ya),$a=t=>Object.getPrototypeOf(t)===Ya;function _c(t,e,i,r=!1){const n={},s=Xa();t.propsDefaults=Object.create(null),Ja(t,e,n,s);for(const a in t.propsOptions[0])a in n||(n[a]=void 0);i?t.props=r?n:wh(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function yc(t,e,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=t,o=wt(n),[l]=t.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let _=0;_<c.length;_++){let p=c[_];if(ir(t.emitsOptions,p))continue;const d=e[p];if(l)if(Pt(s,p))d!==s[p]&&(s[p]=d,u=!0);else{const f=fe(p);n[f]=Dr(l,o,f,d,t,!1)}else d!==s[p]&&(s[p]=d,u=!0)}}}else{Ja(t,e,n,s)&&(u=!0);let c;for(const _ in o)(!e||!Pt(e,_)&&((c=ei(_))===_||!Pt(e,c)))&&(l?i&&(i[_]!==void 0||i[c]!==void 0)&&(n[_]=Dr(l,o,_,void 0,t,!0)):delete n[_]);if(s!==o)for(const _ in s)(!e||!Pt(e,_))&&(delete s[_],u=!0)}u&&Me(t.attrs,"set","")}function Ja(t,e,i,r){const[n,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(sn(l))continue;const u=e[l];let c;n&&Pt(n,c=fe(l))?!s||!s.includes(c)?i[c]=u:(o||(o={}))[c]=u:ir(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(s){const l=wt(i),u=o||At;for(let c=0;c<s.length;c++){const _=s[c];i[_]=Dr(n,l,_,u[_],t,!Pt(u,_))}}return a}function Dr(t,e,i,r,n,s){const a=t[i];if(a!=null){const o=Pt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&yt(l)){const{propsDefaults:u}=n;if(i in u)r=u[i];else{const c=vn(n);r=u[i]=l.call(null,e),c()}}else r=l;n.ce&&n.ce._setProp(i,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===ei(i))&&(r=!0))}return r}const vc=new WeakMap;function Qa(t,e,i=!1){const r=i?vc:e.propsCache,n=r.get(t);if(n)return n;const s=t.props,a={},o=[];let l=!1;if(!yt(t)){const c=_=>{l=!0;const[p,d]=Qa(_,e,!0);jt(a,p),d&&o.push(...d)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return Mt(t)&&r.set(t,ai),ai;if(mt(s))for(let c=0;c<s.length;c++){const _=fe(s[c]);Ds(_)&&(a[_]=At)}else if(s)for(const c in s){const _=fe(c);if(Ds(_)){const p=s[c],d=a[_]=mt(p)||yt(p)?{type:p}:jt({},p),f=d.type;let v=!1,C=!0;if(mt(f))for(let w=0;w<f.length;++w){const g=f[w],h=yt(g)&&g.name;if(h==="Boolean"){v=!0;break}else h==="String"&&(C=!1)}else v=yt(f)&&f.name==="Boolean";d[0]=v,d[1]=C,(v||Pt(d,"default"))&&o.push(_)}}const u=[a,o];return Mt(t)&&r.set(t,u),u}function Ds(t){return t[0]!=="$"&&!sn(t)}const rs=t=>t==="_"||t==="_ctx"||t==="$stable",ss=t=>mt(t)?t.map(Se):[Se(t)],bc=(t,e,i)=>{if(e._n)return e;const r=En((...n)=>ss(e(...n)),i);return r._c=!1,r},Za=(t,e,i)=>{const r=t._ctx;for(const n in t){if(rs(n))continue;const s=t[n];if(yt(s))e[n]=bc(n,s,r);else if(s!=null){const a=ss(s);e[n]=()=>a}}},tl=(t,e)=>{const i=ss(e);t.slots.default=()=>i},el=(t,e,i)=>{for(const r in e)(i||!rs(r))&&(t[r]=e[r])},Sc=(t,e,i)=>{const r=t.slots=Xa();if(t.vnode.shapeFlag&32){const n=e._;n?(el(r,e,i),i&&ga(r,"_",n,!0)):Za(e,r)}else e&&tl(t,e)},Cc=(t,e,i)=>{const{vnode:r,slots:n}=t;let s=!0,a=At;if(r.shapeFlag&32){const o=e._;o?i&&o===1?s=!1:el(n,e,i):(s=!e.$stable,Za(e,n)),a=e}else e&&(tl(t,e),a={default:1});if(s)for(const o in n)!rs(o)&&a[o]==null&&delete n[o]},le=Rc;function xc(t){return wc(t)}function wc(t,e){const i=$n();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:_,nextSibling:p,setScopeId:d=xe,insertStaticContent:f}=t,v=(A,L,W,j=null,J=null,Y=null,nt=void 0,st=null,rt=!!L.dynamicChildren)=>{if(A===L)return;A&&!pi(A,L)&&(j=O(A),K(A,J,Y,!0),A=null),L.patchFlag===-2&&(rt=!1,L.dynamicChildren=null);const{type:tt,ref:lt,shapeFlag:ot}=L;switch(tt){case nr:C(A,L,W,j);break;case qe:w(A,L,W,j);break;case mr:A==null&&g(L,W,j,nt);break;case he:U(A,L,W,j,J,Y,nt,st,rt);break;default:ot&1?S(A,L,W,j,J,Y,nt,st,rt):ot&6?H(A,L,W,j,J,Y,nt,st,rt):(ot&64||ot&128)&&tt.process(A,L,W,j,J,Y,nt,st,rt,Q)}lt!=null&&J?ln(lt,A&&A.ref,Y,L||A,!L):lt==null&&A&&A.ref!=null&&ln(A.ref,null,Y,A,!0)},C=(A,L,W,j)=>{if(A==null)r(L.el=o(L.children),W,j);else{const J=L.el=A.el;L.children!==A.children&&u(J,L.children)}},w=(A,L,W,j)=>{A==null?r(L.el=l(L.children||""),W,j):L.el=A.el},g=(A,L,W,j)=>{[A.el,A.anchor]=f(A.children,L,W,j,A.el,A.anchor)},h=({el:A,anchor:L},W,j)=>{let J;for(;A&&A!==L;)J=p(A),r(A,W,j),A=J;r(L,W,j)},m=({el:A,anchor:L})=>{let W;for(;A&&A!==L;)W=p(A),n(A),A=W;n(L)},S=(A,L,W,j,J,Y,nt,st,rt)=>{if(L.type==="svg"?nt="svg":L.type==="math"&&(nt="mathml"),A==null)R(L,W,j,J,Y,nt,st,rt);else{const tt=A.el&&A.el._isVueCE?A.el:null;try{tt&&tt._beginPatch(),x(A,L,J,Y,nt,st,rt)}finally{tt&&tt._endPatch()}}},R=(A,L,W,j,J,Y,nt,st)=>{let rt,tt;const{props:lt,shapeFlag:ot,transition:ht,dirs:dt}=A;if(rt=A.el=a(A.type,Y,lt&&lt.is,lt),ot&8?c(rt,A.children):ot&16&&y(A.children,rt,null,j,J,pr(A,Y),nt,st),dt&&je(A,null,j,"created"),D(rt,A,A.scopeId,nt,j),lt){for(const vt in lt)vt!=="value"&&!sn(vt)&&s(rt,vt,null,lt[vt],Y,j);"value"in lt&&s(rt,"value",null,lt.value,Y),(tt=lt.onVnodeBeforeMount)&&ve(tt,j,A)}dt&&je(A,null,j,"beforeMount");const ft=Pc(J,ht);ft&&ht.beforeEnter(rt),r(rt,L,W),((tt=lt&&lt.onVnodeMounted)||ft||dt)&&le(()=>{tt&&ve(tt,j,A),ft&&ht.enter(rt),dt&&je(A,null,j,"mounted")},J)},D=(A,L,W,j,J)=>{if(W&&d(A,W),j)for(let Y=0;Y<j.length;Y++)d(A,j[Y]);if(J){let Y=J.subTree;if(L===Y||sl(Y.type)&&(Y.ssContent===L||Y.ssFallback===L)){const nt=J.vnode;D(A,nt,nt.scopeId,nt.slotScopeIds,J.parent)}}},y=(A,L,W,j,J,Y,nt,st,rt=0)=>{for(let tt=rt;tt<A.length;tt++){const lt=A[tt]=st?Be(A[tt]):Se(A[tt]);v(null,lt,L,W,j,J,Y,nt,st)}},x=(A,L,W,j,J,Y,nt)=>{const st=L.el=A.el;let{patchFlag:rt,dynamicChildren:tt,dirs:lt}=L;rt|=A.patchFlag&16;const ot=A.props||At,ht=L.props||At;let dt;if(W&&Ye(W,!1),(dt=ht.onVnodeBeforeUpdate)&&ve(dt,W,L,A),lt&&je(L,A,W,"beforeUpdate"),W&&Ye(W,!0),(ot.innerHTML&&ht.innerHTML==null||ot.textContent&&ht.textContent==null)&&c(st,""),tt?T(A.dynamicChildren,tt,st,W,j,pr(L,J),Y):nt||P(A,L,st,null,W,j,pr(L,J),Y,!1),rt>0){if(rt&16)k(st,ot,ht,W,J);else if(rt&2&&ot.class!==ht.class&&s(st,"class",null,ht.class,J),rt&4&&s(st,"style",ot.style,ht.style,J),rt&8){const ft=L.dynamicProps;for(let vt=0;vt<ft.length;vt++){const _t=ft[vt],Rt=ot[_t],xt=ht[_t];(xt!==Rt||_t==="value")&&s(st,_t,Rt,xt,J,W)}}rt&1&&A.children!==L.children&&c(st,L.children)}else!nt&&tt==null&&k(st,ot,ht,W,J);((dt=ht.onVnodeUpdated)||lt)&&le(()=>{dt&&ve(dt,W,L,A),lt&&je(L,A,W,"updated")},j)},T=(A,L,W,j,J,Y,nt)=>{for(let st=0;st<L.length;st++){const rt=A[st],tt=L[st],lt=rt.el&&(rt.type===he||!pi(rt,tt)||rt.shapeFlag&198)?_(rt.el):W;v(rt,tt,lt,null,j,J,Y,nt,!0)}},k=(A,L,W,j,J)=>{if(L!==W){if(L!==At)for(const Y in L)!sn(Y)&&!(Y in W)&&s(A,Y,L[Y],null,J,j);for(const Y in W){if(sn(Y))continue;const nt=W[Y],st=L[Y];nt!==st&&Y!=="value"&&s(A,Y,st,nt,J,j)}"value"in W&&s(A,"value",L.value,W.value,J)}},U=(A,L,W,j,J,Y,nt,st,rt)=>{const tt=L.el=A?A.el:o(""),lt=L.anchor=A?A.anchor:o("");let{patchFlag:ot,dynamicChildren:ht,slotScopeIds:dt}=L;dt&&(st=st?st.concat(dt):dt),A==null?(r(tt,W,j),r(lt,W,j),y(L.children||[],W,lt,J,Y,nt,st,rt)):ot>0&&ot&64&&ht&&A.dynamicChildren&&A.dynamicChildren.length===ht.length?(T(A.dynamicChildren,ht,W,J,Y,nt,st),(L.key!=null||J&&L===J.subTree)&&il(A,L,!0)):P(A,L,W,lt,J,Y,nt,st,rt)},H=(A,L,W,j,J,Y,nt,st,rt)=>{L.slotScopeIds=st,A==null?L.shapeFlag&512?J.ctx.activate(L,W,j,nt,rt):V(L,W,j,J,Y,nt,rt):G(A,L,rt)},V=(A,L,W,j,J,Y,nt)=>{const st=A.component=kc(A,j,J);if(Va(A)&&(st.ctx.renderer=Q),Lc(st,!1,nt),st.asyncDep){if(J&&J.registerDep(st,$,nt),!A.el){const rt=st.subTree=Vt(qe);w(null,rt,L,W),A.placeholder=rt.el}}else $(st,A,L,W,J,Y,nt)},G=(A,L,W)=>{const j=L.component=A.component;if(pc(A,L,W))if(j.asyncDep&&!j.asyncResolved){b(j,L,W);return}else j.next=L,j.update();else L.el=A.el,j.vnode=L},$=(A,L,W,j,J,Y,nt)=>{const st=()=>{if(A.isMounted){let{next:ot,bu:ht,u:dt,parent:ft,vnode:vt}=A;{const Ht=nl(A);if(Ht){ot&&(ot.el=vt.el,b(A,ot,nt)),Ht.asyncDep.then(()=>{A.isUnmounted||st()});return}}let _t=ot,Rt;Ye(A,!1),ot?(ot.el=vt.el,b(A,ot,nt)):ot=vt,ht&&Rn(ht),(Rt=ot.props&&ot.props.onVnodeBeforeUpdate)&&ve(Rt,ft,ot,vt),Ye(A,!0);const xt=Ls(A),Et=A.subTree;A.subTree=xt,v(Et,xt,_(Et.el),O(Et),A,J,Y),ot.el=xt.el,_t===null&&mc(A,xt.el),dt&&le(dt,J),(Rt=ot.props&&ot.props.onVnodeUpdated)&&le(()=>ve(Rt,ft,ot,vt),J)}else{let ot;const{el:ht,props:dt}=L,{bm:ft,m:vt,parent:_t,root:Rt,type:xt}=A,Et=hn(L);Ye(A,!1),ft&&Rn(ft),!Et&&(ot=dt&&dt.onVnodeBeforeMount)&&ve(ot,_t,L),Ye(A,!0);{Rt.ce&&Rt.ce._def.shadowRoot!==!1&&Rt.ce._injectChildStyle(xt);const Ht=A.subTree=Ls(A);v(null,Ht,W,j,A,J,Y),L.el=Ht.el}if(vt&&le(vt,J),!Et&&(ot=dt&&dt.onVnodeMounted)){const Ht=L;le(()=>ve(ot,_t,Ht),J)}(L.shapeFlag&256||_t&&hn(_t.vnode)&&_t.vnode.shapeFlag&256)&&A.a&&le(A.a,J),A.isMounted=!0,L=W=j=null}};A.scope.on();const rt=A.effect=new ya(st);A.scope.off();const tt=A.update=rt.run.bind(rt),lt=A.job=rt.runIfDirty.bind(rt);lt.i=A,lt.id=A.uid,rt.scheduler=()=>Zr(lt),Ye(A,!0),tt()},b=(A,L,W)=>{L.component=A;const j=A.vnode.props;A.vnode=L,A.next=null,yc(A,L.props,j,W),Cc(A,L.children,W),Oe(),Es(A),Ne()},P=(A,L,W,j,J,Y,nt,st,rt=!1)=>{const tt=A&&A.children,lt=A?A.shapeFlag:0,ot=L.children,{patchFlag:ht,shapeFlag:dt}=L;if(ht>0){if(ht&128){F(tt,ot,W,j,J,Y,nt,st,rt);return}else if(ht&256){N(tt,ot,W,j,J,Y,nt,st,rt);return}}dt&8?(lt&16&&z(tt,J,Y),ot!==tt&&c(W,ot)):lt&16?dt&16?F(tt,ot,W,j,J,Y,nt,st,rt):z(tt,J,Y,!0):(lt&8&&c(W,""),dt&16&&y(ot,W,j,J,Y,nt,st,rt))},N=(A,L,W,j,J,Y,nt,st,rt)=>{A=A||ai,L=L||ai;const tt=A.length,lt=L.length,ot=Math.min(tt,lt);let ht;for(ht=0;ht<ot;ht++){const dt=L[ht]=rt?Be(L[ht]):Se(L[ht]);v(A[ht],dt,W,null,J,Y,nt,st,rt)}tt>lt?z(A,J,Y,!0,!1,ot):y(L,W,j,J,Y,nt,st,rt,ot)},F=(A,L,W,j,J,Y,nt,st,rt)=>{let tt=0;const lt=L.length;let ot=A.length-1,ht=lt-1;for(;tt<=ot&&tt<=ht;){const dt=A[tt],ft=L[tt]=rt?Be(L[tt]):Se(L[tt]);if(pi(dt,ft))v(dt,ft,W,null,J,Y,nt,st,rt);else break;tt++}for(;tt<=ot&&tt<=ht;){const dt=A[ot],ft=L[ht]=rt?Be(L[ht]):Se(L[ht]);if(pi(dt,ft))v(dt,ft,W,null,J,Y,nt,st,rt);else break;ot--,ht--}if(tt>ot){if(tt<=ht){const dt=ht+1,ft=dt<lt?L[dt].el:j;for(;tt<=ht;)v(null,L[tt]=rt?Be(L[tt]):Se(L[tt]),W,ft,J,Y,nt,st,rt),tt++}}else if(tt>ht)for(;tt<=ot;)K(A[tt],J,Y,!0),tt++;else{const dt=tt,ft=tt,vt=new Map;for(tt=ft;tt<=ht;tt++){const qt=L[tt]=rt?Be(L[tt]):Se(L[tt]);qt.key!=null&&vt.set(qt.key,tt)}let _t,Rt=0;const xt=ht-ft+1;let Et=!1,Ht=0;const kt=new Array(xt);for(tt=0;tt<xt;tt++)kt[tt]=0;for(tt=dt;tt<=ot;tt++){const qt=A[tt];if(Rt>=xt){K(qt,J,Y,!0);continue}let Zt;if(qt.key!=null)Zt=vt.get(qt.key);else for(_t=ft;_t<=ht;_t++)if(kt[_t-ft]===0&&pi(qt,L[_t])){Zt=_t;break}Zt===void 0?K(qt,J,Y,!0):(kt[Zt-ft]=tt+1,Zt>=Ht?Ht=Zt:Et=!0,v(qt,L[Zt],W,null,J,Y,nt,st,rt),Rt++)}const me=Et?Tc(kt):ai;for(_t=me.length-1,tt=xt-1;tt>=0;tt--){const qt=ft+tt,Zt=L[qt],Ie=L[qt+1],bn=qt+1<lt?Ie.el||rl(Ie):j;kt[tt]===0?v(null,Zt,W,bn,J,Y,nt,st,rt):Et&&(_t<0||tt!==me[_t]?I(Zt,W,bn,2):_t--)}}},I=(A,L,W,j,J=null)=>{const{el:Y,type:nt,transition:st,children:rt,shapeFlag:tt}=A;if(tt&6){I(A.component.subTree,L,W,j);return}if(tt&128){A.suspense.move(L,W,j);return}if(tt&64){nt.move(A,L,W,Q);return}if(nt===he){r(Y,L,W);for(let ot=0;ot<rt.length;ot++)I(rt[ot],L,W,j);r(A.anchor,L,W);return}if(nt===mr){h(A,L,W);return}if(j!==2&&tt&1&&st)if(j===0)st.beforeEnter(Y),r(Y,L,W),le(()=>st.enter(Y),J);else{const{leave:ot,delayLeave:ht,afterLeave:dt}=st,ft=()=>{A.ctx.isUnmounted?n(Y):r(Y,L,W)},vt=()=>{Y._isLeaving&&Y[Wh](!0),ot(Y,()=>{ft(),dt&&dt()})};ht?ht(Y,ft,vt):vt()}else r(Y,L,W)},K=(A,L,W,j=!1,J=!1)=>{const{type:Y,props:nt,ref:st,children:rt,dynamicChildren:tt,shapeFlag:lt,patchFlag:ot,dirs:ht,cacheIndex:dt}=A;if(ot===-2&&(J=!1),st!=null&&(Oe(),ln(st,null,W,A,!0),Ne()),dt!=null&&(L.renderCache[dt]=void 0),lt&256){L.ctx.deactivate(A);return}const ft=lt&1&&ht,vt=!hn(A);let _t;if(vt&&(_t=nt&&nt.onVnodeBeforeUnmount)&&ve(_t,L,A),lt&6)at(A.component,W,j);else{if(lt&128){A.suspense.unmount(W,j);return}ft&&je(A,null,L,"beforeUnmount"),lt&64?A.type.remove(A,L,W,Q,j):tt&&!tt.hasOnce&&(Y!==he||ot>0&&ot&64)?z(tt,L,W,!1,!0):(Y===he&&ot&384||!J&&lt&16)&&z(rt,L,W),j&&B(A)}(vt&&(_t=nt&&nt.onVnodeUnmounted)||ft)&&le(()=>{_t&&ve(_t,L,A),ft&&je(A,null,L,"unmounted")},W)},B=A=>{const{type:L,el:W,anchor:j,transition:J}=A;if(L===he){Z(W,j);return}if(L===mr){m(A);return}const Y=()=>{n(W),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(A.shapeFlag&1&&J&&!J.persisted){const{leave:nt,delayLeave:st}=J,rt=()=>nt(W,Y);st?st(A.el,Y,rt):rt()}else Y()},Z=(A,L)=>{let W;for(;A!==L;)W=p(A),n(A),A=W;n(L)},at=(A,L,W)=>{const{bum:j,scope:J,job:Y,subTree:nt,um:st,m:rt,a:tt}=A;Gs(rt),Gs(tt),j&&Rn(j),J.stop(),Y&&(Y.flags|=8,K(nt,A,L,W)),st&&le(st,L),le(()=>{A.isUnmounted=!0},L)},z=(A,L,W,j=!1,J=!1,Y=0)=>{for(let nt=Y;nt<A.length;nt++)K(A[nt],L,W,j,J)},O=A=>{if(A.shapeFlag&6)return O(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const L=p(A.anchor||A.el),W=L&&L[Hh];return W?p(W):L};let q=!1;const it=(A,L,W)=>{let j;A==null?L._vnode&&(K(L._vnode,null,null,!0),j=L._vnode.component):v(L._vnode||null,A,L,null,null,null,W),L._vnode=A,q||(q=!0,Es(j),La(),q=!1)},Q={p:v,um:K,m:I,r:B,mt:V,mc:y,pc:P,pbc:T,n:O,o:t};return{render:it,hydrate:void 0,createApp:hc(it)}}function pr({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Ye({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Pc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function il(t,e,i=!1){const r=t.children,n=e.children;if(mt(r)&&mt(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=Be(n[s]),o.el=a.el),!i&&o.patchFlag!==-2&&il(a,o)),o.type===nr&&(o.patchFlag!==-1?o.el=a.el:o.__elIndex=s+(t.type===he?1:0)),o.type===qe&&!o.el&&(o.el=a.el)}}function Tc(t){const e=t.slice(),i=[0];let r,n,s,a,o;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(n=i[i.length-1],t[n]<u){e[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,t[i[o]]<u?s=o+1:a=o;u<t[i[s]]&&(s>0&&(e[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=e[a];return i}function nl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:nl(e)}function Gs(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function rl(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?rl(e.subTree):null}const sl=t=>t.__isSuspense;function Rc(t,e){e&&e.pendingBranch?mt(t)?e.effects.push(...t):e.effects.push(t):Ih(t)}const he=Symbol.for("v-fgt"),nr=Symbol.for("v-txt"),qe=Symbol.for("v-cmt"),mr=Symbol.for("v-stc"),un=[];let ue=null;function ne(t=!1){un.push(ue=t?null:[])}function Ec(){un.pop(),ue=un[un.length-1]||null}let pn=1;function Un(t,e=!1){pn+=t,t<0&&ue&&e&&(ue.hasOnce=!0)}function ol(t){return t.dynamicChildren=pn>0?ue||ai:null,Ec(),pn>0&&ue&&ue.push(t),t}function ye(t,e,i,r,n,s){return ol(X(t,e,i,r,n,s,!0))}function Mn(t,e,i,r,n){return ol(Vt(t,e,i,r,n,!0))}function Bn(t){return t?t.__v_isVNode===!0:!1}function pi(t,e){return t.type===e.type&&t.key===e.key}const al=({key:t})=>t??null,Fn=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Bt(t)||Xt(t)||yt(t)?{i:ce,r:t,k:e,f:!!i}:t:null);function X(t,e=null,i=null,r=0,n=null,s=t===he?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&al(e),ref:e&&Fn(e),scopeId:Da,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ce};return o?(os(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Bt(i)?8:16),pn>0&&!a&&ue&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ue.push(l),l}const Vt=Ac;function Ac(t,e=null,i=null,r=0,n=null,s=!1){if((!t||t===tc)&&(t=qe),Bn(t)){const o=fi(t,e,!0);return i&&os(o,i),pn>0&&!s&&ue&&(o.shapeFlag&6?ue[ue.indexOf(t)]=o:ue.push(o)),o.patchFlag=-2,o}if(Bc(t)&&(t=t.__vccOpts),e){e=Mc(e);let{class:o,style:l}=e;o&&!Bt(o)&&(e.class=Qe(o)),Mt(l)&&(Qr(l)&&!mt(l)&&(l=jt({},l)),e.style=zr(l))}const a=Bt(t)?1:sl(t)?128:Vh(t)?64:Mt(t)?4:yt(t)?2:0;return X(t,e,i,r,n,a,s,!0)}function Mc(t){return t?Qr(t)||$a(t)?jt({},t):t:null}function fi(t,e,i=!1,r=!1){const{props:n,ref:s,patchFlag:a,children:o,transition:l}=t,u=e?Fc(n||{},e):n,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&al(u),ref:e&&e.ref?i&&s?mt(s)?s.concat(Fn(e)):[s,Fn(e)]:Fn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==he?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fi(t.ssContent),ssFallback:t.ssFallback&&fi(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&ts(c,l.clone(c)),c}function Lt(t=" ",e=0){return Vt(nr,null,t,e)}function Us(t="",e=!1){return e?(ne(),Mn(qe,null,t)):Vt(qe,null,t)}function Se(t){return t==null||typeof t=="boolean"?Vt(qe):mt(t)?Vt(he,null,t.slice()):Bn(t)?Be(t):Vt(nr,null,String(t))}function Be(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fi(t)}function os(t,e){let i=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(mt(e))i=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),os(t,n()),n._c&&(n._d=!0));return}else{i=32;const n=e._;!n&&!$a(e)?e._ctx=ce:n===3&&ce&&(ce.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else yt(e)?(e={default:e,_ctx:ce},i=32):(e=String(e),r&64?(i=16,e=[Lt(e)]):i=8);t.children=e,t.shapeFlag|=i}function Fc(...t){const e={};for(let i=0;i<t.length;i++){const r=t[i];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Qe([e.class,r.class]));else if(n==="style")e.style=zr([e.style,r.style]);else if(zn(n)){const s=e[n],a=r[n];a&&s!==a&&!(mt(s)&&s.includes(a))&&(e[n]=s?[].concat(s,a):a)}else n!==""&&(e[n]=r[n])}return e}function ve(t,e,i,r=null){Pe(t,e,7,[i,r])}const Oc=ja();let Nc=0;function kc(t,e,i){const r=t.type,n=(e?e.appContext:t.appContext)||Oc,s={uid:Nc++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new rh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qa(r,n),emitsOptions:Ka(r,n),emit:null,emitted:null,propsDefaults:At,inheritAttrs:r.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=uc.bind(null,s),t.ce&&t.ce(s),s}let Yt=null;const as=()=>Yt||ce;let Hn,Gr;{const t=$n(),e=(i,r)=>{let n;return(n=t[i])||(n=t[i]=[]),n.push(r),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};Hn=e("__VUE_INSTANCE_SETTERS__",i=>Yt=i),Gr=e("__VUE_SSR_SETTERS__",i=>mn=i)}const vn=t=>{const e=Yt;return Hn(t),t.scope.on(),()=>{t.scope.off(),Hn(e)}},Bs=()=>{Yt&&Yt.scope.off(),Hn(null)};function ll(t){return t.vnode.shapeFlag&4}let mn=!1;function Lc(t,e=!1,i=!1){e&&Gr(e);const{props:r,children:n}=t.vnode,s=ll(t);_c(t,r,s,e),Sc(t,n,i||e);const a=s?Ic(t,e):void 0;return e&&Gr(!1),a}function Ic(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ic);const{setup:r}=i;if(r){Oe();const n=t.setupContext=r.length>1?Gc(t):null,s=vn(t),a=yn(r,t,0,[t.props,n]),o=ua(a);if(Ne(),s(),(o||t.sp)&&!hn(t)&&Ha(t),o){if(a.then(Bs,Bs),e)return a.then(l=>{Hs(t,l)}).catch(l=>{Zn(l,t,0)});t.asyncDep=a}else Hs(t,a)}else hl(t)}function Hs(t,e,i){yt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Mt(e)&&(t.setupState=Oa(e)),hl(t)}function hl(t,e,i){const r=t.type;t.render||(t.render=r.render||xe);{const n=vn(t);Oe();try{nc(t)}finally{Ne(),n()}}}const Dc={get(t,e){return Kt(t,"get",""),t[e]}};function Gc(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,Dc),slots:t.slots,emit:t.emit,expose:e}}function rr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Oa(Ph(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in cn)return cn[i](t)},has(e,i){return i in e||i in cn}})):t.proxy}function Uc(t,e=!0){return yt(t)?t.displayName||t.name:t.name||e&&t.__name}function Bc(t){return yt(t)&&"__vccOpts"in t}const re=(t,e)=>Fh(t,e,mn);function cl(t,e,i){try{Un(-1);const r=arguments.length;return r===2?Mt(e)&&!mt(e)?Bn(e)?Vt(t,null,[e]):Vt(t,e):Vt(t,null,e):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Bn(i)&&(i=[i]),Vt(t,e,i))}finally{Un(1)}}const Hc="3.5.27";let Ur;const Vs=typeof window<"u"&&window.trustedTypes;if(Vs)try{Ur=Vs.createPolicy("vue",{createHTML:t=>t})}catch{}const ul=Ur?t=>Ur.createHTML(t):t=>t,Vc="http://www.w3.org/2000/svg",Wc="http://www.w3.org/1998/Math/MathML",Ae=typeof document<"u"?document:null,Ws=Ae&&Ae.createElement("template"),qc={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,r)=>{const n=e==="svg"?Ae.createElementNS(Vc,t):e==="mathml"?Ae.createElementNS(Wc,t):i?Ae.createElement(t,{is:i}):Ae.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>Ae.createTextNode(t),createComment:t=>Ae.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ae.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,r,n,s){const a=i?i.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{Ws.innerHTML=ul(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const o=Ws.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},zc=Symbol("_vtc");function jc(t,e,i){const r=t[zc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const qs=Symbol("_vod"),Kc=Symbol("_vsh"),Yc=Symbol(""),Xc=/(?:^|;)\s*display\s*:/;function $c(t,e,i){const r=t.style,n=Bt(i);let s=!1;if(i&&!n){if(e)if(Bt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&On(r,o,"")}else for(const a in e)i[a]==null&&On(r,a,"");for(const a in i)a==="display"&&(s=!0),On(r,a,i[a])}else if(n){if(e!==i){const a=r[Yc];a&&(i+=";"+a),r.cssText=i,s=Xc.test(i)}}else e&&t.removeAttribute("style");qs in t&&(t[qs]=s?r.display:"",t[Kc]&&(r.display="none"))}const zs=/\s*!important$/;function On(t,e,i){if(mt(i))i.forEach(r=>On(t,e,r));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const r=Jc(t,e);zs.test(i)?t.setProperty(ei(r),i.replace(zs,""),"important"):t[r]=i}}const js=["Webkit","Moz","ms"],_r={};function Jc(t,e){const i=_r[e];if(i)return i;let r=fe(e);if(r!=="filter"&&r in t)return _r[e]=r;r=Yn(r);for(let n=0;n<js.length;n++){const s=js[n]+r;if(s in t)return _r[e]=s}return e}const Ks="http://www.w3.org/1999/xlink";function Ys(t,e,i,r,n,s=eh(e)){r&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(Ks,e.slice(6,e.length)):t.setAttributeNS(Ks,e,i):i==null||s&&!pa(i)?t.removeAttribute(e):t.setAttribute(e,s?"":we(i)?String(i):i)}function Xs(t,e,i,r,n){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?ul(i):i);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let a=!1;if(i===""||i==null){const o=typeof t[e];o==="boolean"?i=pa(i):i==null&&o==="string"?(i="",a=!0):o==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(n||e)}function Je(t,e,i,r){t.addEventListener(e,i,r)}function Qc(t,e,i,r){t.removeEventListener(e,i,r)}const $s=Symbol("_vei");function Zc(t,e,i,r,n=null){const s=t[$s]||(t[$s]={}),a=s[e];if(r&&a)a.value=r;else{const[o,l]=tu(e);if(r){const u=s[e]=nu(r,n);Je(t,o,u,l)}else a&&(Qc(t,o,a,l),s[e]=void 0)}}const Js=/(?:Once|Passive|Capture)$/;function tu(t){let e;if(Js.test(t)){e={};let r;for(;r=t.match(Js);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ei(t.slice(2)),e]}let yr=0;const eu=Promise.resolve(),iu=()=>yr||(eu.then(()=>yr=0),yr=Date.now());function nu(t,e){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Pe(ru(r,i.value),e,5,[r])};return i.value=t,i.attached=iu(),i}function ru(t,e){if(mt(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const Qs=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,su=(t,e,i,r,n,s)=>{const a=n==="svg";e==="class"?jc(t,r,a):e==="style"?$c(t,i,r):zn(e)?Vr(e)||Zc(t,e,i,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ou(t,e,r,a))?(Xs(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ys(t,e,r,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Bt(r))?Xs(t,fe(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Ys(t,e,r,a))};function ou(t,e,i,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Qs(e)&&yt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Qs(e)&&Bt(i)?!1:e in t}const Vn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return mt(e)?i=>Rn(e,i):e};function au(t){t.target.composing=!0}function Zs(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ui=Symbol("_assign");function to(t,e,i){return e&&(t=t.trim()),i&&(t=Xn(t)),t}const ae={created(t,{modifiers:{lazy:e,trim:i,number:r}},n){t[ui]=Vn(n);const s=r||n.props&&n.props.type==="number";Je(t,e?"change":"input",a=>{a.target.composing||t[ui](to(t.value,i,s))}),(i||s)&&Je(t,"change",()=>{t.value=to(t.value,i,s)}),e||(Je(t,"compositionstart",au),Je(t,"compositionend",Zs),Je(t,"change",Zs))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:r,trim:n,number:s}},a){if(t[ui]=Vn(a),t.composing)return;const o=(s||t.type==="number")&&!/^0\d/.test(t.value)?Xn(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===i||n&&t.value.trim()===l)||(t.value=l))}},lu={deep:!0,created(t,{value:e,modifiers:{number:i}},r){const n=jn(e);Je(t,"change",()=>{const s=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>i?Xn(Wn(a)):Wn(a));t[ui](t.multiple?n?new Set(s):s:s[0]),t._assigning=!0,zt(()=>{t._assigning=!1})}),t[ui]=Vn(r)},mounted(t,{value:e}){eo(t,e)},beforeUpdate(t,e,i){t[ui]=Vn(i)},updated(t,{value:e}){t._assigning||eo(t,e)}};function eo(t,e){const i=t.multiple,r=mt(e);if(!(i&&!r&&!jn(e))){for(let n=0,s=t.options.length;n<s;n++){const a=t.options[n],o=Wn(a);if(i)if(r){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(o)):a.selected=nh(e,o)>-1}else a.selected=e.has(o);else if(Jn(Wn(a),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Wn(t){return"_value"in t?t._value:t.value}const hu=["ctrl","shift","alt","meta"],cu={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>hu.some(i=>t[`${i}Key`]&&!e.includes(i))},uu=(t,e)=>{const i=t._withMods||(t._withMods={}),r=e.join(".");return i[r]||(i[r]=((n,...s)=>{for(let a=0;a<e.length;a++){const o=cu[e[a]];if(o&&o(n,e))return}return t(n,...s)}))},du=jt({patchProp:su},qc);let io;function fu(){return io||(io=xc(du))}const gu=((...t)=>{const e=fu().createApp(...t),{mount:i}=e;return e.mount=r=>{const n=mu(r);if(!n)return;const s=e._component;!yt(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=i(n,!1,pu(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e});function pu(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function mu(t){return Bt(t)?document.querySelector(t):t}var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nn={exports:{}},mi={},vr={},br={},ro;function bt(){return ro||(ro=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof no<"u"?no:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:i(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return t.Konva.angleDeg?n*e:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var n;return(n=t.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(n){t.glob.Konva=n}};const r=n=>{t.Konva[n.prototype.getClassName()]=n};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(br)),br}var Sr={},so;function It(){return so||(so=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=bt();class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const S=this.m;return{x:S[0]*m.x+S[2]*m.y+S[4],y:S[1]*m.x+S[3]*m.y+S[5]}}translate(m,S){return this.m[4]+=this.m[0]*m+this.m[2]*S,this.m[5]+=this.m[1]*m+this.m[3]*S,this}scale(m,S){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=S,this.m[3]*=S,this}rotate(m){const S=Math.cos(m),R=Math.sin(m),D=this.m[0]*S+this.m[2]*R,y=this.m[1]*S+this.m[3]*R,x=this.m[0]*-R+this.m[2]*S,T=this.m[1]*-R+this.m[3]*S;return this.m[0]=D,this.m[1]=y,this.m[2]=x,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,S){const R=this.m[0]+this.m[2]*S,D=this.m[1]+this.m[3]*S,y=this.m[2]+this.m[0]*m,x=this.m[3]+this.m[1]*m;return this.m[0]=R,this.m[1]=D,this.m[2]=y,this.m[3]=x,this}multiply(m){const S=this.m[0]*m.m[0]+this.m[2]*m.m[1],R=this.m[1]*m.m[0]+this.m[3]*m.m[1],D=this.m[0]*m.m[2]+this.m[2]*m.m[3],y=this.m[1]*m.m[2]+this.m[3]*m.m[3],x=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],T=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=S,this.m[1]=R,this.m[2]=D,this.m[3]=y,this.m[4]=x,this.m[5]=T,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*m,R=-this.m[1]*m,D=-this.m[2]*m,y=this.m[0]*m,x=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=R,this.m[2]=D,this.m[3]=y,this.m[4]=x,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const m=this.m[0],S=this.m[1],R=this.m[2],D=this.m[3],y=this.m[4],x=this.m[5],T=m*D-S*R,k={x:y,y:x,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||S!=0){const U=Math.sqrt(m*m+S*S);k.rotation=S>0?Math.acos(m/U):-Math.acos(m/U),k.scaleX=U,k.scaleY=T/U,k.skewX=(m*R+S*D)/T,k.skewY=0}else if(R!=0||D!=0){const U=Math.sqrt(R*R+D*D);k.rotation=Math.PI/2-(D>0?Math.acos(-R/U):-Math.acos(R/U)),k.scaleX=T/U,k.scaleY=U,k.skewX=0,k.skewY=(m*R+S*D)/T}return k.rotation=t.Util._getRotation(k.rotation),k}}t.Transform=i;const r="[object Array]",n="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",c="",_="0",p="Konva warning: ",d="Konva error: ",f="rgb(",v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},C=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let w=[];const g=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(h){setTimeout(h,60)};t.Util={_isElement(h){return!!(h&&h.nodeType==1)},_isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject(h){return!!h&&h.constructor===Object},_isArray(h){return Object.prototype.toString.call(h)===r},_isNumber(h){return Object.prototype.toString.call(h)===n&&!isNaN(h)&&isFinite(h)},_isString(h){return Object.prototype.toString.call(h)===s},_isBoolean(h){return Object.prototype.toString.call(h)===a},isObject(h){return h instanceof Object},isValidSelector(h){if(typeof h!="string")return!1;const m=h[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(h){return h===0||h>0?1:-1},requestAnimFrame(h){w.push(h),w.length===1&&g(function(){const m=w;w=[],m.forEach(function(S){S()})})},createCanvasElement(){const h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement(){return document.createElement("img")},_isInDocument(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_urlToImage(h,m){const S=t.Util.createImageElement();S.onload=function(){m(S)},S.src=h},_rgbToHex(h,m,S){return((1<<24)+(h<<16)+(m<<8)+S).toString(16).slice(1)},_hexToRgb(h){h=h.replace(u,c);const m=parseInt(h,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let h=(Math.random()*16777215<<0).toString(16);for(;h.length<6;)h=_+h;return u+h},getRGB(h){let m;return h in v?(m=v[h],{r:m[0],g:m[1],b:m[2]}):h[0]===u?this._hexToRgb(h.substring(1)):h.substr(0,4)===f?(m=C.exec(h.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(h){return h=h||"black",t.Util._namedColorToRBA(h)||t.Util._hex3ColorToRGBA(h)||t.Util._hex4ColorToRGBA(h)||t.Util._hex6ColorToRGBA(h)||t.Util._hex8ColorToRGBA(h)||t.Util._rgbColorToRGBA(h)||t.Util._rgbaColorToRGBA(h)||t.Util._hslColorToRGBA(h)},_namedColorToRBA(h){const m=v[h.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];const m=h.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];const m=h.split(/ *, */).map((S,R)=>S.slice(-1)==="%"?R===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(h){if(h[0]==="#"&&h.length===9)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:parseInt(h.slice(7,9),16)/255}},_hex6ColorToRGBA(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex4ColorToRGBA(h){if(h[0]==="#"&&h.length===5)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:parseInt(h[4]+h[4],16)/255}},_hex3ColorToRGBA(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){const[m,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h),R=Number(S[0])/360,D=Number(S[1])/100,y=Number(S[2])/100;let x,T,k;if(D===0)return k=y*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};y<.5?x=y*(1+D):x=y+D-y*D;const U=2*y-x,H=[0,0,0];for(let V=0;V<3;V++)T=R+1/3*-(V-1),T<0&&T++,T>1&&T--,6*T<1?k=U+(x-U)*6*T:2*T<1?k=x:3*T<2?k=U+(x-U)*(2/3-T)*6:k=U,H[V]=k*255;return{r:Math.round(H[0]),g:Math.round(H[1]),b:Math.round(H[2]),a:1}}},haveIntersection(h,m){return!(m.x>h.x+h.width||m.x+m.width<h.x||m.y>h.y+h.height||m.y+m.height<h.y)},cloneObject(h){const m={};for(const S in h)this._isPlainObject(h[S])?m[S]=this.cloneObject(h[S]):this._isArray(h[S])?m[S]=this.cloneArray(h[S]):m[S]=h[S];return m},cloneArray(h){return h.slice(0)},degToRad(h){return h*o},radToDeg(h){return h*l},_degToRad(h){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(h)},_radToDeg(h){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(h)},_getRotation(h){return e.Konva.angleDeg?t.Util.radToDeg(h):h},_capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw(h){throw new Error(d+h)},error(h){console.error(d+h)},warn(h){e.Konva.showWarnings&&console.warn(p+h)},each(h,m){for(const S in h)m(S,h[S])},_inRange(h,m,S){return m<=h&&h<S},_getProjectionToSegment(h,m,S,R,D,y){let x,T,k;const U=(h-S)*(h-S)+(m-R)*(m-R);if(U==0)x=h,T=m,k=(D-S)*(D-S)+(y-R)*(y-R);else{const H=((D-h)*(S-h)+(y-m)*(R-m))/U;H<0?(x=h,T=m,k=(h-D)*(h-D)+(m-y)*(m-y)):H>1?(x=S,T=R,k=(S-D)*(S-D)+(R-y)*(R-y)):(x=h+H*(S-h),T=m+H*(R-m),k=(x-D)*(x-D)+(T-y)*(T-y))}return[x,T,k]},_getProjectionToLine(h,m,S){const R=t.Util.cloneObject(h);let D=Number.MAX_VALUE;return m.forEach(function(y,x){if(!S&&x===m.length-1)return;const T=m[(x+1)%m.length],k=t.Util._getProjectionToSegment(y.x,y.y,T.x,T.y,h.x,h.y),U=k[0],H=k[1],V=k[2];V<D&&(R.x=U,R.y=H,D=V)}),R},_prepareArrayForTween(h,m,S){const R=[],D=[];if(h.length>m.length){const x=m;m=h,h=x}for(let x=0;x<h.length;x+=2)R.push({x:h[x],y:h[x+1]});for(let x=0;x<m.length;x+=2)D.push({x:m[x],y:m[x+1]});const y=[];return D.forEach(function(x){const T=t.Util._getProjectionToLine(x,R,S);y.push(T.x),y.push(T.y)}),y},_prepareToStringify(h){let m;h.visitedByCircularReferenceRemoval=!0;for(const S in h)if(h.hasOwnProperty(S)&&h[S]&&typeof h[S]=="object"){if(m=Object.getOwnPropertyDescriptor(h,S),h[S].visitedByCircularReferenceRemoval||t.Util._isElement(h[S]))if(m.configurable)delete h[S];else return null;else if(t.Util._prepareToStringify(h[S])===null)if(m.configurable)delete h[S];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign(h,m){for(const S in m)h[S]=m[S];return h},_getFirstPointerId(h){return h.touches?h.changedTouches[0].identifier:h.pointerId||999},releaseCanvas(...h){e.Konva.releaseCanvasOnDestroy&&h.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(h,m,S,R){let D=0,y=0,x=0,T=0;typeof R=="number"?D=y=x=T=Math.min(R,m/2,S/2):(D=Math.min(R[0]||0,m/2,S/2),y=Math.min(R[1]||0,m/2,S/2),T=Math.min(R[2]||0,m/2,S/2),x=Math.min(R[3]||0,m/2,S/2)),h.moveTo(D,0),h.lineTo(m-y,0),h.arc(m-y,y,y,Math.PI*3/2,0,!1),h.lineTo(m,S-T),h.arc(m-T,S-T,T,0,Math.PI/2,!1),h.lineTo(x,S),h.arc(x,S-x,x,Math.PI/2,Math.PI,!1),h.lineTo(0,D),h.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}})(Sr)),Sr}var _i={},Re={},Ee={},oo;function dl(){if(oo)return Ee;oo=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.HitContext=Ee.SceneContext=Ee.Context=void 0;const t=It(),e=bt();function i(w){const g=[],h=w.length,m=t.Util;for(let S=0;S<h;S++){let R=w[S];m._isNumber(R)?R=Math.round(R*1e3)/1e3:m._isString(R)||(R=R+""),g.push(R)}return g}const r=",",n="(",s=")",a="([",o="])",l=";",u="()",c="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],d=100;let f=class{constructor(g){this.canvas=g,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(g){g.fillEnabled()&&this._fill(g)}_fill(g){}strokeShape(g){g.hasStroke()&&this._stroke(g)}_stroke(g){}fillStrokeShape(g){g.attrs.fillAfterStrokeEnabled?(this.strokeShape(g),this.fillShape(g)):(this.fillShape(g),this.strokeShape(g))}getTrace(g,h){let m=this.traceArr,S=m.length,R="",D,y,x,T;for(D=0;D<S;D++)y=m[D],x=y.method,x?(T=y.args,R+=x,g?R+=u:t.Util._isArray(T[0])?R+=a+T.join(r)+o:(h&&(T=T.map(k=>typeof k=="number"?Math.floor(k):k)),R+=n+T.join(r)+s)):(R+=y.property,g||(R+=c+y.val)),R+=l;return R}clearTrace(){this.traceArr=[]}_trace(g){let h=this.traceArr,m;h.push(g),m=h.length,m>=d&&h.shift()}reset(){const g=this.getCanvas().getPixelRatio();this.setTransform(1*g,0,0,1*g,0,0)}getCanvas(){return this.canvas}clear(g){const h=this.getCanvas();g?this.clearRect(g.x||0,g.y||0,g.width||0,g.height||0):this.clearRect(0,0,h.getWidth()/h.pixelRatio,h.getHeight()/h.pixelRatio)}_applyLineCap(g){const h=g.attrs.lineCap;h&&this.setAttr("lineCap",h)}_applyOpacity(g){const h=g.getAbsoluteOpacity();h!==1&&this.setAttr("globalAlpha",h)}_applyLineJoin(g){const h=g.attrs.lineJoin;h&&this.setAttr("lineJoin",h)}setAttr(g,h){this._context[g]=h}arc(g,h,m,S,R,D){this._context.arc(g,h,m,S,R,D)}arcTo(g,h,m,S,R){this._context.arcTo(g,h,m,S,R)}beginPath(){this._context.beginPath()}bezierCurveTo(g,h,m,S,R,D){this._context.bezierCurveTo(g,h,m,S,R,D)}clearRect(g,h,m,S){this._context.clearRect(g,h,m,S)}clip(...g){this._context.clip.apply(this._context,g)}closePath(){this._context.closePath()}createImageData(g,h){const m=arguments;if(m.length===2)return this._context.createImageData(g,h);if(m.length===1)return this._context.createImageData(g)}createLinearGradient(g,h,m,S){return this._context.createLinearGradient(g,h,m,S)}createPattern(g,h){return this._context.createPattern(g,h)}createRadialGradient(g,h,m,S,R,D){return this._context.createRadialGradient(g,h,m,S,R,D)}drawImage(g,h,m,S,R,D,y,x,T){const k=arguments,U=this._context;k.length===3?U.drawImage(g,h,m):k.length===5?U.drawImage(g,h,m,S,R):k.length===9&&U.drawImage(g,h,m,S,R,D,y,x,T)}ellipse(g,h,m,S,R,D,y,x){this._context.ellipse(g,h,m,S,R,D,y,x)}isPointInPath(g,h,m,S){return m?this._context.isPointInPath(m,g,h,S):this._context.isPointInPath(g,h,S)}fill(...g){this._context.fill.apply(this._context,g)}fillRect(g,h,m,S){this._context.fillRect(g,h,m,S)}strokeRect(g,h,m,S){this._context.strokeRect(g,h,m,S)}fillText(g,h,m,S){S?this._context.fillText(g,h,m,S):this._context.fillText(g,h,m)}measureText(g){return this._context.measureText(g)}getImageData(g,h,m,S){return this._context.getImageData(g,h,m,S)}lineTo(g,h){this._context.lineTo(g,h)}moveTo(g,h){this._context.moveTo(g,h)}rect(g,h,m,S){this._context.rect(g,h,m,S)}roundRect(g,h,m,S,R){this._context.roundRect(g,h,m,S,R)}putImageData(g,h,m){this._context.putImageData(g,h,m)}quadraticCurveTo(g,h,m,S){this._context.quadraticCurveTo(g,h,m,S)}restore(){this._context.restore()}rotate(g){this._context.rotate(g)}save(){this._context.save()}scale(g,h){this._context.scale(g,h)}setLineDash(g){this._context.setLineDash?this._context.setLineDash(g):"mozDash"in this._context?this._context.mozDash=g:"webkitLineDash"in this._context&&(this._context.webkitLineDash=g)}getLineDash(){return this._context.getLineDash()}setTransform(g,h,m,S,R,D){this._context.setTransform(g,h,m,S,R,D)}stroke(g){g?this._context.stroke(g):this._context.stroke()}strokeText(g,h,m,S){this._context.strokeText(g,h,m,S)}transform(g,h,m,S,R,D){this._context.transform(g,h,m,S,R,D)}translate(g,h){this._context.translate(g,h)}_enableTrace(){let g=this,h=_.length,m=this.setAttr,S,R;const D=function(y){let x=g[y],T;g[y]=function(){return R=i(Array.prototype.slice.call(arguments,0)),T=x.apply(g,arguments),g._trace({method:y,args:R}),T}};for(S=0;S<h;S++)D(_[S]);g.setAttr=function(){m.apply(g,arguments);const y=arguments[0];let x=arguments[1];(y==="shadowOffsetX"||y==="shadowOffsetY"||y==="shadowBlur")&&(x=x/this.canvas.getPixelRatio()),g._trace({property:y,val:x})}}_applyGlobalCompositeOperation(g){const h=g.attrs.globalCompositeOperation;!h||h==="source-over"||this.setAttr("globalCompositeOperation",h)}};Ee.Context=f,p.forEach(function(w){Object.defineProperty(f.prototype,w,{get(){return this._context[w]},set(g){this._context[w]=g}})});class v extends f{constructor(g,{willReadFrequently:h=!1}={}){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:h})}_fillColor(g){const h=g.fill();this.setAttr("fillStyle",h),g._fillFunc(this)}_fillPattern(g){this.setAttr("fillStyle",g._getFillPattern()),g._fillFunc(this)}_fillLinearGradient(g){const h=g._getLinearGradient();h&&(this.setAttr("fillStyle",h),g._fillFunc(this))}_fillRadialGradient(g){const h=g._getRadialGradient();h&&(this.setAttr("fillStyle",h),g._fillFunc(this))}_fill(g){const h=g.fill(),m=g.getFillPriority();if(h&&m==="color"){this._fillColor(g);return}const S=g.getFillPatternImage();if(S&&m==="pattern"){this._fillPattern(g);return}const R=g.getFillLinearGradientColorStops();if(R&&m==="linear-gradient"){this._fillLinearGradient(g);return}const D=g.getFillRadialGradientColorStops();if(D&&m==="radial-gradient"){this._fillRadialGradient(g);return}h?this._fillColor(g):S?this._fillPattern(g):R?this._fillLinearGradient(g):D&&this._fillRadialGradient(g)}_strokeLinearGradient(g){const h=g.getStrokeLinearGradientStartPoint(),m=g.getStrokeLinearGradientEndPoint(),S=g.getStrokeLinearGradientColorStops(),R=this.createLinearGradient(h.x,h.y,m.x,m.y);if(S){for(let D=0;D<S.length;D+=2)R.addColorStop(S[D],S[D+1]);this.setAttr("strokeStyle",R)}}_stroke(g){const h=g.dash(),m=g.getStrokeScaleEnabled();if(g.hasStroke()){if(!m){this.save();const R=this.getCanvas().getPixelRatio();this.setTransform(R,0,0,R,0,0)}this._applyLineCap(g),h&&g.dashEnabled()&&(this.setLineDash(h),this.setAttr("lineDashOffset",g.dashOffset())),this.setAttr("lineWidth",g.strokeWidth()),g.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),g.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(g):this.setAttr("strokeStyle",g.stroke()),g._strokeFunc(this),m||this.restore()}}_applyShadow(g){var h,m,S;const R=(h=g.getShadowRGBA())!==null&&h!==void 0?h:"black",D=(m=g.getShadowBlur())!==null&&m!==void 0?m:5,y=(S=g.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},x=g.getAbsoluteScale(),T=this.canvas.getPixelRatio(),k=x.x*T,U=x.y*T;this.setAttr("shadowColor",R),this.setAttr("shadowBlur",D*Math.min(Math.abs(k),Math.abs(U))),this.setAttr("shadowOffsetX",y.x*k),this.setAttr("shadowOffsetY",y.y*U)}}Ee.SceneContext=v;class C extends f{constructor(g){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:!0})}_fill(g){this.save(),this.setAttr("fillStyle",g.colorKey),g._fillFuncHit(this),this.restore()}strokeShape(g){g.hasHitStroke()&&this._stroke(g)}_stroke(g){if(g.hasHitStroke()){const h=g.getStrokeScaleEnabled();if(!h){this.save();const R=this.getCanvas().getPixelRatio();this.setTransform(R,0,0,R,0,0)}this._applyLineCap(g);const m=g.hitStrokeWidth(),S=m==="auto"?g.strokeWidth():m;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",g.colorKey),g._strokeFuncHit(this),h||this.restore()}}}return Ee.HitContext=C,Ee}var ao;function sr(){if(ao)return Re;ao=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.HitCanvas=Re.SceneCanvas=Re.Canvas=void 0;const t=It(),e=dl(),i=bt();let r;function n(){if(r)return r;const l=t.Util.createCanvasElement(),u=l.getContext("2d");return r=(function(){const c=i.Konva._global.devicePixelRatio||1,_=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return c/_})(),t.Util.releaseCanvas(l),r}let s=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(u||{}).pixelRatio||i.Konva.pixelRatio||n();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const c=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/c,this.getHeight()/c)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,c){this.setWidth(u||0),this.setHeight(c||0)}toDataURL(u,c){try{return this._canvas.toDataURL(u,c)}catch{try{return this._canvas.toDataURL()}catch(p){return t.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Re.Canvas=s;class a extends s{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new e.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Re.SceneCanvas=a;class o extends s{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(u.width,u.height)}}return Re.HitCanvas=o,Re}var Cr={},lo;function ls(){return lo||(lo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=bt(),i=It();t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(n=>{r=n.node}),r},_dragElements:new Map,_drag(r){const n=[];t.DD._dragElements.forEach((s,a)=>{const{node:o}=s,l=o.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(c=>c.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){const c=o.dragDistance();if(Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y))<c||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,s),n.push(o)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const n=[];t.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&n.indexOf(u)===-1&&n.push(u)}),n.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:r},!0),n.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(Cr)),Cr}var xr={},ie={},ho;function Ct(){if(ho)return ie;ho=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.RGBComponent=r,ie.alphaComponent=n,ie.getNumberValidator=s,ie.getNumberOrArrayOfNumbersValidator=a,ie.getNumberOrAutoValidator=o,ie.getStringValidator=l,ie.getStringOrGradientValidator=u,ie.getFunctionValidator=c,ie.getNumberArrayValidator=_,ie.getBooleanValidator=p,ie.getComponentValidator=d;const t=bt(),e=It();function i(f){return e.Util._isString(f)?'"'+f+'"':Object.prototype.toString.call(f)==="[object Number]"||e.Util._isBoolean(f)?f:Object.prototype.toString.call(f)}function r(f){return f>255?255:f<0?0:Math.round(f)}function n(f){return f>1?1:f<1e-4?1e-4:f}function s(){if(t.Konva.isUnminified)return function(f,v){return e.Util._isNumber(f)||e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a number.'),f}}function a(f){if(t.Konva.isUnminified)return function(v,C){let w=e.Util._isNumber(v),g=e.Util._isArray(v)&&v.length==f;return!w&&!g&&e.Util.warn(i(v)+' is a not valid value for "'+C+'" attribute. The value should be a number or Array<number>('+f+")"),v}}function o(){if(t.Konva.isUnminified)return function(f,v){return e.Util._isNumber(f)||f==="auto"||e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a number or "auto".'),f}}function l(){if(t.Konva.isUnminified)return function(f,v){return e.Util._isString(f)||e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a string.'),f}}function u(){if(t.Konva.isUnminified)return function(f,v){const C=e.Util._isString(f),w=Object.prototype.toString.call(f)==="[object CanvasGradient]"||f&&f.addColorStop;return C||w||e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a string or a native gradient.'),f}}function c(){if(t.Konva.isUnminified)return function(f,v){return e.Util._isFunction(f)||e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a function.'),f}}function _(){if(t.Konva.isUnminified)return function(f,v){const C=Int8Array?Object.getPrototypeOf(Int8Array):null;return C&&f instanceof C||(e.Util._isArray(f)?f.forEach(function(w){e.Util._isNumber(w)||e.Util.warn('"'+v+'" attribute has non numeric element '+w+". Make sure that all elements are numbers.")}):e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a array of numbers.')),f}}function p(){if(t.Konva.isUnminified)return function(f,v){return f===!0||f===!1||e.Util.warn(i(f)+' is a not valid value for "'+v+'" attribute. The value should be a boolean.'),f}}function d(f){if(t.Konva.isUnminified)return function(v,C){return v==null||e.Util.isObject(v)||e.Util.warn(i(v)+' is a not valid value for "'+C+'" attribute. The value should be an object with properties '+f),v}}return ie}var co;function St(){return co||(co=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=It(),i=Ct(),r="get",n="set";t.Factory={addGetterSetter(s,a,o,l,u){t.Factory.addGetter(s,a,o),t.Factory.addSetter(s,a,l,u),t.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){const l=r+e.Util._capitalize(a);s.prototype[l]=s.prototype[l]||function(){const u=this.attrs[a];return u===void 0?o:u}},addSetter(s,a,o,l){const u=n+e.Util._capitalize(a);s.prototype[u]||t.Factory.overWriteSetter(s,a,o,l)},overWriteSetter(s,a,o,l){const u=n+e.Util._capitalize(a);s.prototype[u]=function(c){return o&&c!==void 0&&c!==null&&(c=o.call(this,c,a)),this._setAttr(a,c),l&&l.call(this),this}},addComponentsGetterSetter(s,a,o,l,u){const c=o.length,_=e.Util._capitalize,p=r+_(a),d=n+_(a);s.prototype[p]=function(){const v={};for(let C=0;C<c;C++){const w=o[C];v[w]=this.getAttr(a+_(w))}return v};const f=(0,i.getComponentValidator)(o);s.prototype[d]=function(v){const C=this.attrs[a];l&&(v=l.call(this,v,a)),f&&f.call(this,v,a);for(const w in v)v.hasOwnProperty(w)&&this._setAttr(a+_(w),v[w]);return v||o.forEach(w=>{this._setAttr(a+_(w),void 0)}),this._fireChangeEvent(a,C,v),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){const o=e.Util._capitalize(a),l=n+o,u=r+o;s.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,a,o,l){e.Util.error("Adding deprecated "+a);const u=r+e.Util._capitalize(a),c=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(c);const _=this.attrs[a];return _===void 0?o:_},t.Factory.addSetter(s,a,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){e.Util.each(a,function(o,l){const u=s.prototype[l],c=r+e.Util._capitalize(o),_=n+e.Util._capitalize(o);function p(){u.apply(this,arguments),e.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[o]=p,s.prototype[c]=p,s.prototype[_]=p})},afterSetFilter(){this._filterUpToDate=!1}}})(xr)),xr}var uo;function Gt(){if(uo)return _i;uo=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Node=void 0;const t=sr(),e=ls(),i=St(),r=bt(),n=It(),s=Ct(),a="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",c="canvas",_="Change",p="children",d="konva",f="listening",v="mouseenter",C="mouseleave",w="pointerenter",g="pointerleave",h="touchenter",m="touchleave",S="set",R="Shape",D=" ",y="stage",x="transform",T="Stage",k="visible",U=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(D);let H=1,V=class Br{constructor(b){this._id=H++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(b),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(b){(b===x||b===l)&&this._cache.get(b)?this._cache.get(b).dirty=!0:b?this._cache.delete(b):this._cache.clear()}_getCache(b,P){let N=this._cache.get(b);return(N===void 0||(b===x||b===l)&&N.dirty===!0)&&(N=P.call(this),this._cache.set(b,N)),N}_calculate(b,P,N){if(!this._attachedDepsListeners.get(b)){const F=P.map(I=>I+"Change.konva").join(D);this.on(F,()=>{this._clearCache(b)}),this._attachedDepsListeners.set(b,!0)}return this._getCache(b,N)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(b){this._clearCache(b),b===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:b,filter:P,hit:N,buffer:F}=this._cache.get(c);n.Util.releaseCanvas(b,P,N,F),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(b){const P=b||{};let N={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(N=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let F=Math.ceil(P.width||N.width),I=Math.ceil(P.height||N.height),K=P.pixelRatio,B=P.x===void 0?Math.floor(N.x):P.x,Z=P.y===void 0?Math.floor(N.y):P.y,at=P.offset||0,z=P.drawBorder||!1,O=P.hitCanvasPixelRatio||1;if(!F||!I){n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const q=Math.abs(Math.round(N.x)-B)>.5?1:0,it=Math.abs(Math.round(N.y)-Z)>.5?1:0;F+=at*2+q,I+=at*2+it,B-=at,Z-=at;const Q=new t.SceneCanvas({pixelRatio:K,width:F,height:I}),ct=new t.SceneCanvas({pixelRatio:K,width:0,height:0,willReadFrequently:!0}),A=new t.HitCanvas({pixelRatio:O,width:F,height:I}),L=Q.getContext(),W=A.getContext(),j=new t.SceneCanvas({width:Q.width/Q.pixelRatio+Math.abs(B),height:Q.height/Q.pixelRatio+Math.abs(Z),pixelRatio:Q.pixelRatio}),J=j.getContext();return A.isCache=!0,Q.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(Q.getContext()._context.imageSmoothingEnabled=!1,ct.getContext()._context.imageSmoothingEnabled=!1),L.save(),W.save(),J.save(),L.translate(-B,-Z),W.translate(-B,-Z),J.translate(-B,-Z),j.x=B,j.y=Z,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this.drawScene(Q,this,j),this.drawHit(A,this),this._isUnderCache=!1,L.restore(),W.restore(),z&&(L.save(),L.beginPath(),L.rect(0,0,F,I),L.closePath(),L.setAttr("strokeStyle","red"),L.setAttr("lineWidth",5),L.stroke(),L.restore()),this._cache.set(c,{scene:Q,filter:ct,hit:A,buffer:j,x:B,y:Z}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(b){throw new Error('abstract "getClientRect" method call')}_transformedRect(b,P){const N=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}];let F=1/0,I=1/0,K=-1/0,B=-1/0;const Z=this.getAbsoluteTransform(P);return N.forEach(function(at){const z=Z.point(at);F===void 0&&(F=K=z.x,I=B=z.y),F=Math.min(F,z.x),I=Math.min(I,z.y),K=Math.max(K,z.x),B=Math.max(B,z.y)}),{x:F,y:I,width:K-F,height:B-I}}_drawCachedSceneCanvas(b){b.save(),b._applyOpacity(this),b._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();b.translate(P.x,P.y);const N=this._getCachedSceneCanvas(),F=N.pixelRatio;b.drawImage(N._canvas,0,0,N.width/F,N.height/F),b.restore()}_drawCachedHitCanvas(b){const P=this._getCanvasCache(),N=P.hit;b.save(),b.translate(P.x,P.y),b.drawImage(N._canvas,0,0,N.width/N.pixelRatio,N.height/N.pixelRatio),b.restore()}_getCachedSceneCanvas(){let b=this.filters(),P=this._getCanvasCache(),N=P.scene,F=P.filter,I=F.getContext(),K,B,Z,at;if(b){if(!this._filterUpToDate){const z=N.pixelRatio;F.setSize(N.width/N.pixelRatio,N.height/N.pixelRatio);try{for(K=b.length,I.clear(),I.drawImage(N._canvas,0,0,N.getWidth()/z,N.getHeight()/z),B=I.getImageData(0,0,F.getWidth(),F.getHeight()),Z=0;Z<K;Z++){if(at=b[Z],typeof at!="function"){n.Util.error("Filter should be type of function, but got "+typeof at+" instead. Please check correct filters");continue}at.call(this,B),I.putImageData(B,0,0)}}catch(O){n.Util.error("Unable to apply filter. "+O.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return F}return N}on(b,P){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const N=b.split(D);for(let F=0;F<N.length;F++){const K=N[F].split("."),B=K[0],Z=K[1]||"";this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:Z,handler:P})}return this}off(b,P){let N=(b||"").split(D),F=N.length,I,K,B,Z,at,z;if(this._cache&&this._cache.delete(o),!b)for(K in this.eventListeners)this._off(K);for(I=0;I<F;I++)if(B=N[I],Z=B.split("."),at=Z[0],z=Z[1],at)this.eventListeners[at]&&this._off(at,z,P);else for(K in this.eventListeners)this._off(K,z,P);return this}dispatchEvent(b){const P={target:this,type:b.type,evt:b};return this.fire(b.type,P),this}addEventListener(b,P){return this.on(b,function(N){P.call(this,N.evt)}),this}removeEventListener(b){return this.off(b),this}_delegate(b,P,N){const F=this;this.on(b,function(I){const K=I.target.findAncestors(P,!0,F);for(let B=0;B<K.length;B++)I=n.Util.cloneObject(I),I.currentTarget=K[B],N.call(K[B],I)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const b=this.getParent();b&&b.children&&(b.children.splice(this.index,1),b._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(b){const P="get"+n.Util._capitalize(b);return n.Util._isFunction(this[P])?this[P]():this.attrs[b]}getAncestors(){let b=this.getParent(),P=[];for(;b;)P.push(b),b=b.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(b){return this._batchTransformChanges(()=>{let P,N;if(!b)return this;for(P in b)P!==p&&(N=S+n.Util._capitalize(P),n.Util._isFunction(this[N])?this[N](b[P]):this._setAttr(P,b[P]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(b){if(!this.listening())return!1;const N=this.getParent();return N&&N!==b&&this!==b?N._isListening(b):!0}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(b){if(!this.visible())return!1;const N=this.getParent();return N&&N!==b&&this!==b?N._isVisible(b):!0}shouldDrawHit(b,P=!1){if(b)return this._isVisible(b)&&this._isListening(b);const N=this.getLayer();let F=!1;e.DD._dragElements.forEach(K=>{K.dragStatus==="dragging"&&(K.node.nodeType==="Stage"||K.node.getLayer()===N)&&(F=!0)});const I=!P&&!r.Konva.hitOnDragEnabled&&(F||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!I}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let b=this.getDepth(),P=this,N=0,F,I,K,B;function Z(z){for(F=[],I=z.length,K=0;K<I;K++)B=z[K],N++,B.nodeType!==R&&(F=F.concat(B.getChildren().slice())),B._id===P._id&&(K=I);F.length>0&&F[0].getDepth()<=b&&Z(F)}const at=this.getStage();return P.nodeType!==T&&at&&Z(at.getChildren()),N}getDepth(){let b=0,P=this.parent;for(;P;)b++,P=P.parent;return b}_batchTransformChanges(b){this._batchingTransformChange=!0,b(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(x),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(b){return this._batchTransformChanges(()=>{this.x(b.x),this.y(b.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const b=this.getStage();if(!b)return null;const P=b.getPointerPosition();if(!P)return null;const N=this.getAbsoluteTransform().copy();return N.invert(),N.point(P)}getAbsolutePosition(b){let P=!1,N=this.parent;for(;N;){if(N.isCached()){P=!0;break}N=N.parent}P&&!b&&(b=!0);const F=this.getAbsoluteTransform(b).getMatrix(),I=new n.Transform,K=this.offset();return I.m=F.slice(),I.translate(K.x,K.y),I.getTranslation()}setAbsolutePosition(b){const{x:P,y:N,...F}=this._clearTransform();this.attrs.x=P,this.attrs.y=N,this._clearCache(x);const I=this._getAbsoluteTransform().copy();return I.invert(),I.translate(b.x,b.y),b={x:this.attrs.x+I.getTranslation().x,y:this.attrs.y+I.getTranslation().y},this._setTransform(F),this.setPosition({x:b.x,y:b.y}),this._clearCache(x),this._clearSelfAndDescendantCache(l),this}_setTransform(b){let P;for(P in b)this.attrs[P]=b[P]}_clearTransform(){const b={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,b}move(b){let P=b.x,N=b.y,F=this.x(),I=this.y();return P!==void 0&&(F+=P),N!==void 0&&(I+=N),this.setPosition({x:F,y:I}),this}_eachAncestorReverse(b,P){let N=[],F=this.getParent(),I,K;if(!(P&&P._id===this._id)){for(N.unshift(this);F&&(!P||F._id!==P._id);)N.unshift(F),F=F.parent;for(I=N.length,K=0;K<I;K++)b(N[K])}}rotate(b){return this.rotation(this.rotation()+b),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const b=this.index,P=this.parent.getChildren().length;return b<P-1?(this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;const b=this.index,P=this.parent.getChildren().length;return b<P-1?(this.parent.children.splice(b,1),this.parent.children.splice(b+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(b){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(b<0||b>=this.parent.children.length)&&n.Util.warn("Unexpected value "+b+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(b,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let b=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(b*=P.getAbsoluteOpacity()),b}moveTo(b){return this.getParent()!==b&&(this._remove(),b.add(this)),this}toObject(){let b=this.getAttrs(),P,N,F,I,K;const B={attrs:{},className:this.getClassName()};for(P in b)N=b[P],K=n.Util.isObject(N)&&!n.Util._isPlainObject(N)&&!n.Util._isArray(N),!K&&(F=typeof this[P]=="function"&&this[P],delete b[P],I=F?F.call(this):null,b[P]=N,I!==N&&(B.attrs[P]=N));return n.Util._prepareToStringify(B)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(b,P,N){const F=[];P&&this._isMatch(b)&&F.push(this);let I=this.parent;for(;I;){if(I===N)return F;I._isMatch(b)&&F.push(I),I=I.parent}return F}isAncestorOf(b){return!1}findAncestor(b,P,N){return this.findAncestors(b,P,N)[0]}_isMatch(b){if(!b)return!1;if(typeof b=="function")return b(this);let P=b.replace(/ /g,"").split(","),N=P.length,F,I;for(F=0;F<N;F++)if(I=P[F],n.Util.isValidSelector(I)||(n.Util.warn('Selector "'+I+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),I.charAt(0)==="#"){if(this.id()===I.slice(1))return!0}else if(I.charAt(0)==="."){if(this.hasName(I.slice(1)))return!0}else if(this.className===I||this.nodeType===I)return!0;return!1}getLayer(){const b=this.getParent();return b?b.getLayer():null}getStage(){return this._getCache(y,this._getStage)}_getStage(){const b=this.getParent();return b?b.getStage():null}fire(b,P={},N){return P.target=P.target||this,N?this._fireAndBubble(b,P):this._fire(b,P),this}getAbsoluteTransform(b){return b?this._getAbsoluteTransform(b):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(b){let P;if(b)return P=new n.Transform,this._eachAncestorReverse(function(N){const F=N.transformsEnabled();F==="all"?P.multiply(N.getTransform()):F==="position"&&P.translate(N.x()-N.offsetX(),N.y()-N.offsetY())},b),P;{P=this._cache.get(l)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const N=this.transformsEnabled();if(N==="all")P.multiply(this.getTransform());else if(N==="position"){const F=this.attrs.x||0,I=this.attrs.y||0,K=this.attrs.offsetX||0,B=this.attrs.offsetY||0;P.translate(F-K,I-B)}return P.dirty=!1,P}}getAbsoluteScale(b){let P=this;for(;P;)P._isUnderCache&&(b=P),P=P.getParent();const F=this.getAbsoluteTransform(b).decompose();return{x:F.scaleX,y:F.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(x,this._getTransform)}_getTransform(){var b,P;const N=this._cache.get(x)||new n.Transform;N.reset();const F=this.x(),I=this.y(),K=r.Konva.getAngle(this.rotation()),B=(b=this.attrs.scaleX)!==null&&b!==void 0?b:1,Z=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,at=this.attrs.skewX||0,z=this.attrs.skewY||0,O=this.attrs.offsetX||0,q=this.attrs.offsetY||0;return(F!==0||I!==0)&&N.translate(F,I),K!==0&&N.rotate(K),(at!==0||z!==0)&&N.skew(at,z),(B!==1||Z!==1)&&N.scale(B,Z),(O!==0||q!==0)&&N.translate(-1*O,-1*q),N.dirty=!1,N}clone(b){let P=n.Util.cloneObject(this.attrs),N,F,I,K,B;for(N in b)P[N]=b[N];const Z=new this.constructor(P);for(N in this.eventListeners)for(F=this.eventListeners[N],I=F.length,K=0;K<I;K++)B=F[K],B.name.indexOf(d)<0&&(Z.eventListeners[N]||(Z.eventListeners[N]=[]),Z.eventListeners[N].push(B));return Z}_toKonvaCanvas(b){b=b||{};const P=this.getClientRect(),N=this.getStage(),F=b.x!==void 0?b.x:Math.floor(P.x),I=b.y!==void 0?b.y:Math.floor(P.y),K=b.pixelRatio||1,B=new t.SceneCanvas({width:b.width||Math.ceil(P.width)||(N?N.width():0),height:b.height||Math.ceil(P.height)||(N?N.height():0),pixelRatio:K}),Z=B.getContext(),at=new t.SceneCanvas({width:B.width/B.pixelRatio+Math.abs(F),height:B.height/B.pixelRatio+Math.abs(I),pixelRatio:B.pixelRatio});return b.imageSmoothingEnabled===!1&&(Z._context.imageSmoothingEnabled=!1),Z.save(),(F||I)&&Z.translate(-1*F,-1*I),this.drawScene(B,void 0,at),Z.restore(),B}toCanvas(b){return this._toKonvaCanvas(b)._canvas}toDataURL(b){b=b||{};const P=b.mimeType||null,N=b.quality||null,F=this._toKonvaCanvas(b).toDataURL(P,N);return b.callback&&b.callback(F),F}toImage(b){return new Promise((P,N)=>{try{const F=b?.callback;F&&delete b.callback,n.Util._urlToImage(this.toDataURL(b),function(I){P(I),F?.(I)})}catch(F){N(F)}})}toBlob(b){return new Promise((P,N)=>{try{const F=b?.callback;F&&delete b.callback,this.toCanvas(b).toBlob(I=>{P(I),F?.(I)},b?.mimeType,b?.quality)}catch(F){N(F)}})}setSize(b){return this.width(b.width),this.height(b.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(b,P,N){let F=this.eventListeners[b],I,K,B;for(I=0;I<F.length;I++)if(K=F[I].name,B=F[I].handler,(K!=="konva"||P==="konva")&&(!P||K===P)&&(!N||N===B)){if(F.splice(I,1),F.length===0){delete this.eventListeners[b];break}I--}}_fireChangeEvent(b,P,N){this._fire(b+_,{oldVal:P,newVal:N})}addName(b){if(!this.hasName(b)){const P=this.name(),N=P?P+" "+b:b;this.name(N)}return this}hasName(b){if(!b)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(b)!==-1:!1}removeName(b){const P=(this.name()||"").split(/\s/g),N=P.indexOf(b);return N!==-1&&(P.splice(N,1),this.name(P.join(" "))),this}setAttr(b,P){const N=this[S+n.Util._capitalize(b)];return n.Util._isFunction(N)?N.call(this,P):this._setAttr(b,P),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const b=this.getLayer()||this.getStage();b?.batchDraw()}}_setAttr(b,P){const N=this.attrs[b];N===P&&!n.Util.isObject(P)||(P==null?delete this.attrs[b]:this.attrs[b]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(b,N,P),this._requestDraw())}_setComponentAttr(b,P,N){let F;N!==void 0&&(F=this.attrs[b],F||(this.attrs[b]=this.getAttr(b)),this.attrs[b][P]=N,this._fireChangeEvent(b,F,N))}_fireAndBubble(b,P,N){P&&this.nodeType===R&&(P.target=this);const F=[v,C,w,g,h,m];if(!(F.indexOf(b)!==-1&&(N&&(this===N||this.isAncestorOf&&this.isAncestorOf(N))||this.nodeType==="Stage"&&!N))){this._fire(b,P);const K=F.indexOf(b)!==-1&&N&&N.isAncestorOf&&N.isAncestorOf(this)&&!N.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!K&&(N&&N.parent?this._fireAndBubble.call(this.parent,b,P,N):this._fireAndBubble.call(this.parent,b,P))}}_getProtoListeners(b){var P,N,F;const I=(P=this._cache.get(o))!==null&&P!==void 0?P:{};let K=I?.[b];if(K===void 0){K=[];let B=Object.getPrototypeOf(this);for(;B;){const Z=(F=(N=B.eventListeners)===null||N===void 0?void 0:N[b])!==null&&F!==void 0?F:[];K.push(...Z),B=Object.getPrototypeOf(B)}I[b]=K,this._cache.set(o,I)}return K}_fire(b,P){P=P||{},P.currentTarget=this,P.type=b;const N=this._getProtoListeners(b);if(N)for(let I=0;I<N.length;I++)N[I].handler.call(this,P);const F=this.eventListeners[b];if(F)for(let I=0;I<F.length;I++)F[I].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(b){const P=b?b.pointerId:void 0,N=this.getStage(),F=this.getAbsolutePosition();if(!N)return;const I=N._getPointerById(P)||N._changedPointerPositions[0]||F;e.DD._dragElements.set(this._id,{node:this,startPointerPos:I,offset:{x:I.x-F.x,y:I.y-F.y},dragStatus:"ready",pointerId:P})}startDrag(b,P=!0){e.DD._dragElements.has(this._id)||this._createDragElement(b);const N=e.DD._dragElements.get(this._id);N.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:b&&b.evt},P)}_setDragPosition(b,P){const N=this.getStage()._getPointerById(P.pointerId);if(!N)return;let F={x:N.x-P.offset.x,y:N.y-P.offset.y};const I=this.dragBoundFunc();if(I!==void 0){const K=I.call(this,F,b);K?F=K:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==F.x||this._lastPos.y!==F.y)&&(this.setAbsolutePosition(F),this._requestDraw()),this._lastPos=F}stopDrag(b){const P=e.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),e.DD._endDragBefore(b),e.DD._endDragAfter(b)}setDraggable(b){this._setAttr("draggable",b),this._dragChange()}isDragging(){const b=e.DD._dragElements.get(this._id);return b?b.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(b){if(!(!(b.evt.button!==void 0)||r.Konva.dragButtons.indexOf(b.evt.button)>=0)||this.isDragging())return;let F=!1;e.DD._dragElements.forEach(I=>{this.isAncestorOf(I.node)&&(F=!0)}),F||this._createDragElement(b)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=e.DD._dragElements.get(this._id),N=P&&P.dragStatus==="dragging",F=P&&P.dragStatus==="ready";N?this.stopDrag():F&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(b={x:0,y:0}){const P=this.getStage();if(!P)return!1;const N={x:-b.x,y:-b.y,width:P.width()+2*b.x,height:P.height()+2*b.y};return n.Util.haveIntersection(N,this.getClientRect())}static create(b,P){return n.Util._isString(b)&&(b=JSON.parse(b)),this._createNode(b,P)}static _createNode(b,P){let N=Br.prototype.getClassName.call(b),F=b.children,I,K,B;P&&(b.attrs.container=P),r.Konva[N]||(n.Util.warn('Can not find a node with class name "'+N+'". Fallback to "Shape".'),N="Shape");const Z=r.Konva[N];if(I=new Z(b.attrs),F)for(K=F.length,B=0;B<K;B++)I.add(Br._createNode(F[B]));return I}};_i.Node=V,V.prototype.nodeType="Node",V.prototype._attrsAffectingSize=[],V.prototype.eventListeners={},V.prototype.on.call(V.prototype,U,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(x),this._clearSelfAndDescendantCache(l)}),V.prototype.on.call(V.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(k)}),V.prototype.on.call(V.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),V.prototype.on.call(V.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const G=i.Factory.addGetterSetter;return G(V,"zIndex"),G(V,"absolutePosition"),G(V,"position"),G(V,"x",0,(0,s.getNumberValidator)()),G(V,"y",0,(0,s.getNumberValidator)()),G(V,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),G(V,"opacity",1,(0,s.getNumberValidator)()),G(V,"name","",(0,s.getStringValidator)()),G(V,"id","",(0,s.getStringValidator)()),G(V,"rotation",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(V,"scale",["x","y"]),G(V,"scaleX",1,(0,s.getNumberValidator)()),G(V,"scaleY",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(V,"skew",["x","y"]),G(V,"skewX",0,(0,s.getNumberValidator)()),G(V,"skewY",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(V,"offset",["x","y"]),G(V,"offsetX",0,(0,s.getNumberValidator)()),G(V,"offsetY",0,(0,s.getNumberValidator)()),G(V,"dragDistance",void 0,(0,s.getNumberValidator)()),G(V,"width",0,(0,s.getNumberValidator)()),G(V,"height",0,(0,s.getNumberValidator)()),G(V,"listening",!0,(0,s.getBooleanValidator)()),G(V,"preventDefault",!0,(0,s.getBooleanValidator)()),G(V,"filters",void 0,function($){return this._filterUpToDate=!1,$}),G(V,"visible",!0,(0,s.getBooleanValidator)()),G(V,"transformsEnabled","all",(0,s.getStringValidator)()),G(V,"size"),G(V,"dragBoundFunc"),G(V,"draggable",!1,(0,s.getBooleanValidator)()),i.Factory.backCompat(V,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),_i}var yi={},fo;function or(){if(fo)return yi;fo=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Container=void 0;const t=St(),e=Gt(),i=Ct();let r=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){const a=this.children||[];return s?a.filter(s):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let o=0;o<s.length;o++)this.add(s[o]);return this}const a=s[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const a=this._generalFind(s,!0);return a.length>0?a[0]:void 0}_generalFind(s,a){const o=[];return this._descendants(l=>{const u=l._isMatch(s);return u&&o.push(l),!!(u&&a)}),o}_descendants(s){let a=!1;const o=this.getChildren();for(const l of o){if(a=s(l),a)return!0;if(l.hasChildren()&&(a=l._descendants(s),a))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(a=>{s.children.push(a.toObject())}),s}isAncestorOf(s){let a=s.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(s){const a=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(o){a.add(o.clone())}),a}getAllIntersections(s){const a=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(s)&&a.push(o)}),a}_clearSelfAndDescendantCache(s){var a;super._clearSelfAndDescendantCache(s),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(o){o._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(a,o){a.index=o}),this._requestDraw()}drawScene(s,a,o){const l=this.getLayer(),u=s||l&&l.getCanvas(),c=u&&u.getContext(),_=this._getCanvasCache(),p=_&&_.scene,d=u&&u.isCache;if(!this.isVisible()&&!d)return this;if(p){c.save();const f=this.getAbsoluteTransform(a).getMatrix();c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",u,a,o);return this}drawHit(s,a){if(!this.shouldDrawHit(a))return this;const o=this.getLayer(),l=s||o&&o.hitCanvas,u=l&&l.getContext(),c=this._getCanvasCache();if(c&&c.hit){u.save();const p=this.getAbsoluteTransform(a).getMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,a);return this}_drawChildren(s,a,o,l){var u;const c=a&&a.getContext(),_=this.clipWidth(),p=this.clipHeight(),d=this.clipFunc(),f=typeof _=="number"&&typeof p=="number"||d,v=o===this;if(f){c.save();const w=this.getAbsoluteTransform(o);let g=w.getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),c.beginPath();let h;if(d)h=d.call(this,c,this);else{const m=this.clipX(),S=this.clipY();c.rect(m||0,S||0,_,p)}c.clip.apply(c,h),g=w.copy().invert().getMatrix(),c.transform(g[0],g[1],g[2],g[3],g[4],g[5])}const C=!v&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";C&&(c.save(),c._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(w){w[s](a,o,l)}),C&&c.restore(),f&&c.restore()}getClientRect(s={}){var a;const o=s.skipTransform,l=s.relativeTo;let u,c,_,p,d={x:1/0,y:1/0,width:0,height:0};const f=this;(a=this.children)===null||a===void 0||a.forEach(function(w){if(!w.visible())return;const g=w.getClientRect({relativeTo:f,skipShadow:s.skipShadow,skipStroke:s.skipStroke});g.width===0&&g.height===0||(u===void 0?(u=g.x,c=g.y,_=g.x+g.width,p=g.y+g.height):(u=Math.min(u,g.x),c=Math.min(c,g.y),_=Math.max(_,g.x+g.width),p=Math.max(p,g.y+g.height)))});const v=this.find("Shape");let C=!1;for(let w=0;w<v.length;w++)if(v[w]._isVisible(this)){C=!0;break}return C&&u!==void 0?d={x:u,y:c,width:_-u,height:p-c}:d={x:0,y:0,width:0,height:0},o?d:this._transformedRect(d,l)}};return yi.Container=r,t.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(r,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipFunc"),yi}var wr={},De={},go;function fl(){if(go)return De;go=1,Object.defineProperty(De,"__esModule",{value:!0}),De.getCapturedShape=r,De.createEvent=n,De.hasPointerCapture=s,De.setPointerCapture=a,De.releaseCapture=o;const t=bt(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function r(l){return e.get(l)}function n(l){return{evt:l,pointerId:l.pointerId}}function s(l,u){return e.get(l)===u}function a(l,u){o(l),u.getStage()&&(e.set(l,u),i&&u._fire("gotpointercapture",n(new PointerEvent("gotpointercapture"))))}function o(l,u){const c=e.get(l);if(!c)return;const _=c.getStage();_&&_.content,e.delete(l),i&&c._fire("lostpointercapture",n(new PointerEvent("lostpointercapture")))}return De}var po;function yu(){return po||(po=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=It(),i=St(),r=or(),n=bt(),s=sr(),a=ls(),o=bt(),l=fl(),u="Stage",c="string",_="px",p="mouseout",d="mouseleave",f="mouseover",v="mouseenter",C="mousemove",w="mousedown",g="mouseup",h="pointermove",m="pointerdown",S="pointerup",R="pointercancel",D="lostpointercapture",y="pointerout",x="pointerleave",T="pointerover",k="pointerenter",U="contextmenu",H="touchstart",V="touchend",G="touchmove",$="touchcancel",b="wheel",P=5,N=[[v,"_pointerenter"],[w,"_pointerdown"],[C,"_pointermove"],[g,"_pointerup"],[d,"_pointerleave"],[H,"_pointerdown"],[G,"_pointermove"],[V,"_pointerup"],[$,"_pointercancel"],[f,"_pointerover"],[b,"_wheel"],[U,"_contextmenu"],[m,"_pointerdown"],[h,"_pointermove"],[S,"_pointerup"],[R,"_pointercancel"],[x,"_pointerleave"],[D,"_lostpointercapture"]],F={mouse:{[y]:p,[x]:d,[T]:f,[k]:v,[h]:C,[m]:w,[S]:g,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[y]:"touchout",[x]:"touchleave",[T]:"touchover",[k]:"touchenter",[h]:G,[m]:H,[S]:V,[R]:$,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[y]:y,[x]:x,[T]:T,[k]:k,[h]:h,[m]:m,[S]:S,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=z=>z.indexOf("pointer")>=0?"pointer":z.indexOf("touch")>=0?"touch":"mouse",K=z=>{const O=I(z);if(O==="pointer")return n.Konva.pointerEventsEnabled&&F.pointer;if(O==="touch")return F.touch;if(O==="mouse")return F.mouse};function B(z={}){return(z.clipFunc||z.clipWidth||z.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),z}const Z="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class at extends r.Container{constructor(O){super(B(O)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B(this.attrs)}),this._checkVisibility()}_validateAdd(O){const q=O.getType()==="Layer",it=O.getType()==="FastLayer";q||it||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const O=this.visible()?"":"none";this.content.style.display=O}setContainer(O){if(typeof O===c){let q;if(O.charAt(0)==="."){const it=O.slice(1);O=document.getElementsByClassName(it)[0]}else O.charAt(0)!=="#"?q=O:q=O.slice(1),O=document.getElementById(q);if(!O)throw"Can not find container in document with id "+q}return this._setAttr("container",O),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),O.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const O=this.children,q=O.length;for(let it=0;it<q;it++)O[it].clear();return this}clone(O){return O||(O={}),O.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,O)}destroy(){super.destroy();const O=this.content;O&&e.Util._isInDocument(O)&&this.container().removeChild(O);const q=t.stages.indexOf(this);return q>-1&&t.stages.splice(q,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const O=this._pointerPositions[0]||this._changedPointerPositions[0];return O?{x:O.x,y:O.y}:(e.Util.warn(Z),null)}_getPointerById(O){return this._pointerPositions.find(q=>q.id===O)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(O){O=O||{},O.x=O.x||0,O.y=O.y||0,O.width=O.width||this.width(),O.height=O.height||this.height();const q=new s.SceneCanvas({width:O.width,height:O.height,pixelRatio:O.pixelRatio||1}),it=q.getContext()._context,Q=this.children;return(O.x||O.y)&&it.translate(-1*O.x,-1*O.y),Q.forEach(function(ct){if(!ct.isVisible())return;const A=ct._toKonvaCanvas(O);it.drawImage(A._canvas,O.x,O.y,A.getWidth()/A.getPixelRatio(),A.getHeight()/A.getPixelRatio())}),q}getIntersection(O){if(!O)return null;const q=this.children,it=q.length,Q=it-1;for(let ct=Q;ct>=0;ct--){const A=q[ct].getIntersection(O);if(A)return A}return null}_resizeDOM(){const O=this.width(),q=this.height();this.content&&(this.content.style.width=O+_,this.content.style.height=q+_),this.bufferCanvas.setSize(O,q),this.bufferHitCanvas.setSize(O,q),this.children.forEach(it=>{it.setSize({width:O,height:q}),it.draw()})}add(O,...q){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}super.add(O);const it=this.children.length;return it>P&&e.Util.warn("The stage has "+it+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),O.setSize({width:this.width(),height:this.height()}),O.draw(),n.Konva.isBrowser&&this.content.appendChild(O.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(O){return l.hasPointerCapture(O,this)}setPointerCapture(O){l.setPointerCapture(O,this)}releaseCapture(O){l.releaseCapture(O,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&N.forEach(([O,q])=>{this.content.addEventListener(O,it=>{this[q](it)},{passive:!1})})}_pointerenter(O){this.setPointersPositions(O);const q=K(O.type);q&&this._fire(q.pointerenter,{evt:O,target:this,currentTarget:this})}_pointerover(O){this.setPointersPositions(O);const q=K(O.type);q&&this._fire(q.pointerover,{evt:O,target:this,currentTarget:this})}_getTargetShape(O){let q=this[O+"targetShape"];return q&&!q.getStage()&&(q=null),q}_pointerleave(O){const q=K(O.type),it=I(O.type);if(!q)return;this.setPointersPositions(O);const Q=this._getTargetShape(it),ct=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;Q&&ct?(Q._fireAndBubble(q.pointerout,{evt:O}),Q._fireAndBubble(q.pointerleave,{evt:O}),this._fire(q.pointerleave,{evt:O,target:this,currentTarget:this}),this[it+"targetShape"]=null):ct&&(this._fire(q.pointerleave,{evt:O,target:this,currentTarget:this}),this._fire(q.pointerout,{evt:O,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(O){const q=K(O.type),it=I(O.type);if(!q)return;this.setPointersPositions(O);let Q=!1;this._changedPointerPositions.forEach(ct=>{const A=this.getIntersection(ct);if(a.DD.justDragged=!1,n.Konva["_"+it+"ListenClick"]=!0,!A||!A.isListening()){this[it+"ClickStartShape"]=void 0;return}n.Konva.capturePointerEventsEnabled&&A.setPointerCapture(ct.id),this[it+"ClickStartShape"]=A,A._fireAndBubble(q.pointerdown,{evt:O,pointerId:ct.id}),Q=!0;const L=O.type.indexOf("touch")>=0;A.preventDefault()&&O.cancelable&&L&&O.preventDefault()}),Q||this._fire(q.pointerdown,{evt:O,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(O){const q=K(O.type),it=I(O.type);if(!q||(n.Konva.isDragging()&&a.DD.node.preventDefault()&&O.cancelable&&O.preventDefault(),this.setPointersPositions(O),!(!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled)))return;const ct={};let A=!1;const L=this._getTargetShape(it);this._changedPointerPositions.forEach(W=>{const j=l.getCapturedShape(W.id)||this.getIntersection(W),J=W.id,Y={evt:O,pointerId:J},nt=L!==j;if(nt&&L&&(L._fireAndBubble(q.pointerout,{...Y},j),L._fireAndBubble(q.pointerleave,{...Y},j)),j){if(ct[j._id])return;ct[j._id]=!0}j&&j.isListening()?(A=!0,nt&&(j._fireAndBubble(q.pointerover,{...Y},L),j._fireAndBubble(q.pointerenter,{...Y},L),this[it+"targetShape"]=j),j._fireAndBubble(q.pointermove,{...Y})):L&&(this._fire(q.pointerover,{evt:O,target:this,currentTarget:this,pointerId:J}),this[it+"targetShape"]=null)}),A||this._fire(q.pointermove,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(O){const q=K(O.type),it=I(O.type);if(!q)return;this.setPointersPositions(O);const Q=this[it+"ClickStartShape"],ct=this[it+"ClickEndShape"],A={};let L=!1;this._changedPointerPositions.forEach(W=>{const j=l.getCapturedShape(W.id)||this.getIntersection(W);if(j){if(j.releaseCapture(W.id),A[j._id])return;A[j._id]=!0}const J=W.id,Y={evt:O,pointerId:J};let nt=!1;n.Konva["_"+it+"InDblClickWindow"]?(nt=!0,clearTimeout(this[it+"DblTimeout"])):a.DD.justDragged||(n.Konva["_"+it+"InDblClickWindow"]=!0,clearTimeout(this[it+"DblTimeout"])),this[it+"DblTimeout"]=setTimeout(function(){n.Konva["_"+it+"InDblClickWindow"]=!1},n.Konva.dblClickWindow),j&&j.isListening()?(L=!0,this[it+"ClickEndShape"]=j,j._fireAndBubble(q.pointerup,{...Y}),n.Konva["_"+it+"ListenClick"]&&Q&&Q===j&&(j._fireAndBubble(q.pointerclick,{...Y}),nt&&ct&&ct===j&&j._fireAndBubble(q.pointerdblclick,{...Y}))):(this[it+"ClickEndShape"]=null,n.Konva["_"+it+"ListenClick"]&&this._fire(q.pointerclick,{evt:O,target:this,currentTarget:this,pointerId:J}),nt&&this._fire(q.pointerdblclick,{evt:O,target:this,currentTarget:this,pointerId:J}))}),L||this._fire(q.pointerup,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+it+"ListenClick"]=!1,O.cancelable&&it!=="touch"&&it!=="pointer"&&O.preventDefault()}_contextmenu(O){this.setPointersPositions(O);const q=this.getIntersection(this.getPointerPosition());q&&q.isListening()?q._fireAndBubble(U,{evt:O}):this._fire(U,{evt:O,target:this,currentTarget:this})}_wheel(O){this.setPointersPositions(O);const q=this.getIntersection(this.getPointerPosition());q&&q.isListening()?q._fireAndBubble(b,{evt:O}):this._fire(b,{evt:O,target:this,currentTarget:this})}_pointercancel(O){this.setPointersPositions(O);const q=l.getCapturedShape(O.pointerId)||this.getIntersection(this.getPointerPosition());q&&q._fireAndBubble(S,l.createEvent(O)),l.releaseCapture(O.pointerId)}_lostpointercapture(O){l.releaseCapture(O.pointerId)}setPointersPositions(O){const q=this._getContentPosition();let it=null,Q=null;O=O||window.event,O.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(O.touches,ct=>{this._pointerPositions.push({id:ct.identifier,x:(ct.clientX-q.left)/q.scaleX,y:(ct.clientY-q.top)/q.scaleY})}),Array.prototype.forEach.call(O.changedTouches||O.touches,ct=>{this._changedPointerPositions.push({id:ct.identifier,x:(ct.clientX-q.left)/q.scaleX,y:(ct.clientY-q.top)/q.scaleY})})):(it=(O.clientX-q.left)/q.scaleX,Q=(O.clientY-q.top)/q.scaleY,this.pointerPos={x:it,y:Q},this._pointerPositions=[{x:it,y:Q,id:e.Util._getFirstPointerId(O)}],this._changedPointerPositions=[{x:it,y:Q,id:e.Util._getFirstPointerId(O)}])}_setPointerPosition(O){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(O)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const O=this.content.getBoundingClientRect();return{top:O.top,left:O.left,scaleX:O.width/this.content.clientWidth||1,scaleY:O.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!n.Konva.isBrowser)return;const O=this.container();if(!O)throw"Stage has no container. A container is required.";O.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),O.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(O){O.batchDraw()}),this}}t.Stage=at,at.prototype.nodeType=u,(0,o._registerNode)(at),i.Factory.addGetterSetter(at,"container"),n.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(z=>{z.batchDraw()})})})(wr)),wr}var vi={},Pr={},mo;function Wt(){return mo||(mo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=bt(),i=It(),r=St(),n=Gt(),s=Ct(),a=bt(),o=fl(),l="hasShadow",u="shadowRGBA",c="patternImage",_="linearGradient",p="radialGradient";let d;function f(){return d||(d=i.Util.createCanvasElement().getContext("2d"),d)}t.shapes={};function v(x){const T=this.attrs.fillRule;T?x.fill(T):x.fill()}function C(x){x.stroke()}function w(x){const T=this.attrs.fillRule;T?x.fill(T):x.fill()}function g(x){x.stroke()}function h(){this._clearCache(l)}function m(){this._clearCache(u)}function S(){this._clearCache(c)}function R(){this._clearCache(_)}function D(){this._clearCache(p)}class y extends n.Node{constructor(T){super(T);let k;for(;k=i.Util.getRandomColor(),!(k&&!(k in t.shapes)););this.colorKey=k,t.shapes[k]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const U=new i.Transform;U.translate(this.fillPatternX(),this.fillPatternY()),U.rotate(e.Konva.getAngle(this.fillPatternRotation())),U.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),U.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const H=U.getMatrix(),V=typeof DOMMatrix>"u"?{a:H[0],b:H[1],c:H[2],d:H[3],e:H[4],f:H[5]}:new DOMMatrix(H);k.setTransform(V)}return k}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const k=f(),U=this.fillLinearGradientStartPoint(),H=this.fillLinearGradientEndPoint(),V=k.createLinearGradient(U.x,U.y,H.x,H.y);for(let G=0;G<T.length;G+=2)V.addColorStop(T[G],T[G+1]);return V}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const k=f(),U=this.fillRadialGradientStartPoint(),H=this.fillRadialGradientEndPoint(),V=k.createRadialGradient(U.x,U.y,this.fillRadialGradientStartRadius(),H.x,H.y,this.fillRadialGradientEndRadius());for(let G=0;G<T.length;G+=2)V.addColorStop(T[G],T[G+1]);return V}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=i.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const k=this.getStage();if(!k)return!1;const U=k.bufferHitCanvas;return U.getContext().clear(),this.drawHit(U,void 0,!0),U.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const H=T||this.hasFill(),V=this.hasStroke(),G=this.getAbsoluteOpacity()!==1;if(H&&V&&G)return!0;const $=this.hasShadow(),b=this.shadowForStrokeEnabled();return!!(H&&V&&$&&b)}setStrokeHitEnabled(T){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let k=!1,U=this.getParent();for(;U;){if(U.isCached()){k=!0;break}U=U.getParent()}const H=T.skipTransform,V=T.relativeTo||k&&this.getStage()||void 0,G=this.getSelfRect(),b=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,P=G.width+b,N=G.height+b,F=!T.skipShadow&&this.hasShadow(),I=F?this.shadowOffsetX():0,K=F?this.shadowOffsetY():0,B=P+Math.abs(I),Z=N+Math.abs(K),at=F&&this.shadowBlur()||0,z=B+at*2,O=Z+at*2,q={width:z,height:O,x:-(b/2+at)+Math.min(I,0)+G.x,y:-(b/2+at)+Math.min(K,0)+G.y};return H?q:this._transformedRect(q,V)}drawScene(T,k,U){const H=this.getLayer(),V=T||H.getCanvas(),G=V.getContext(),$=this._getCanvasCache(),b=this.getSceneFunc(),P=this.hasShadow();let N;const F=k===this;if(!this.isVisible()&&!F)return this;if($){G.save();const I=this.getAbsoluteTransform(k).getMatrix();return G.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedSceneCanvas(G),G.restore(),this}if(!b)return this;if(G.save(),this._useBufferCanvas()){N=this.getStage();const I=U||N.bufferCanvas,K=I.getContext();K.clear(),K.save(),K._applyLineJoin(this);const B=this.getAbsoluteTransform(k).getMatrix();K.transform(B[0],B[1],B[2],B[3],B[4],B[5]),b.call(this,K,this),K.restore();const Z=I.pixelRatio;P&&G._applyShadow(this),G._applyOpacity(this),G._applyGlobalCompositeOperation(this),G.drawImage(I._canvas,I.x||0,I.y||0,I.width/Z,I.height/Z)}else{if(G._applyLineJoin(this),!F){const I=this.getAbsoluteTransform(k).getMatrix();G.transform(I[0],I[1],I[2],I[3],I[4],I[5]),G._applyOpacity(this),G._applyGlobalCompositeOperation(this)}P&&G._applyShadow(this),b.call(this,G,this)}return G.restore(),this}drawHit(T,k,U=!1){if(!this.shouldDrawHit(k,U))return this;const H=this.getLayer(),V=T||H.hitCanvas,G=V&&V.getContext(),$=this.hitFunc()||this.sceneFunc(),b=this._getCanvasCache(),P=b&&b.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),P){G.save();const F=this.getAbsoluteTransform(k).getMatrix();return G.transform(F[0],F[1],F[2],F[3],F[4],F[5]),this._drawCachedHitCanvas(G),G.restore(),this}if(!$)return this;if(G.save(),G._applyLineJoin(this),!(this===k)){const F=this.getAbsoluteTransform(k).getMatrix();G.transform(F[0],F[1],F[2],F[3],F[4],F[5])}return $.call(this,G,this),G.restore(),this}drawHitFromCache(T=0){const k=this._getCanvasCache(),U=this._getCachedSceneCanvas(),H=k.hit,V=H.getContext(),G=H.getWidth(),$=H.getHeight();V.clear(),V.drawImage(U._canvas,0,0,G,$);try{const b=V.getImageData(0,0,G,$),P=b.data,N=P.length,F=i.Util._hexToRgb(this.colorKey);for(let I=0;I<N;I+=4)P[I+3]>T?(P[I]=F.r,P[I+1]=F.g,P[I+2]=F.b,P[I+3]=255):P[I+3]=0;V.putImageData(b,0,0)}catch(b){i.Util.error("Unable to draw hit graph from cached scene canvas. "+b.message)}return this}hasPointerCapture(T){return o.hasPointerCapture(T,this)}setPointerCapture(T){o.setPointerCapture(T,this)}releaseCapture(T){o.releaseCapture(T,this)}}t.Shape=y,y.prototype._fillFunc=v,y.prototype._strokeFunc=C,y.prototype._fillFuncHit=w,y.prototype._strokeFuncHit=g,y.prototype._centroid=!1,y.prototype.nodeType="Shape",(0,a._registerNode)(y),y.prototype.eventListeners={},y.prototype.on.call(y.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",h),y.prototype.on.call(y.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),r.Factory.addGetterSetter(y,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(y,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(y,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(y,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(y,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(y,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(y,"lineJoin"),r.Factory.addGetterSetter(y,"lineCap"),r.Factory.addGetterSetter(y,"sceneFunc"),r.Factory.addGetterSetter(y,"hitFunc"),r.Factory.addGetterSetter(y,"dash"),r.Factory.addGetterSetter(y,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(y,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(y,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(y,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"fillPatternImage"),r.Factory.addGetterSetter(y,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(y,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(y,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(y,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(y,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(y,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(y,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(y,"fillEnabled",!0),r.Factory.addGetterSetter(y,"strokeEnabled",!0),r.Factory.addGetterSetter(y,"shadowEnabled",!0),r.Factory.addGetterSetter(y,"dashEnabled",!0),r.Factory.addGetterSetter(y,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(y,"fillPriority","color"),r.Factory.addComponentsGetterSetter(y,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(y,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(y,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(y,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(y,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(y,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(y,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(y,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(y,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(y,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(y,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(y,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(y,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(y,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(y,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(y,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(y,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(y,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(y,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(y,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(y,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(y,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(y,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(y,"fillPatternRotation",0),r.Factory.addGetterSetter(y,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(y,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Pr)),Pr}var _o;function gl(){if(_o)return vi;_o=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Layer=void 0;const t=It(),e=or(),i=Gt(),r=St(),n=sr(),s=Ct(),a=Wt(),o=bt(),l="#",u="beforeDraw",c="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=_.length;let d=class extends e.Container{constructor(v){super(v),this.canvas=new n.SceneCanvas,this.hitCanvas=new n.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(v){return this.getContext().clear(v),this.getHitCanvas().getContext().clear(v),this}setZIndex(v){super.setZIndex(v);const C=this.getStage();return C&&C.content&&(C.content.removeChild(this.getNativeCanvasElement()),v<C.children.length-1?C.content.insertBefore(this.getNativeCanvasElement(),C.children[v+1].getCanvas()._canvas):C.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const C=this.getStage();return!C||!C.content?!1:(C.content.removeChild(this.getNativeCanvasElement()),this.index<C.children.length-1?C.content.insertBefore(this.getNativeCanvasElement(),C.children[this.index+1].getCanvas()._canvas):C.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const v=this.getStage();if(v){const C=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),C[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const v=this.getStage();if(v){const C=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),C[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const v=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),v&&v.parentNode&&t.Util._isInDocument(v)&&v.parentNode.removeChild(v),this}getStage(){return this.parent}setSize({width:v,height:C}){return this.canvas.setSize(v,C),this.hitCanvas.setSize(v,C),this._setSmoothEnabled(),this}_validateAdd(v){const C=v.getType();C!=="Group"&&C!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(v){return v=v||{},v.width=v.width||this.getWidth(),v.height=v.height||this.getHeight(),v.x=v.x!==void 0?v.x:this.x(),v.y=v.y!==void 0?v.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,v)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(v){if(!this.isListening()||!this.isVisible())return null;let C=1,w=!1;for(;;){for(let g=0;g<p;g++){const h=_[g],m=this._getIntersection({x:v.x+h.x*C,y:v.y+h.y*C}),S=m.shape;if(S)return S;if(w=!!m.antialiased,!m.antialiased)break}if(w)C+=1;else return null}}_getIntersection(v){const C=this.hitCanvas.pixelRatio,w=this.hitCanvas.context.getImageData(Math.round(v.x*C),Math.round(v.y*C),1,1).data,g=w[3];if(g===255){const h=t.Util._rgbToHex(w[0],w[1],w[2]),m=a.shapes[l+h];return m?{shape:m}:{antialiased:!0}}else if(g>0)return{antialiased:!0};return{}}drawScene(v,C,w){const g=this.getLayer(),h=v||g&&g.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),e.Container.prototype.drawScene.call(this,h,C,w),this._fire(c,{node:this}),this}drawHit(v,C){const w=this.getLayer(),g=v||w&&w.hitCanvas;return w&&w.clearBeforeDraw()&&w.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,g,C),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(v){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(v)}getHitGraphEnabled(v){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const v=this.parent;!!this.hitCanvas._canvas.parentNode?v.content.removeChild(this.hitCanvas._canvas):v.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return vi.Layer=d,d.prototype.nodeType="Layer",(0,o._registerNode)(d),r.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(d,"clearBeforeDraw",!0),r.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),vi}var bi={},yo;function vu(){if(yo)return bi;yo=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.FastLayer=void 0;const t=It(),e=gl(),i=bt();let r=class extends e.Layer{constructor(s){super(s),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return bi.FastLayer=r,r.prototype.nodeType="FastLayer",(0,i._registerNode)(r),bi}var Si={},vo;function hs(){if(vo)return Si;vo=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Group=void 0;const t=It(),e=or(),i=bt();let r=class extends e.Container{_validateAdd(s){const a=s.getType();a!=="Group"&&a!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Si.Group=r,r.prototype.nodeType="Group",(0,i._registerNode)(r),Si}var Ci={},bo;function cs(){if(bo)return Ci;bo=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Animation=void 0;const t=bt(),e=It(),i=(function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}})();let r=class oi{constructor(s,a){this.id=oi.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=s,this.setLayers(a)}setLayers(s){let a=[];return s&&(a=Array.isArray(s)?s:[s]),this.layers=a,this}getLayers(){return this.layers}addLayer(s){const a=this.layers,o=a.length;for(let l=0;l<o;l++)if(a[l]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const a=oi.animations,o=a.length;for(let l=0;l<o;l++)if(a[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),oi._addAnimation(this),this}stop(){return oi._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const a=s.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===a){this.animations.splice(u,1);break}}static _runFrames(){const s={},a=this.animations;for(let o=0;o<a.length;o++){const l=a[o],u=l.layers,c=l.func;l._updateFrameObject(i());const _=u.length;let p;if(c?p=c.call(l,l.frame)!==!1:p=!0,!!p)for(let d=0;d<_;d++){const f=u[d];f._id!==void 0&&(s[f._id]=f)}}for(const o in s)s.hasOwnProperty(o)&&s[o].batchDraw()}static _animationLoop(){const s=oi;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Ci.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,Ci}var Tr={},So;function bu(){return So||(So=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=It(),i=cs(),r=Gt(),n=bt(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,u=["fill","stroke","shadowColor"];let c=0;class _{constructor(f,v,C,w,g,h,m){this.prop=f,this.propFunc=v,this.begin=w,this._pos=w,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=C,this._change=g-this.begin,this.pause()}fire(f){const v=this[f];v&&v()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===o?this.setTime(f):this.state===l&&this.setTime(this.duration-f)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(f){const v=this,C=f.node,w=C._id,g=f.easing||t.Easings.Linear,h=!!f.yoyo;let m,S;typeof f.duration>"u"?m=.3:f.duration===0?m=.001:m=f.duration,this.node=C,this._id=c++;const R=C.getLayer()||(C instanceof n.Konva.Stage?C.getLayers():null);R||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){v.tween.onEnterFrame()},R),this.tween=new _(S,function(D){v._tweenFunc(D)},g,0,1,m*1e3,h),this._addListeners(),p.attrs[w]||(p.attrs[w]={}),p.attrs[w][this._id]||(p.attrs[w][this._id]={}),p.tweens[w]||(p.tweens[w]={});for(S in f)s[S]===void 0&&this._addAttr(S,f[S]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,v){const C=this.node,w=C._id;let g,h,m,S,R;const D=p.tweens[w][f];D&&delete p.attrs[w][D][f];let y=C.getAttr(f);if(e.Util._isArray(v))if(g=[],h=Math.max(v.length,y.length),f==="points"&&v.length!==y.length&&(v.length>y.length?(S=y,y=e.Util._prepareArrayForTween(y,v,C.closed())):(m=v,v=e.Util._prepareArrayForTween(v,y,C.closed()))),f.indexOf("fill")===0)for(let x=0;x<h;x++)if(x%2===0)g.push(v[x]-y[x]);else{const T=e.Util.colorToRGBA(y[x]);R=e.Util.colorToRGBA(v[x]),y[x]=T,g.push({r:R.r-T.r,g:R.g-T.g,b:R.b-T.b,a:R.a-T.a})}else for(let x=0;x<h;x++)g.push(v[x]-y[x]);else u.indexOf(f)!==-1?(y=e.Util.colorToRGBA(y),R=e.Util.colorToRGBA(v),g={r:R.r-y.r,g:R.g-y.g,b:R.b-y.b,a:R.a-y.a}):g=v-y;p.attrs[w][this._id][f]={start:y,diff:g,end:v,trueEnd:m,trueStart:S},p.tweens[w][f]=this._id}_tweenFunc(f){const v=this.node,C=p.attrs[v._id][this._id];let w,g,h,m,S,R,D,y;for(w in C){if(g=C[w],h=g.start,m=g.diff,y=g.end,e.Util._isArray(h))if(S=[],D=Math.max(h.length,y.length),w.indexOf("fill")===0)for(R=0;R<D;R++)R%2===0?S.push((h[R]||0)+m[R]*f):S.push("rgba("+Math.round(h[R].r+m[R].r*f)+","+Math.round(h[R].g+m[R].g*f)+","+Math.round(h[R].b+m[R].b*f)+","+(h[R].a+m[R].a*f)+")");else for(R=0;R<D;R++)S.push((h[R]||0)+m[R]*f);else u.indexOf(w)!==-1?S="rgba("+Math.round(h.r+m.r*f)+","+Math.round(h.g+m.g*f)+","+Math.round(h.b+m.b*f)+","+(h.a+m.a*f)+")":S=h+m*f;v.setAttr(w,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,v=p.attrs[f._id][this._id];v.points&&v.points.trueEnd&&f.setAttr("points",v.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,v=p.attrs[f._id][this._id];v.points&&v.points.trueStart&&f.points(v.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const f=this.node._id,v=this._id,C=p.tweens[f];this.pause(),this.anim&&this.anim.stop();for(const w in C)delete p.tweens[f][w];delete p.attrs[f][v],p.tweens[f]&&(Object.keys(p.tweens[f]).length===0&&delete p.tweens[f],Object.keys(p.attrs[f]).length===0&&delete p.attrs[f])}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(d){const f=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),f&&f()},new p(d).play()},t.Easings={BackEaseIn(d,f,v,C){return v*(d/=C)*d*((1.70158+1)*d-1.70158)+f},BackEaseOut(d,f,v,C){return v*((d=d/C-1)*d*((1.70158+1)*d+1.70158)+1)+f},BackEaseInOut(d,f,v,C){let w=1.70158;return(d/=C/2)<1?v/2*(d*d*(((w*=1.525)+1)*d-w))+f:v/2*((d-=2)*d*(((w*=1.525)+1)*d+w)+2)+f},ElasticEaseIn(d,f,v,C,w,g){let h=0;return d===0?f:(d/=C)===1?f+v:(g||(g=C*.3),!w||w<Math.abs(v)?(w=v,h=g/4):h=g/(2*Math.PI)*Math.asin(v/w),-(w*Math.pow(2,10*(d-=1))*Math.sin((d*C-h)*(2*Math.PI)/g))+f)},ElasticEaseOut(d,f,v,C,w,g){let h=0;return d===0?f:(d/=C)===1?f+v:(g||(g=C*.3),!w||w<Math.abs(v)?(w=v,h=g/4):h=g/(2*Math.PI)*Math.asin(v/w),w*Math.pow(2,-10*d)*Math.sin((d*C-h)*(2*Math.PI)/g)+v+f)},ElasticEaseInOut(d,f,v,C,w,g){let h=0;return d===0?f:(d/=C/2)===2?f+v:(g||(g=C*(.3*1.5)),!w||w<Math.abs(v)?(w=v,h=g/4):h=g/(2*Math.PI)*Math.asin(v/w),d<1?-.5*(w*Math.pow(2,10*(d-=1))*Math.sin((d*C-h)*(2*Math.PI)/g))+f:w*Math.pow(2,-10*(d-=1))*Math.sin((d*C-h)*(2*Math.PI)/g)*.5+v+f)},BounceEaseOut(d,f,v,C){return(d/=C)<1/2.75?v*(7.5625*d*d)+f:d<2/2.75?v*(7.5625*(d-=1.5/2.75)*d+.75)+f:d<2.5/2.75?v*(7.5625*(d-=2.25/2.75)*d+.9375)+f:v*(7.5625*(d-=2.625/2.75)*d+.984375)+f},BounceEaseIn(d,f,v,C){return v-t.Easings.BounceEaseOut(C-d,0,v,C)+f},BounceEaseInOut(d,f,v,C){return d<C/2?t.Easings.BounceEaseIn(d*2,0,v,C)*.5+f:t.Easings.BounceEaseOut(d*2-C,0,v,C)*.5+v*.5+f},EaseIn(d,f,v,C){return v*(d/=C)*d+f},EaseOut(d,f,v,C){return-v*(d/=C)*(d-2)+f},EaseInOut(d,f,v,C){return(d/=C/2)<1?v/2*d*d+f:-v/2*(--d*(d-2)-1)+f},StrongEaseIn(d,f,v,C){return v*(d/=C)*d*d*d*d+f},StrongEaseOut(d,f,v,C){return v*((d=d/C-1)*d*d*d*d+1)+f},StrongEaseInOut(d,f,v,C){return(d/=C/2)<1?v/2*d*d*d*d*d+f:v/2*((d-=2)*d*d*d*d+2)+f},Linear(d,f,v,C){return v*d/C+f}}})(Tr)),Tr}var Co;function Su(){return Co||(Co=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=bt(),i=It(),r=Gt(),n=or(),s=yu(),a=gl(),o=vu(),l=hs(),u=ls(),c=Wt(),_=cs(),p=bu(),d=dl(),f=sr();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:r.Node,Container:n.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:_.Animation,Tween:p.Tween,Easings:p.Easings,Context:d.Context,Canvas:f.Canvas}),t.default=t.Konva})(vr)),vr}var xi={},xo;function Cu(){if(xo)return xi;xo=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Arc=void 0;const t=St(),e=Wt(),i=bt(),r=Ct(),n=bt();let s=class extends e.Shape{_sceneFunc(o){const l=i.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),c=i.Konva.getAngle(u?360-this.angle():this.angle()),_=Math.cos(Math.min(c,Math.PI)),p=1,d=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),f=Math.sin(Math.min(c,Math.PI/2)),v=_*(_>0?o:l),C=p*l,w=d*(d>0?o:l),g=f*(f>0?l:o);return{x:v,y:u?-1*g:w,width:C-v,height:g-w}}};return xi.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),xi}var wi={},Pi={},wo;function pl(){if(wo)return Pi;wo=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Line=void 0;const t=St(),e=bt(),i=Wt(),r=Ct();function n(o,l,u,c,_,p,d){const f=Math.sqrt(Math.pow(u-o,2)+Math.pow(c-l,2)),v=Math.sqrt(Math.pow(_-u,2)+Math.pow(p-c,2)),C=d*f/(f+v),w=d*v/(f+v),g=u-C*(_-o),h=c-C*(p-l),m=u+w*(_-o),S=c+w*(p-l);return[g,h,m,S]}function s(o,l){const u=o.length,c=[];for(let _=2;_<u-2;_+=2){const p=n(o[_-2],o[_-1],o[_],o[_+1],o[_+2],o[_+3],l);isNaN(p[0])||(c.push(p[0]),c.push(p[1]),c.push(o[_]),c.push(o[_+1]),c.push(p[2]),c.push(p[3]))}return c}let a=class extends i.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),c=u.length,_=this.tension(),p=this.closed(),d=this.bezier();if(!c)return;let f=0;if(l.beginPath(),l.moveTo(u[0],u[1]),_!==0&&c>4){const v=this.getTensionPoints(),C=v.length;for(f=p?0:4,p||l.quadraticCurveTo(v[0],v[1],v[2],v[3]);f<C-2;)l.bezierCurveTo(v[f++],v[f++],v[f++],v[f++],v[f++],v[f++]);p||l.quadraticCurveTo(v[C-2],v[C-1],u[c-2],u[c-1])}else if(d)for(f=2;f<c;)l.bezierCurveTo(u[f++],u[f++],u[f++],u[f++],u[f++],u[f++]);else for(f=2;f<c;f+=2)l.lineTo(u[f],u[f+1]);p?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,c=this.tension(),_=n(l[u-2],l[u-1],l[0],l[1],l[2],l[3],c),p=n(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],c),d=s(l,c);return[_[2],_[3]].concat(d).concat([p[0],p[1],l[u-2],l[u-1],p[2],p[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],c=l[0],_=l[1],p=l[1],d,f;for(let v=0;v<l.length/2;v++)d=l[v*2],f=l[v*2+1],u=Math.min(u,d),c=Math.max(c,d),_=Math.min(_,f),p=Math.max(p,f);return{x:u,y:_,width:c-u,height:p-_}}};return Pi.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(a),t.Factory.addGetterSetter(a,"closed",!1),t.Factory.addGetterSetter(a,"bezier",!1),t.Factory.addGetterSetter(a,"tension",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(a,"points",[],(0,r.getNumberArrayValidator)()),Pi}var Ti={},Rr={},Po;function xu(){return Po||(Po=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,o,l)=>{let u,c;const p=l/2;u=0;for(let d=0;d<20;d++)c=p*t.tValues[20][d]+p,u+=t.cValues[20][d]*r(a,o,c);return p*u};t.getCubicArcLength=e;const i=(a,o,l)=>{l===void 0&&(l=1);const u=a[0]-2*a[1]+a[2],c=o[0]-2*o[1]+o[2],_=2*a[1]-2*a[0],p=2*o[1]-2*o[0],d=4*(u*u+c*c),f=4*(u*_+c*p),v=_*_+p*p;if(d===0)return l*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const C=f/(2*d),w=v/d,g=l+C,h=w-C*C,m=g*g+h>0?Math.sqrt(g*g+h):0,S=C*C+h>0?Math.sqrt(C*C+h):0,R=C+Math.sqrt(C*C+h)!==0?h*Math.log(Math.abs((g+m)/(C+S))):0;return Math.sqrt(d)/2*(g*m-C*S+R)};t.getQuadraticArcLength=i;function r(a,o,l){const u=n(1,l,a),c=n(1,l,o),_=u*u+c*c;return Math.sqrt(_)}const n=(a,o,l)=>{const u=l.length-1;let c,_;if(u===0)return 0;if(a===0){_=0;for(let p=0;p<=u;p++)_+=t.binomialCoefficients[u][p]*Math.pow(1-o,u-p)*Math.pow(o,p)*l[p];return _}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return n(a-1,o,c)}},s=(a,o,l)=>{let u=1,c=a/o,_=(a-l(c))/o,p=0;for(;u>.001;){const d=l(c+_),f=Math.abs(a-d)/o;if(f<u)u=f,c+=_;else{const v=l(c-_),C=Math.abs(a-v)/o;C<u?(u=C,c-=_):_/=2}if(p++,p>500)break}return c};t.t2length=s})(Rr)),Rr}var To;function us(){if(To)return Ti;To=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Path=void 0;const t=St(),e=bt(),i=Wt(),r=xu();let n=class se extends i.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=se.parsePathData(this.data()),this.pathLength=se.getPathLength(this.dataArray)}_sceneFunc(a){const o=this.dataArray;a.beginPath();let l=!1;for(let u=0;u<o.length;u++){const c=o[u].command,_=o[u].points;switch(c){case"L":a.lineTo(_[0],_[1]);break;case"M":a.moveTo(_[0],_[1]);break;case"C":a.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":a.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":const p=_[0],d=_[1],f=_[2],v=_[3],C=_[4],w=_[5],g=_[6],h=_[7],m=f>v?f:v,S=f>v?1:f/v,R=f>v?v/f:1;a.translate(p,d),a.rotate(g),a.scale(S,R),a.arc(0,0,m,C,C+w,1-h),a.scale(1/S,1/R),a.rotate(-g),a.translate(-p,-d);break;case"z":l=!0,a.closePath();break}}!l&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(d){if(d.command==="A"){const f=d.points[4],v=d.points[5],C=d.points[4]+v;let w=Math.PI/180;if(Math.abs(f-C)<w&&(w=Math.abs(f-C)),v<0)for(let g=f-w;g>C;g-=w){const h=se.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],g,0);a.push(h.x,h.y)}else for(let g=f+w;g<C;g+=w){const h=se.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],g,0);a.push(h.x,h.y)}}else if(d.command==="C")for(let f=0;f<=1;f+=.01){const v=se.getPointOnCubicBezier(f,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);a.push(v.x,v.y)}else a=a.concat(d.points)});let o=a[0],l=a[0],u=a[1],c=a[1],_,p;for(let d=0;d<a.length/2;d++)_=a[d*2],p=a[d*2+1],isNaN(_)||(o=Math.min(o,_),l=Math.max(l,_)),isNaN(p)||(u=Math.min(u,p),c=Math.max(c,p));return{x:o,y:u,width:l-o,height:c-u}}getLength(){return this.pathLength}getPointAtLength(a){return se.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,o,l,u){return Math.sqrt((l-a)*(l-a)+(u-o)*(u-o))}static getPathLength(a){let o=0;for(let l=0;l<a.length;++l)o+=a[l].pathLength;return o}static getPointAtLengthOfDataArray(a,o){let l,u=0,c=o.length;if(!c)return null;for(;u<c&&a>o[u].pathLength;)a-=o[u].pathLength,++u;if(u===c)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(a<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const _=o[u],p=_.points;switch(_.command){case"L":return se.getPointOnLine(a,_.start.x,_.start.y,p[0],p[1]);case"C":return se.getPointOnCubicBezier((0,r.t2length)(a,se.getPathLength(o),m=>(0,r.getCubicArcLength)([_.start.x,p[0],p[2],p[4]],[_.start.y,p[1],p[3],p[5]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return se.getPointOnQuadraticBezier((0,r.t2length)(a,se.getPathLength(o),m=>(0,r.getQuadraticArcLength)([_.start.x,p[0],p[2]],[_.start.y,p[1],p[3]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3]);case"A":const d=p[0],f=p[1],v=p[2],C=p[3],w=p[5],g=p[6];let h=p[4];return h+=w*a/_.pathLength,se.getPointOnEllipticalArc(d,f,v,C,h,g)}return null}static getPointOnLine(a,o,l,u,c,_,p){_=_??o,p=p??l;const d=this.getLineLength(o,l,u,c);if(d<1e-10)return{x:o,y:l};if(u===o)return{x:_,y:p+(c>l?a:-a)};const f=(c-l)/(u-o),v=Math.sqrt(a*a/(1+f*f))*(u<o?-1:1),C=f*v;if(Math.abs(p-l-f*(_-o))<1e-10)return{x:_+v,y:p+C};const w=((_-o)*(u-o)+(p-l)*(c-l))/(d*d),g=o+w*(u-o),h=l+w*(c-l),m=this.getLineLength(_,p,g,h),S=Math.sqrt(a*a-m*m),R=Math.sqrt(S*S/(1+f*f))*(u<o?-1:1),D=f*R;return{x:g+R,y:h+D}}static getPointOnCubicBezier(a,o,l,u,c,_,p,d,f){function v(S){return S*S*S}function C(S){return 3*S*S*(1-S)}function w(S){return 3*S*(1-S)*(1-S)}function g(S){return(1-S)*(1-S)*(1-S)}const h=d*v(a)+_*C(a)+u*w(a)+o*g(a),m=f*v(a)+p*C(a)+c*w(a)+l*g(a);return{x:h,y:m}}static getPointOnQuadraticBezier(a,o,l,u,c,_,p){function d(g){return g*g}function f(g){return 2*g*(1-g)}function v(g){return(1-g)*(1-g)}const C=_*d(a)+u*f(a)+o*v(a),w=p*d(a)+c*f(a)+l*v(a);return{x:C,y:w}}static getPointOnEllipticalArc(a,o,l,u,c,_){const p=Math.cos(_),d=Math.sin(_),f={x:l*Math.cos(c),y:u*Math.sin(c)};return{x:a+(f.x*p-f.y*d),y:o+(f.x*d+f.y*p)}}static parsePathData(a){if(!a)return[];let o=a;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let C=0;C<l.length;C++)o=o.replace(new RegExp(l[C],"g"),"|"+l[C]);const u=o.split("|"),c=[],_=[];let p=0,d=0;const f=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let v;for(let C=1;C<u.length;C++){let w=u[C],g=w.charAt(0);for(w=w.slice(1),_.length=0;v=f.exec(w);)_.push(v[0]);const h=[];for(let m=0,S=_.length;m<S;m++){if(_[m]==="00"){h.push(0,0);continue}const R=parseFloat(_[m]);isNaN(R)?h.push(0):h.push(R)}for(;h.length>0&&!isNaN(h[0]);){let m="",S=[];const R=p,D=d;let y,x,T,k,U,H,V,G,$,b;switch(g){case"l":p+=h.shift(),d+=h.shift(),m="L",S.push(p,d);break;case"L":p=h.shift(),d=h.shift(),S.push(p,d);break;case"m":const P=h.shift(),N=h.shift();if(p+=P,d+=N,m="M",c.length>2&&c[c.length-1].command==="z"){for(let F=c.length-2;F>=0;F--)if(c[F].command==="M"){p=c[F].points[0]+P,d=c[F].points[1]+N;break}}S.push(p,d),g="l";break;case"M":p=h.shift(),d=h.shift(),m="M",S.push(p,d),g="L";break;case"h":p+=h.shift(),m="L",S.push(p,d);break;case"H":p=h.shift(),m="L",S.push(p,d);break;case"v":d+=h.shift(),m="L",S.push(p,d);break;case"V":d=h.shift(),m="L",S.push(p,d);break;case"C":S.push(h.shift(),h.shift(),h.shift(),h.shift()),p=h.shift(),d=h.shift(),S.push(p,d);break;case"c":S.push(p+h.shift(),d+h.shift(),p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="C",S.push(p,d);break;case"S":x=p,T=d,y=c[c.length-1],y.command==="C"&&(x=p+(p-y.points[2]),T=d+(d-y.points[3])),S.push(x,T,h.shift(),h.shift()),p=h.shift(),d=h.shift(),m="C",S.push(p,d);break;case"s":x=p,T=d,y=c[c.length-1],y.command==="C"&&(x=p+(p-y.points[2]),T=d+(d-y.points[3])),S.push(x,T,p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="C",S.push(p,d);break;case"Q":S.push(h.shift(),h.shift()),p=h.shift(),d=h.shift(),S.push(p,d);break;case"q":S.push(p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="Q",S.push(p,d);break;case"T":x=p,T=d,y=c[c.length-1],y.command==="Q"&&(x=p+(p-y.points[0]),T=d+(d-y.points[1])),p=h.shift(),d=h.shift(),m="Q",S.push(x,T,p,d);break;case"t":x=p,T=d,y=c[c.length-1],y.command==="Q"&&(x=p+(p-y.points[0]),T=d+(d-y.points[1])),p+=h.shift(),d+=h.shift(),m="Q",S.push(x,T,p,d);break;case"A":k=h.shift(),U=h.shift(),H=h.shift(),V=h.shift(),G=h.shift(),$=p,b=d,p=h.shift(),d=h.shift(),m="A",S=this.convertEndpointToCenterParameterization($,b,p,d,V,G,k,U,H);break;case"a":k=h.shift(),U=h.shift(),H=h.shift(),V=h.shift(),G=h.shift(),$=p,b=d,p+=h.shift(),d+=h.shift(),m="A",S=this.convertEndpointToCenterParameterization($,b,p,d,V,G,k,U,H);break}c.push({command:m||g,points:S,start:{x:R,y:D},pathLength:this.calcLength(R,D,m||g,S)})}(g==="z"||g==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(a,o,l,u){let c,_,p,d;const f=se;switch(l){case"L":return f.getLineLength(a,o,u[0],u[1]);case"C":return(0,r.getCubicArcLength)([a,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,r.getQuadraticArcLength)([a,u[0],u[2]],[o,u[1],u[3]],1);case"A":c=0;const v=u[4],C=u[5],w=u[4]+C;let g=Math.PI/180;if(Math.abs(v-w)<g&&(g=Math.abs(v-w)),_=f.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),C<0)for(d=v-g;d>w;d-=g)p=f.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],d,0),c+=f.getLineLength(_.x,_.y,p.x,p.y),_=p;else for(d=v+g;d<w;d+=g)p=f.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],d,0),c+=f.getLineLength(_.x,_.y,p.x,p.y),_=p;return p=f.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],w,0),c+=f.getLineLength(_.x,_.y,p.x,p.y),c}return 0}static convertEndpointToCenterParameterization(a,o,l,u,c,_,p,d,f){const v=f*(Math.PI/180),C=Math.cos(v)*(a-l)/2+Math.sin(v)*(o-u)/2,w=-1*Math.sin(v)*(a-l)/2+Math.cos(v)*(o-u)/2,g=C*C/(p*p)+w*w/(d*d);g>1&&(p*=Math.sqrt(g),d*=Math.sqrt(g));let h=Math.sqrt((p*p*(d*d)-p*p*(w*w)-d*d*(C*C))/(p*p*(w*w)+d*d*(C*C)));c===_&&(h*=-1),isNaN(h)&&(h=0);const m=h*p*w/d,S=h*-d*C/p,R=(a+l)/2+Math.cos(v)*m-Math.sin(v)*S,D=(o+u)/2+Math.sin(v)*m+Math.cos(v)*S,y=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},x=function(G,$){return(G[0]*$[0]+G[1]*$[1])/(y(G)*y($))},T=function(G,$){return(G[0]*$[1]<G[1]*$[0]?-1:1)*Math.acos(x(G,$))},k=T([1,0],[(C-m)/p,(w-S)/d]),U=[(C-m)/p,(w-S)/d],H=[(-1*C-m)/p,(-1*w-S)/d];let V=T(U,H);return x(U,H)<=-1&&(V=Math.PI),x(U,H)>=1&&(V=0),_===0&&V>0&&(V=V-2*Math.PI),_===1&&V<0&&(V=V+2*Math.PI),[R,D,p,d,k,V,v,_]}};return Ti.Path=n,n.prototype.className="Path",n.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(n),t.Factory.addGetterSetter(n,"data"),Ti}var Ro;function wu(){if(Ro)return wi;Ro=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Arrow=void 0;const t=St(),e=pl(),i=Ct(),r=bt(),n=us();let s=class extends e.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let c=u;const _=this.tension()!==0&&u.length>4;_&&(c=this.getTensionPoints());const p=this.pointerLength(),d=u.length;let f,v;if(_){const g=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],u[d-2],u[d-1]],h=n.Path.calcLength(c[c.length-4],c[c.length-3],"C",g),m=n.Path.getPointOnQuadraticBezier(Math.min(1,1-p/h),g[0],g[1],g[2],g[3],g[4],g[5]);f=u[d-2]-m.x,v=u[d-1]-m.y}else f=u[d-2]-u[d-4],v=u[d-1]-u[d-3];const C=(Math.atan2(v,f)+l)%l,w=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[d-2],u[d-1]),o.rotate(C),o.moveTo(0,0),o.lineTo(-p,w/2),o.lineTo(-p,-w/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),_?(f=(c[0]+c[2])/2-u[0],v=(c[1]+c[3])/2-u[1]):(f=u[2]-u[0],v=u[3]-u[1]),o.rotate((Math.atan2(-v,-f)+l)%l),o.moveTo(0,0),o.lineTo(-p,w/2),o.lineTo(-p,-w/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}};return wi.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerAtBeginning",!1),t.Factory.addGetterSetter(s,"pointerAtEnding",!0),wi}var Ri={},Eo;function Pu(){if(Eo)return Ri;Eo=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Circle=void 0;const t=St(),e=Wt(),i=Ct(),r=bt();let n=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return Ri.Circle=n,n.prototype._centroid=!0,n.prototype.className="Circle",n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),Ri}var Ei={},Ao;function Tu(){if(Ao)return Ei;Ao=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Ellipse=void 0;const t=St(),e=Wt(),i=Ct(),r=bt();let n=class extends e.Shape{_sceneFunc(a){const o=this.radiusX(),l=this.radiusY();a.beginPath(),a.save(),o!==l&&a.scale(1,l/o),a.arc(0,0,o,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return Ei.Ellipse=n,n.prototype.className="Ellipse",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(n),t.Factory.addComponentsGetterSetter(n,"radius",["x","y"]),t.Factory.addGetterSetter(n,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"radiusY",0,(0,i.getNumberValidator)()),Ei}var Ai={},Mo;function Ru(){if(Mo)return Ai;Mo=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Image=void 0;const t=It(),e=St(),i=Wt(),r=bt(),n=Ct();let s=class ml extends i.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),c=this.cornerRadius(),_=this.attrs.image;let p;if(_){const d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?p=[_,this.cropX(),this.cropY(),d,f,0,0,l,u]:p=[_,0,0,l,u]}(this.hasFill()||this.hasStroke()||c)&&(o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),_&&(c&&o.clip(),o.drawImage.apply(o,p))}_hitFunc(o){const l=this.width(),u=this.height(),c=this.cornerRadius();o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const c=t.Util.createImageElement();c.onload=function(){const _=new ml({image:c});l(_)},c.onerror=u,c.crossOrigin="Anonymous",c.src=o}};return Ai.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,n.getNumberValidator)()),Ai}var Xe={},Fo;function Eu(){if(Fo)return Xe;Fo=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Tag=Xe.Label=void 0;const t=St(),e=Wt(),i=hs(),r=Ct(),n=bt(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",o="none",l="up",u="right",c="down",_="left",p=s.length;let d=class extends i.Group{constructor(C){super(C),this.on("add.konva",function(w){this._addListeners(w.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(C){let w=this,g;const h=function(){w._sync()};for(g=0;g<p;g++)C.on(s[g]+a,h)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let C=this.getText(),w=this.getTag(),g,h,m,S,R,D,y;if(C&&w){switch(g=C.width(),h=C.height(),m=w.pointerDirection(),S=w.pointerWidth(),y=w.pointerHeight(),R=0,D=0,m){case l:R=g/2,D=-1*y;break;case u:R=g+S,D=h/2;break;case c:R=g/2,D=h+y;break;case _:R=-1*S,D=h/2;break}w.setAttrs({x:-1*R,y:-1*D,width:g,height:h}),C.setAttrs({x:-1*R,y:-1*D})}}};Xe.Label=d,d.prototype.className="Label",(0,n._registerNode)(d);class f extends e.Shape{_sceneFunc(C){const w=this.width(),g=this.height(),h=this.pointerDirection(),m=this.pointerWidth(),S=this.pointerHeight(),R=this.cornerRadius();let D=0,y=0,x=0,T=0;typeof R=="number"?D=y=x=T=Math.min(R,w/2,g/2):(D=Math.min(R[0]||0,w/2,g/2),y=Math.min(R[1]||0,w/2,g/2),T=Math.min(R[2]||0,w/2,g/2),x=Math.min(R[3]||0,w/2,g/2)),C.beginPath(),C.moveTo(D,0),h===l&&(C.lineTo((w-m)/2,0),C.lineTo(w/2,-1*S),C.lineTo((w+m)/2,0)),C.lineTo(w-y,0),C.arc(w-y,y,y,Math.PI*3/2,0,!1),h===u&&(C.lineTo(w,(g-S)/2),C.lineTo(w+m,g/2),C.lineTo(w,(g+S)/2)),C.lineTo(w,g-T),C.arc(w-T,g-T,T,0,Math.PI/2,!1),h===c&&(C.lineTo((w+m)/2,g),C.lineTo(w/2,g+S),C.lineTo((w-m)/2,g)),C.lineTo(x,g),C.arc(x,g-x,x,Math.PI/2,Math.PI,!1),h===_&&(C.lineTo(0,(g+S)/2),C.lineTo(-1*m,g/2),C.lineTo(0,(g-S)/2)),C.lineTo(0,D),C.arc(D,D,D,Math.PI,Math.PI*3/2,!1),C.closePath(),C.fillStrokeShape(this)}getSelfRect(){let C=0,w=0,g=this.pointerWidth(),h=this.pointerHeight(),m=this.pointerDirection(),S=this.width(),R=this.height();return m===l?(w-=h,R+=h):m===c?R+=h:m===_?(C-=g*1.5,S+=g):m===u&&(S+=g*1.5),{x:C,y:w,width:S,height:R}}}return Xe.Tag=f,f.prototype.className="Tag",(0,n._registerNode)(f),t.Factory.addGetterSetter(f,"pointerDirection",o),t.Factory.addGetterSetter(f,"pointerWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(f,"pointerHeight",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(f,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Xe}var Mi={},Oo;function _l(){if(Oo)return Mi;Oo=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Rect=void 0;const t=St(),e=Wt(),i=bt(),r=It(),n=Ct();let s=class extends e.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),c=this.height();o.beginPath(),l?r.Util.drawRoundedRectPath(o,u,c,l):o.rect(0,0,u,c),o.closePath(),o.fillStrokeShape(this)}};return Mi.Rect=s,s.prototype.className="Rect",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Mi}var Fi={},No;function Au(){if(No)return Fi;No=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.RegularPolygon=void 0;const t=St(),e=Wt(),i=Ct(),r=bt();let n=class extends e.Shape{_sceneFunc(a){const o=this._getPoints();a.beginPath(),a.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)a.lineTo(o[l].x,o[l].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<a;u++)l.push({x:o*Math.sin(u*2*Math.PI/a),y:-1*o*Math.cos(u*2*Math.PI/a)});return l}getSelfRect(){const a=this._getPoints();let o=a[0].x,l=a[0].y,u=a[0].x,c=a[0].y;return a.forEach(_=>{o=Math.min(o,_.x),l=Math.max(l,_.x),u=Math.min(u,_.y),c=Math.max(c,_.y)}),{x:o,y:u,width:l-o,height:c-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Fi.RegularPolygon=n,n.prototype.className="RegularPolygon",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"sides",0,(0,i.getNumberValidator)()),Fi}var Oi={},ko;function Mu(){if(ko)return Oi;ko=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Ring=void 0;const t=St(),e=Wt(),i=Ct(),r=bt(),n=Math.PI*2;let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,n,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),n,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return Oi.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),Oi}var Ni={},Lo;function Fu(){if(Lo)return Ni;Lo=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Sprite=void 0;const t=St(),e=Wt(),i=cs(),r=Ct(),n=bt();let s=class extends e.Shape{constructor(o){super(o),this._updated=!0,this.anim=new i.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],p=this.frameOffsets(),d=_[c+0],f=_[c+1],v=_[c+2],C=_[c+3],w=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,v,C),o.closePath(),o.fillStrokeShape(this)),w)if(p){const g=p[l],h=u*2;o.drawImage(w,d,f,v,C,g[h+0],g[h+1],v,C)}else o.drawImage(w,d,f,v,C,0,0,v,C)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],p=this.frameOffsets(),d=_[c+2],f=_[c+3];if(o.beginPath(),p){const v=p[l],C=u*2;o.rect(v[C+0],v[C+1],d,f)}else o.rect(0,0,d,f);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),c=u[l],_=c.length/4;o<_-1?this.frameIndex(o+1):this.frameIndex(0)}};return Ni.Sprite=s,s.prototype.className="Sprite",(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"animation"),t.Factory.addGetterSetter(s,"animations"),t.Factory.addGetterSetter(s,"frameOffsets"),t.Factory.addGetterSetter(s,"image"),t.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),t.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Ni}var ki={},Io;function Ou(){if(Io)return ki;Io=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Star=void 0;const t=St(),e=Wt(),i=Ct(),r=bt();let n=class extends e.Shape{_sceneFunc(a){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();a.beginPath(),a.moveTo(0,0-l);for(let c=1;c<u*2;c++){const _=c%2===0?l:o,p=_*Math.sin(c*Math.PI/u),d=-1*_*Math.cos(c*Math.PI/u);a.lineTo(p,d)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return ki.Star=n,n.prototype.className="Star",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),ki}var ri={},Do;function yl(){if(Do)return ri;Do=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Text=void 0,ri.stringToArray=a;const t=It(),e=St(),i=Wt(),r=bt(),n=Ct(),s=bt();function a(K){return[...K].reduce((B,Z,at,z)=>{if(new RegExp("\\p{Emoji}","u").test(Z)){const O=z[at+1];O&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(O)?(B.push(Z+O),z[at+1]=""):B.push(Z)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(Z+(z[at+1]||""))?B.push(Z+z[at+1]):at>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Z)?B[B.length-1]+=Z:Z&&B.push(Z);return B},[])}const o="auto",l="center",u="inherit",c="justify",_="Change.konva",p="2d",d="-",f="left",v="text",C="Text",w="top",g="bottom",h="middle",m="normal",S="px ",R=" ",D="right",y="rtl",x="word",T="char",k="none",U="",H=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],V=H.length;function G(K){return K.split(",").map(B=>{B=B.trim();const Z=B.indexOf(" ")>=0,at=B.indexOf('"')>=0||B.indexOf("'")>=0;return Z&&!at&&(B=`"${B}"`),B}).join(", ")}let $;function b(){return $||($=t.Util.createCanvasElement().getContext(p),$)}function P(K){K.fillText(this._partialText,this._partialTextX,this._partialTextY)}function N(K){K.setAttr("miterLimit",2),K.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function F(K){return K=K||{},!K.fillLinearGradientColorStops&&!K.fillRadialGradientColorStops&&!K.fillPatternImage&&(K.fill=K.fill||"black"),K}let I=class extends i.Shape{constructor(B){super(F(B)),this._partialTextX=0,this._partialTextY=0;for(let Z=0;Z<V;Z++)this.on(H[Z]+_,this._setTextData);this._setTextData()}_sceneFunc(B){const Z=this.textArr,at=Z.length;if(!this.text())return;let z=this.padding(),O=this.fontSize(),q=this.lineHeight()*O,it=this.verticalAlign(),Q=this.direction(),ct=0,A=this.align(),L=this.getWidth(),W=this.letterSpacing(),j=this.fill(),J=this.textDecoration(),Y=J.indexOf("underline")!==-1,nt=J.indexOf("line-through")!==-1,st;Q=Q===u?B.direction:Q;let rt=q/2,tt=h;if(r.Konva._fixTextRendering){const lt=this.measureSize("M");tt="alphabetic",rt=(lt.fontBoundingBoxAscent-lt.fontBoundingBoxDescent)/2+q/2}for(Q===y&&B.setAttr("direction",Q),B.setAttr("font",this._getContextFont()),B.setAttr("textBaseline",tt),B.setAttr("textAlign",f),it===h?ct=(this.getHeight()-at*q-z*2)/2:it===g&&(ct=this.getHeight()-at*q-z*2),B.translate(z,ct+z),st=0;st<at;st++){let lt=0,ot=0;const ht=Z[st],dt=ht.text,ft=ht.width,vt=ht.lastInParagraph;if(B.save(),A===D?lt+=L-ft-z*2:A===l&&(lt+=(L-ft-z*2)/2),Y){B.save(),B.beginPath();const _t=r.Konva._fixTextRendering?Math.round(O/4):Math.round(O/2),Rt=lt,xt=rt+ot+_t;B.moveTo(Rt,xt);const Et=A===c&&!vt?L-z*2:ft;B.lineTo(Rt+Math.round(Et),xt),B.lineWidth=O/15;const Ht=this._getLinearGradient();B.strokeStyle=Ht||j,B.stroke(),B.restore()}if(nt){B.save(),B.beginPath();const _t=r.Konva._fixTextRendering?-Math.round(O/4):0;B.moveTo(lt,rt+ot+_t);const Rt=A===c&&!vt?L-z*2:ft;B.lineTo(lt+Math.round(Rt),rt+ot+_t),B.lineWidth=O/15;const xt=this._getLinearGradient();B.strokeStyle=xt||j,B.stroke(),B.restore()}if(Q!==y&&(W!==0||A===c)){const _t=dt.split(" ").length-1,Rt=a(dt);for(let xt=0;xt<Rt.length;xt++){const Et=Rt[xt];Et===" "&&!vt&&A===c&&(lt+=(L-z*2-ft)/_t),this._partialTextX=lt,this._partialTextY=rt+ot,this._partialText=Et,B.fillStrokeShape(this),lt+=this.measureSize(Et).width+W}}else W!==0&&B.setAttr("letterSpacing",`${W}px`),this._partialTextX=lt,this._partialTextY=rt+ot,this._partialText=dt,B.fillStrokeShape(this);B.restore(),at>1&&(rt+=q)}}_hitFunc(B){const Z=this.getWidth(),at=this.getHeight();B.beginPath(),B.rect(0,0,Z,at),B.closePath(),B.fillStrokeShape(this)}setText(B){const Z=t.Util._isString(B)?B:B==null?"":B+"";return this._setAttr(v,Z),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(B){var Z,at,z,O,q,it,Q,ct,A,L,W;let j=b(),J=this.fontSize(),Y;j.save(),j.font=this._getContextFont(),Y=j.measureText(B),j.restore();const nt=J/100;return{actualBoundingBoxAscent:(Z=Y.actualBoundingBoxAscent)!==null&&Z!==void 0?Z:71.58203125*nt,actualBoundingBoxDescent:(at=Y.actualBoundingBoxDescent)!==null&&at!==void 0?at:0,actualBoundingBoxLeft:(z=Y.actualBoundingBoxLeft)!==null&&z!==void 0?z:-7.421875*nt,actualBoundingBoxRight:(O=Y.actualBoundingBoxRight)!==null&&O!==void 0?O:75.732421875*nt,alphabeticBaseline:(q=Y.alphabeticBaseline)!==null&&q!==void 0?q:0,emHeightAscent:(it=Y.emHeightAscent)!==null&&it!==void 0?it:100*nt,emHeightDescent:(Q=Y.emHeightDescent)!==null&&Q!==void 0?Q:-20*nt,fontBoundingBoxAscent:(ct=Y.fontBoundingBoxAscent)!==null&&ct!==void 0?ct:91*nt,fontBoundingBoxDescent:(A=Y.fontBoundingBoxDescent)!==null&&A!==void 0?A:21*nt,hangingBaseline:(L=Y.hangingBaseline)!==null&&L!==void 0?L:72.80000305175781*nt,ideographicBaseline:(W=Y.ideographicBaseline)!==null&&W!==void 0?W:-21*nt,width:Y.width,height:J}}_getContextFont(){return this.fontStyle()+R+this.fontVariant()+R+(this.fontSize()+S)+G(this.fontFamily())}_addTextLine(B){this.align()===c&&(B=B.trim());const at=this._getTextWidth(B);return this.textArr.push({text:B,width:at,lastInParagraph:!1})}_getTextWidth(B){const Z=this.letterSpacing(),at=B.length;return b().measureText(B).width+Z*at}_setTextData(){let B=this.text().split(`
`),Z=+this.fontSize(),at=0,z=this.lineHeight()*Z,O=this.attrs.width,q=this.attrs.height,it=O!==o&&O!==void 0,Q=q!==o&&q!==void 0,ct=this.padding(),A=O-ct*2,L=q-ct*2,W=0,j=this.wrap(),J=j!==k,Y=j!==T&&J,nt=this.ellipsis();this.textArr=[],b().font=this._getContextFont();const st=nt?this._getTextWidth(U):0;for(let rt=0,tt=B.length;rt<tt;++rt){let lt=B[rt],ot=this._getTextWidth(lt);if(it&&ot>A)for(;lt.length>0;){let ht=0,dt=a(lt).length,ft="",vt=0;for(;ht<dt;){const _t=ht+dt>>>1,Rt=a(lt),xt=Rt.slice(0,_t+1).join(""),Et=this._getTextWidth(xt);(nt&&Q&&W+z>L?Et+st:Et)<=A?(ht=_t+1,ft=xt,vt=Et):dt=_t}if(ft){if(Y){const xt=a(lt),Et=a(ft),Ht=xt[Et.length],kt=Ht===R||Ht===d;let me;if(kt&&vt<=A)me=Et.length;else{const qt=Et.lastIndexOf(R),Zt=Et.lastIndexOf(d);me=Math.max(qt,Zt)+1}me>0&&(ht=me,ft=xt.slice(0,ht).join(""),vt=this._getTextWidth(ft))}if(ft=ft.trimRight(),this._addTextLine(ft),at=Math.max(at,vt),W+=z,this._shouldHandleEllipsis(W)){this._tryToAddEllipsisToLastLine();break}if(lt=a(lt).slice(ht).join("").trimLeft(),lt.length>0&&(ot=this._getTextWidth(lt),ot<=A)){this._addTextLine(lt),W+=z,at=Math.max(at,ot);break}}else break}else this._addTextLine(lt),W+=z,at=Math.max(at,ot),this._shouldHandleEllipsis(W)&&rt<tt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Q&&W+z>L)break}this.textHeight=Z,this.textWidth=at}_shouldHandleEllipsis(B){const Z=+this.fontSize(),at=this.lineHeight()*Z,z=this.attrs.height,O=z!==o&&z!==void 0,q=this.padding(),it=z-q*2;return!(this.wrap()!==k)||O&&B+at>it}_tryToAddEllipsisToLastLine(){const B=this.attrs.width,Z=B!==o&&B!==void 0,at=this.padding(),z=B-at*2,O=this.ellipsis(),q=this.textArr[this.textArr.length-1];!q||!O||(Z&&(this._getTextWidth(q.text+U)<z||(q.text=q.text.slice(0,q.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(q.text+U))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const B=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,Z=this.hasShadow();return B&&Z?!0:super._useBufferCanvas()}};return ri.Text=I,I.prototype._fillFunc=P,I.prototype._strokeFunc=N,I.prototype.className=C,I.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(I),e.Factory.overWriteSetter(I,"width",(0,n.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(I,"height",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(I,"direction",u),e.Factory.addGetterSetter(I,"fontFamily","Arial"),e.Factory.addGetterSetter(I,"fontSize",12,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"fontStyle",m),e.Factory.addGetterSetter(I,"fontVariant",m),e.Factory.addGetterSetter(I,"padding",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"align",f),e.Factory.addGetterSetter(I,"verticalAlign",w),e.Factory.addGetterSetter(I,"lineHeight",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"wrap",x),e.Factory.addGetterSetter(I,"ellipsis",!1,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(I,"letterSpacing",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"text","",(0,n.getStringValidator)()),e.Factory.addGetterSetter(I,"textDecoration",""),ri}var Li={},Go;function Nu(){if(Go)return Li;Go=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.TextPath=void 0;const t=It(),e=St(),i=Wt(),r=us(),n=yl(),s=Ct(),a=bt(),o="",l="normal";function u(p){p.fillText(this.partialText,0,0)}function c(p){p.strokeText(this.partialText,0,0)}let _=class extends i.Shape{constructor(d){super(d),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(d){if(!this.attrs.data)return null;const f=this.pathLength;return d-1>f?null:r.Path.getPointAtLengthOfDataArray(d,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(d){d.setAttr("font",this._getContextFont()),d.setAttr("textBaseline",this.textBaseline()),d.setAttr("textAlign","left"),d.save();const f=this.textDecoration(),v=this.fill(),C=this.fontSize(),w=this.glyphInfo;f==="underline"&&d.beginPath();for(let g=0;g<w.length;g++){d.save();const h=w[g].p0;d.translate(h.x,h.y),d.rotate(w[g].rotation),this.partialText=w[g].text,d.fillStrokeShape(this),f==="underline"&&(g===0&&d.moveTo(0,C/2+1),d.lineTo(C,C/2+1)),d.restore()}f==="underline"&&(d.strokeStyle=v,d.lineWidth=C/20,d.stroke()),d.restore()}_hitFunc(d){d.beginPath();const f=this.glyphInfo;if(f.length>=1){const v=f[0].p0;d.moveTo(v.x,v.y)}for(let v=0;v<f.length;v++){const C=f[v].p1;d.lineTo(C.x,C.y)}d.setAttr("lineWidth",this.fontSize()),d.setAttr("strokeStyle",this.colorKey),d.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(d){return n.Text.prototype.setText.call(this,d)}_getContextFont(){return n.Text.prototype._getContextFont.call(this)}_getTextSize(d){const v=this.dummyCanvas.getContext("2d");v.save(),v.font=this._getContextFont();const C=v.measureText(d);return v.restore(),{width:C.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:d,height:f}=this._getTextSize(this.attrs.text);if(this.textWidth=d,this.textHeight=f,this.glyphInfo=[],!this.attrs.data)return null;const v=this.letterSpacing(),C=this.align(),w=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*v,0);let h=0;C==="center"&&(h=Math.max(0,this.pathLength/2-g/2)),C==="right"&&(h=Math.max(0,this.pathLength-g));const m=(0,n.stringToArray)(this.text());let S=h;for(let R=0;R<m.length;R++){const D=this._getPointAtLength(S);if(!D)return;let y=this._getTextSize(m[R]).width+v;if(m[R]===" "&&C==="justify"){const V=this.text().split(" ").length-1;y+=(this.pathLength-g)/V}const x=this._getPointAtLength(S+y);if(!x)return;const T=r.Path.getLineLength(D.x,D.y,x.x,x.y);let k=0;if(w)try{k=w(m[R-1],m[R])*this.fontSize()}catch{k=0}D.x+=k,x.x+=k,this.textWidth+=k;const U=r.Path.getPointOnLine(k+T/2,D.x,D.y,x.x,x.y),H=Math.atan2(x.y-D.y,x.x-D.x);this.glyphInfo.push({transposeX:U.x,transposeY:U.y,text:m[R],rotation:H,p0:D,p1:x}),S+=y}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const d=[];this.glyphInfo.forEach(function(S){d.push(S.p0.x),d.push(S.p0.y),d.push(S.p1.x),d.push(S.p1.y)});let f=d[0]||0,v=d[0]||0,C=d[1]||0,w=d[1]||0,g,h;for(let S=0;S<d.length/2;S++)g=d[S*2],h=d[S*2+1],f=Math.min(f,g),v=Math.max(v,g),C=Math.min(C,h),w=Math.max(w,h);const m=this.fontSize();return{x:f-m/2,y:C-m/2,width:v-f+m,height:w-C+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Li.TextPath=_,_.prototype._fillFunc=u,_.prototype._strokeFunc=c,_.prototype._fillFuncHit=u,_.prototype._strokeFuncHit=c,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",o),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),Li}var Ii={},Uo;function ku(){if(Uo)return Ii;Uo=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Transformer=void 0;const t=It(),e=St(),i=Gt(),r=Wt(),n=_l(),s=hs(),a=bt(),o=Ct(),l=bt(),u="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(y=>y+`.${u}`).join(" "),_="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],d={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},f="ontouchstart"in a.Konva._global;function v(y,x,T){if(y==="rotater")return T;x+=t.Util.degToRad(d[y]||0);const k=(t.Util.radToDeg(x)%360+360)%360;return t.Util._inRange(k,315+22.5,360)||t.Util._inRange(k,0,22.5)?"ns-resize":t.Util._inRange(k,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(k,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(k,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(k,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(k,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(k,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(k,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+k),"pointer")}const C=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function w(y){return{x:y.x+y.width/2*Math.cos(y.rotation)+y.height/2*Math.sin(-y.rotation),y:y.y+y.height/2*Math.cos(y.rotation)+y.width/2*Math.sin(y.rotation)}}function g(y,x,T){const k=T.x+(y.x-T.x)*Math.cos(x)-(y.y-T.y)*Math.sin(x),U=T.y+(y.x-T.x)*Math.sin(x)+(y.y-T.y)*Math.cos(x);return{...y,rotation:y.rotation+x,x:k,y:U}}function h(y,x){const T=w(y);return g(y,x,T)}function m(y,x,T){let k=x;for(let U=0;U<y.length;U++){const H=a.Konva.getAngle(y[U]),V=Math.abs(H-x)%(Math.PI*2);Math.min(V,Math.PI*2-V)<T&&(k=H)}return k}let S=0,R=class extends s.Group{constructor(x){super(x),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(x){return this.setNode(x),this}setNode(x){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([x])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(x=[]){this._nodes&&this._nodes.length&&this.detach();const T=x.filter(U=>U.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=x=T,x.length===1&&this.useSingleNodeRotation()?this.rotation(x[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(U=>{const H=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(U._attrsAffectingSize.length){const V=U._attrsAffectingSize.map(G=>G+"Change."+this._getEventNamespace()).join(" ");U.on(V,H)}U.on(p.map(V=>V+`.${this._getEventNamespace()}`).join(" "),H),U.on(`absoluteTransformChange.${this._getEventNamespace()}`,H),this._proxyDrag(U)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(x){let T;x.on(`dragstart.${this._getEventNamespace()}`,k=>{T=x.getAbsolutePosition(),!this.isDragging()&&x!==this.findOne(".back")&&this.startDrag(k,!1)}),x.on(`dragmove.${this._getEventNamespace()}`,k=>{if(!T)return;const U=x.getAbsolutePosition(),H=U.x-T.x,V=U.y-T.y;this.nodes().forEach(G=>{if(G===x||G.isDragging())return;const $=G.getAbsolutePosition();G.setAbsolutePosition({x:$.x+H,y:$.y+V}),G.startDrag(k)}),T=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(x=>{x.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(x,T=this.rotation(),k){const U=x.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),H=x.getAbsoluteScale(k),V=x.getAbsolutePosition(k),G=U.x*H.x-x.offsetX()*H.x,$=U.y*H.y-x.offsetY()*H.y,b=(a.Konva.getAngle(x.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),P={x:V.x+G*Math.cos(b)+$*Math.sin(-b),y:V.y+$*Math.cos(b)+G*Math.sin(b),width:U.width*H.x,height:U.height*H.y,rotation:b};return g(P,-a.Konva.getAngle(T),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const T=[];this.nodes().map(b=>{const P=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),N=[{x:P.x,y:P.y},{x:P.x+P.width,y:P.y},{x:P.x+P.width,y:P.y+P.height},{x:P.x,y:P.y+P.height}],F=b.getAbsoluteTransform();N.forEach(function(I){const K=F.point(I);T.push(K)})});const k=new t.Transform;k.rotate(-a.Konva.getAngle(this.rotation()));let U=1/0,H=1/0,V=-1/0,G=-1/0;T.forEach(function(b){const P=k.point(b);U===void 0&&(U=V=P.x,H=G=P.y),U=Math.min(U,P.x),H=Math.min(H,P.y),V=Math.max(V,P.x),G=Math.max(G,P.y)}),k.invert();const $=k.point({x:U,y:H});return{x:$.x,y:$.y,width:V-U,height:G-H,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),C.forEach(x=>{this._createAnchor(x)}),this._createAnchor("rotater")}_createAnchor(x){const T=new n.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:x+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:f?10:"auto"}),k=this;T.on("mousedown touchstart",function(U){k._handleMouseDown(U)}),T.on("dragstart",U=>{T.stopDrag(),U.cancelBubble=!0}),T.on("dragend",U=>{U.cancelBubble=!0}),T.on("mouseenter",()=>{const U=a.Konva.getAngle(this.rotation()),H=this.rotateAnchorCursor(),V=v(x,U,H);T.getStage().content&&(T.getStage().content.style.cursor=V),this._cursorChange=!0}),T.on("mouseout",()=>{T.getStage().content&&(T.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(T)}_createBack(){const x=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(T,k){const U=k.getParent(),H=U.padding();T.beginPath(),T.rect(-H,-H,k.width()+H*2,k.height()+H*2),T.moveTo(k.width()/2,-H),U.rotateEnabled()&&U.rotateLineVisible()&&T.lineTo(k.width()/2,-U.rotateAnchorOffset()*t.Util._sign(k.height())-H),T.fillStrokeShape(k)},hitFunc:(T,k)=>{if(!this.shouldOverdrawWholeArea())return;const U=this.padding();T.beginPath(),T.rect(-U,-U,k.width()+U*2,k.height()+U*2),T.fillStrokeShape(k)}});this.add(x),this._proxyDrag(x),x.on("dragstart",T=>{T.cancelBubble=!0}),x.on("dragmove",T=>{T.cancelBubble=!0}),x.on("dragend",T=>{T.cancelBubble=!0}),this.on("dragmove",T=>{this.update()})}_handleMouseDown(x){if(this._transforming)return;this._movingAnchorName=x.target.name().split(" ")[0];const T=this._getNodeRect(),k=T.width,U=T.height,H=Math.sqrt(Math.pow(k,2)+Math.pow(U,2));this.sin=Math.abs(U/H),this.cos=Math.abs(k/H),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const V=x.target.getAbsolutePosition(),G=x.target.getStage().getPointerPosition();this._anchorDragOffset={x:G.x-V.x,y:G.y-V.y},S++,this._fire("transformstart",{evt:x.evt,target:this.getNode()}),this._nodes.forEach($=>{$._fire("transformstart",{evt:x.evt,target:$})})}_handleMouseMove(x){let T,k,U;const H=this.findOne("."+this._movingAnchorName),V=H.getStage();V.setPointersPositions(x);const G=V.getPointerPosition();let $={x:G.x-this._anchorDragOffset.x,y:G.y-this._anchorDragOffset.y};const b=H.getAbsolutePosition();this.anchorDragBoundFunc()&&($=this.anchorDragBoundFunc()(b,$,x)),H.setAbsolutePosition($);const P=H.getAbsolutePosition();if(b.x===P.x&&b.y===P.y)return;if(this._movingAnchorName==="rotater"){const z=this._getNodeRect();T=H.x()-z.width/2,k=-H.y()+z.height/2;let O=Math.atan2(-k,T)+Math.PI/2;z.height<0&&(O-=Math.PI);const it=a.Konva.getAngle(this.rotation())+O,Q=a.Konva.getAngle(this.rotationSnapTolerance()),A=m(this.rotationSnaps(),it,Q)-z.rotation,L=h(z,A);this._fitNodesInto(L,x);return}const N=this.shiftBehavior();let F;N==="inverted"?F=this.keepRatio()&&!x.shiftKey:N==="none"?F=this.keepRatio():F=this.keepRatio()||x.shiftKey;let I=this.centeredScaling()||x.altKey;if(this._movingAnchorName==="top-left"){if(F){const z=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};U=Math.sqrt(Math.pow(z.x-H.x(),2)+Math.pow(z.y-H.y(),2));const O=this.findOne(".top-left").x()>z.x?-1:1,q=this.findOne(".top-left").y()>z.y?-1:1;T=U*this.cos*O,k=U*this.sin*q,this.findOne(".top-left").x(z.x-T),this.findOne(".top-left").y(z.y-k)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(H.y());else if(this._movingAnchorName==="top-right"){if(F){const z=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};U=Math.sqrt(Math.pow(H.x()-z.x,2)+Math.pow(z.y-H.y(),2));const O=this.findOne(".top-right").x()<z.x?-1:1,q=this.findOne(".top-right").y()>z.y?-1:1;T=U*this.cos*O,k=U*this.sin*q,this.findOne(".top-right").x(z.x+T),this.findOne(".top-right").y(z.y-k)}var K=H.position();this.findOne(".top-left").y(K.y),this.findOne(".bottom-right").x(K.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(H.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(H.x());else if(this._movingAnchorName==="bottom-left"){if(F){const z=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};U=Math.sqrt(Math.pow(z.x-H.x(),2)+Math.pow(H.y()-z.y,2));const O=z.x<H.x()?-1:1,q=H.y()<z.y?-1:1;T=U*this.cos*O,k=U*this.sin*q,H.x(z.x-T),H.y(z.y+k)}K=H.position(),this.findOne(".top-left").x(K.x),this.findOne(".bottom-right").y(K.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(H.y());else if(this._movingAnchorName==="bottom-right"){if(F){const z=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};U=Math.sqrt(Math.pow(H.x()-z.x,2)+Math.pow(H.y()-z.y,2));const O=this.findOne(".bottom-right").x()<z.x?-1:1,q=this.findOne(".bottom-right").y()<z.y?-1:1;T=U*this.cos*O,k=U*this.sin*q,this.findOne(".bottom-right").x(z.x+T),this.findOne(".bottom-right").y(z.y+k)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(I=this.centeredScaling()||x.altKey,I){const z=this.findOne(".top-left"),O=this.findOne(".bottom-right"),q=z.x(),it=z.y(),Q=this.getWidth()-O.x(),ct=this.getHeight()-O.y();O.move({x:-q,y:-it}),z.move({x:Q,y:ct})}const B=this.findOne(".top-left").getAbsolutePosition();T=B.x,k=B.y;const Z=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),at=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:T,y:k,width:Z,height:at,rotation:a.Konva.getAngle(this.rotation())},x)}_handleMouseUp(x){this._removeEvents(x)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(x){var T;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const k=this.getNode();S--,this._fire("transformend",{evt:x,target:k}),(T=this.getLayer())===null||T===void 0||T.batchDraw(),k&&this._nodes.forEach(U=>{var H;U._fire("transformend",{evt:x,target:U}),(H=U.getLayer())===null||H===void 0||H.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(x,T){const k=this._getNodeRect(),U=1;if(t.Util._inRange(x.width,-this.padding()*2-U,U)){this.update();return}if(t.Util._inRange(x.height,-this.padding()*2-U,U)){this.update();return}const H=new t.Transform;if(H.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&x.width<0&&this._movingAnchorName.indexOf("left")>=0){const F=H.point({x:-this.padding()*2,y:0});x.x+=F.x,x.y+=F.y,x.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y}else if(this._movingAnchorName&&x.width<0&&this._movingAnchorName.indexOf("right")>=0){const F=H.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,x.width+=this.padding()*2}if(this._movingAnchorName&&x.height<0&&this._movingAnchorName.indexOf("top")>=0){const F=H.point({x:0,y:-this.padding()*2});x.x+=F.x,x.y+=F.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,x.height+=this.padding()*2}else if(this._movingAnchorName&&x.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const F=H.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,x.height+=this.padding()*2}if(this.boundBoxFunc()){const F=this.boundBoxFunc()(k,x);F?x=F:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const V=1e7,G=new t.Transform;G.translate(k.x,k.y),G.rotate(k.rotation),G.scale(k.width/V,k.height/V);const $=new t.Transform,b=x.width/V,P=x.height/V;this.flipEnabled()===!1?($.translate(x.x,x.y),$.rotate(x.rotation),$.translate(x.width<0?x.width:0,x.height<0?x.height:0),$.scale(Math.abs(b),Math.abs(P))):($.translate(x.x,x.y),$.rotate(x.rotation),$.scale(b,P));const N=$.multiply(G.invert());this._nodes.forEach(F=>{var I;const K=F.getParent().getAbsoluteTransform(),B=F.getTransform().copy();B.translate(F.offsetX(),F.offsetY());const Z=new t.Transform;Z.multiply(K.copy().invert()).multiply(N).multiply(K).multiply(B);const at=Z.decompose();F.setAttrs(at),(I=F.getLayer())===null||I===void 0||I.batchDraw()}),this.rotation(t.Util._getRotation(x.rotation)),this._nodes.forEach(F=>{this._fire("transform",{evt:T,target:F}),F._fire("transform",{evt:T,target:F})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(x,T){this.findOne(x).setAttrs(T)}update(){var x;const T=this._getNodeRect();this.rotation(t.Util._getRotation(T.rotation));const k=T.width,U=T.height,H=this.enabledAnchors(),V=this.resizeEnabled(),G=this.padding(),$=this.anchorSize(),b=this.find("._anchor");b.forEach(N=>{N.setAttrs({width:$,height:$,offsetX:$/2,offsetY:$/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:$/2+G,offsetY:$/2+G,visible:V&&H.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:k/2,y:0,offsetY:$/2+G,visible:V&&H.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:k,y:0,offsetX:$/2-G,offsetY:$/2+G,visible:V&&H.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:U/2,offsetX:$/2+G,visible:V&&H.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:k,y:U/2,offsetX:$/2-G,visible:V&&H.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:U,offsetX:$/2+G,offsetY:$/2-G,visible:V&&H.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:k/2,y:U,offsetY:$/2-G,visible:V&&H.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:k,y:U,offsetX:$/2-G,offsetY:$/2-G,visible:V&&H.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:k/2,y:-this.rotateAnchorOffset()*t.Util._sign(U)-G,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:k,height:U,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const P=this.anchorStyleFunc();P&&b.forEach(N=>{P(N)}),(x=this.getLayer())===null||x===void 0||x.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const x=this.findOne("."+this._movingAnchorName);x&&x.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(x){return i.Node.prototype.clone.call(this,x)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ii.Transformer=R,R.isTransforming=()=>S>0;function D(y){return y instanceof Array||t.Util.warn("enabledAnchors value should be an array"),y instanceof Array&&y.forEach(function(x){C.indexOf(x)===-1&&t.Util.warn("Unknown anchor name: "+x+". Available names are: "+C.join(", "))}),y||[]}return R.prototype.className="Transformer",(0,l._registerNode)(R),e.Factory.addGetterSetter(R,"enabledAnchors",C,D),e.Factory.addGetterSetter(R,"flipEnabled",!0,(0,o.getBooleanValidator)()),e.Factory.addGetterSetter(R,"resizeEnabled",!0),e.Factory.addGetterSetter(R,"anchorSize",10,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateEnabled",!0),e.Factory.addGetterSetter(R,"rotateLineVisible",!0),e.Factory.addGetterSetter(R,"rotationSnaps",[]),e.Factory.addGetterSetter(R,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(R,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderEnabled",!0),e.Factory.addGetterSetter(R,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"anchorFill","white"),e.Factory.addGetterSetter(R,"anchorCornerRadius",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"borderStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderDash"),e.Factory.addGetterSetter(R,"keepRatio",!0),e.Factory.addGetterSetter(R,"shiftBehavior","default"),e.Factory.addGetterSetter(R,"centeredScaling",!1),e.Factory.addGetterSetter(R,"ignoreStroke",!1),e.Factory.addGetterSetter(R,"padding",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"nodes"),e.Factory.addGetterSetter(R,"node"),e.Factory.addGetterSetter(R,"boundBoxFunc"),e.Factory.addGetterSetter(R,"anchorDragBoundFunc"),e.Factory.addGetterSetter(R,"anchorStyleFunc"),e.Factory.addGetterSetter(R,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(R,"useSingleNodeRotation",!0),e.Factory.backCompat(R,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ii}var Di={},Bo;function Lu(){if(Bo)return Di;Bo=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Wedge=void 0;const t=St(),e=Wt(),i=bt(),r=Ct(),n=bt();let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return Di.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1),t.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Di}var Gi={},Ho;function Iu(){if(Ho)return Gi;Ho=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Blur=void 0;const t=St(),e=Gt(),i=Ct();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(l,u){const c=l.data,_=l.width,p=l.height;let d,f,v,C,w,g,h,m,S,R,D,y,x,T,k,U,H,V,G,$;const b=u+u+1,P=_-1,N=p-1,F=u+1,I=F*(F+1)/2,K=new r,B=n[u],Z=s[u];let at=null,z=K,O=null,q=null;for(let it=1;it<b;it++)z=z.next=new r,it===F&&(at=z);z.next=K,v=f=0;for(let it=0;it<p;it++){y=x=T=k=C=w=g=h=0,m=F*(U=c[f]),S=F*(H=c[f+1]),R=F*(V=c[f+2]),D=F*(G=c[f+3]),C+=I*U,w+=I*H,g+=I*V,h+=I*G,z=K;for(let Q=0;Q<F;Q++)z.r=U,z.g=H,z.b=V,z.a=G,z=z.next;for(let Q=1;Q<F;Q++)d=f+((P<Q?P:Q)<<2),C+=(z.r=U=c[d])*($=F-Q),w+=(z.g=H=c[d+1])*$,g+=(z.b=V=c[d+2])*$,h+=(z.a=G=c[d+3])*$,y+=U,x+=H,T+=V,k+=G,z=z.next;O=K,q=at;for(let Q=0;Q<_;Q++)c[f+3]=G=h*B>>Z,G!==0?(G=255/G,c[f]=(C*B>>Z)*G,c[f+1]=(w*B>>Z)*G,c[f+2]=(g*B>>Z)*G):c[f]=c[f+1]=c[f+2]=0,C-=m,w-=S,g-=R,h-=D,m-=O.r,S-=O.g,R-=O.b,D-=O.a,d=v+((d=Q+u+1)<P?d:P)<<2,y+=O.r=c[d],x+=O.g=c[d+1],T+=O.b=c[d+2],k+=O.a=c[d+3],C+=y,w+=x,g+=T,h+=k,O=O.next,m+=U=q.r,S+=H=q.g,R+=V=q.b,D+=G=q.a,y-=U,x-=H,T-=V,k-=G,q=q.next,f+=4;v+=_}for(let it=0;it<_;it++){x=T=k=y=w=g=h=C=0,f=it<<2,m=F*(U=c[f]),S=F*(H=c[f+1]),R=F*(V=c[f+2]),D=F*(G=c[f+3]),C+=I*U,w+=I*H,g+=I*V,h+=I*G,z=K;for(let ct=0;ct<F;ct++)z.r=U,z.g=H,z.b=V,z.a=G,z=z.next;let Q=_;for(let ct=1;ct<=u;ct++)f=Q+it<<2,C+=(z.r=U=c[f])*($=F-ct),w+=(z.g=H=c[f+1])*$,g+=(z.b=V=c[f+2])*$,h+=(z.a=G=c[f+3])*$,y+=U,x+=H,T+=V,k+=G,z=z.next,ct<N&&(Q+=_);f=it,O=K,q=at;for(let ct=0;ct<p;ct++)d=f<<2,c[d+3]=G=h*B>>Z,G>0?(G=255/G,c[d]=(C*B>>Z)*G,c[d+1]=(w*B>>Z)*G,c[d+2]=(g*B>>Z)*G):c[d]=c[d+1]=c[d+2]=0,C-=m,w-=S,g-=R,h-=D,m-=O.r,S-=O.g,R-=O.b,D-=O.a,d=it+((d=ct+F)<N?d:N)*_<<2,C+=y+=O.r=c[d],w+=x+=O.g=c[d+1],g+=T+=O.b=c[d+2],h+=k+=O.a=c[d+3],O=O.next,m+=U=q.r,S+=H=q.g,R+=V=q.b,D+=G=q.a,y-=U,x-=H,T-=V,k-=G,q=q.next,f+=_}}const o=function(u){const c=Math.round(this.blurRadius());c>0&&a(u,c)};return Gi.Blur=o,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Gi}var Ui={},Vo;function Du(){if(Vo)return Ui;Vo=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Brighten=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=this.brightness()*255,a=n.data,o=a.length;for(let l=0;l<o;l+=4)a[l]+=s,a[l+1]+=s,a[l+2]+=s};return Ui.Brighten=r,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ui}var Bi={},Wo;function Gu(){if(Wo)return Bi;Wo=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Contrast=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=Math.pow((this.contrast()+100)/100,2),a=n.data,o=a.length;let l=150,u=150,c=150;for(let _=0;_<o;_+=4)l=a[_],u=a[_+1],c=a[_+2],l/=255,l-=.5,l*=s,l+=.5,l*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,c=c<0?0:c>255?255:c,a[_]=l,a[_+1]=u,a[_+2]=c};return Bi.Contrast=r,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Bi}var Hi={},qo;function Uu(){if(qo)return Hi;qo=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Emboss=void 0;const t=St(),e=Gt(),i=It(),r=Ct(),n=function(s){const a=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),c=s.data,_=s.width,p=s.height,d=_*4;let f=0,v=0,C=p;switch(l){case"top-left":f=-1,v=-1;break;case"top":f=-1,v=0;break;case"top-right":f=-1,v=1;break;case"right":f=0,v=1;break;case"bottom-right":f=1,v=1;break;case"bottom":f=1,v=0;break;case"bottom-left":f=1,v=-1;break;case"left":f=0,v=-1;break;default:i.Util.error("Unknown emboss direction: "+l)}do{const w=(C-1)*d;let g=f;C+g<1&&(g=0),C+g>p&&(g=0);const h=(C-1+g)*_*4;let m=_;do{const S=w+(m-1)*4;let R=v;m+R<1&&(R=0),m+R>_&&(R=0);const D=h+(m-1+R)*4,y=c[S]-c[D],x=c[S+1]-c[D+1],T=c[S+2]-c[D+2];let k=y;const U=k>0?k:-k,H=x>0?x:-x,V=T>0?T:-T;if(H>U&&(k=x),V>U&&(k=T),k*=a,u){const G=c[S]+k,$=c[S+1]+k,b=c[S+2]+k;c[S]=G>255?255:G<0?0:G,c[S+1]=$>255?255:$<0?0:$,c[S+2]=b>255?255:b<0?0:b}else{let G=o-k;G<0?G=0:G>255&&(G=255),c[S]=c[S+1]=c[S+2]=G}}while(--m)}while(--C)};return Hi.Emboss=n,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Hi}var Vi={},zo;function Bu(){if(zo)return Vi;zo=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Enhance=void 0;const t=St(),e=Gt(),i=Ct();function r(s,a,o,l,u){const c=o-a,_=u-l;if(c===0)return l+_/2;if(_===0)return l;let p=(s-a)/c;return p=_*p+l,p}const n=function(s){const a=s.data,o=a.length;let l=a[0],u=l,c,_=a[1],p=_,d,f=a[2],v=f,C;const w=this.enhance();if(w===0)return;for(let y=0;y<o;y+=4)c=a[y+0],c<l?l=c:c>u&&(u=c),d=a[y+1],d<_?_=d:d>p&&(p=d),C=a[y+2],C<f?f=C:C>v&&(v=C);u===l&&(u=255,l=0),p===_&&(p=255,_=0),v===f&&(v=255,f=0);let g,h,m,S,R,D;if(w>0)g=u+w*(255-u),h=l-w*(l-0),m=p+w*(255-p),S=_-w*(_-0),R=v+w*(255-v),D=f-w*(f-0);else{const y=(u+l)*.5;g=u+w*(u-y),h=l+w*(l-y);const x=(p+_)*.5;m=p+w*(p-x),S=_+w*(_-x);const T=(v+f)*.5;R=v+w*(v-T),D=f+w*(f-T)}for(let y=0;y<o;y+=4)a[y+0]=r(a[y+0],l,u,h,g),a[y+1]=r(a[y+1],_,p,S,m),a[y+2]=r(a[y+2],f,v,D,R)};return Vi.Enhance=n,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Vi}var Wi={},jo;function Hu(){if(jo)return Wi;jo=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Grayscale=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4){const s=.34*i[n]+.5*i[n+1]+.16*i[n+2];i[n]=s,i[n+1]=s,i[n+2]=s}};return Wi.Grayscale=t,Wi}var qi={},Ko;function Vu(){if(Ko)return qi;Ko=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.HSL=void 0;const t=St(),e=Gt(),i=Ct();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const r=function(n){const s=n.data,a=s.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=this.luminance()*127,_=o*l*Math.cos(u*Math.PI/180),p=o*l*Math.sin(u*Math.PI/180),d=.299*o+.701*_+.167*p,f=.587*o-.587*_+.33*p,v=.114*o-.114*_-.497*p,C=.299*o-.299*_-.328*p,w=.587*o+.413*_+.035*p,g=.114*o-.114*_+.293*p,h=.299*o-.3*_+1.25*p,m=.587*o-.586*_-1.05*p,S=.114*o+.886*_-.2*p;let R,D,y,x;for(let T=0;T<a;T+=4)R=s[T+0],D=s[T+1],y=s[T+2],x=s[T+3],s[T+0]=d*R+f*D+v*y+c,s[T+1]=C*R+w*D+g*y+c,s[T+2]=h*R+m*D+S*y+c,s[T+3]=x};return qi.HSL=r,qi}var zi={},Yo;function Wu(){if(Yo)return zi;Yo=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.HSV=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=n.data,a=s.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=o*l*Math.cos(u*Math.PI/180),_=o*l*Math.sin(u*Math.PI/180),p=.299*o+.701*c+.167*_,d=.587*o-.587*c+.33*_,f=.114*o-.114*c-.497*_,v=.299*o-.299*c-.328*_,C=.587*o+.413*c+.035*_,w=.114*o-.114*c+.293*_,g=.299*o-.3*c+1.25*_,h=.587*o-.586*c-1.05*_,m=.114*o+.886*c-.2*_;for(let S=0;S<a;S+=4){const R=s[S+0],D=s[S+1],y=s[S+2],x=s[S+3];s[S+0]=p*R+d*D+f*y,s[S+1]=v*R+C*D+w*y,s[S+2]=g*R+h*D+m*y,s[S+3]=x}};return zi.HSV=r,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),zi}var ji={},Xo;function qu(){if(Xo)return ji;Xo=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.Invert=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4)i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2]};return ji.Invert=t,ji}var Ki={},$o;function zu(){if($o)return Ki;$o=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Kaleidoscope=void 0;const t=St(),e=Gt(),i=It(),r=Ct(),n=function(o,l,u){const c=o.data,_=l.data,p=o.width,d=o.height,f=u.polarCenterX||p/2,v=u.polarCenterY||d/2;let C=Math.sqrt(f*f+v*v),w=p-f,g=d-v;const h=Math.sqrt(w*w+g*g);C=h>C?h:C;const m=d,S=p,R=360/S*Math.PI/180;for(let D=0;D<S;D+=1){const y=Math.sin(D*R),x=Math.cos(D*R);for(let T=0;T<m;T+=1){w=Math.floor(f+C*T/m*x),g=Math.floor(v+C*T/m*y);let k=(g*p+w)*4;const U=c[k+0],H=c[k+1],V=c[k+2],G=c[k+3];k=(D+T*p)*4,_[k+0]=U,_[k+1]=H,_[k+2]=V,_[k+3]=G}}},s=function(o,l,u){const c=o.data,_=l.data,p=o.width,d=o.height,f=u.polarCenterX||p/2,v=u.polarCenterY||d/2;let C=Math.sqrt(f*f+v*v),w=p-f,g=d-v;const h=Math.sqrt(w*w+g*g);C=h>C?h:C;const m=d,S=p,R=0;let D,y;for(w=0;w<p;w+=1)for(g=0;g<d;g+=1){const x=w-f,T=g-v,k=Math.sqrt(x*x+T*T)*m/C;let U=(Math.atan2(T,x)*180/Math.PI+360+R)%360;U=U*S/360,D=Math.floor(U),y=Math.floor(k);let H=(y*p+D)*4;const V=c[H+0],G=c[H+1],$=c[H+2],b=c[H+3];H=(g*p+w)*4,_[H+0]=V,_[H+1]=G,_[H+2]=$,_[H+3]=b}},a=function(o){const l=o.width,u=o.height;let c,_,p,d,f,v,C,w,g,h,m=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),R=Math.floor(l*(S%360)/360);if(m<1)return;const D=i.Util.createCanvasElement();D.width=l,D.height=u;const y=D.getContext("2d").getImageData(0,0,l,u);i.Util.releaseCanvas(D),n(o,y,{polarCenterX:l/2,polarCenterY:u/2});let x=l/Math.pow(2,m);for(;x<=8;)x=x*2,m-=1;x=Math.ceil(x);let T=x,k=0,U=T,H=1;for(R+x>l&&(k=T,U=0,H=-1),_=0;_<u;_+=1)for(c=k;c!==U;c+=H)p=Math.round(c+R)%l,g=(l*_+p)*4,f=y.data[g+0],v=y.data[g+1],C=y.data[g+2],w=y.data[g+3],h=(l*_+c)*4,y.data[h+0]=f,y.data[h+1]=v,y.data[h+2]=C,y.data[h+3]=w;for(_=0;_<u;_+=1)for(T=Math.floor(x),d=0;d<m;d+=1){for(c=0;c<T+1;c+=1)g=(l*_+c)*4,f=y.data[g+0],v=y.data[g+1],C=y.data[g+2],w=y.data[g+3],h=(l*_+T*2-c-1)*4,y.data[h+0]=f,y.data[h+1]=v,y.data[h+2]=C,y.data[h+3]=w;T*=2}s(y,o,{})};return Ki.Kaleidoscope=a,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),Ki}var Yi={},Jo;function ju(){if(Jo)return Yi;Jo=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Mask=void 0;const t=St(),e=Gt(),i=Ct();function r(p,d,f){let v=(f*p.width+d)*4;const C=[];return C.push(p.data[v++],p.data[v++],p.data[v++],p.data[v++]),C}function n(p,d){return Math.sqrt(Math.pow(p[0]-d[0],2)+Math.pow(p[1]-d[1],2)+Math.pow(p[2]-d[2],2))}function s(p){const d=[0,0,0];for(let f=0;f<p.length;f++)d[0]+=p[f][0],d[1]+=p[f][1],d[2]+=p[f][2];return d[0]/=p.length,d[1]/=p.length,d[2]/=p.length,d}function a(p,d){const f=r(p,0,0),v=r(p,p.width-1,0),C=r(p,0,p.height-1),w=r(p,p.width-1,p.height-1),g=d||10;if(n(f,v)<g&&n(v,w)<g&&n(w,C)<g&&n(C,f)<g){const h=s([v,f,w,C]),m=[];for(let S=0;S<p.width*p.height;S++){const R=n(h,[p.data[S*4],p.data[S*4+1],p.data[S*4+2]]);m[S]=R<g?0:255}return m}}function o(p,d){for(let f=0;f<p.width*p.height;f++)p.data[4*f+3]=d[f]}function l(p,d,f){const v=[1,1,1,1,0,1,1,1,1],C=Math.round(Math.sqrt(v.length)),w=Math.floor(C/2),g=[];for(let h=0;h<f;h++)for(let m=0;m<d;m++){const S=h*d+m;let R=0;for(let D=0;D<C;D++)for(let y=0;y<C;y++){const x=h+D-w,T=m+y-w;if(x>=0&&x<f&&T>=0&&T<d){const k=x*d+T,U=v[D*C+y];R+=p[k]*U}}g[S]=R===2040?255:0}return g}function u(p,d,f){const v=[1,1,1,1,1,1,1,1,1],C=Math.round(Math.sqrt(v.length)),w=Math.floor(C/2),g=[];for(let h=0;h<f;h++)for(let m=0;m<d;m++){const S=h*d+m;let R=0;for(let D=0;D<C;D++)for(let y=0;y<C;y++){const x=h+D-w,T=m+y-w;if(x>=0&&x<f&&T>=0&&T<d){const k=x*d+T,U=v[D*C+y];R+=p[k]*U}}g[S]=R>=1020?255:0}return g}function c(p,d,f){const v=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],C=Math.round(Math.sqrt(v.length)),w=Math.floor(C/2),g=[];for(let h=0;h<f;h++)for(let m=0;m<d;m++){const S=h*d+m;let R=0;for(let D=0;D<C;D++)for(let y=0;y<C;y++){const x=h+D-w,T=m+y-w;if(x>=0&&x<f&&T>=0&&T<d){const k=x*d+T,U=v[D*C+y];R+=p[k]*U}}g[S]=R}return g}const _=function(p){const d=this.threshold();let f=a(p,d);return f&&(f=l(f,p.width,p.height),f=u(f,p.width,p.height),f=c(f,p.width,p.height),o(p,f)),p};return Yi.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Yi}var Xi={},Qo;function Ku(){if(Qo)return Xi;Qo=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Noise=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=this.noise()*255,a=n.data,o=a.length,l=s/2;for(let u=0;u<o;u+=4)a[u+0]+=l-2*l*Math.random(),a[u+1]+=l-2*l*Math.random(),a[u+2]+=l-2*l*Math.random()};return Xi.Noise=r,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Xi}var $i={},Zo;function Yu(){if(Zo)return $i;Zo=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Pixelate=void 0;const t=St(),e=It(),i=Gt(),r=Ct(),n=function(s){let a=Math.ceil(this.pixelSize()),o=s.width,l=s.height,u=Math.ceil(o/a),c=Math.ceil(l/a),_=s.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let p=0;p<u;p+=1)for(let d=0;d<c;d+=1){let f=0,v=0,C=0,w=0;const g=p*a,h=g+a,m=d*a,S=m+a;let R=0;for(let D=g;D<h;D+=1)if(!(D>=o))for(let y=m;y<S;y+=1){if(y>=l)continue;const x=(o*y+D)*4;f+=_[x+0],v+=_[x+1],C+=_[x+2],w+=_[x+3],R+=1}f=f/R,v=v/R,C=C/R,w=w/R;for(let D=g;D<h;D+=1)if(!(D>=o))for(let y=m;y<S;y+=1){if(y>=l)continue;const x=(o*y+D)*4;_[x+0]=f,_[x+1]=v,_[x+2]=C,_[x+3]=w}}};return $i.Pixelate=n,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),$i}var Ji={},ta;function Xu(){if(ta)return Ji;ta=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Posterize=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=Math.round(this.levels()*254)+1,a=n.data,o=a.length,l=255/s;for(let u=0;u<o;u+=1)a[u]=Math.floor(a[u]/l)*l};return Ji.Posterize=r,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ji}var Qi={},ea;function $u(){if(ea)return Qi;ea=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.RGB=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=n.data,a=s.length,o=this.red(),l=this.green(),u=this.blue();for(let c=0;c<a;c+=4){const _=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=_*o,s[c+1]=_*l,s[c+2]=_*u,s[c+3]=s[c+3]}};return Qi.RGB=r,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),Qi}var Zi={},ia;function Ju(){if(ia)return Zi;ia=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.RGBA=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=n.data,a=s.length,o=this.red(),l=this.green(),u=this.blue(),c=this.alpha();for(let _=0;_<a;_+=4){const p=1-c;s[_]=o*c+s[_]*p,s[_+1]=l*c+s[_+1]*p,s[_+2]=u*c+s[_+2]*p}};return Zi.RGBA=r,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n}),Zi}var tn={},na;function Qu(){if(na)return tn;na=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.Sepia=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4){const s=i[n+0],a=i[n+1],o=i[n+2];i[n+0]=Math.min(255,s*.393+a*.769+o*.189),i[n+1]=Math.min(255,s*.349+a*.686+o*.168),i[n+2]=Math.min(255,s*.272+a*.534+o*.131)}};return tn.Sepia=t,tn}var en={},ra;function Zu(){if(ra)return en;ra=1,Object.defineProperty(en,"__esModule",{value:!0}),en.Solarize=void 0;const t=function(e){const i=e.data,r=e.width,n=e.height,s=r*4;let a=n;do{const o=(a-1)*s;let l=r;do{const u=o+(l-1)*4;let c=i[u],_=i[u+1],p=i[u+2];c>127&&(c=255-c),_>127&&(_=255-_),p>127&&(p=255-p),i[u]=c,i[u+1]=_,i[u+2]=p}while(--l)}while(--a)};return en.Solarize=t,en}var nn={},sa;function td(){if(sa)return nn;sa=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.Threshold=void 0;const t=St(),e=Gt(),i=Ct(),r=function(n){const s=this.threshold()*255,a=n.data,o=a.length;for(let l=0;l<o;l+=1)a[l]=a[l]<s?0:255};return nn.Threshold=r,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),nn}var oa;function ed(){if(oa)return mi;oa=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Konva=void 0;const t=Su(),e=Cu(),i=wu(),r=Pu(),n=Tu(),s=Ru(),a=Eu(),o=pl(),l=us(),u=_l(),c=Au(),_=Mu(),p=Fu(),d=Ou(),f=yl(),v=Nu(),C=ku(),w=Lu(),g=Iu(),h=Du(),m=Gu(),S=Uu(),R=Bu(),D=Hu(),y=Vu(),x=Wu(),T=qu(),k=zu(),U=ju(),H=Ku(),V=Yu(),G=Xu(),$=$u(),b=Ju(),P=Qu(),N=Zu(),F=td();return mi.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:r.Circle,Ellipse:n.Ellipse,Image:s.Image,Label:a.Label,Tag:a.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:c.RegularPolygon,Ring:_.Ring,Sprite:p.Sprite,Star:d.Star,Text:f.Text,TextPath:v.TextPath,Transformer:C.Transformer,Wedge:w.Wedge,Filters:{Blur:g.Blur,Brighten:h.Brighten,Contrast:m.Contrast,Emboss:S.Emboss,Enhance:R.Enhance,Grayscale:D.Grayscale,HSL:y.HSL,HSV:x.HSV,Invert:T.Invert,Kaleidoscope:k.Kaleidoscope,Mask:U.Mask,Noise:H.Noise,Pixelate:V.Pixelate,Posterize:G.Posterize,RGB:$.RGB,RGBA:b.RGBA,Sepia:P.Sepia,Solarize:N.Solarize,Threshold:F.Threshold}}),mi}var id=Nn.exports,aa;function nd(){if(aa)return Nn.exports;aa=1,Object.defineProperty(id,"__esModule",{value:!0});const t=ed();return Nn.exports=t.Konva,Nn.exports}var rd=nd();const We=_u(rd);function qn(t){if(!We.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const la={key:!0,style:!0,elm:!0,isRootInsert:!0},Er=".vue-konva-event";function vl(t,e,i,r){const n=t.__konvaNode,s={};let a=!1;for(let o in i){if(la.hasOwnProperty(o))continue;const l=o.slice(0,2)==="on",u=i[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),n?.off(c+Er,i[o])}!e.hasOwnProperty(o)&&n?.setAttr(o,void 0)}for(let o in e){if(la.hasOwnProperty(o))continue;let l=o.slice(0,2)==="on";const u=i[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),e[o]&&(n?.off(c+Er),n?.on(c+Er,e[o]))}!l&&(e[o]!==i[o]||r&&e[o]!==n?.getAttr(o))&&(a=!0,s[o]=e[o])}a&&n&&(n.setAttrs(s),qn(n))}const sd="V";function od(t){function e(i){return i?.__konvaNode?i:i?.parent?e(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function bl(t){return t.component?t.component.__konvaNode||bl(t.component.subTree):null}function ad(t){const{el:e,component:i}=t,r=bl(t);if(e?.tagName&&i&&!r){const n=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${n}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return r}function ld(t){const e=n=>!!n&&typeof n=="object"&&"component"in n,i=n=>Array.isArray(n),r=n=>e(n)?[n,...r(n.children)]:i(n)?n.flatMap(r):[];return r(t.children)}function Sl(t,e){const i=ld(t),r=[];i.forEach(s=>{const a=ad(s);a&&r.push(a)});let n=!1;r.forEach((s,a)=>{s.getZIndex()!==a&&(s.setZIndex(a),n=!0)}),n&&qn(e)}const hd=We.default?.Stage||We.Stage,cd=Ba({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:i,expose:r}){const n=as();if(!n)return;const s=Ce({}),a=Ut(null),o=new hd({width:t.config.width,height:t.config.height,container:document.createElement("div")});n.__konvaNode=o,c();function l(){return n?.__konvaNode}function u(){return n?.__konvaNode}function c(){if(!n)return;const _=s||{},p={...e,...t.config};vl(n,p,_,t.__useStrictMode),Object.assign(s,p)}return er(()=>{a.value&&(a.value.innerHTML="",o.container(a.value)),c()}),es(()=>{c(),Sl(n.subTree,o)}),is(()=>{o.destroy()}),Ve(()=>t.config,c,{deep:!0}),r({getStage:u,getNode:l}),()=>cl("div",{ref:a,style:e?.style},i.default?.())}}),ud=".vue-konva-event",dd={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function Nt(t,e){return Ba({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:r,slots:n,expose:s}){const a=as();if(!a)return;const o=Ce({}),l=new e;a.__konvaNode=l,a.vnode.__konvaNode=l,_();function u(){return a?.__konvaNode}function c(){return a?.__konvaNode}function _(){if(!a)return;const d={};for(const C in a?.vnode.props)C.slice(0,2)==="on"&&(d[C]=a.vnode.props[C]);const f=o||{},v={...r,...i.config,...d};vl(a,v,f,i.__useStrictMode),Object.assign(o,v)}er(()=>{const d=od(a)?.__konvaNode;d&&"add"in d&&d.add(l),qn(l)}),ns(()=>{qn(l),l.destroy(),l.off(ud)}),es(()=>{_(),Sl(a.subTree,l)}),Ve(()=>i.config,_,{deep:!0}),s({getStage:c,getNode:u});const p=dd.hasOwnProperty(t);return()=>p?cl("template",{},n.default?.()):null}})}const Dt=We.default||We,fd=Nt("Arc",Dt.Arc),gd=Nt("Arrow",Dt.Arrow),pd=Nt("Circle",Dt.Circle),md=Nt("Ellipse",Dt.Ellipse),_d=Nt("FastLayer",Dt.FastLayer),yd=Nt("Group",Dt.Group),vd=Nt("Image",Dt.Image),bd=Nt("Label",Dt.Label),Sd=Nt("Layer",Dt.Layer),Cd=Nt("Line",Dt.Line),xd=Nt("Path",Dt.Path),wd=Nt("Rect",Dt.Rect),Pd=Nt("RegularPolygon",Dt.RegularPolygon),Td=Nt("Ring",Dt.Ring),Rd=Nt("Shape",Dt.Shape),Ed=Nt("Sprite",Dt.Sprite),Ad=Nt("Star",Dt.Star),Md=Nt("Tag",Dt.Tag),Fd=Nt("Text",Dt.Text),Od=Nt("TextPath",Dt.TextPath),Nd=Nt("Transformer",Dt.Transformer),kd=Nt("Wedge",Dt.Wedge),Ld=Object.freeze(Object.defineProperty({__proto__:null,Arc:fd,Arrow:gd,Circle:pd,Ellipse:md,FastLayer:_d,Group:yd,Image:vd,Label:bd,Layer:Sd,Line:Cd,Path:xd,Rect:wd,RegularPolygon:Pd,Ring:Td,Shape:Rd,Sprite:Ed,Star:Ad,Tag:Md,Text:Fd,TextPath:Od,Transformer:Nd,Wedge:kd},Symbol.toStringTag,{value:"Module"})),Id={install:(t,e)=>{const i=e?.prefix||sd,r=e?.customNodes?Object.entries(e.customNodes).map(([n,s])=>Nt(n,s)):[];[cd,...Object.values(Ld),...r].forEach(n=>{t.component(`${i}${n.name}`,n)})}},Dd=(t,e)=>{const i=t.__vccOpts||t;for(const[r,n]of e)i[r]=n;return i},Gd={class:"app-shell"},Ud={class:"topbar"},Bd={class:"title-wrap"},Hd={class:"status-row"},Vd={class:"status-pill"},Wd={class:"status-pill"},qd={class:"status-pill"},zd={class:"status-pill"},jd={class:"status-pill"},Kd={class:"status-pill"},Yd={class:"status-pill"},Xd={class:"status-pill"},$d={class:"top-actions"},Jd=["disabled"],Qd=["disabled"],Zd=["disabled"],tf=["disabled"],ef=["disabled"],nf={class:"workspace"},rf={class:"panel"},sf={class:"tool-row"},of={class:"field-grid"},af={key:0,class:"field-grid"},lf=["value"],hf=["value"],cf=["value"],uf=["value"],df={class:"tool-row"},ff={key:1,class:"muted"},gf={key:0,class:"field-grid"},pf=["value"],mf=["value"],_f=["value"],yf={key:1,class:"muted"},vf={class:"field-grid"},bf={class:"cropper-modal"},Sf={class:"cropper-header"},Cf={class:"cropper-content"},xf={class:"crop-preview-wrap"},wf={class:"crop-fields"},Pf={key:1,class:"notice"},Tf=5,Rf=.35,Ef=3.5,ha=1.08,Af=20,Mf={__name:"App",setup(t){const e=Tf+1,i=[We.Filters.Brighten,We.Filters.Contrast,We.Filters.HSL],r=Ut(null),n=Ut(null),s=Ut(null),a=Ut(null),o=Ut(null),l=Ut(null),u=Ce({width:960,height:620}),c=Ce({x:0,y:0,scale:1}),_=Ut(!1),p=Ut([]),d=Ut([]),f=Ut(""),v=Ut("select"),C=Ut(!1),w=Ut("#0f766e"),g=Ut(10),h=Ce({brightness:0,contrast:0,saturation:0,hue:0}),m=Ce({format:"image/png",quality:.92,pixelRatio:1,width:960,height:620}),S=Ut([]),R=Ut(-1),D=Ut(!1),y=Ce({visible:!1,mode:"upload",targetId:"",queue:[],sourceName:"",sourceSrc:"",sourceWidth:0,sourceHeight:0,cropX:0,cropY:0,cropWidth:0,cropHeight:0,outputWidth:0,outputHeight:0,rotation:0}),x=Ut(null),T=Ut(""),k=new Map;let U=0,H=null;const V=re(()=>p.value.find(E=>E.id===f.value)||null),G=re(()=>!V.value||V.value.kind!=="image"?null:V.value),$=re(()=>!V.value||V.value.kind!=="text"?null:V.value),b=re(()=>p.value.filter(E=>E.kind==="image")),P=re(()=>p.value.filter(E=>E.kind==="text")),N=re(()=>p.value.length),F=re(()=>V.value?V.value.kind:"none"),I=re(()=>`${R.value>=0?R.value+1:0}/${S.value.length}`),K=re(()=>`${Math.round(c.scale*100)}%`),B=re(()=>R.value>0),Z=re(()=>R.value>=0&&R.value<S.value.length-1),at=re(()=>({width:u.width,height:u.height,x:c.x,y:c.y,scaleX:c.scale,scaleY:c.scale,draggable:_.value})),z=re(()=>({x:0,y:0,width:u.width,height:u.height,listening:!1,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:u.width,y:u.height},fillLinearGradientColorStops:[0,"#d9f2ee",1,"#f8fafc"]})),O={rotateEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-right","bottom-right","bottom-center","bottom-left","middle-left"],boundBoxFunc(E,M){return Math.abs(M.width)<20||Math.abs(M.height)<20?E:M}};function q(E){return U+=1,`${E}-${Date.now()}-${U}`}function it(E,M,et){return Math.min(et,Math.max(M,E))}function Q(E,M=0){const et=Number(E);return Number.isFinite(et)?et:M}function ct(E){T.value=E,H&&window.clearTimeout(H),H=window.setTimeout(()=>{T.value=""},4200)}function A(){return r.value?.getNode?.()||null}function L(){if(!s.value)return;const E=Math.max(340,Math.floor(s.value.clientWidth-Af)),M=Math.max(320,Math.floor(window.innerHeight*.72)),et=Math.round(E*.62),gt=it(et,320,M);u.width=E,u.height=gt}function W(){m.width=u.width,m.height=u.height}function j(E,M){const et=c.scale,gt=E>0?et*ha:et/ha,pt=it(gt,Rf,Ef);if(Math.abs(pt-et)<1e-6)return;const Tt=M||{x:u.width/2,y:u.height/2},$t={x:(Tt.x-c.x)/et,y:(Tt.y-c.y)/et};c.scale=pt,c.x=Tt.x-$t.x*pt,c.y=Tt.y-$t.y*pt}function J(){j(1)}function Y(){j(-1)}function nt(){c.x=0,c.y=0,c.scale=1}function st(E){E.evt.preventDefault();const et=A()?.getPointerPosition();if(!et)return;let gt=E.evt.deltaY>0?-1:1;E.evt.ctrlKey&&(gt=-gt),j(gt,et)}function rt(E){const M=A();!M||E.target!==M||(c.x=E.target.x(),c.y=E.target.y())}function tt(E){_.value=!!E,_.value&&(f.value="",zt(ht))}function lt(){tt(!_.value)}function ot(){if(!V.value)return;const E=V.value,M=E.x+E.scaleX*(E.width/2),et=E.y+E.scaleY*(E.height/2);c.x=u.width/2-M*c.scale,c.y=u.height/2-et*c.scale}function ht(){const E=n.value?.getNode?.(),M=A();if(!E||!M)return;if(v.value!=="select"||_.value||!f.value){E.nodes([]),E.getLayer()?.batchDraw();return}const et=M.findOne(`#${f.value}`);et?E.nodes([et]):E.nodes([]),E.getLayer()?.batchDraw()}function dt(E){v.value=E,E!=="select"&&tt(!1),E!=="select"&&(f.value=""),zt(ht)}function ft(E){v.value!=="select"||_.value||(f.value=E,zt(ht))}function vt(E){return Array.isArray(E)?[...E]:[]}function _t(E){return E.kind==="image"?{kind:"image",id:E.id,label:E.label,src:E.src,x:E.x,y:E.y,width:E.width,height:E.height,rotation:E.rotation,scaleX:E.scaleX,scaleY:E.scaleY,brightness:E.brightness,contrast:E.contrast,saturation:E.saturation,hue:E.hue}:{kind:"text",id:E.id,text:E.text,x:E.x,y:E.y,width:E.width,height:E.height,rotation:E.rotation,scaleX:E.scaleX,scaleY:E.scaleY,fontSize:E.fontSize,fontFamily:E.fontFamily,fill:E.fill}}function Rt(){return{blocks:p.value.map(E=>_t(E)),lines:d.value.map(E=>({id:E.id,tool:E.tool,color:E.color,size:E.size,points:vt(E.points)}))}}async function xt(E){if(k.has(E))return k.get(E);const M=await new Promise((et,gt)=>{const pt=new window.Image;pt.onload=()=>et(pt),pt.onerror=()=>gt(new Error("Image loading failed")),pt.src=E});return k.set(E,M),M}async function Et(E){if(E.kind==="image"){const M=await xt(E.src);return{kind:"image",id:E.id,label:E.label||"Image",src:E.src,image:M,x:Q(E.x),y:Q(E.y),width:Math.max(20,Math.round(Q(E.width,M.naturalWidth||M.width))),height:Math.max(20,Math.round(Q(E.height,M.naturalHeight||M.height))),rotation:Q(E.rotation),scaleX:Q(E.scaleX,1)||1,scaleY:Q(E.scaleY,1)||1,brightness:Q(E.brightness),contrast:Q(E.contrast),saturation:Q(E.saturation),hue:Q(E.hue)}}return{kind:"text",id:E.id,text:E.text||"Demo text",x:Q(E.x),y:Q(E.y),width:Math.max(80,Math.round(Q(E.width,240))),height:Math.max(40,Math.round(Q(E.height,80))),rotation:Q(E.rotation),scaleX:Q(E.scaleX,1)||1,scaleY:Q(E.scaleY,1)||1,fontSize:Math.max(10,Math.round(Q(E.fontSize,30))),fontFamily:E.fontFamily||"Georgia",fill:E.fill||"#0f172a"}}async function Ht(E){if(!E||!Array.isArray(E.blocks)||!Array.isArray(E.lines))throw new Error("Invalid snapshot format");const M=[];for(const et of E.blocks)M.push(await Et(et));p.value=M,d.value=E.lines.map(et=>({id:et.id||q("line"),tool:et.tool==="erase"?"erase":"pen",color:et.color||"#0f766e",size:Math.max(1,Math.round(Q(et.size,10))),points:vt(et.points)})),f.value="",await zt();for(const et of p.value)et.kind==="image"&&Ie(et.id);ht()}function kt(){if(D.value)return;const E=Rt(),M=S.value.slice(0,R.value+1);for(M.push(E);M.length>e;)M.shift();S.value=M,R.value=M.length-1}async function me(E){if(E<0||E>=S.value.length)return;const M=S.value[E];if(M)try{D.value=!0,await Ht(M),R.value=E}catch(et){ct(`History restore failed: ${et.message}`)}finally{D.value=!1}}async function qt(){B.value&&await me(R.value-1)}async function Zt(){Z.value&&await me(R.value+1)}function Ie(E){const M=A();if(!M)return;const et=M.findOne(`#${E}`);if(et)try{et.clearCache(),et.cache(),et.getLayer()?.batchDraw()}catch{et.getLayer()?.batchDraw()}}function bn(E){return{id:E.id,x:E.x,y:E.y,image:E.image,width:E.width,height:E.height,rotation:E.rotation,scaleX:E.scaleX,scaleY:E.scaleY,draggable:v.value==="select"&&!_.value,filters:i,brightness:E.brightness,contrast:E.contrast,saturation:E.saturation,hue:E.hue,stroke:f.value===E.id?"#0f766e":void 0,strokeWidth:f.value===E.id?2:0}}function Cl(E){return{id:E.id,x:E.x,y:E.y,width:E.width,height:E.height,rotation:E.rotation,scaleX:E.scaleX,scaleY:E.scaleY,draggable:v.value==="select"&&!_.value,text:E.text,fontSize:E.fontSize,fontFamily:E.fontFamily,fill:E.fill,align:"left",verticalAlign:"top"}}function xl(E){return{id:E.id,points:E.points,stroke:E.color,strokeWidth:E.size,tension:.25,lineCap:"round",lineJoin:"round",listening:!1,globalCompositeOperation:E.tool==="erase"?"destination-out":"source-over"}}function ds(E){const M=E.target.getStage();if(M&&!_.value){if(v.value!=="select"){const et=M.getPointerPosition();if(!et)return;C.value=!0,d.value.push({id:q("line"),tool:v.value,color:w.value,size:g.value,points:[et.x,et.y]});return}E.target===M&&(f.value="",zt(ht))}}function fs(E){if(_.value||!C.value)return;const et=E.target.getStage()?.getPointerPosition();if(!et||d.value.length===0)return;const gt=d.value.length-1,pt=d.value[gt],Tt=[...pt.points,et.x,et.y];d.value.splice(gt,1,{...pt,points:Tt})}function gs(){_.value||C.value&&(C.value=!1,kt())}function ps(E,M){E.x=M.target.x(),E.y=M.target.y(),kt()}function ms(E,M){const et=M.target,gt=et.scaleX(),pt=et.scaleY(),Tt=gt<0?-1:1,$t=pt<0?-1:1;E.x=et.x(),E.y=et.y(),E.rotation=et.rotation(),E.width=Math.max(20,Math.round(et.width()*Math.abs(gt))),E.height=Math.max(20,Math.round(et.height()*Math.abs(pt))),E.scaleX=Tt,E.scaleY=$t,et.scaleX(Tt),et.scaleY($t),E.kind==="text"&&(E.fontSize=Math.max(10,Math.round(E.fontSize*Math.abs(pt)))),E.kind==="image"&&zt(()=>Ie(E.id)),kt()}function _s(){if(!G.value){h.brightness=0,h.contrast=0,h.saturation=0,h.hue=0;return}h.brightness=G.value.brightness,h.contrast=G.value.contrast,h.saturation=G.value.saturation,h.hue=G.value.hue}function Sn(E,M){if(!G.value)return;const et=Q(M);h[E]=et,G.value[E]=et,zt(()=>Ie(G.value.id))}function Cn(){G.value&&kt()}function ys(E){if(!G.value)return;const M=G.value;if(E==="x"){const et=M.scaleX<0?-1:1;M.x+=et*M.width,M.scaleX*=-1}else{const et=M.scaleY<0?-1:1;M.y+=et*M.height,M.scaleY*=-1}kt(),zt(ht)}function wl(){const E={kind:"text",id:q("txt"),text:"Demo text",x:48,y:48,width:240,height:84,rotation:0,scaleX:1,scaleY:1,fontSize:30,fontFamily:"Georgia",fill:"#0f172a"};p.value.push(E),f.value=E.id,kt(),zt(ht)}function Pl(){V.value&&(p.value=p.value.filter(E=>E.id!==V.value.id),f.value="",kt(),zt(ht))}function Tl(E){$.value&&($.value.text=E)}function Rl(E){$.value&&($.value.fill=E)}function El(E){$.value&&($.value.fontSize=Math.max(10,Math.round(Q(E,24))))}function xn(){$.value&&kt()}function Al(){a.value?.click()}function Ml(){const E=document.createElement("canvas");E.width=1024,E.height=640;const M=E.getContext("2d");if(!M)return"";const et=M.createLinearGradient(0,0,E.width,E.height);return et.addColorStop(0,"#0f172a"),et.addColorStop(1,"#155e75"),M.fillStyle=et,M.fillRect(0,0,E.width,E.height),M.fillStyle="rgba(255, 255, 255, 0.08)",M.beginPath(),M.arc(220,180,130,0,Math.PI*2),M.fill(),M.beginPath(),M.arc(780,360,210,0,Math.PI*2),M.fill(),M.fillStyle="#f8fafc",M.font="700 58px Georgia",M.fillText("Sample Product",72,120),M.fillStyle="#bae6fd",M.font="400 30px Georgia",M.fillText("Upload your files and replace this image",72,180),M.fillStyle="#14b8a6",M.fillRect(72,240,360,220),M.fillStyle="#0f172a",M.font="700 34px Georgia",M.fillText("DEMO BLOCK",102,360),M.strokeStyle="#67e8f9",M.lineWidth=4,M.strokeRect(56,56,E.width-112,E.height-112),E.toDataURL("image/png")}async function vs(){try{const E=Ml();if(!E){ct("Sample image generation failed.");return}await bs(E,"sample-demo.png")}catch(E){ct(`Sample add failed: ${E.message}`)}}function Fl(){o.value?.click()}function Ol(E){return new Promise((M,et)=>{const gt=new window.FileReader;gt.onload=()=>M(String(gt.result||"")),gt.onerror=()=>et(new Error(`Could not read file: ${E.name}`)),gt.readAsDataURL(E)})}async function Nl(E){const M=E.target,et=Array.from(M.files||[]);if(M.value="",et.length===0)return;const gt=et.filter(pt=>pt.type.startsWith("image/"));if(gt.length===0){ct("No supported image files selected.");return}try{for(const pt of gt){const Tt=await Ol(pt);y.queue.push({name:pt.name,src:Tt})}y.visible||await Cs()}catch(pt){ct(pt.message)}}async function bs(E,M="Image"){const et=await xt(E),gt=360,pt=et.naturalWidth||et.width||1,Tt=et.naturalHeight||et.height||1,$t=Math.min(1,gt/pt),ze={kind:"image",id:q("img"),label:M,src:E,image:et,x:36+p.value.length%6*16,y:36+p.value.length%6*16,width:Math.max(20,Math.round(pt*$t)),height:Math.max(20,Math.round(Tt*$t)),rotation:0,scaleX:1,scaleY:1,brightness:0,contrast:0,saturation:0,hue:0};p.value.push(ze),f.value=ze.id,await zt(),Ie(ze.id),_s(),kt(),ht()}async function Ss(E,M,et="upload",gt=""){y.mode=et,y.targetId=gt,y.sourceSrc=E,y.sourceName=M||"image",y.visible=!0;const pt=await xt(E);x.value=pt,y.sourceWidth=pt.naturalWidth||pt.width,y.sourceHeight=pt.naturalHeight||pt.height,y.cropX=0,y.cropY=0,y.cropWidth=y.sourceWidth,y.cropHeight=y.sourceHeight,y.outputWidth=y.sourceWidth,y.outputHeight=y.sourceHeight,y.rotation=0,await zt(),_e()}async function Cs(){const E=y.queue.shift();if(!E){ii(!0);return}await Ss(E.src,E.name,"upload","")}async function kl(){G.value&&(y.queue=[],await Ss(G.value.src,G.value.label,"edit",G.value.id))}function xs(){if(!x.value)return;const E=Math.max(1,Math.round(Q(y.sourceWidth,1))),M=Math.max(1,Math.round(Q(y.sourceHeight,1)));y.cropX=it(Math.round(Q(y.cropX)),0,Math.max(0,E-1)),y.cropY=it(Math.round(Q(y.cropY)),0,Math.max(0,M-1)),y.cropWidth=it(Math.round(Q(y.cropWidth,E)),1,Math.max(1,E-y.cropX)),y.cropHeight=it(Math.round(Q(y.cropHeight,M)),1,Math.max(1,M-y.cropY)),y.outputWidth=it(Math.round(Q(y.outputWidth,y.cropWidth)),1,4096),y.outputHeight=it(Math.round(Q(y.outputHeight,y.cropHeight)),1,4096),y.rotation=it(Q(y.rotation),-180,180)}function Ll(){x.value&&(y.cropX=0,y.cropY=0,y.cropWidth=y.sourceWidth,y.cropHeight=y.sourceHeight,y.outputWidth=y.sourceWidth,y.outputHeight=y.sourceHeight,y.rotation=0,_e())}function Il(){if(!x.value)return;const E=Math.min(y.sourceWidth,y.sourceHeight);y.cropX=Math.floor((y.sourceWidth-E)/2),y.cropY=Math.floor((y.sourceHeight-E)/2),y.cropWidth=E,y.cropHeight=E,y.outputWidth=E,y.outputHeight=E,_e()}function _e(){const E=l.value;if(!E||!x.value)return;xs();const M=y.outputWidth/y.outputHeight,et=420;let gt=et,pt=et;M>=1?pt=Math.max(80,Math.round(et/M)):gt=Math.max(80,Math.round(et*M)),E.width=gt,E.height=pt;const Tt=E.getContext("2d");Tt&&(Tt.clearRect(0,0,gt,pt),Tt.fillStyle="#0f172a",Tt.fillRect(0,0,gt,pt),Tt.save(),Tt.translate(gt/2,pt/2),Tt.rotate(y.rotation*Math.PI/180),Tt.drawImage(x.value,y.cropX,y.cropY,y.cropWidth,y.cropHeight,-gt/2,-pt/2,gt,pt),Tt.restore())}function Dl(){xs();const E=document.createElement("canvas");E.width=y.outputWidth,E.height=y.outputHeight;const M=E.getContext("2d");if(!M||!x.value)throw new Error("Cropper canvas is unavailable");return M.clearRect(0,0,E.width,E.height),M.save(),M.translate(E.width/2,E.height/2),M.rotate(y.rotation*Math.PI/180),M.drawImage(x.value,y.cropX,y.cropY,y.cropWidth,y.cropHeight,-E.width/2,-E.height/2,E.width,E.height),M.restore(),E.toDataURL("image/png",1)}function ii(E=!1){y.visible=!1,y.mode="upload",y.targetId="",y.sourceName="",y.sourceSrc="",y.sourceWidth=0,y.sourceHeight=0,y.cropX=0,y.cropY=0,y.cropWidth=0,y.cropHeight=0,y.outputWidth=0,y.outputHeight=0,y.rotation=0,x.value=null,E&&(y.queue=[])}async function Gl(){if(x.value)try{const E=Dl();if(y.mode==="upload"){const gt=y.sourceName||"Image";if(await bs(E,gt),y.queue.length>0){await Cs();return}ii(!0);return}const M=p.value.find(gt=>gt.id===y.targetId&&gt.kind==="image");if(!M){ii(!0);return}const et=await xt(E);M.src=E,M.image=et,M.width=y.outputWidth,M.height=y.outputHeight,await zt(),Ie(M.id),kt(),ii(!0)}catch(E){ct(`Crop failed: ${E.message}`)}}async function Ul(){if(!window.EyeDropper){ct("EyeDropper API is not available in this browser.");return}try{const M=await new window.EyeDropper().open();w.value=M.sRGBHex,$.value&&($.value.fill=M.sRGBHex,kt())}catch{ct("Color picking cancelled.")}}function Bl(E){return E==="image/jpeg"?"jpg":E==="image/webp"?"webp":"png"}function Hl(E,M){const et=document.createElement("a");et.href=E,et.download=M,et.click()}function Vl(E,M){const et=URL.createObjectURL(E),gt=document.createElement("a");gt.href=et,gt.download=M,gt.click(),URL.revokeObjectURL(et)}async function Wl(){const E=A();if(E)try{const M=m.format,et=it(Q(m.quality,.92),.1,1),gt=Math.max(1,Q(m.pixelRatio,1));let pt=E.toDataURL({mimeType:M,quality:et,pixelRatio:gt});const Tt=Math.max(1,Math.round(Q(m.width,u.width))),$t=Math.max(1,Math.round(Q(m.height,u.height)));if(Tt!==Math.round(u.width*gt)||$t!==Math.round(u.height*gt)){const ar=await xt(pt),ut=document.createElement("canvas");ut.width=Tt,ut.height=$t;const te=ut.getContext("2d");te&&(te.drawImage(ar,0,0,Tt,$t),pt=ut.toDataURL(M,et))}const ze=Bl(M);Hl(pt,`konva-editor-export-${Date.now()}.${ze}`)}catch(M){ct(`Export failed: ${M.message}`)}}function ql(){try{const E={version:1,generatedAt:new Date().toISOString(),snapshot:Rt()},M=new Blob([JSON.stringify(E,null,2)],{type:"application/json"});Vl(M,`konva-editor-state-${Date.now()}.json`)}catch(E){ct(`State export failed: ${E.message}`)}}async function zl(E){const M=E.target.files?.[0];if(E.target.value="",!!M)try{const et=await M.text(),gt=JSON.parse(et),pt=gt.snapshot||gt;await Ht(pt),kt(),ct("State imported successfully.")}catch(et){ct(`State import failed: ${et.message}`)}}return Ve(G,()=>{_s()}),Ve(()=>f.value,()=>{zt(ht)}),Ve(()=>v.value,()=>{zt(ht)}),er(()=>{L(),nt(),W(),window.addEventListener("resize",L),kt(),vs()}),is(()=>{window.removeEventListener("resize",L),H&&window.clearTimeout(H)}),(E,M)=>{const et=Ke("v-rect"),gt=Ke("v-image"),pt=Ke("v-text"),Tt=Ke("v-transformer"),$t=Ke("v-layer"),ze=Ke("v-line"),ar=Ke("v-stage");return ne(),ye("div",Gd,[X("header",Ud,[X("div",Bd,[M[28]||(M[28]=X("h1",null,"Konva Image Editor Demo",-1)),M[29]||(M[29]=X("p",null,"MVP: upload, crop/resize/rotate, filters, draw/erase, text, eyedropper, undo/redo(5), export.",-1)),X("div",Hd,[X("span",Vd,"Tool: "+Ot(v.value),1),X("span",Wd,"Pan: "+Ot(_.value?"on":"off"),1),X("span",qd,"Zoom: "+Ot(K.value),1),X("span",zd,"Selected: "+Ot(F.value),1),X("span",jd,"Images: "+Ot(b.value.length),1),X("span",Kd,"Texts: "+Ot(P.value.length),1),X("span",Yd,"Blocks: "+Ot(N.value),1),X("span",Xd,"History: "+Ot(I.value),1)])]),X("div",$d,[X("button",{class:"btn-primary",onClick:Al},"Upload image(s)"),X("button",{class:"btn-soft",onClick:vs},"Add sample"),X("button",{class:Qe(["btn-soft",{active:_.value}]),onClick:lt},"Pan mode",2),X("button",{class:"btn-soft",onClick:Y},"Zoom -"),X("button",{class:"btn-soft",onClick:J},"Zoom +"),X("button",{class:"btn-soft",onClick:nt},"Reset view"),X("button",{class:"btn-soft",disabled:!V.value,onClick:ot},"Center selected",8,Jd),X("button",{class:"btn-soft",disabled:!G.value,onClick:kl},"Crop selected",8,Qd),X("button",{class:"btn-soft",onClick:wl},"Add text"),X("button",{class:"btn-danger",disabled:!V.value,onClick:Pl},"Delete selected",8,Zd),X("button",{class:"btn-soft",disabled:!B.value,onClick:qt},"Undo",8,tf),X("button",{class:"btn-soft",disabled:!Z.value,onClick:Zt},"Redo",8,ef)])]),X("div",nf,[X("aside",rf,[X("section",null,[M[32]||(M[32]=X("h2",null,"Tools",-1)),X("div",sf,[X("button",{class:Qe({active:v.value==="select"}),onClick:M[0]||(M[0]=ut=>dt("select"))},"Select",2),X("button",{class:Qe({active:v.value==="pen"}),onClick:M[1]||(M[1]=ut=>dt("pen"))},"Brush",2),X("button",{class:Qe({active:v.value==="erase"}),onClick:M[2]||(M[2]=ut=>dt("erase"))},"Eraser",2)]),X("div",of,[X("label",null,[M[30]||(M[30]=Lt(" Brush color ",-1)),ee(X("input",{"onUpdate:modelValue":M[3]||(M[3]=ut=>w.value=ut),type:"color"},null,512),[[ae,w.value]])]),X("label",null,[M[31]||(M[31]=Lt(" Brush size ",-1)),ee(X("input",{"onUpdate:modelValue":M[4]||(M[4]=ut=>g.value=ut),type:"range",min:"1",max:"50",step:"1"},null,512),[[ae,g.value,void 0,{number:!0}]]),X("span",null,Ot(g.value)+" px",1)]),X("button",{onClick:Ul},"Pick color (Eyedropper)")])]),X("section",null,[M[37]||(M[37]=X("h2",null,"Selected image",-1)),G.value?(ne(),ye("div",af,[X("label",null,[M[33]||(M[33]=Lt(" Brightness ",-1)),X("input",{value:h.brightness,type:"range",min:"-1",max:"1",step:"0.01",onInput:M[5]||(M[5]=ut=>Sn("brightness",ut.target.value)),onChange:Cn},null,40,lf),X("span",null,Ot(h.brightness.toFixed(2)),1)]),X("label",null,[M[34]||(M[34]=Lt(" Contrast ",-1)),X("input",{value:h.contrast,type:"range",min:"-100",max:"100",step:"1",onInput:M[6]||(M[6]=ut=>Sn("contrast",ut.target.value)),onChange:Cn},null,40,hf),X("span",null,Ot(Math.round(h.contrast)),1)]),X("label",null,[M[35]||(M[35]=Lt(" Saturation ",-1)),X("input",{value:h.saturation,type:"range",min:"-2",max:"2",step:"0.01",onInput:M[7]||(M[7]=ut=>Sn("saturation",ut.target.value)),onChange:Cn},null,40,cf),X("span",null,Ot(h.saturation.toFixed(2)),1)]),X("label",null,[M[36]||(M[36]=Lt(" Hue (WB demo) ",-1)),X("input",{value:h.hue,type:"range",min:"-180",max:"180",step:"1",onInput:M[8]||(M[8]=ut=>Sn("hue",ut.target.value)),onChange:Cn},null,40,uf),X("span",null,Ot(Math.round(h.hue))+" deg",1)]),X("div",df,[X("button",{onClick:M[9]||(M[9]=ut=>ys("x"))},"Flip X"),X("button",{onClick:M[10]||(M[10]=ut=>ys("y"))},"Flip Y")])])):(ne(),ye("p",ff,"Select an image block to edit filters and flip."))]),X("section",null,[M[41]||(M[41]=X("h2",null,"Selected text",-1)),$.value?(ne(),ye("div",gf,[X("label",null,[M[38]||(M[38]=Lt(" Text ",-1)),X("textarea",{value:$.value.text,rows:"3",onInput:M[11]||(M[11]=ut=>Tl(ut.target.value)),onChange:xn,onBlur:xn},null,40,pf)]),X("label",null,[M[39]||(M[39]=Lt(" Size ",-1)),X("input",{value:$.value.fontSize,type:"range",min:"10",max:"160",step:"1",onInput:M[12]||(M[12]=ut=>El(ut.target.value)),onChange:xn},null,40,mf),X("span",null,Ot($.value.fontSize)+" px",1)]),X("label",null,[M[40]||(M[40]=Lt(" Color ",-1)),X("input",{value:$.value.fill,type:"color",onInput:M[13]||(M[13]=ut=>Rl(ut.target.value)),onChange:xn},null,40,_f)])])):(ne(),ye("p",yf,"Select a text block to edit content and style."))]),X("section",null,[M[48]||(M[48]=X("h2",null,"Export / Import",-1)),X("div",vf,[X("label",null,[M[43]||(M[43]=Lt(" Format ",-1)),ee(X("select",{"onUpdate:modelValue":M[14]||(M[14]=ut=>m.format=ut)},[...M[42]||(M[42]=[X("option",{value:"image/png"},"PNG",-1),X("option",{value:"image/jpeg"},"JPEG",-1),X("option",{value:"image/webp"},"WebP",-1)])],512),[[lu,m.format]])]),X("label",null,[M[44]||(M[44]=Lt(" Quality ",-1)),ee(X("input",{"onUpdate:modelValue":M[15]||(M[15]=ut=>m.quality=ut),type:"range",min:"0.1",max:"1",step:"0.01"},null,512),[[ae,m.quality,void 0,{number:!0}]]),X("span",null,Ot(m.quality.toFixed(2)),1)]),X("label",null,[M[45]||(M[45]=Lt(" Pixel ratio ",-1)),ee(X("input",{"onUpdate:modelValue":M[16]||(M[16]=ut=>m.pixelRatio=ut),type:"range",min:"1",max:"3",step:"0.1"},null,512),[[ae,m.pixelRatio,void 0,{number:!0}]]),X("span",null,Ot(m.pixelRatio.toFixed(1))+"x",1)]),X("label",null,[M[46]||(M[46]=Lt(" Width ",-1)),ee(X("input",{"onUpdate:modelValue":M[17]||(M[17]=ut=>m.width=ut),type:"number",min:"1",max:"6000"},null,512),[[ae,m.width,void 0,{number:!0}]])]),X("label",null,[M[47]||(M[47]=Lt(" Height ",-1)),ee(X("input",{"onUpdate:modelValue":M[18]||(M[18]=ut=>m.height=ut),type:"number",min:"1",max:"6000"},null,512),[[ae,m.height,void 0,{number:!0}]])]),X("div",{class:"tool-row"},[X("button",{onClick:W},"Use stage size"),X("button",{onClick:Wl},"Export image")]),X("div",{class:"tool-row"},[X("button",{onClick:ql},"Export state JSON"),X("button",{onClick:Fl},"Import state JSON")])])])]),X("div",{ref_key:"canvasWrapRef",ref:s,class:"canvas-wrap"},[Vt(ar,{ref_key:"stageRef",ref:r,config:at.value,onMousedown:ds,onMousemove:fs,onMouseup:gs,onTouchstart:ds,onTouchmove:fs,onTouchend:gs,onWheel:st,onDragend:rt},{default:En(()=>[Vt($t,null,{default:En(()=>[Vt(et,{config:z.value},null,8,["config"]),(ne(!0),ye(he,null,fr(b.value,ut=>(ne(),Mn(gt,{key:ut.id,config:bn(ut),onClick:te=>ft(ut.id),onTap:te=>ft(ut.id),onDragend:te=>ps(ut,te),onTransformend:te=>ms(ut,te)},null,8,["config","onClick","onTap","onDragend","onTransformend"]))),128)),(ne(!0),ye(he,null,fr(P.value,ut=>(ne(),Mn(pt,{key:ut.id,config:Cl(ut),onClick:te=>ft(ut.id),onTap:te=>ft(ut.id),onDragend:te=>ps(ut,te),onTransformend:te=>ms(ut,te)},null,8,["config","onClick","onTap","onDragend","onTransformend"]))),128)),Vt(Tt,{ref_key:"transformerRef",ref:n,config:O},null,512)]),_:1}),Vt($t,{config:{listening:!1}},{default:En(()=>[(ne(!0),ye(he,null,fr(d.value,ut=>(ne(),Mn(ze,{key:ut.id,config:xl(ut)},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"]),M[49]||(M[49]=X("p",{class:"canvas-hint"}," Wheel = zoom, Pan mode = move viewport, Reset view = return to origin. Select mode edits blocks. ",-1))],512)]),X("input",{ref_key:"imageInputRef",ref:a,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:Nl},null,544),X("input",{ref_key:"importJsonInputRef",ref:o,type:"file",accept:"application/json,.json",class:"hidden",onChange:zl},null,544),y.visible?(ne(),ye("div",{key:0,class:"cropper-overlay",onClick:M[27]||(M[27]=uu(ut=>ii(!0),["self"]))},[X("div",bf,[X("div",Sf,[M[50]||(M[50]=X("h2",null,"Cropper (upload/edit)",-1)),X("button",{onClick:M[19]||(M[19]=ut=>ii(!0))},"Close")]),X("div",Cf,[X("div",xf,[X("canvas",{ref_key:"cropPreviewRef",ref:l,class:"crop-preview"},null,512),X("p",null," Source: "+Ot(y.sourceWidth)+"x"+Ot(y.sourceHeight)+" | Output: "+Ot(y.outputWidth)+"x"+Ot(y.outputHeight),1)]),X("div",wf,[X("label",null,[M[51]||(M[51]=Lt(" Crop X ",-1)),ee(X("input",{"onUpdate:modelValue":M[20]||(M[20]=ut=>y.cropX=ut),type:"number",min:"0",onInput:_e},null,544),[[ae,y.cropX,void 0,{number:!0}]])]),X("label",null,[M[52]||(M[52]=Lt(" Crop Y ",-1)),ee(X("input",{"onUpdate:modelValue":M[21]||(M[21]=ut=>y.cropY=ut),type:"number",min:"0",onInput:_e},null,544),[[ae,y.cropY,void 0,{number:!0}]])]),X("label",null,[M[53]||(M[53]=Lt(" Crop Width ",-1)),ee(X("input",{"onUpdate:modelValue":M[22]||(M[22]=ut=>y.cropWidth=ut),type:"number",min:"1",onInput:_e},null,544),[[ae,y.cropWidth,void 0,{number:!0}]])]),X("label",null,[M[54]||(M[54]=Lt(" Crop Height ",-1)),ee(X("input",{"onUpdate:modelValue":M[23]||(M[23]=ut=>y.cropHeight=ut),type:"number",min:"1",onInput:_e},null,544),[[ae,y.cropHeight,void 0,{number:!0}]])]),X("label",null,[M[55]||(M[55]=Lt(" Output Width ",-1)),ee(X("input",{"onUpdate:modelValue":M[24]||(M[24]=ut=>y.outputWidth=ut),type:"number",min:"1",max:"4096",onInput:_e},null,544),[[ae,y.outputWidth,void 0,{number:!0}]])]),X("label",null,[M[56]||(M[56]=Lt(" Output Height ",-1)),ee(X("input",{"onUpdate:modelValue":M[25]||(M[25]=ut=>y.outputHeight=ut),type:"number",min:"1",max:"4096",onInput:_e},null,544),[[ae,y.outputHeight,void 0,{number:!0}]])]),X("label",null,[M[57]||(M[57]=Lt(" Rotation ",-1)),ee(X("input",{"onUpdate:modelValue":M[26]||(M[26]=ut=>y.rotation=ut),type:"range",min:"-180",max:"180",step:"1",onInput:_e},null,544),[[ae,y.rotation,void 0,{number:!0}]]),X("span",null,Ot(Math.round(y.rotation))+" deg",1)]),X("div",{class:"tool-row"},[X("button",{onClick:Ll},"Full image"),X("button",{onClick:Il},"Centered square")]),X("div",{class:"tool-row"},[X("button",{onClick:Gl},"Apply crop")])])])])])):Us("",!0),T.value?(ne(),ye("p",Pf,Ot(T.value),1)):Us("",!0)])}}},Ff=Dd(Mf,[["__scopeId","data-v-cb82153a"]]);gu(Ff).use(Id).mount("#app");
