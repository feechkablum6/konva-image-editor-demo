(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function ps(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const Ot={},Si=[],Ee=()=>{},Aa=()=>!1,ur=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ms=t=>t.startsWith("onUpdate:"),Qt=Object.assign,_s=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},bh=Object.prototype.hasOwnProperty,Ft=(t,e)=>bh.call(t,e),yt=Array.isArray,Ci=t=>kn(t)==="[object Map]",dr=t=>kn(t)==="[object Set]",qs=t=>kn(t)==="[object Date]",St=t=>typeof t=="function",Yt=t=>typeof t=="string",Ae=t=>typeof t=="symbol",Nt=t=>t!==null&&typeof t=="object",Fa=t=>(Nt(t)||St(t))&&St(t.then)&&St(t.catch),Ia=Object.prototype.toString,kn=t=>Ia.call(t),Sh=t=>kn(t).slice(8,-1),Oa=t=>kn(t)==="[object Object]",ys=t=>Yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xn=ps(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fr=t=>{const e=Object.create(null);return(i=>e[i]||(e[i]=t(i)))},Ch=/-\w/g,be=fr(t=>t.replace(Ch,e=>e.slice(1).toUpperCase())),xh=/\B([A-Z])/g,gi=fr(t=>t.replace(xh,"-$1").toLowerCase()),gr=fr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Lr=fr(t=>t?`on${gr(t)}`:""),Ze=(t,e)=>!Object.is(t,e),Xn=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},Na=(t,e,i,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:i})},pr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let zs;const mr=()=>zs||(zs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vs(t){if(yt(t)){const e={};for(let i=0;i<t.length;i++){const r=t[i],n=Yt(r)?Rh(r):vs(r);if(n)for(const s in n)e[s]=n[s]}return e}else if(Yt(t)||Nt(t))return t}const wh=/;(?![^(]*\))/g,Ph=/:([^]+)/,Th=/\/\*[^]*?\*\//g;function Rh(t){const e={};return t.replace(Th,"").split(wh).forEach(i=>{if(i){const r=i.split(Ph);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ui(t){let e="";if(Yt(t))e=t;else if(yt(t))for(let i=0;i<t.length;i++){const r=ui(t[i]);r&&(e+=r+" ")}else if(Nt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Mh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Eh=ps(Mh);function ka(t){return!!t||t===""}function Ah(t,e){if(t.length!==e.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=_r(t[r],e[r]);return i}function _r(t,e){if(t===e)return!0;let i=qs(t),r=qs(e);if(i||r)return i&&r?t.getTime()===e.getTime():!1;if(i=Ae(t),r=Ae(e),i||r)return t===e;if(i=yt(t),r=yt(e),i||r)return i&&r?Ah(t,e):!1;if(i=Nt(t),r=Nt(e),i||r){if(!i||!r)return!1;const n=Object.keys(t).length,s=Object.keys(e).length;if(n!==s)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!_r(t[a],e[a]))return!1}}return String(t)===String(e)}function Fh(t,e){return t.findIndex(i=>_r(i,e))}const La=t=>!!(t&&t.__v_isRef===!0),Dt=t=>Yt(t)?t:t==null?"":yt(t)||Nt(t)&&(t.toString===Ia||!St(t.toString))?La(t)?Dt(t.value):JSON.stringify(t,Da,2):String(t),Da=(t,e)=>La(e)?Da(t,e.value):Ci(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[r,n],s)=>(i[Dr(r,s)+" =>"]=n,i),{})}:dr(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>Dr(i))}:Ae(e)?Dr(e):Nt(e)&&!yt(e)&&!Oa(e)?String(e):e,Dr=(t,e="")=>{var i;return Ae(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};let de;class Ih{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=de,!e&&de&&(this.index=(de.scopes||(de.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=de;try{return de=this,e()}finally{de=i}}}on(){++this._on===1&&(this.prevScope=de,de=this)}off(){this._on>0&&--this._on===0&&(de=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Oh(){return de}let kt;const Gr=new WeakSet;class Ga{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,de&&de.active&&de.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gr.has(this)&&(Gr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ba(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ys(this),Ha(this);const e=kt,i=Ce;kt=this,Ce=!0;try{return this.fn()}finally{Va(this),kt=e,Ce=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Cs(e);this.deps=this.depsTail=void 0,Ys(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ns(this)&&this.run()}get dirty(){return ns(this)}}let Ua=0,wn,Pn;function Ba(t,e=!1){if(t.flags|=8,e){t.next=Pn,Pn=t;return}t.next=wn,wn=t}function bs(){Ua++}function Ss(){if(--Ua>0)return;if(Pn){let e=Pn;for(Pn=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;wn;){let e=wn;for(wn=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=i}}if(t)throw t}function Ha(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Va(t){let e,i=t.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),Cs(r),Nh(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=i}function ns(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Wa(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Wa(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===An)||(t.globalVersion=An,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ns(t))))return;t.flags|=2;const e=t.dep,i=kt,r=Ce;kt=t,Ce=!0;try{Ha(t);const n=t.fn(t._value);(e.version===0||Ze(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{kt=i,Ce=r,Va(t),t.flags&=-3}}function Cs(t,e=!1){const{dep:i,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),i.subs===t&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)Cs(s,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function Nh(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Ce=!0;const qa=[];function He(){qa.push(Ce),Ce=!1}function Ve(){const t=qa.pop();Ce=t===void 0?!0:t}function Ys(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=kt;kt=void 0;try{e()}finally{kt=i}}}let An=0;class kh{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xs{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!kt||!Ce||kt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==kt)i=this.activeLink=new kh(kt,this),kt.deps?(i.prevDep=kt.depsTail,kt.depsTail.nextDep=i,kt.depsTail=i):kt.deps=kt.depsTail=i,za(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=kt.depsTail,i.nextDep=void 0,kt.depsTail.nextDep=i,kt.depsTail=i,kt.deps===i&&(kt.deps=r)}return i}trigger(e){this.version++,An++,this.notify(e)}notify(e){bs();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Ss()}}}function za(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)za(r)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const rs=new WeakMap,di=Symbol(""),ss=Symbol(""),Fn=Symbol("");function ee(t,e,i){if(Ce&&kt){let r=rs.get(t);r||rs.set(t,r=new Map);let n=r.get(i);n||(r.set(i,n=new xs),n.map=r,n.key=i),n.track()}}function Ue(t,e,i,r,n,s){const a=rs.get(t);if(!a){An++;return}const o=l=>{l&&l.trigger()};if(bs(),e==="clear")a.forEach(o);else{const l=yt(t),u=l&&ys(i);if(l&&i==="length"){const c=Number(r);a.forEach((_,p)=>{(p==="length"||p===Fn||!Ae(p)&&p>=c)&&o(_)})}else switch((i!==void 0||a.has(void 0))&&o(a.get(i)),u&&o(a.get(Fn)),e){case"add":l?u&&o(a.get("length")):(o(a.get(di)),Ci(t)&&o(a.get(ss)));break;case"delete":l||(o(a.get(di)),Ci(t)&&o(a.get(ss)));break;case"set":Ci(t)&&o(a.get(di));break}}Ss()}function _i(t){const e=At(t);return e===t?e:(ee(e,"iterate",Fn),ve(t)?e:e.map(xe))}function yr(t){return ee(t=At(t),"iterate",Fn),t}function Ke(t,e){return We(t)?Ti(fi(t)?xe(e):e):xe(e)}const Lh={__proto__:null,[Symbol.iterator](){return Ur(this,Symbol.iterator,t=>Ke(this,t))},concat(...t){return _i(this).concat(...t.map(e=>yt(e)?_i(e):e))},entries(){return Ur(this,"entries",t=>(t[1]=Ke(this,t[1]),t))},every(t,e){return ke(this,"every",t,e,void 0,arguments)},filter(t,e){return ke(this,"filter",t,e,i=>i.map(r=>Ke(this,r)),arguments)},find(t,e){return ke(this,"find",t,e,i=>Ke(this,i),arguments)},findIndex(t,e){return ke(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ke(this,"findLast",t,e,i=>Ke(this,i),arguments)},findLastIndex(t,e){return ke(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ke(this,"forEach",t,e,void 0,arguments)},includes(...t){return Br(this,"includes",t)},indexOf(...t){return Br(this,"indexOf",t)},join(t){return _i(this).join(t)},lastIndexOf(...t){return Br(this,"lastIndexOf",t)},map(t,e){return ke(this,"map",t,e,void 0,arguments)},pop(){return Fi(this,"pop")},push(...t){return Fi(this,"push",t)},reduce(t,...e){return js(this,"reduce",t,e)},reduceRight(t,...e){return js(this,"reduceRight",t,e)},shift(){return Fi(this,"shift")},some(t,e){return ke(this,"some",t,e,void 0,arguments)},splice(...t){return Fi(this,"splice",t)},toReversed(){return _i(this).toReversed()},toSorted(t){return _i(this).toSorted(t)},toSpliced(...t){return _i(this).toSpliced(...t)},unshift(...t){return Fi(this,"unshift",t)},values(){return Ur(this,"values",t=>Ke(this,t))}};function Ur(t,e,i){const r=yr(t),n=r[e]();return r!==t&&!ve(t)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.done||(s.value=i(s.value)),s}),n}const Dh=Array.prototype;function ke(t,e,i,r,n,s){const a=yr(t),o=a!==t&&!ve(t),l=a[e];if(l!==Dh[e]){const _=l.apply(t,s);return o?xe(_):_}let u=i;a!==t&&(o?u=function(_,p){return i.call(this,Ke(t,_),p,t)}:i.length>2&&(u=function(_,p){return i.call(this,_,p,t)}));const c=l.call(a,u,r);return o&&n?n(c):c}function js(t,e,i,r){const n=yr(t);let s=i;return n!==t&&(ve(t)?i.length>3&&(s=function(a,o,l){return i.call(this,a,o,l,t)}):s=function(a,o,l){return i.call(this,a,Ke(t,o),l,t)}),n[e](s,...r)}function Br(t,e,i){const r=At(t);ee(r,"iterate",Fn);const n=r[e](...i);return(n===-1||n===!1)&&Ts(i[0])?(i[0]=At(i[0]),r[e](...i)):n}function Fi(t,e,i=[]){He(),bs();const r=At(t)[e].apply(t,i);return Ss(),Ve(),r}const Gh=ps("__proto__,__v_isRef,__isVue"),Ya=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ae));function Uh(t){Ae(t)||(t=String(t));const e=At(this);return ee(e,"has",t),e.hasOwnProperty(t)}class ja{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,r){if(i==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return s;if(i==="__v_raw")return r===(n?s?Kh:Ja:s?$a:Ka).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=yt(e);if(!n){let l;if(a&&(l=Lh[i]))return l;if(i==="hasOwnProperty")return Uh}const o=Reflect.get(e,i,Xt(e)?e:r);if((Ae(i)?Ya.has(i):Gh(i))||(n||ee(e,"get",i),s))return o;if(Xt(o)){const l=a&&ys(i)?o:o.value;return n&&Nt(l)?as(l):l}return Nt(o)?n?as(o):Me(o):o}}class Xa extends ja{constructor(e=!1){super(!1,e)}set(e,i,r,n){let s=e[i];const a=yt(e)&&ys(i);if(!this._isShallow){const u=We(s);if(!ve(r)&&!We(r)&&(s=At(s),r=At(r)),!a&&Xt(s)&&!Xt(r))return u||(s.value=r),!0}const o=a?Number(i)<e.length:Ft(e,i),l=Reflect.set(e,i,r,Xt(e)?e:n);return e===At(n)&&(o?Ze(r,s)&&Ue(e,"set",i,r):Ue(e,"add",i,r)),l}deleteProperty(e,i){const r=Ft(e,i);e[i];const n=Reflect.deleteProperty(e,i);return n&&r&&Ue(e,"delete",i,void 0),n}has(e,i){const r=Reflect.has(e,i);return(!Ae(i)||!Ya.has(i))&&ee(e,"has",i),r}ownKeys(e){return ee(e,"iterate",yt(e)?"length":di),Reflect.ownKeys(e)}}class Bh extends ja{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const Hh=new Xa,Vh=new Bh,Wh=new Xa(!0);const os=t=>t,zn=t=>Reflect.getPrototypeOf(t);function qh(t,e,i){return function(...r){const n=this.__v_raw,s=At(n),a=Ci(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=n[t](...r),c=i?os:e?Ti:xe;return!e&&ee(s,"iterate",l?ss:di),Qt(Object.create(u),{next(){const{value:_,done:p}=u.next();return p?{value:_,done:p}:{value:o?[c(_[0]),c(_[1])]:c(_),done:p}}})}}function Yn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function zh(t,e){const i={get(n){const s=this.__v_raw,a=At(s),o=At(n);t||(Ze(n,o)&&ee(a,"get",n),ee(a,"get",o));const{has:l}=zn(a),u=e?os:t?Ti:xe;if(l.call(a,n))return u(s.get(n));if(l.call(a,o))return u(s.get(o));s!==a&&s.get(n)},get size(){const n=this.__v_raw;return!t&&ee(At(n),"iterate",di),n.size},has(n){const s=this.__v_raw,a=At(s),o=At(n);return t||(Ze(n,o)&&ee(a,"has",n),ee(a,"has",o)),n===o?s.has(n):s.has(n)||s.has(o)},forEach(n,s){const a=this,o=a.__v_raw,l=At(o),u=e?os:t?Ti:xe;return!t&&ee(l,"iterate",di),o.forEach((c,_)=>n.call(s,u(c),u(_),a))}};return Qt(i,t?{add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear")}:{add(n){!e&&!ve(n)&&!We(n)&&(n=At(n));const s=At(this);return zn(s).has.call(s,n)||(s.add(n),Ue(s,"add",n,n)),this},set(n,s){!e&&!ve(s)&&!We(s)&&(s=At(s));const a=At(this),{has:o,get:l}=zn(a);let u=o.call(a,n);u||(n=At(n),u=o.call(a,n));const c=l.call(a,n);return a.set(n,s),u?Ze(s,c)&&Ue(a,"set",n,s):Ue(a,"add",n,s),this},delete(n){const s=At(this),{has:a,get:o}=zn(s);let l=a.call(s,n);l||(n=At(n),l=a.call(s,n)),o&&o.call(s,n);const u=s.delete(n);return l&&Ue(s,"delete",n,void 0),u},clear(){const n=At(this),s=n.size!==0,a=n.clear();return s&&Ue(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=qh(n,t,e)}),i}function ws(t,e){const i=zh(t,e);return(r,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(Ft(i,n)&&n in r?i:r,n,s)}const Yh={get:ws(!1,!1)},jh={get:ws(!1,!0)},Xh={get:ws(!0,!1)};const Ka=new WeakMap,$a=new WeakMap,Ja=new WeakMap,Kh=new WeakMap;function $h(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jh(t){return t.__v_skip||!Object.isExtensible(t)?0:$h(Sh(t))}function Me(t){return We(t)?t:Ps(t,!1,Hh,Yh,Ka)}function Qh(t){return Ps(t,!1,Wh,jh,$a)}function as(t){return Ps(t,!0,Vh,Xh,Ja)}function Ps(t,e,i,r,n){if(!Nt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Jh(t);if(s===0)return t;const a=n.get(t);if(a)return a;const o=new Proxy(t,s===2?r:i);return n.set(t,o),o}function fi(t){return We(t)?fi(t.__v_raw):!!(t&&t.__v_isReactive)}function We(t){return!!(t&&t.__v_isReadonly)}function ve(t){return!!(t&&t.__v_isShallow)}function Ts(t){return t?!!t.__v_raw:!1}function At(t){const e=t&&t.__v_raw;return e?At(e):t}function Zh(t){return!Ft(t,"__v_skip")&&Object.isExtensible(t)&&Na(t,"__v_skip",!0),t}const xe=t=>Nt(t)?Me(t):t,Ti=t=>Nt(t)?as(t):t;function Xt(t){return t?t.__v_isRef===!0:!1}function jt(t){return tc(t,!1)}function tc(t,e){return Xt(t)?t:new ec(t,e)}class ec{constructor(e,i){this.dep=new xs,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:At(e),this._value=i?e:xe(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,r=this.__v_isShallow||ve(e)||We(e);e=r?e:At(e),Ze(e,i)&&(this._rawValue=e,this._value=r?e:xe(e),this.dep.trigger())}}function U(t){return Xt(t)?t.value:t}const ic={get:(t,e,i)=>e==="__v_raw"?t:U(Reflect.get(t,e,i)),set:(t,e,i,r)=>{const n=t[e];return Xt(n)&&!Xt(i)?(n.value=i,!0):Reflect.set(t,e,i,r)}};function Qa(t){return fi(t)?t:new Proxy(t,ic)}class nc{constructor(e,i,r){this.fn=e,this.setter=i,this._value=void 0,this.dep=new xs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=An-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&kt!==this)return Ba(this,!0),!0}get value(){const e=this.dep.track();return Wa(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function rc(t,e,i=!1){let r,n;return St(t)?r=t:(r=t.get,n=t.set),new nc(r,n,i)}const jn={},tr=new WeakMap;let hi;function sc(t,e=!1,i=hi){if(i){let r=tr.get(i);r||tr.set(i,r=[]),r.push(t)}}function oc(t,e,i=Ot){const{immediate:r,deep:n,once:s,scheduler:a,augmentJob:o,call:l}=i,u=m=>n?m:ve(m)||n===!1||n===0?Be(m,1):Be(m);let c,_,p,d,g=!1,y=!1;if(Xt(t)?(_=()=>t.value,g=ve(t)):fi(t)?(_=()=>u(t),g=!0):yt(t)?(y=!0,g=t.some(m=>fi(m)||ve(m)),_=()=>t.map(m=>{if(Xt(m))return m.value;if(fi(m))return u(m);if(St(m))return l?l(m,2):m()})):St(t)?e?_=l?()=>l(t,2):t:_=()=>{if(p){He();try{p()}finally{Ve()}}const m=hi;hi=c;try{return l?l(t,3,[d]):t(d)}finally{hi=m}}:_=Ee,e&&n){const m=_,b=n===!0?1/0:n;_=()=>Be(m(),b)}const S=Oh(),C=()=>{c.stop(),S&&S.active&&_s(S.effects,c)};if(s&&e){const m=e;e=(...b)=>{m(...b),C()}}let f=y?new Array(t.length).fill(jn):jn;const h=m=>{if(!(!(c.flags&1)||!c.dirty&&!m))if(e){const b=c.run();if(n||g||(y?b.some((R,G)=>Ze(R,f[G])):Ze(b,f))){p&&p();const R=hi;hi=c;try{const G=[b,f===jn?void 0:y&&f[0]===jn?[]:f,d];f=b,l?l(e,3,G):e(...G)}finally{hi=R}}}else c.run()};return o&&o(h),c=new Ga(_),c.scheduler=a?()=>a(h,!1):h,d=m=>sc(m,!1,c),p=c.onStop=()=>{const m=tr.get(c);if(m){if(l)l(m,4);else for(const b of m)b();tr.delete(c)}},e?r?h(!0):f=c.run():a?a(h.bind(null,!0),!0):c.run(),C.pause=c.pause.bind(c),C.resume=c.resume.bind(c),C.stop=C,C}function Be(t,e=1/0,i){if(e<=0||!Nt(t)||t.__v_skip||(i=i||new Map,(i.get(t)||0)>=e))return t;if(i.set(t,e),e--,Xt(t))Be(t.value,e,i);else if(yt(t))for(let r=0;r<t.length;r++)Be(t[r],e,i);else if(dr(t)||Ci(t))t.forEach(r=>{Be(r,e,i)});else if(Oa(t)){for(const r in t)Be(t[r],e,i);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Be(t[r],e,i)}return t}function Ln(t,e,i,r){try{return r?t(...r):t()}catch(n){vr(n,e,i)}}function Fe(t,e,i,r){if(St(t)){const n=Ln(t,e,i,r);return n&&Fa(n)&&n.catch(s=>{vr(s,e,i)}),n}if(yt(t)){const n=[];for(let s=0;s<t.length;s++)n.push(Fe(t[s],e,i,r));return n}}function vr(t,e,i,r=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Ot;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let _=0;_<c.length;_++)if(c[_](t,l,u)===!1)return}o=o.parent}if(s){He(),Ln(s,null,10,[t,l,u]),Ve();return}}ac(t,i,n,r,a)}function ac(t,e,i,r=!0,n=!1){if(n)throw t;console.error(t)}const ae=[];let Te=-1;const xi=[];let $e=null,vi=0;const Za=Promise.resolve();let er=null;function Wt(t){const e=er||Za;return t?e.then(this?t.bind(this):t):e}function lc(t){let e=Te+1,i=ae.length;for(;e<i;){const r=e+i>>>1,n=ae[r],s=In(n);s<t||s===t&&n.flags&2?e=r+1:i=r}return e}function Rs(t){if(!(t.flags&1)){const e=In(t),i=ae[ae.length-1];!i||!(t.flags&2)&&e>=In(i)?ae.push(t):ae.splice(lc(e),0,t),t.flags|=1,tl()}}function tl(){er||(er=Za.then(il))}function hc(t){yt(t)?xi.push(...t):$e&&t.id===-1?$e.splice(vi+1,0,t):t.flags&1||(xi.push(t),t.flags|=1),tl()}function Xs(t,e,i=Te+1){for(;i<ae.length;i++){const r=ae[i];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ae.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function el(t){if(xi.length){const e=[...new Set(xi)].sort((i,r)=>In(i)-In(r));if(xi.length=0,$e){$e.push(...e);return}for($e=e,vi=0;vi<$e.length;vi++){const i=$e[vi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}$e=null,vi=0}}const In=t=>t.id==null?t.flags&2?-1:1/0:t.id;function il(t){try{for(Te=0;Te<ae.length;Te++){const e=ae[Te];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ln(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Te<ae.length;Te++){const e=ae[Te];e&&(e.flags&=-2)}Te=-1,ae.length=0,el(),er=null,(ae.length||xi.length)&&il()}}let me=null,nl=null;function ir(t){const e=me;return me=t,nl=t&&t.type.__scopeId||null,e}function Sn(t,e=me,i){if(!e||t._n)return t;const r=(...n)=>{r._d&&sr(-1);const s=ir(e);let a;try{a=t(...n)}finally{ir(s),r._d&&sr(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ne(t,e){if(me===null)return t;const i=wr(me),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[s,a,o,l=Ot]=e[n];s&&(St(s)&&(s={mounted:s,updated:s}),s.deep&&Be(a),r.push({dir:s,instance:i,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function si(t,e,i,r){const n=t.dirs,s=e&&e.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(He(),Fe(l,i,8,[t.el,o,t,e]),Ve())}}function cc(t,e){if(ie){let i=ie.provides;const r=ie.parent&&ie.parent.provides;r===i&&(i=ie.provides=Object.create(r)),i[t]=e}}function Kn(t,e,i=!1){const r=ks();if(r||wi){let n=wi?wi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return i&&St(e)?e.call(r&&r.proxy):e}}const uc=Symbol.for("v-scx"),dc=()=>Kn(uc);function ti(t,e,i){return rl(t,e,i)}function rl(t,e,i=Ot){const{immediate:r,deep:n,flush:s,once:a}=i,o=Qt({},i),l=e&&r||!e&&s!=="post";let u;if(Nn){if(s==="sync"){const d=dc();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Ee,d.resume=Ee,d.pause=Ee,d}}const c=ie;o.call=(d,g,y)=>Fe(d,c,g,y);let _=!1;s==="post"?o.scheduler=d=>{ge(d,c&&c.suspense)}:s!=="sync"&&(_=!0,o.scheduler=(d,g)=>{g?d():Rs(d)}),o.augmentJob=d=>{e&&(d.flags|=4),_&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const p=oc(t,e,o);return Nn&&(u?u.push(p):l&&p()),p}function fc(t,e,i){const r=this.proxy,n=Yt(t)?t.includes(".")?sl(r,t):()=>r[t]:t.bind(r,r);let s;St(e)?s=e:(s=e.handler,i=e);const a=Dn(this),o=rl(n,s.bind(r),i);return a(),o}function sl(t,e){const i=e.split(".");return()=>{let r=t;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const gc=Symbol("_vte"),pc=t=>t.__isTeleport,mc=Symbol("_leaveCb");function Ms(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ms(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ol(t,e){return St(t)?Qt({name:t.name},e,{setup:t}):t}function al(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const nr=new WeakMap;function Tn(t,e,i,r,n=!1){if(yt(t)){t.forEach((g,y)=>Tn(g,e&&(yt(e)?e[y]:e),i,r,n));return}if(Rn(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Tn(t,e,i,r.component.subTree);return}const s=r.shapeFlag&4?wr(r.component):r.el,a=n?null:s,{i:o,r:l}=t,u=e&&e.r,c=o.refs===Ot?o.refs={}:o.refs,_=o.setupState,p=At(_),d=_===Ot?Aa:g=>Ft(p,g);if(u!=null&&u!==l){if(Ks(e),Yt(u))c[u]=null,d(u)&&(_[u]=null);else if(Xt(u)){u.value=null;const g=e;g.k&&(c[g.k]=null)}}if(St(l))Ln(l,o,12,[a,c]);else{const g=Yt(l),y=Xt(l);if(g||y){const S=()=>{if(t.f){const C=g?d(l)?_[l]:c[l]:l.value;if(n)yt(C)&&_s(C,s);else if(yt(C))C.includes(s)||C.push(s);else if(g)c[l]=[s],d(l)&&(_[l]=c[l]);else{const f=[s];l.value=f,t.k&&(c[t.k]=f)}}else g?(c[l]=a,d(l)&&(_[l]=a)):y&&(l.value=a,t.k&&(c[t.k]=a))};if(a){const C=()=>{S(),nr.delete(t)};C.id=-1,nr.set(t,C),ge(C,i)}else Ks(t),S()}}}function Ks(t){const e=nr.get(t);e&&(e.flags|=8,nr.delete(t))}mr().requestIdleCallback;mr().cancelIdleCallback;const Rn=t=>!!t.type.__asyncLoader,ll=t=>t.type.__isKeepAlive;function _c(t,e){hl(t,"a",e)}function yc(t,e){hl(t,"da",e)}function hl(t,e,i=ie){const r=t.__wdc||(t.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(br(e,r,i),i){let n=i.parent;for(;n&&n.parent;)ll(n.parent.vnode)&&vc(r,e,i,n),n=n.parent}}function vc(t,e,i,r){const n=br(e,t,r,!0);Fs(()=>{_s(r[e],n)},i)}function br(t,e,i=ie,r=!1){if(i){const n=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...a)=>{He();const o=Dn(i),l=Fe(e,i,t,a);return o(),Ve(),l});return r?n.unshift(s):n.push(s),s}}const qe=t=>(e,i=ie)=>{(!Nn||t==="sp")&&br(t,(...r)=>e(...r),i)},bc=qe("bm"),Sr=qe("m"),Sc=qe("bu"),Es=qe("u"),As=qe("bum"),Fs=qe("um"),Cc=qe("sp"),xc=qe("rtg"),wc=qe("rtc");function Pc(t,e=ie){br("ec",t,e)}const Tc="components";function je(t,e){return Mc(Tc,t,!0,e)||t}const Rc=Symbol.for("v-ndc");function Mc(t,e,i=!0,r=!1){const n=me||ie;if(n){const s=n.type;{const o=du(s,!1);if(o&&(o===e||o===be(e)||o===gr(be(e))))return s}const a=$s(n[t]||s[t],e)||$s(n.appContext[t],e);return!a&&r?s:a}}function $s(t,e){return t&&(t[e]||t[be(e)]||t[gr(be(e))])}function Hr(t,e,i,r){let n;const s=i,a=yt(t);if(a||Yt(t)){const o=a&&fi(t);let l=!1,u=!1;o&&(l=!ve(t),u=We(t),t=yr(t)),n=new Array(t.length);for(let c=0,_=t.length;c<_;c++)n[c]=e(l?u?Ti(xe(t[c])):xe(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){n=new Array(t);for(let o=0;o<t;o++)n[o]=e(o+1,o,void 0,s)}else if(Nt(t))if(t[Symbol.iterator])n=Array.from(t,(o,l)=>e(o,l,void 0,s));else{const o=Object.keys(t);n=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];n[l]=e(t[c],c,l,s)}}else n=[];return n}const ls=t=>t?Ml(t)?wr(t):ls(t.parent):null,Mn=Qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ls(t.parent),$root:t=>ls(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ul(t),$forceUpdate:t=>t.f||(t.f=()=>{Rs(t.update)}),$nextTick:t=>t.n||(t.n=Wt.bind(t.proxy)),$watch:t=>fc.bind(t)}),Vr=(t,e)=>t!==Ot&&!t.__isScriptSetup&&Ft(t,e),Ec={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=t;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return n[e];case 4:return i[e];case 3:return s[e]}else{if(Vr(r,e))return a[e]=1,r[e];if(n!==Ot&&Ft(n,e))return a[e]=2,n[e];if(Ft(s,e))return a[e]=3,s[e];if(i!==Ot&&Ft(i,e))return a[e]=4,i[e];hs&&(a[e]=0)}}const u=Mn[e];let c,_;if(u)return e==="$attrs"&&ee(t.attrs,"get",""),u(t);if((c=o.__cssModules)&&(c=c[e]))return c;if(i!==Ot&&Ft(i,e))return a[e]=4,i[e];if(_=l.config.globalProperties,Ft(_,e))return _[e]},set({_:t},e,i){const{data:r,setupState:n,ctx:s}=t;return Vr(n,e)?(n[e]=i,!0):r!==Ot&&Ft(r,e)?(r[e]=i,!0):Ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:r,appContext:n,props:s,type:a}},o){let l;return!!(i[o]||t!==Ot&&o[0]!=="$"&&Ft(t,o)||Vr(e,o)||Ft(s,o)||Ft(r,o)||Ft(Mn,o)||Ft(n.config.globalProperties,o)||(l=a.__cssModules)&&l[o])},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Ft(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Js(t){return yt(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let hs=!0;function Ac(t){const e=ul(t),i=t.proxy,r=t.ctx;hs=!1,e.beforeCreate&&Qs(e.beforeCreate,t,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:_,mounted:p,beforeUpdate:d,updated:g,activated:y,deactivated:S,beforeDestroy:C,beforeUnmount:f,destroyed:h,unmounted:m,render:b,renderTracked:R,renderTriggered:G,errorCaptured:x,serverPrefetch:w,expose:T,inheritAttrs:k,components:B,directives:M,filters:W}=e;if(u&&Fc(u,r,null),a)for(const v in a){const P=a[v];St(P)&&(r[v]=P.bind(i))}if(n){const v=n.call(i,i);Nt(v)&&(t.data=Me(v))}if(hs=!0,s)for(const v in s){const P=s[v],O=St(P)?P.bind(i,i):St(P.get)?P.get.bind(i,i):Ee,A=!St(P)&&St(P.set)?P.set.bind(i):Ee,I=oe({get:O,set:A});Object.defineProperty(r,v,{enumerable:!0,configurable:!0,get:()=>I.value,set:j=>I.value=j})}if(o)for(const v in o)cl(o[v],r,i,v);if(l){const v=St(l)?l.call(i):l;Reflect.ownKeys(v).forEach(P=>{cc(P,v[P])})}c&&Qs(c,t,"c");function tt(v,P){yt(P)?P.forEach(O=>v(O.bind(i))):P&&v(P.bind(i))}if(tt(bc,_),tt(Sr,p),tt(Sc,d),tt(Es,g),tt(_c,y),tt(yc,S),tt(Pc,x),tt(wc,R),tt(xc,G),tt(As,f),tt(Fs,m),tt(Cc,w),yt(T))if(T.length){const v=t.exposed||(t.exposed={});T.forEach(P=>{Object.defineProperty(v,P,{get:()=>i[P],set:O=>i[P]=O,enumerable:!0})})}else t.exposed||(t.exposed={});b&&t.render===Ee&&(t.render=b),k!=null&&(t.inheritAttrs=k),B&&(t.components=B),M&&(t.directives=M),w&&al(t)}function Fc(t,e,i=Ee){yt(t)&&(t=cs(t));for(const r in t){const n=t[r];let s;Nt(n)?"default"in n?s=Kn(n.from||r,n.default,!0):s=Kn(n.from||r):s=Kn(n),Xt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function Qs(t,e,i){Fe(yt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,i)}function cl(t,e,i,r){let n=r.includes(".")?sl(i,r):()=>i[r];if(Yt(t)){const s=e[t];St(s)&&ti(n,s)}else if(St(t))ti(n,t.bind(i));else if(Nt(t))if(yt(t))t.forEach(s=>cl(s,e,i,r));else{const s=St(t.handler)?t.handler.bind(i):e[t.handler];St(s)&&ti(n,s,t)}}function ul(t){const e=t.type,{mixins:i,extends:r}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!n.length&&!i&&!r?l=e:(l={},n.length&&n.forEach(u=>rr(l,u,a,!0)),rr(l,e,a)),Nt(e)&&s.set(e,l),l}function rr(t,e,i,r=!1){const{mixins:n,extends:s}=e;s&&rr(t,s,i,!0),n&&n.forEach(a=>rr(t,a,i,!0));for(const a in e)if(!(r&&a==="expose")){const o=Ic[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Ic={data:Zs,props:to,emits:to,methods:Cn,computed:Cn,beforeCreate:re,created:re,beforeMount:re,mounted:re,beforeUpdate:re,updated:re,beforeDestroy:re,beforeUnmount:re,destroyed:re,unmounted:re,activated:re,deactivated:re,errorCaptured:re,serverPrefetch:re,components:Cn,directives:Cn,watch:Nc,provide:Zs,inject:Oc};function Zs(t,e){return e?t?function(){return Qt(St(t)?t.call(this,this):t,St(e)?e.call(this,this):e)}:e:t}function Oc(t,e){return Cn(cs(t),cs(e))}function cs(t){if(yt(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function re(t,e){return t?[...new Set([].concat(t,e))]:e}function Cn(t,e){return t?Qt(Object.create(null),t,e):e}function to(t,e){return t?yt(t)&&yt(e)?[...new Set([...t,...e])]:Qt(Object.create(null),Js(t),Js(e??{})):e}function Nc(t,e){if(!t)return e;if(!e)return t;const i=Qt(Object.create(null),t);for(const r in e)i[r]=re(t[r],e[r]);return i}function dl(){return{app:null,config:{isNativeTag:Aa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let kc=0;function Lc(t,e){return function(r,n=null){St(r)||(r=Qt({},r)),n!=null&&!Nt(n)&&(n=null);const s=dl(),a=new WeakSet,o=[];let l=!1;const u=s.app={_uid:kc++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:gu,get config(){return s.config},set config(c){},use(c,..._){return a.has(c)||(c&&St(c.install)?(a.add(c),c.install(u,..._)):St(c)&&(a.add(c),c(u,..._))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,_){return _?(s.components[c]=_,u):s.components[c]},directive(c,_){return _?(s.directives[c]=_,u):s.directives[c]},mount(c,_,p){if(!l){const d=u._ceVNode||zt(r,n);return d.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),t(d,c,p),l=!0,u._container=c,c.__vue_app__=u,wr(d.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Fe(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,_){return s.provides[c]=_,u},runWithContext(c){const _=wi;wi=u;try{return c()}finally{wi=_}}};return u}}let wi=null;const Dc=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${be(e)}Modifiers`]||t[`${gi(e)}Modifiers`];function Gc(t,e,...i){if(t.isUnmounted)return;const r=t.vnode.props||Ot;let n=i;const s=e.startsWith("update:"),a=s&&Dc(r,e.slice(7));a&&(a.trim&&(n=i.map(c=>Yt(c)?c.trim():c)),a.number&&(n=i.map(pr)));let o,l=r[o=Lr(e)]||r[o=Lr(be(e))];!l&&s&&(l=r[o=Lr(gi(e))]),l&&Fe(l,t,6,n);const u=r[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Fe(u,t,6,n)}}const Uc=new WeakMap;function fl(t,e,i=!1){const r=i?Uc:e.emitsCache,n=r.get(t);if(n!==void 0)return n;const s=t.emits;let a={},o=!1;if(!St(t)){const l=u=>{const c=fl(u,e,!0);c&&(o=!0,Qt(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(Nt(t)&&r.set(t,null),null):(yt(s)?s.forEach(l=>a[l]=null):Qt(a,s),Nt(t)&&r.set(t,a),a)}function Cr(t,e){return!t||!ur(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ft(t,e[0].toLowerCase()+e.slice(1))||Ft(t,gi(e))||Ft(t,e))}function eo(t){const{type:e,vnode:i,proxy:r,withProxy:n,propsOptions:[s],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:_,data:p,setupState:d,ctx:g,inheritAttrs:y}=t,S=ir(t);let C,f;try{if(i.shapeFlag&4){const m=n||r,b=m;C=Re(u.call(b,m,c,_,d,p,g)),f=o}else{const m=e;C=Re(m.length>1?m(_,{attrs:o,slots:a,emit:l}):m(_,null)),f=e.props?o:Bc(o)}}catch(m){En.length=0,vr(m,t,1),C=zt(ii)}let h=C;if(f&&y!==!1){const m=Object.keys(f),{shapeFlag:b}=h;m.length&&b&7&&(s&&m.some(ms)&&(f=Hc(f,s)),h=Ri(h,f,!1,!0))}return i.dirs&&(h=Ri(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(i.dirs):i.dirs),i.transition&&Ms(h,i.transition),C=h,ir(S),C}const Bc=t=>{let e;for(const i in t)(i==="class"||i==="style"||ur(i))&&((e||(e={}))[i]=t[i]);return e},Hc=(t,e)=>{const i={};for(const r in t)(!ms(r)||!(r.slice(9)in e))&&(i[r]=t[r]);return i};function Vc(t,e,i){const{props:r,children:n,component:s}=t,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?io(r,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let _=0;_<c.length;_++){const p=c[_];if(a[p]!==r[p]&&!Cr(u,p))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?io(r,a,u):!0:!!a;return!1}function io(t,e,i){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(e[s]!==t[s]&&!Cr(i,s))return!0}return!1}function Wc({vnode:t,parent:e},i){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=i,e=e.parent;else break}}const gl={},pl=()=>Object.create(gl),ml=t=>Object.getPrototypeOf(t)===gl;function qc(t,e,i,r=!1){const n={},s=pl();t.propsDefaults=Object.create(null),_l(t,e,n,s);for(const a in t.propsOptions[0])a in n||(n[a]=void 0);i?t.props=r?n:Qh(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function zc(t,e,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=t,o=At(n),[l]=t.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let _=0;_<c.length;_++){let p=c[_];if(Cr(t.emitsOptions,p))continue;const d=e[p];if(l)if(Ft(s,p))d!==s[p]&&(s[p]=d,u=!0);else{const g=be(p);n[g]=us(l,o,g,d,t,!1)}else d!==s[p]&&(s[p]=d,u=!0)}}}else{_l(t,e,n,s)&&(u=!0);let c;for(const _ in o)(!e||!Ft(e,_)&&((c=gi(_))===_||!Ft(e,c)))&&(l?i&&(i[_]!==void 0||i[c]!==void 0)&&(n[_]=us(l,o,_,void 0,t,!0)):delete n[_]);if(s!==o)for(const _ in s)(!e||!Ft(e,_))&&(delete s[_],u=!0)}u&&Ue(t.attrs,"set","")}function _l(t,e,i,r){const[n,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(xn(l))continue;const u=e[l];let c;n&&Ft(n,c=be(l))?!s||!s.includes(c)?i[c]=u:(o||(o={}))[c]=u:Cr(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(s){const l=At(i),u=o||Ot;for(let c=0;c<s.length;c++){const _=s[c];i[_]=us(n,l,_,u[_],t,!Ft(u,_))}}return a}function us(t,e,i,r,n,s){const a=t[i];if(a!=null){const o=Ft(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&St(l)){const{propsDefaults:u}=n;if(i in u)r=u[i];else{const c=Dn(n);r=u[i]=l.call(null,e),c()}}else r=l;n.ce&&n.ce._setProp(i,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===gi(i))&&(r=!0))}return r}const Yc=new WeakMap;function yl(t,e,i=!1){const r=i?Yc:e.propsCache,n=r.get(t);if(n)return n;const s=t.props,a={},o=[];let l=!1;if(!St(t)){const c=_=>{l=!0;const[p,d]=yl(_,e,!0);Qt(a,p),d&&o.push(...d)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return Nt(t)&&r.set(t,Si),Si;if(yt(s))for(let c=0;c<s.length;c++){const _=be(s[c]);no(_)&&(a[_]=Ot)}else if(s)for(const c in s){const _=be(c);if(no(_)){const p=s[c],d=a[_]=yt(p)||St(p)?{type:p}:Qt({},p),g=d.type;let y=!1,S=!0;if(yt(g))for(let C=0;C<g.length;++C){const f=g[C],h=St(f)&&f.name;if(h==="Boolean"){y=!0;break}else h==="String"&&(S=!1)}else y=St(g)&&g.name==="Boolean";d[0]=y,d[1]=S,(y||Ft(d,"default"))&&o.push(_)}}const u=[a,o];return Nt(t)&&r.set(t,u),u}function no(t){return t[0]!=="$"&&!xn(t)}const Is=t=>t==="_"||t==="_ctx"||t==="$stable",Os=t=>yt(t)?t.map(Re):[Re(t)],jc=(t,e,i)=>{if(e._n)return e;const r=Sn((...n)=>Os(e(...n)),i);return r._c=!1,r},vl=(t,e,i)=>{const r=t._ctx;for(const n in t){if(Is(n))continue;const s=t[n];if(St(s))e[n]=jc(n,s,r);else if(s!=null){const a=Os(s);e[n]=()=>a}}},bl=(t,e)=>{const i=Os(e);t.slots.default=()=>i},Sl=(t,e,i)=>{for(const r in e)(i||!Is(r))&&(t[r]=e[r])},Xc=(t,e,i)=>{const r=t.slots=pl();if(t.vnode.shapeFlag&32){const n=e._;n?(Sl(r,e,i),i&&Na(r,"_",n,!0)):vl(e,r)}else e&&bl(t,e)},Kc=(t,e,i)=>{const{vnode:r,slots:n}=t;let s=!0,a=Ot;if(r.shapeFlag&32){const o=e._;o?i&&o===1?s=!1:Sl(n,e,i):(s=!e.$stable,vl(e,n)),a=e}else e&&(bl(t,e),a={default:1});if(s)for(const o in n)!Is(o)&&a[o]==null&&delete n[o]},ge=tu;function $c(t){return Jc(t)}function Jc(t,e){const i=mr();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:_,nextSibling:p,setScopeId:d=Ee,insertStaticContent:g}=t,y=(F,L,z,$=null,Q=null,Z=null,rt=void 0,ot=null,nt=!!L.dynamicChildren)=>{if(F===L)return;F&&!Ii(F,L)&&($=N(F),j(F,Q,Z,!0),F=null),L.patchFlag===-2&&(nt=!1,L.dynamicChildren=null);const{type:et,ref:ut,shapeFlag:lt}=L;switch(et){case xr:S(F,L,z,$);break;case ii:C(F,L,z,$);break;case qr:F==null&&f(L,z,$,rt);break;case pe:B(F,L,z,$,Q,Z,rt,ot,nt);break;default:lt&1?b(F,L,z,$,Q,Z,rt,ot,nt):lt&6?M(F,L,z,$,Q,Z,rt,ot,nt):(lt&64||lt&128)&&et.process(F,L,z,$,Q,Z,rt,ot,nt,ct)}ut!=null&&Q?Tn(ut,F&&F.ref,Z,L||F,!L):ut==null&&F&&F.ref!=null&&Tn(F.ref,null,Z,F,!0)},S=(F,L,z,$)=>{if(F==null)r(L.el=o(L.children),z,$);else{const Q=L.el=F.el;L.children!==F.children&&u(Q,L.children)}},C=(F,L,z,$)=>{F==null?r(L.el=l(L.children||""),z,$):L.el=F.el},f=(F,L,z,$)=>{[F.el,F.anchor]=g(F.children,L,z,$,F.el,F.anchor)},h=({el:F,anchor:L},z,$)=>{let Q;for(;F&&F!==L;)Q=p(F),r(F,z,$),F=Q;r(L,z,$)},m=({el:F,anchor:L})=>{let z;for(;F&&F!==L;)z=p(F),n(F),F=z;n(L)},b=(F,L,z,$,Q,Z,rt,ot,nt)=>{if(L.type==="svg"?rt="svg":L.type==="math"&&(rt="mathml"),F==null)R(L,z,$,Q,Z,rt,ot,nt);else{const et=F.el&&F.el._isVueCE?F.el:null;try{et&&et._beginPatch(),w(F,L,Q,Z,rt,ot,nt)}finally{et&&et._endPatch()}}},R=(F,L,z,$,Q,Z,rt,ot)=>{let nt,et;const{props:ut,shapeFlag:lt,transition:ft,dirs:pt}=F;if(nt=F.el=a(F.type,Z,ut&&ut.is,ut),lt&8?c(nt,F.children):lt&16&&x(F.children,nt,null,$,Q,Wr(F,Z),rt,ot),pt&&si(F,null,$,"created"),G(nt,F,F.scopeId,rt,$),ut){for(const wt in ut)wt!=="value"&&!xn(wt)&&s(nt,wt,null,ut[wt],Z,$);"value"in ut&&s(nt,"value",null,ut.value,Z),(et=ut.onVnodeBeforeMount)&&Pe(et,$,F)}pt&&si(F,null,$,"beforeMount");const mt=Qc(Q,ft);mt&&ft.beforeEnter(nt),r(nt,L,z),((et=ut&&ut.onVnodeMounted)||mt||pt)&&ge(()=>{et&&Pe(et,$,F),mt&&ft.enter(nt),pt&&si(F,null,$,"mounted")},Q)},G=(F,L,z,$,Q)=>{if(z&&d(F,z),$)for(let Z=0;Z<$.length;Z++)d(F,$[Z]);if(Q){let Z=Q.subTree;if(L===Z||Pl(Z.type)&&(Z.ssContent===L||Z.ssFallback===L)){const rt=Q.vnode;G(F,rt,rt.scopeId,rt.slotScopeIds,Q.parent)}}},x=(F,L,z,$,Q,Z,rt,ot,nt=0)=>{for(let et=nt;et<F.length;et++){const ut=F[et]=ot?Je(F[et]):Re(F[et]);y(null,ut,L,z,$,Q,Z,rt,ot)}},w=(F,L,z,$,Q,Z,rt)=>{const ot=L.el=F.el;let{patchFlag:nt,dynamicChildren:et,dirs:ut}=L;nt|=F.patchFlag&16;const lt=F.props||Ot,ft=L.props||Ot;let pt;if(z&&oi(z,!1),(pt=ft.onVnodeBeforeUpdate)&&Pe(pt,z,L,F),ut&&si(L,F,z,"beforeUpdate"),z&&oi(z,!0),(lt.innerHTML&&ft.innerHTML==null||lt.textContent&&ft.textContent==null)&&c(ot,""),et?T(F.dynamicChildren,et,ot,z,$,Wr(L,Q),Z):rt||P(F,L,ot,null,z,$,Wr(L,Q),Z,!1),nt>0){if(nt&16)k(ot,lt,ft,z,Q);else if(nt&2&&lt.class!==ft.class&&s(ot,"class",null,ft.class,Q),nt&4&&s(ot,"style",lt.style,ft.style,Q),nt&8){const mt=L.dynamicProps;for(let wt=0;wt<mt.length;wt++){const vt=mt[wt],It=lt[vt],xt=ft[vt];(xt!==It||vt==="value")&&s(ot,vt,It,xt,Q,z)}}nt&1&&F.children!==L.children&&c(ot,L.children)}else!rt&&et==null&&k(ot,lt,ft,z,Q);((pt=ft.onVnodeUpdated)||ut)&&ge(()=>{pt&&Pe(pt,z,L,F),ut&&si(L,F,z,"updated")},$)},T=(F,L,z,$,Q,Z,rt)=>{for(let ot=0;ot<L.length;ot++){const nt=F[ot],et=L[ot],ut=nt.el&&(nt.type===pe||!Ii(nt,et)||nt.shapeFlag&198)?_(nt.el):z;y(nt,et,ut,null,$,Q,Z,rt,!0)}},k=(F,L,z,$,Q)=>{if(L!==z){if(L!==Ot)for(const Z in L)!xn(Z)&&!(Z in z)&&s(F,Z,L[Z],null,Q,$);for(const Z in z){if(xn(Z))continue;const rt=z[Z],ot=L[Z];rt!==ot&&Z!=="value"&&s(F,Z,ot,rt,Q,$)}"value"in z&&s(F,"value",L.value,z.value,Q)}},B=(F,L,z,$,Q,Z,rt,ot,nt)=>{const et=L.el=F?F.el:o(""),ut=L.anchor=F?F.anchor:o("");let{patchFlag:lt,dynamicChildren:ft,slotScopeIds:pt}=L;pt&&(ot=ot?ot.concat(pt):pt),F==null?(r(et,z,$),r(ut,z,$),x(L.children||[],z,ut,Q,Z,rt,ot,nt)):lt>0&&lt&64&&ft&&F.dynamicChildren&&F.dynamicChildren.length===ft.length?(T(F.dynamicChildren,ft,z,Q,Z,rt,ot),(L.key!=null||Q&&L===Q.subTree)&&Cl(F,L,!0)):P(F,L,z,ut,Q,Z,rt,ot,nt)},M=(F,L,z,$,Q,Z,rt,ot,nt)=>{L.slotScopeIds=ot,F==null?L.shapeFlag&512?Q.ctx.activate(L,z,$,rt,nt):W(L,z,$,Q,Z,rt,nt):H(F,L,nt)},W=(F,L,z,$,Q,Z,rt)=>{const ot=F.component=au(F,$,Q);if(ll(F)&&(ot.ctx.renderer=ct),lu(ot,!1,rt),ot.asyncDep){if(Q&&Q.registerDep(ot,tt,rt),!F.el){const nt=ot.subTree=zt(ii);C(null,nt,L,z),F.placeholder=nt.el}}else tt(ot,F,L,z,Q,Z,rt)},H=(F,L,z)=>{const $=L.component=F.component;if(Vc(F,L,z))if($.asyncDep&&!$.asyncResolved){v($,L,z);return}else $.next=L,$.update();else L.el=F.el,$.vnode=L},tt=(F,L,z,$,Q,Z,rt)=>{const ot=()=>{if(F.isMounted){let{next:lt,bu:ft,u:pt,parent:mt,vnode:wt}=F;{const Mt=xl(F);if(Mt){lt&&(lt.el=wt.el,v(F,lt,rt)),Mt.asyncDep.then(()=>{F.isUnmounted||ot()});return}}let vt=lt,It;oi(F,!1),lt?(lt.el=wt.el,v(F,lt,rt)):lt=wt,ft&&Xn(ft),(It=lt.props&&lt.props.onVnodeBeforeUpdate)&&Pe(It,mt,lt,wt),oi(F,!0);const xt=eo(F),Et=F.subTree;F.subTree=xt,y(Et,xt,_(Et.el),N(Et),F,Q,Z),lt.el=xt.el,vt===null&&Wc(F,xt.el),pt&&ge(pt,Q),(It=lt.props&&lt.props.onVnodeUpdated)&&ge(()=>Pe(It,mt,lt,wt),Q)}else{let lt;const{el:ft,props:pt}=L,{bm:mt,m:wt,parent:vt,root:It,type:xt}=F,Et=Rn(L);oi(F,!1),mt&&Xn(mt),!Et&&(lt=pt&&pt.onVnodeBeforeMount)&&Pe(lt,vt,L),oi(F,!0);{It.ce&&It.ce._def.shadowRoot!==!1&&It.ce._injectChildStyle(xt);const Mt=F.subTree=eo(F);y(null,Mt,z,$,F,Q,Z),L.el=Mt.el}if(wt&&ge(wt,Q),!Et&&(lt=pt&&pt.onVnodeMounted)){const Mt=L;ge(()=>Pe(lt,vt,Mt),Q)}(L.shapeFlag&256||vt&&Rn(vt.vnode)&&vt.vnode.shapeFlag&256)&&F.a&&ge(F.a,Q),F.isMounted=!0,L=z=$=null}};F.scope.on();const nt=F.effect=new Ga(ot);F.scope.off();const et=F.update=nt.run.bind(nt),ut=F.job=nt.runIfDirty.bind(nt);ut.i=F,ut.id=F.uid,nt.scheduler=()=>Rs(ut),oi(F,!0),et()},v=(F,L,z)=>{L.component=F;const $=F.vnode.props;F.vnode=L,F.next=null,zc(F,L.props,$,z),Kc(F,L.children,z),He(),Xs(F),Ve()},P=(F,L,z,$,Q,Z,rt,ot,nt=!1)=>{const et=F&&F.children,ut=F?F.shapeFlag:0,lt=L.children,{patchFlag:ft,shapeFlag:pt}=L;if(ft>0){if(ft&128){A(et,lt,z,$,Q,Z,rt,ot,nt);return}else if(ft&256){O(et,lt,z,$,Q,Z,rt,ot,nt);return}}pt&8?(ut&16&&K(et,Q,Z),lt!==et&&c(z,lt)):ut&16?pt&16?A(et,lt,z,$,Q,Z,rt,ot,nt):K(et,Q,Z,!0):(ut&8&&c(z,""),pt&16&&x(lt,z,$,Q,Z,rt,ot,nt))},O=(F,L,z,$,Q,Z,rt,ot,nt)=>{F=F||Si,L=L||Si;const et=F.length,ut=L.length,lt=Math.min(et,ut);let ft;for(ft=0;ft<lt;ft++){const pt=L[ft]=nt?Je(L[ft]):Re(L[ft]);y(F[ft],pt,z,null,Q,Z,rt,ot,nt)}et>ut?K(F,Q,Z,!0,!1,lt):x(L,z,$,Q,Z,rt,ot,nt,lt)},A=(F,L,z,$,Q,Z,rt,ot,nt)=>{let et=0;const ut=L.length;let lt=F.length-1,ft=ut-1;for(;et<=lt&&et<=ft;){const pt=F[et],mt=L[et]=nt?Je(L[et]):Re(L[et]);if(Ii(pt,mt))y(pt,mt,z,null,Q,Z,rt,ot,nt);else break;et++}for(;et<=lt&&et<=ft;){const pt=F[lt],mt=L[ft]=nt?Je(L[ft]):Re(L[ft]);if(Ii(pt,mt))y(pt,mt,z,null,Q,Z,rt,ot,nt);else break;lt--,ft--}if(et>lt){if(et<=ft){const pt=ft+1,mt=pt<ut?L[pt].el:$;for(;et<=ft;)y(null,L[et]=nt?Je(L[et]):Re(L[et]),z,mt,Q,Z,rt,ot,nt),et++}}else if(et>ft)for(;et<=lt;)j(F[et],Q,Z,!0),et++;else{const pt=et,mt=et,wt=new Map;for(et=mt;et<=ft;et++){const Bt=L[et]=nt?Je(L[et]):Re(L[et]);Bt.key!=null&&wt.set(Bt.key,et)}let vt,It=0;const xt=ft-mt+1;let Et=!1,Mt=0;const fe=new Array(xt);for(et=0;et<xt;et++)fe[et]=0;for(et=pt;et<=lt;et++){const Bt=F[et];if(It>=xt){j(Bt,Q,Z,!0);continue}let $t;if(Bt.key!=null)$t=wt.get(Bt.key);else for(vt=mt;vt<=ft;vt++)if(fe[vt-mt]===0&&Ii(Bt,L[vt])){$t=vt;break}$t===void 0?j(Bt,Q,Z,!0):(fe[$t-mt]=et+1,$t>=Mt?Mt=$t:Et=!0,y(Bt,L[$t],z,null,Q,Z,rt,ot,nt),It++)}const ye=Et?Zc(fe):Si;for(vt=ye.length-1,et=xt-1;et>=0;et--){const Bt=mt+et,$t=L[Bt],ni=L[Bt+1],ri=Bt+1<ut?ni.el||wl(ni):$;fe[et]===0?y(null,$t,z,ri,Q,Z,rt,ot,nt):Et&&(vt<0||et!==ye[vt]?I($t,z,ri,2):vt--)}}},I=(F,L,z,$,Q=null)=>{const{el:Z,type:rt,transition:ot,children:nt,shapeFlag:et}=F;if(et&6){I(F.component.subTree,L,z,$);return}if(et&128){F.suspense.move(L,z,$);return}if(et&64){rt.move(F,L,z,ct);return}if(rt===pe){r(Z,L,z);for(let lt=0;lt<nt.length;lt++)I(nt[lt],L,z,$);r(F.anchor,L,z);return}if(rt===qr){h(F,L,z);return}if($!==2&&et&1&&ot)if($===0)ot.beforeEnter(Z),r(Z,L,z),ge(()=>ot.enter(Z),Q);else{const{leave:lt,delayLeave:ft,afterLeave:pt}=ot,mt=()=>{F.ctx.isUnmounted?n(Z):r(Z,L,z)},wt=()=>{Z._isLeaving&&Z[mc](!0),lt(Z,()=>{mt(),pt&&pt()})};ft?ft(Z,mt,wt):wt()}else r(Z,L,z)},j=(F,L,z,$=!1,Q=!1)=>{const{type:Z,props:rt,ref:ot,children:nt,dynamicChildren:et,shapeFlag:ut,patchFlag:lt,dirs:ft,cacheIndex:pt}=F;if(lt===-2&&(Q=!1),ot!=null&&(He(),Tn(ot,null,z,F,!0),Ve()),pt!=null&&(L.renderCache[pt]=void 0),ut&256){L.ctx.deactivate(F);return}const mt=ut&1&&ft,wt=!Rn(F);let vt;if(wt&&(vt=rt&&rt.onVnodeBeforeUnmount)&&Pe(vt,L,F),ut&6)ht(F.component,z,$);else{if(ut&128){F.suspense.unmount(z,$);return}mt&&si(F,null,L,"beforeUnmount"),ut&64?F.type.remove(F,L,z,ct,$):et&&!et.hasOnce&&(Z!==pe||lt>0&&lt&64)?K(et,L,z,!1,!0):(Z===pe&&lt&384||!Q&&ut&16)&&K(nt,L,z),$&&V(F)}(wt&&(vt=rt&&rt.onVnodeUnmounted)||mt)&&ge(()=>{vt&&Pe(vt,L,F),mt&&si(F,null,L,"unmounted")},z)},V=F=>{const{type:L,el:z,anchor:$,transition:Q}=F;if(L===pe){it(z,$);return}if(L===qr){m(F);return}const Z=()=>{n(z),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(F.shapeFlag&1&&Q&&!Q.persisted){const{leave:rt,delayLeave:ot}=Q,nt=()=>rt(z,Z);ot?ot(F.el,Z,nt):nt()}else Z()},it=(F,L)=>{let z;for(;F!==L;)z=p(F),n(F),F=z;n(L)},ht=(F,L,z)=>{const{bum:$,scope:Q,job:Z,subTree:rt,um:ot,m:nt,a:et}=F;ro(nt),ro(et),$&&Xn($),Q.stop(),Z&&(Z.flags|=8,j(rt,F,L,z)),ot&&ge(ot,L),ge(()=>{F.isUnmounted=!0},L)},K=(F,L,z,$=!1,Q=!1,Z=0)=>{for(let rt=Z;rt<F.length;rt++)j(F[rt],L,z,$,Q)},N=F=>{if(F.shapeFlag&6)return N(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const L=p(F.anchor||F.el),z=L&&L[gc];return z?p(z):L};let Y=!1;const st=(F,L,z)=>{let $;F==null?L._vnode&&(j(L._vnode,null,null,!0),$=L._vnode.component):y(L._vnode||null,F,L,null,null,null,z),L._vnode=F,Y||(Y=!0,Xs($),el(),Y=!1)},ct={p:y,um:j,m:I,r:V,mt:W,mc:x,pc:P,pbc:T,n:N,o:t};return{render:st,hydrate:void 0,createApp:Lc(st)}}function Wr({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function oi({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Qc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Cl(t,e,i=!1){const r=t.children,n=e.children;if(yt(r)&&yt(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=Je(n[s]),o.el=a.el),!i&&o.patchFlag!==-2&&Cl(a,o)),o.type===xr&&(o.patchFlag!==-1?o.el=a.el:o.__elIndex=s+(t.type===pe?1:0)),o.type===ii&&!o.el&&(o.el=a.el)}}function Zc(t){const e=t.slice(),i=[0];let r,n,s,a,o;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(n=i[i.length-1],t[n]<u){e[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,t[i[o]]<u?s=o+1:a=o;u<t[i[s]]&&(s>0&&(e[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=e[a];return i}function xl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xl(e)}function ro(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function wl(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?wl(e.subTree):null}const Pl=t=>t.__isSuspense;function tu(t,e){e&&e.pendingBranch?yt(t)?e.effects.push(...t):e.effects.push(t):hc(t)}const pe=Symbol.for("v-fgt"),xr=Symbol.for("v-txt"),ii=Symbol.for("v-cmt"),qr=Symbol.for("v-stc"),En=[];let _e=null;function se(t=!1){En.push(_e=t?null:[])}function eu(){En.pop(),_e=En[En.length-1]||null}let On=1;function sr(t,e=!1){On+=t,t<0&&_e&&e&&(_e.hasOnce=!0)}function Tl(t){return t.dynamicChildren=On>0?_e||Si:null,eu(),On>0&&_e&&_e.push(t),t}function Se(t,e,i,r,n,s){return Tl(X(t,e,i,r,n,s,!0))}function $n(t,e,i,r,n){return Tl(zt(t,e,i,r,n,!0))}function or(t){return t?t.__v_isVNode===!0:!1}function Ii(t,e){return t.type===e.type&&t.key===e.key}const Rl=({key:t})=>t??null,Jn=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Yt(t)||Xt(t)||St(t)?{i:me,r:t,k:e,f:!!i}:t:null);function X(t,e=null,i=null,r=0,n=null,s=t===pe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Rl(e),ref:e&&Jn(e),scopeId:nl,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:me};return o?(Ns(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Yt(i)?8:16),On>0&&!a&&_e&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&_e.push(l),l}const zt=iu;function iu(t,e=null,i=null,r=0,n=null,s=!1){if((!t||t===Rc)&&(t=ii),or(t)){const o=Ri(t,e,!0);return i&&Ns(o,i),On>0&&!s&&_e&&(o.shapeFlag&6?_e[_e.indexOf(t)]=o:_e.push(o)),o.patchFlag=-2,o}if(fu(t)&&(t=t.__vccOpts),e){e=nu(e);let{class:o,style:l}=e;o&&!Yt(o)&&(e.class=ui(o)),Nt(l)&&(Ts(l)&&!yt(l)&&(l=Qt({},l)),e.style=vs(l))}const a=Yt(t)?1:Pl(t)?128:pc(t)?64:Nt(t)?4:St(t)?2:0;return X(t,e,i,r,n,a,s,!0)}function nu(t){return t?Ts(t)||ml(t)?Qt({},t):t:null}function Ri(t,e,i=!1,r=!1){const{props:n,ref:s,patchFlag:a,children:o,transition:l}=t,u=e?ru(n||{},e):n,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Rl(u),ref:e&&e.ref?i&&s?yt(s)?s.concat(Jn(e)):[s,Jn(e)]:Jn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==pe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ri(t.ssContent),ssFallback:t.ssFallback&&Ri(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ms(c,l.clone(c)),c}function Gt(t=" ",e=0){return zt(xr,null,t,e)}function ai(t="",e=!1){return e?(se(),$n(ii,null,t)):zt(ii,null,t)}function Re(t){return t==null||typeof t=="boolean"?zt(ii):yt(t)?zt(pe,null,t.slice()):or(t)?Je(t):zt(xr,null,String(t))}function Je(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ri(t)}function Ns(t,e){let i=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(yt(e))i=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Ns(t,n()),n._c&&(n._d=!0));return}else{i=32;const n=e._;!n&&!ml(e)?e._ctx=me:n===3&&me&&(me.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:me},i=32):(e=String(e),r&64?(i=16,e=[Gt(e)]):i=8);t.children=e,t.shapeFlag|=i}function ru(...t){const e={};for(let i=0;i<t.length;i++){const r=t[i];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=ui([e.class,r.class]));else if(n==="style")e.style=vs([e.style,r.style]);else if(ur(n)){const s=e[n],a=r[n];a&&s!==a&&!(yt(s)&&s.includes(a))&&(e[n]=s?[].concat(s,a):a)}else n!==""&&(e[n]=r[n])}return e}function Pe(t,e,i,r=null){Fe(t,e,7,[i,r])}const su=dl();let ou=0;function au(t,e,i){const r=t.type,n=(e?e.appContext:t.appContext)||su,s={uid:ou++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ih(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yl(r,n),emitsOptions:fl(r,n),emit:null,emitted:null,propsDefaults:Ot,inheritAttrs:r.inheritAttrs,ctx:Ot,data:Ot,props:Ot,attrs:Ot,slots:Ot,refs:Ot,setupState:Ot,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Gc.bind(null,s),t.ce&&t.ce(s),s}let ie=null;const ks=()=>ie||me;let ar,ds;{const t=mr(),e=(i,r)=>{let n;return(n=t[i])||(n=t[i]=[]),n.push(r),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};ar=e("__VUE_INSTANCE_SETTERS__",i=>ie=i),ds=e("__VUE_SSR_SETTERS__",i=>Nn=i)}const Dn=t=>{const e=ie;return ar(t),t.scope.on(),()=>{t.scope.off(),ar(e)}},so=()=>{ie&&ie.scope.off(),ar(null)};function Ml(t){return t.vnode.shapeFlag&4}let Nn=!1;function lu(t,e=!1,i=!1){e&&ds(e);const{props:r,children:n}=t.vnode,s=Ml(t);qc(t,r,s,e),Xc(t,n,i||e);const a=s?hu(t,e):void 0;return e&&ds(!1),a}function hu(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ec);const{setup:r}=i;if(r){He();const n=t.setupContext=r.length>1?uu(t):null,s=Dn(t),a=Ln(r,t,0,[t.props,n]),o=Fa(a);if(Ve(),s(),(o||t.sp)&&!Rn(t)&&al(t),o){if(a.then(so,so),e)return a.then(l=>{oo(t,l)}).catch(l=>{vr(l,t,0)});t.asyncDep=a}else oo(t,a)}else El(t)}function oo(t,e,i){St(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Nt(e)&&(t.setupState=Qa(e)),El(t)}function El(t,e,i){const r=t.type;t.render||(t.render=r.render||Ee);{const n=Dn(t);He();try{Ac(t)}finally{Ve(),n()}}}const cu={get(t,e){return ee(t,"get",""),t[e]}};function uu(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,cu),slots:t.slots,emit:t.emit,expose:e}}function wr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Qa(Zh(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Mn)return Mn[i](t)},has(e,i){return i in e||i in Mn}})):t.proxy}function du(t,e=!0){return St(t)?t.displayName||t.name:t.name||e&&t.__name}function fu(t){return St(t)&&"__vccOpts"in t}const oe=(t,e)=>rc(t,e,Nn);function Al(t,e,i){try{sr(-1);const r=arguments.length;return r===2?Nt(e)&&!yt(e)?or(e)?zt(t,null,[e]):zt(t,e):zt(t,null,e):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&or(i)&&(i=[i]),zt(t,e,i))}finally{sr(1)}}const gu="3.5.27";let fs;const ao=typeof window<"u"&&window.trustedTypes;if(ao)try{fs=ao.createPolicy("vue",{createHTML:t=>t})}catch{}const Fl=fs?t=>fs.createHTML(t):t=>t,pu="http://www.w3.org/2000/svg",mu="http://www.w3.org/1998/Math/MathML",Ge=typeof document<"u"?document:null,lo=Ge&&Ge.createElement("template"),_u={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,r)=>{const n=e==="svg"?Ge.createElementNS(pu,t):e==="mathml"?Ge.createElementNS(mu,t):i?Ge.createElement(t,{is:i}):Ge.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>Ge.createTextNode(t),createComment:t=>Ge.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ge.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,r,n,s){const a=i?i.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{lo.innerHTML=Fl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const o=lo.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},yu=Symbol("_vtc");function vu(t,e,i){const r=t[yu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const ho=Symbol("_vod"),bu=Symbol("_vsh"),Su=Symbol(""),Cu=/(?:^|;)\s*display\s*:/;function xu(t,e,i){const r=t.style,n=Yt(i);let s=!1;if(i&&!n){if(e)if(Yt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&Qn(r,o,"")}else for(const a in e)i[a]==null&&Qn(r,a,"");for(const a in i)a==="display"&&(s=!0),Qn(r,a,i[a])}else if(n){if(e!==i){const a=r[Su];a&&(i+=";"+a),r.cssText=i,s=Cu.test(i)}}else e&&t.removeAttribute("style");ho in t&&(t[ho]=s?r.display:"",t[bu]&&(r.display="none"))}const co=/\s*!important$/;function Qn(t,e,i){if(yt(i))i.forEach(r=>Qn(t,e,r));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const r=wu(t,e);co.test(i)?t.setProperty(gi(r),i.replace(co,""),"important"):t[r]=i}}const uo=["Webkit","Moz","ms"],zr={};function wu(t,e){const i=zr[e];if(i)return i;let r=be(e);if(r!=="filter"&&r in t)return zr[e]=r;r=gr(r);for(let n=0;n<uo.length;n++){const s=uo[n]+r;if(s in t)return zr[e]=s}return e}const fo="http://www.w3.org/1999/xlink";function go(t,e,i,r,n,s=Eh(e)){r&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(fo,e.slice(6,e.length)):t.setAttributeNS(fo,e,i):i==null||s&&!ka(i)?t.removeAttribute(e):t.setAttribute(e,s?"":Ae(i)?String(i):i)}function po(t,e,i,r,n){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?Fl(i):i);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let a=!1;if(i===""||i==null){const o=typeof t[e];o==="boolean"?i=ka(i):i==null&&o==="string"?(i="",a=!0):o==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(n||e)}function ci(t,e,i,r){t.addEventListener(e,i,r)}function Pu(t,e,i,r){t.removeEventListener(e,i,r)}const mo=Symbol("_vei");function Tu(t,e,i,r,n=null){const s=t[mo]||(t[mo]={}),a=s[e];if(r&&a)a.value=r;else{const[o,l]=Ru(e);if(r){const u=s[e]=Au(r,n);ci(t,o,u,l)}else a&&(Pu(t,o,a,l),s[e]=void 0)}}const _o=/(?:Once|Passive|Capture)$/;function Ru(t){let e;if(_o.test(t)){e={};let r;for(;r=t.match(_o);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gi(t.slice(2)),e]}let Yr=0;const Mu=Promise.resolve(),Eu=()=>Yr||(Mu.then(()=>Yr=0),Yr=Date.now());function Au(t,e){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Fe(Fu(r,i.value),e,5,[r])};return i.value=t,i.attached=Eu(),i}function Fu(t,e){if(yt(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const yo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Iu=(t,e,i,r,n,s)=>{const a=n==="svg";e==="class"?vu(t,r,a):e==="style"?xu(t,i,r):ur(e)?ms(e)||Tu(t,e,i,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ou(t,e,r,a))?(po(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&go(t,e,r,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Yt(r))?po(t,be(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),go(t,e,r,a))};function Ou(t,e,i,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&yo(e)&&St(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return yo(e)&&Yt(i)?!1:e in t}const lr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return yt(e)?i=>Xn(e,i):e};function Nu(t){t.target.composing=!0}function vo(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Pi=Symbol("_assign");function bo(t,e,i){return e&&(t=t.trim()),i&&(t=pr(t)),t}const he={created(t,{modifiers:{lazy:e,trim:i,number:r}},n){t[Pi]=lr(n);const s=r||n.props&&n.props.type==="number";ci(t,e?"change":"input",a=>{a.target.composing||t[Pi](bo(t.value,i,s))}),(i||s)&&ci(t,"change",()=>{t.value=bo(t.value,i,s)}),e||(ci(t,"compositionstart",Nu),ci(t,"compositionend",vo),ci(t,"change",vo))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:r,trim:n,number:s}},a){if(t[Pi]=lr(a),t.composing)return;const o=(s||t.type==="number")&&!/^0\d/.test(t.value)?pr(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===i||n&&t.value.trim()===l)||(t.value=l))}},ku={deep:!0,created(t,{value:e,modifiers:{number:i}},r){const n=dr(e);ci(t,"change",()=>{const s=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>i?pr(hr(a)):hr(a));t[Pi](t.multiple?n?new Set(s):s:s[0]),t._assigning=!0,Wt(()=>{t._assigning=!1})}),t[Pi]=lr(r)},mounted(t,{value:e}){So(t,e)},beforeUpdate(t,e,i){t[Pi]=lr(i)},updated(t,{value:e}){t._assigning||So(t,e)}};function So(t,e){const i=t.multiple,r=yt(e);if(!(i&&!r&&!dr(e))){for(let n=0,s=t.options.length;n<s;n++){const a=t.options[n],o=hr(a);if(i)if(r){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(o)):a.selected=Fh(e,o)>-1}else a.selected=e.has(o);else if(_r(hr(a),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function hr(t){return"_value"in t?t._value:t.value}const Lu=["ctrl","shift","alt","meta"],Du={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Lu.some(i=>t[`${i}Key`]&&!e.includes(i))},Gu=(t,e)=>{const i=t._withMods||(t._withMods={}),r=e.join(".");return i[r]||(i[r]=((n,...s)=>{for(let a=0;a<e.length;a++){const o=Du[e[a]];if(o&&o(n,e))return}return t(n,...s)}))},Uu=Qt({patchProp:Iu},_u);let Co;function Bu(){return Co||(Co=$c(Uu))}const Hu=((...t)=>{const e=Bu().createApp(...t),{mount:i}=e;return e.mount=r=>{const n=Wu(r);if(!n)return;const s=e._component;!St(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=i(n,!1,Vu(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e});function Vu(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Wu(t){return Yt(t)?document.querySelector(t):t}var xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zn={exports:{}},Oi={},jr={},Xr={},wo;function Pt(){return wo||(wo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof xo<"u"?xo:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:i(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return t.Konva.angleDeg?n*e:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var n;return(n=t.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(n){t.glob.Konva=n}};const r=n=>{t.Konva[n.prototype.getClassName()]=n};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Xr)),Xr}var Kr={},Po;function Ht(){return Po||(Po=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Pt();class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const b=this.m;return{x:b[0]*m.x+b[2]*m.y+b[4],y:b[1]*m.x+b[3]*m.y+b[5]}}translate(m,b){return this.m[4]+=this.m[0]*m+this.m[2]*b,this.m[5]+=this.m[1]*m+this.m[3]*b,this}scale(m,b){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=b,this.m[3]*=b,this}rotate(m){const b=Math.cos(m),R=Math.sin(m),G=this.m[0]*b+this.m[2]*R,x=this.m[1]*b+this.m[3]*R,w=this.m[0]*-R+this.m[2]*b,T=this.m[1]*-R+this.m[3]*b;return this.m[0]=G,this.m[1]=x,this.m[2]=w,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,b){const R=this.m[0]+this.m[2]*b,G=this.m[1]+this.m[3]*b,x=this.m[2]+this.m[0]*m,w=this.m[3]+this.m[1]*m;return this.m[0]=R,this.m[1]=G,this.m[2]=x,this.m[3]=w,this}multiply(m){const b=this.m[0]*m.m[0]+this.m[2]*m.m[1],R=this.m[1]*m.m[0]+this.m[3]*m.m[1],G=this.m[0]*m.m[2]+this.m[2]*m.m[3],x=this.m[1]*m.m[2]+this.m[3]*m.m[3],w=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],T=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=b,this.m[1]=R,this.m[2]=G,this.m[3]=x,this.m[4]=w,this.m[5]=T,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*m,R=-this.m[1]*m,G=-this.m[2]*m,x=this.m[0]*m,w=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=R,this.m[2]=G,this.m[3]=x,this.m[4]=w,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const m=this.m[0],b=this.m[1],R=this.m[2],G=this.m[3],x=this.m[4],w=this.m[5],T=m*G-b*R,k={x,y:w,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||b!=0){const B=Math.sqrt(m*m+b*b);k.rotation=b>0?Math.acos(m/B):-Math.acos(m/B),k.scaleX=B,k.scaleY=T/B,k.skewX=(m*R+b*G)/T,k.skewY=0}else if(R!=0||G!=0){const B=Math.sqrt(R*R+G*G);k.rotation=Math.PI/2-(G>0?Math.acos(-R/B):-Math.acos(R/B)),k.scaleX=T/B,k.scaleY=B,k.skewX=0,k.skewY=(m*R+b*G)/T}return k.rotation=t.Util._getRotation(k.rotation),k}}t.Transform=i;const r="[object Array]",n="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",c="",_="0",p="Konva warning: ",d="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const f=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(h){setTimeout(h,60)};t.Util={_isElement(h){return!!(h&&h.nodeType==1)},_isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject(h){return!!h&&h.constructor===Object},_isArray(h){return Object.prototype.toString.call(h)===r},_isNumber(h){return Object.prototype.toString.call(h)===n&&!isNaN(h)&&isFinite(h)},_isString(h){return Object.prototype.toString.call(h)===s},_isBoolean(h){return Object.prototype.toString.call(h)===a},isObject(h){return h instanceof Object},isValidSelector(h){if(typeof h!="string")return!1;const m=h[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(h){return h===0||h>0?1:-1},requestAnimFrame(h){C.push(h),C.length===1&&f(function(){const m=C;C=[],m.forEach(function(b){b()})})},createCanvasElement(){const h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement(){return document.createElement("img")},_isInDocument(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_urlToImage(h,m){const b=t.Util.createImageElement();b.onload=function(){m(b)},b.src=h},_rgbToHex(h,m,b){return((1<<24)+(h<<16)+(m<<8)+b).toString(16).slice(1)},_hexToRgb(h){h=h.replace(u,c);const m=parseInt(h,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let h=(Math.random()*16777215<<0).toString(16);for(;h.length<6;)h=_+h;return u+h},getRGB(h){let m;return h in y?(m=y[h],{r:m[0],g:m[1],b:m[2]}):h[0]===u?this._hexToRgb(h.substring(1)):h.substr(0,4)===g?(m=S.exec(h.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(h){return h=h||"black",t.Util._namedColorToRBA(h)||t.Util._hex3ColorToRGBA(h)||t.Util._hex4ColorToRGBA(h)||t.Util._hex6ColorToRGBA(h)||t.Util._hex8ColorToRGBA(h)||t.Util._rgbColorToRGBA(h)||t.Util._rgbaColorToRGBA(h)||t.Util._hslColorToRGBA(h)},_namedColorToRBA(h){const m=y[h.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];const m=h.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];const m=h.split(/ *, */).map((b,R)=>b.slice(-1)==="%"?R===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(h){if(h[0]==="#"&&h.length===9)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:parseInt(h.slice(7,9),16)/255}},_hex6ColorToRGBA(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex4ColorToRGBA(h){if(h[0]==="#"&&h.length===5)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:parseInt(h[4]+h[4],16)/255}},_hex3ColorToRGBA(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){const[m,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h),R=Number(b[0])/360,G=Number(b[1])/100,x=Number(b[2])/100;let w,T,k;if(G===0)return k=x*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};x<.5?w=x*(1+G):w=x+G-x*G;const B=2*x-w,M=[0,0,0];for(let W=0;W<3;W++)T=R+1/3*-(W-1),T<0&&T++,T>1&&T--,6*T<1?k=B+(w-B)*6*T:2*T<1?k=w:3*T<2?k=B+(w-B)*(2/3-T)*6:k=B,M[W]=k*255;return{r:Math.round(M[0]),g:Math.round(M[1]),b:Math.round(M[2]),a:1}}},haveIntersection(h,m){return!(m.x>h.x+h.width||m.x+m.width<h.x||m.y>h.y+h.height||m.y+m.height<h.y)},cloneObject(h){const m={};for(const b in h)this._isPlainObject(h[b])?m[b]=this.cloneObject(h[b]):this._isArray(h[b])?m[b]=this.cloneArray(h[b]):m[b]=h[b];return m},cloneArray(h){return h.slice(0)},degToRad(h){return h*o},radToDeg(h){return h*l},_degToRad(h){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(h)},_radToDeg(h){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(h)},_getRotation(h){return e.Konva.angleDeg?t.Util.radToDeg(h):h},_capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw(h){throw new Error(d+h)},error(h){console.error(d+h)},warn(h){e.Konva.showWarnings&&console.warn(p+h)},each(h,m){for(const b in h)m(b,h[b])},_inRange(h,m,b){return m<=h&&h<b},_getProjectionToSegment(h,m,b,R,G,x){let w,T,k;const B=(h-b)*(h-b)+(m-R)*(m-R);if(B==0)w=h,T=m,k=(G-b)*(G-b)+(x-R)*(x-R);else{const M=((G-h)*(b-h)+(x-m)*(R-m))/B;M<0?(w=h,T=m,k=(h-G)*(h-G)+(m-x)*(m-x)):M>1?(w=b,T=R,k=(b-G)*(b-G)+(R-x)*(R-x)):(w=h+M*(b-h),T=m+M*(R-m),k=(w-G)*(w-G)+(T-x)*(T-x))}return[w,T,k]},_getProjectionToLine(h,m,b){const R=t.Util.cloneObject(h);let G=Number.MAX_VALUE;return m.forEach(function(x,w){if(!b&&w===m.length-1)return;const T=m[(w+1)%m.length],k=t.Util._getProjectionToSegment(x.x,x.y,T.x,T.y,h.x,h.y),B=k[0],M=k[1],W=k[2];W<G&&(R.x=B,R.y=M,G=W)}),R},_prepareArrayForTween(h,m,b){const R=[],G=[];if(h.length>m.length){const w=m;m=h,h=w}for(let w=0;w<h.length;w+=2)R.push({x:h[w],y:h[w+1]});for(let w=0;w<m.length;w+=2)G.push({x:m[w],y:m[w+1]});const x=[];return G.forEach(function(w){const T=t.Util._getProjectionToLine(w,R,b);x.push(T.x),x.push(T.y)}),x},_prepareToStringify(h){let m;h.visitedByCircularReferenceRemoval=!0;for(const b in h)if(h.hasOwnProperty(b)&&h[b]&&typeof h[b]=="object"){if(m=Object.getOwnPropertyDescriptor(h,b),h[b].visitedByCircularReferenceRemoval||t.Util._isElement(h[b]))if(m.configurable)delete h[b];else return null;else if(t.Util._prepareToStringify(h[b])===null)if(m.configurable)delete h[b];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign(h,m){for(const b in m)h[b]=m[b];return h},_getFirstPointerId(h){return h.touches?h.changedTouches[0].identifier:h.pointerId||999},releaseCanvas(...h){e.Konva.releaseCanvasOnDestroy&&h.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(h,m,b,R){let G=0,x=0,w=0,T=0;typeof R=="number"?G=x=w=T=Math.min(R,m/2,b/2):(G=Math.min(R[0]||0,m/2,b/2),x=Math.min(R[1]||0,m/2,b/2),T=Math.min(R[2]||0,m/2,b/2),w=Math.min(R[3]||0,m/2,b/2)),h.moveTo(G,0),h.lineTo(m-x,0),h.arc(m-x,x,x,Math.PI*3/2,0,!1),h.lineTo(m,b-T),h.arc(m-T,b-T,T,0,Math.PI/2,!1),h.lineTo(w,b),h.arc(w,b-w,w,Math.PI/2,Math.PI,!1),h.lineTo(0,G),h.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}})(Kr)),Kr}var Ni={},Le={},De={},To;function Il(){if(To)return De;To=1,Object.defineProperty(De,"__esModule",{value:!0}),De.HitContext=De.SceneContext=De.Context=void 0;const t=Ht(),e=Pt();function i(C){const f=[],h=C.length,m=t.Util;for(let b=0;b<h;b++){let R=C[b];m._isNumber(R)?R=Math.round(R*1e3)/1e3:m._isString(R)||(R=R+""),f.push(R)}return f}const r=",",n="(",s=")",a="([",o="])",l=";",u="()",c="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],d=100;let g=class{constructor(f){this.canvas=f,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(f){f.fillEnabled()&&this._fill(f)}_fill(f){}strokeShape(f){f.hasStroke()&&this._stroke(f)}_stroke(f){}fillStrokeShape(f){f.attrs.fillAfterStrokeEnabled?(this.strokeShape(f),this.fillShape(f)):(this.fillShape(f),this.strokeShape(f))}getTrace(f,h){let m=this.traceArr,b=m.length,R="",G,x,w,T;for(G=0;G<b;G++)x=m[G],w=x.method,w?(T=x.args,R+=w,f?R+=u:t.Util._isArray(T[0])?R+=a+T.join(r)+o:(h&&(T=T.map(k=>typeof k=="number"?Math.floor(k):k)),R+=n+T.join(r)+s)):(R+=x.property,f||(R+=c+x.val)),R+=l;return R}clearTrace(){this.traceArr=[]}_trace(f){let h=this.traceArr,m;h.push(f),m=h.length,m>=d&&h.shift()}reset(){const f=this.getCanvas().getPixelRatio();this.setTransform(1*f,0,0,1*f,0,0)}getCanvas(){return this.canvas}clear(f){const h=this.getCanvas();f?this.clearRect(f.x||0,f.y||0,f.width||0,f.height||0):this.clearRect(0,0,h.getWidth()/h.pixelRatio,h.getHeight()/h.pixelRatio)}_applyLineCap(f){const h=f.attrs.lineCap;h&&this.setAttr("lineCap",h)}_applyOpacity(f){const h=f.getAbsoluteOpacity();h!==1&&this.setAttr("globalAlpha",h)}_applyLineJoin(f){const h=f.attrs.lineJoin;h&&this.setAttr("lineJoin",h)}setAttr(f,h){this._context[f]=h}arc(f,h,m,b,R,G){this._context.arc(f,h,m,b,R,G)}arcTo(f,h,m,b,R){this._context.arcTo(f,h,m,b,R)}beginPath(){this._context.beginPath()}bezierCurveTo(f,h,m,b,R,G){this._context.bezierCurveTo(f,h,m,b,R,G)}clearRect(f,h,m,b){this._context.clearRect(f,h,m,b)}clip(...f){this._context.clip.apply(this._context,f)}closePath(){this._context.closePath()}createImageData(f,h){const m=arguments;if(m.length===2)return this._context.createImageData(f,h);if(m.length===1)return this._context.createImageData(f)}createLinearGradient(f,h,m,b){return this._context.createLinearGradient(f,h,m,b)}createPattern(f,h){return this._context.createPattern(f,h)}createRadialGradient(f,h,m,b,R,G){return this._context.createRadialGradient(f,h,m,b,R,G)}drawImage(f,h,m,b,R,G,x,w,T){const k=arguments,B=this._context;k.length===3?B.drawImage(f,h,m):k.length===5?B.drawImage(f,h,m,b,R):k.length===9&&B.drawImage(f,h,m,b,R,G,x,w,T)}ellipse(f,h,m,b,R,G,x,w){this._context.ellipse(f,h,m,b,R,G,x,w)}isPointInPath(f,h,m,b){return m?this._context.isPointInPath(m,f,h,b):this._context.isPointInPath(f,h,b)}fill(...f){this._context.fill.apply(this._context,f)}fillRect(f,h,m,b){this._context.fillRect(f,h,m,b)}strokeRect(f,h,m,b){this._context.strokeRect(f,h,m,b)}fillText(f,h,m,b){b?this._context.fillText(f,h,m,b):this._context.fillText(f,h,m)}measureText(f){return this._context.measureText(f)}getImageData(f,h,m,b){return this._context.getImageData(f,h,m,b)}lineTo(f,h){this._context.lineTo(f,h)}moveTo(f,h){this._context.moveTo(f,h)}rect(f,h,m,b){this._context.rect(f,h,m,b)}roundRect(f,h,m,b,R){this._context.roundRect(f,h,m,b,R)}putImageData(f,h,m){this._context.putImageData(f,h,m)}quadraticCurveTo(f,h,m,b){this._context.quadraticCurveTo(f,h,m,b)}restore(){this._context.restore()}rotate(f){this._context.rotate(f)}save(){this._context.save()}scale(f,h){this._context.scale(f,h)}setLineDash(f){this._context.setLineDash?this._context.setLineDash(f):"mozDash"in this._context?this._context.mozDash=f:"webkitLineDash"in this._context&&(this._context.webkitLineDash=f)}getLineDash(){return this._context.getLineDash()}setTransform(f,h,m,b,R,G){this._context.setTransform(f,h,m,b,R,G)}stroke(f){f?this._context.stroke(f):this._context.stroke()}strokeText(f,h,m,b){this._context.strokeText(f,h,m,b)}transform(f,h,m,b,R,G){this._context.transform(f,h,m,b,R,G)}translate(f,h){this._context.translate(f,h)}_enableTrace(){let f=this,h=_.length,m=this.setAttr,b,R;const G=function(x){let w=f[x],T;f[x]=function(){return R=i(Array.prototype.slice.call(arguments,0)),T=w.apply(f,arguments),f._trace({method:x,args:R}),T}};for(b=0;b<h;b++)G(_[b]);f.setAttr=function(){m.apply(f,arguments);const x=arguments[0];let w=arguments[1];(x==="shadowOffsetX"||x==="shadowOffsetY"||x==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),f._trace({property:x,val:w})}}_applyGlobalCompositeOperation(f){const h=f.attrs.globalCompositeOperation;!h||h==="source-over"||this.setAttr("globalCompositeOperation",h)}};De.Context=g,p.forEach(function(C){Object.defineProperty(g.prototype,C,{get(){return this._context[C]},set(f){this._context[C]=f}})});class y extends g{constructor(f,{willReadFrequently:h=!1}={}){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:h})}_fillColor(f){const h=f.fill();this.setAttr("fillStyle",h),f._fillFunc(this)}_fillPattern(f){this.setAttr("fillStyle",f._getFillPattern()),f._fillFunc(this)}_fillLinearGradient(f){const h=f._getLinearGradient();h&&(this.setAttr("fillStyle",h),f._fillFunc(this))}_fillRadialGradient(f){const h=f._getRadialGradient();h&&(this.setAttr("fillStyle",h),f._fillFunc(this))}_fill(f){const h=f.fill(),m=f.getFillPriority();if(h&&m==="color"){this._fillColor(f);return}const b=f.getFillPatternImage();if(b&&m==="pattern"){this._fillPattern(f);return}const R=f.getFillLinearGradientColorStops();if(R&&m==="linear-gradient"){this._fillLinearGradient(f);return}const G=f.getFillRadialGradientColorStops();if(G&&m==="radial-gradient"){this._fillRadialGradient(f);return}h?this._fillColor(f):b?this._fillPattern(f):R?this._fillLinearGradient(f):G&&this._fillRadialGradient(f)}_strokeLinearGradient(f){const h=f.getStrokeLinearGradientStartPoint(),m=f.getStrokeLinearGradientEndPoint(),b=f.getStrokeLinearGradientColorStops(),R=this.createLinearGradient(h.x,h.y,m.x,m.y);if(b){for(let G=0;G<b.length;G+=2)R.addColorStop(b[G],b[G+1]);this.setAttr("strokeStyle",R)}}_stroke(f){const h=f.dash(),m=f.getStrokeScaleEnabled();if(f.hasStroke()){if(!m){this.save();const R=this.getCanvas().getPixelRatio();this.setTransform(R,0,0,R,0,0)}this._applyLineCap(f),h&&f.dashEnabled()&&(this.setLineDash(h),this.setAttr("lineDashOffset",f.dashOffset())),this.setAttr("lineWidth",f.strokeWidth()),f.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),f.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(f):this.setAttr("strokeStyle",f.stroke()),f._strokeFunc(this),m||this.restore()}}_applyShadow(f){var h,m,b;const R=(h=f.getShadowRGBA())!==null&&h!==void 0?h:"black",G=(m=f.getShadowBlur())!==null&&m!==void 0?m:5,x=(b=f.getShadowOffset())!==null&&b!==void 0?b:{x:0,y:0},w=f.getAbsoluteScale(),T=this.canvas.getPixelRatio(),k=w.x*T,B=w.y*T;this.setAttr("shadowColor",R),this.setAttr("shadowBlur",G*Math.min(Math.abs(k),Math.abs(B))),this.setAttr("shadowOffsetX",x.x*k),this.setAttr("shadowOffsetY",x.y*B)}}De.SceneContext=y;class S extends g{constructor(f){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:!0})}_fill(f){this.save(),this.setAttr("fillStyle",f.colorKey),f._fillFuncHit(this),this.restore()}strokeShape(f){f.hasHitStroke()&&this._stroke(f)}_stroke(f){if(f.hasHitStroke()){const h=f.getStrokeScaleEnabled();if(!h){this.save();const R=this.getCanvas().getPixelRatio();this.setTransform(R,0,0,R,0,0)}this._applyLineCap(f);const m=f.hitStrokeWidth(),b=m==="auto"?f.strokeWidth():m;this.setAttr("lineWidth",b),this.setAttr("strokeStyle",f.colorKey),f._strokeFuncHit(this),h||this.restore()}}}return De.HitContext=S,De}var Ro;function Pr(){if(Ro)return Le;Ro=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.HitCanvas=Le.SceneCanvas=Le.Canvas=void 0;const t=Ht(),e=Il(),i=Pt();let r;function n(){if(r)return r;const l=t.Util.createCanvasElement(),u=l.getContext("2d");return r=(function(){const c=i.Konva._global.devicePixelRatio||1,_=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return c/_})(),t.Util.releaseCanvas(l),r}let s=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(u||{}).pixelRatio||i.Konva.pixelRatio||n();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const c=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/c,this.getHeight()/c)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,c){this.setWidth(u||0),this.setHeight(c||0)}toDataURL(u,c){try{return this._canvas.toDataURL(u,c)}catch{try{return this._canvas.toDataURL()}catch(p){return t.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Le.Canvas=s;class a extends s{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new e.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Le.SceneCanvas=a;class o extends s{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(u.width,u.height)}}return Le.HitCanvas=o,Le}var $r={},Mo;function Ls(){return Mo||(Mo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Pt(),i=Ht();t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(n=>{r=n.node}),r},_dragElements:new Map,_drag(r){const n=[];t.DD._dragElements.forEach((s,a)=>{const{node:o}=s,l=o.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(c=>c.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){const c=o.dragDistance();if(Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y))<c||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,s),n.push(o)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const n=[];t.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&n.indexOf(u)===-1&&n.push(u)}),n.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:r},!0),n.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})($r)),$r}var Jr={},ce={},Eo;function Rt(){if(Eo)return ce;Eo=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.RGBComponent=r,ce.alphaComponent=n,ce.getNumberValidator=s,ce.getNumberOrArrayOfNumbersValidator=a,ce.getNumberOrAutoValidator=o,ce.getStringValidator=l,ce.getStringOrGradientValidator=u,ce.getFunctionValidator=c,ce.getNumberArrayValidator=_,ce.getBooleanValidator=p,ce.getComponentValidator=d;const t=Pt(),e=Ht();function i(g){return e.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||e.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function r(g){return g>255?255:g<0?0:Math.round(g)}function n(g){return g>1?1:g<1e-4?1e-4:g}function s(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isNumber(g)||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),g}}function a(g){if(t.Konva.isUnminified)return function(y,S){let C=e.Util._isNumber(y),f=e.Util._isArray(y)&&y.length==g;return!C&&!f&&e.Util.warn(i(y)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+g+")"),y}}function o(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isNumber(g)||g==="auto"||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),g}}function l(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isString(g)||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),g}}function u(){if(t.Konva.isUnminified)return function(g,y){const S=e.Util._isString(g),C=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return S||C||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),g}}function c(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isFunction(g)||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),g}}function _(){if(t.Konva.isUnminified)return function(g,y){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&g instanceof S||(e.Util._isArray(g)?g.forEach(function(C){e.Util._isNumber(C)||e.Util.warn('"'+y+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),g}}function p(){if(t.Konva.isUnminified)return function(g,y){return g===!0||g===!1||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),g}}function d(g){if(t.Konva.isUnminified)return function(y,S){return y==null||e.Util.isObject(y)||e.Util.warn(i(y)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+g),y}}return ce}var Ao;function Tt(){return Ao||(Ao=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=Ht(),i=Rt(),r="get",n="set";t.Factory={addGetterSetter(s,a,o,l,u){t.Factory.addGetter(s,a,o),t.Factory.addSetter(s,a,l,u),t.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){const l=r+e.Util._capitalize(a);s.prototype[l]=s.prototype[l]||function(){const u=this.attrs[a];return u===void 0?o:u}},addSetter(s,a,o,l){const u=n+e.Util._capitalize(a);s.prototype[u]||t.Factory.overWriteSetter(s,a,o,l)},overWriteSetter(s,a,o,l){const u=n+e.Util._capitalize(a);s.prototype[u]=function(c){return o&&c!==void 0&&c!==null&&(c=o.call(this,c,a)),this._setAttr(a,c),l&&l.call(this),this}},addComponentsGetterSetter(s,a,o,l,u){const c=o.length,_=e.Util._capitalize,p=r+_(a),d=n+_(a);s.prototype[p]=function(){const y={};for(let S=0;S<c;S++){const C=o[S];y[C]=this.getAttr(a+_(C))}return y};const g=(0,i.getComponentValidator)(o);s.prototype[d]=function(y){const S=this.attrs[a];l&&(y=l.call(this,y,a)),g&&g.call(this,y,a);for(const C in y)y.hasOwnProperty(C)&&this._setAttr(a+_(C),y[C]);return y||o.forEach(C=>{this._setAttr(a+_(C),void 0)}),this._fireChangeEvent(a,S,y),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){const o=e.Util._capitalize(a),l=n+o,u=r+o;s.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,a,o,l){e.Util.error("Adding deprecated "+a);const u=r+e.Util._capitalize(a),c=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(c);const _=this.attrs[a];return _===void 0?o:_},t.Factory.addSetter(s,a,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){e.Util.each(a,function(o,l){const u=s.prototype[l],c=r+e.Util._capitalize(o),_=n+e.Util._capitalize(o);function p(){u.apply(this,arguments),e.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[o]=p,s.prototype[c]=p,s.prototype[_]=p})},afterSetFilter(){this._filterUpToDate=!1}}})(Jr)),Jr}var Fo;function qt(){if(Fo)return Ni;Fo=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Node=void 0;const t=Pr(),e=Ls(),i=Tt(),r=Pt(),n=Ht(),s=Rt(),a="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",c="canvas",_="Change",p="children",d="konva",g="listening",y="mouseenter",S="mouseleave",C="pointerenter",f="pointerleave",h="touchenter",m="touchleave",b="set",R="Shape",G=" ",x="stage",w="transform",T="Stage",k="visible",B=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(G);let M=1,W=class gs{constructor(v){this._id=M++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(v),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(v){(v===w||v===l)&&this._cache.get(v)?this._cache.get(v).dirty=!0:v?this._cache.delete(v):this._cache.clear()}_getCache(v,P){let O=this._cache.get(v);return(O===void 0||(v===w||v===l)&&O.dirty===!0)&&(O=P.call(this),this._cache.set(v,O)),O}_calculate(v,P,O){if(!this._attachedDepsListeners.get(v)){const A=P.map(I=>I+"Change.konva").join(G);this.on(A,()=>{this._clearCache(v)}),this._attachedDepsListeners.set(v,!0)}return this._getCache(v,O)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(v){this._clearCache(v),v===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:v,filter:P,hit:O,buffer:A}=this._cache.get(c);n.Util.releaseCanvas(v,P,O,A),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(v){const P=v||{};let O={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(O=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let A=Math.ceil(P.width||O.width),I=Math.ceil(P.height||O.height),j=P.pixelRatio,V=P.x===void 0?Math.floor(O.x):P.x,it=P.y===void 0?Math.floor(O.y):P.y,ht=P.offset||0,K=P.drawBorder||!1,N=P.hitCanvasPixelRatio||1;if(!A||!I){n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Y=Math.abs(Math.round(O.x)-V)>.5?1:0,st=Math.abs(Math.round(O.y)-it)>.5?1:0;A+=ht*2+Y,I+=ht*2+st,V-=ht,it-=ht;const ct=new t.SceneCanvas({pixelRatio:j,width:A,height:I}),gt=new t.SceneCanvas({pixelRatio:j,width:0,height:0,willReadFrequently:!0}),F=new t.HitCanvas({pixelRatio:N,width:A,height:I}),L=ct.getContext(),z=F.getContext(),$=new t.SceneCanvas({width:ct.width/ct.pixelRatio+Math.abs(V),height:ct.height/ct.pixelRatio+Math.abs(it),pixelRatio:ct.pixelRatio}),Q=$.getContext();return F.isCache=!0,ct.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(ct.getContext()._context.imageSmoothingEnabled=!1,gt.getContext()._context.imageSmoothingEnabled=!1),L.save(),z.save(),Q.save(),L.translate(-V,-it),z.translate(-V,-it),Q.translate(-V,-it),$.x=V,$.y=it,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this.drawScene(ct,this,$),this.drawHit(F,this),this._isUnderCache=!1,L.restore(),z.restore(),K&&(L.save(),L.beginPath(),L.rect(0,0,A,I),L.closePath(),L.setAttr("strokeStyle","red"),L.setAttr("lineWidth",5),L.stroke(),L.restore()),this._cache.set(c,{scene:ct,filter:gt,hit:F,buffer:$,x:V,y:it}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(v){throw new Error('abstract "getClientRect" method call')}_transformedRect(v,P){const O=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}];let A=1/0,I=1/0,j=-1/0,V=-1/0;const it=this.getAbsoluteTransform(P);return O.forEach(function(ht){const K=it.point(ht);A===void 0&&(A=j=K.x,I=V=K.y),A=Math.min(A,K.x),I=Math.min(I,K.y),j=Math.max(j,K.x),V=Math.max(V,K.y)}),{x:A,y:I,width:j-A,height:V-I}}_drawCachedSceneCanvas(v){v.save(),v._applyOpacity(this),v._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();v.translate(P.x,P.y);const O=this._getCachedSceneCanvas(),A=O.pixelRatio;v.drawImage(O._canvas,0,0,O.width/A,O.height/A),v.restore()}_drawCachedHitCanvas(v){const P=this._getCanvasCache(),O=P.hit;v.save(),v.translate(P.x,P.y),v.drawImage(O._canvas,0,0,O.width/O.pixelRatio,O.height/O.pixelRatio),v.restore()}_getCachedSceneCanvas(){let v=this.filters(),P=this._getCanvasCache(),O=P.scene,A=P.filter,I=A.getContext(),j,V,it,ht;if(v){if(!this._filterUpToDate){const K=O.pixelRatio;A.setSize(O.width/O.pixelRatio,O.height/O.pixelRatio);try{for(j=v.length,I.clear(),I.drawImage(O._canvas,0,0,O.getWidth()/K,O.getHeight()/K),V=I.getImageData(0,0,A.getWidth(),A.getHeight()),it=0;it<j;it++){if(ht=v[it],typeof ht!="function"){n.Util.error("Filter should be type of function, but got "+typeof ht+" instead. Please check correct filters");continue}ht.call(this,V),I.putImageData(V,0,0)}}catch(N){n.Util.error("Unable to apply filter. "+N.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return A}return O}on(v,P){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const O=v.split(G);for(let A=0;A<O.length;A++){const j=O[A].split("."),V=j[0],it=j[1]||"";this.eventListeners[V]||(this.eventListeners[V]=[]),this.eventListeners[V].push({name:it,handler:P})}return this}off(v,P){let O=(v||"").split(G),A=O.length,I,j,V,it,ht,K;if(this._cache&&this._cache.delete(o),!v)for(j in this.eventListeners)this._off(j);for(I=0;I<A;I++)if(V=O[I],it=V.split("."),ht=it[0],K=it[1],ht)this.eventListeners[ht]&&this._off(ht,K,P);else for(j in this.eventListeners)this._off(j,K,P);return this}dispatchEvent(v){const P={target:this,type:v.type,evt:v};return this.fire(v.type,P),this}addEventListener(v,P){return this.on(v,function(O){P.call(this,O.evt)}),this}removeEventListener(v){return this.off(v),this}_delegate(v,P,O){const A=this;this.on(v,function(I){const j=I.target.findAncestors(P,!0,A);for(let V=0;V<j.length;V++)I=n.Util.cloneObject(I),I.currentTarget=j[V],O.call(j[V],I)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const v=this.getParent();v&&v.children&&(v.children.splice(this.index,1),v._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(v){const P="get"+n.Util._capitalize(v);return n.Util._isFunction(this[P])?this[P]():this.attrs[v]}getAncestors(){let v=this.getParent(),P=[];for(;v;)P.push(v),v=v.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(v){return this._batchTransformChanges(()=>{let P,O;if(!v)return this;for(P in v)P!==p&&(O=b+n.Util._capitalize(P),n.Util._isFunction(this[O])?this[O](v[P]):this._setAttr(P,v[P]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(v){if(!this.listening())return!1;const O=this.getParent();return O&&O!==v&&this!==v?O._isListening(v):!0}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(v){if(!this.visible())return!1;const O=this.getParent();return O&&O!==v&&this!==v?O._isVisible(v):!0}shouldDrawHit(v,P=!1){if(v)return this._isVisible(v)&&this._isListening(v);const O=this.getLayer();let A=!1;e.DD._dragElements.forEach(j=>{j.dragStatus==="dragging"&&(j.node.nodeType==="Stage"||j.node.getLayer()===O)&&(A=!0)});const I=!P&&!r.Konva.hitOnDragEnabled&&(A||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!I}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let v=this.getDepth(),P=this,O=0,A,I,j,V;function it(K){for(A=[],I=K.length,j=0;j<I;j++)V=K[j],O++,V.nodeType!==R&&(A=A.concat(V.getChildren().slice())),V._id===P._id&&(j=I);A.length>0&&A[0].getDepth()<=v&&it(A)}const ht=this.getStage();return P.nodeType!==T&&ht&&it(ht.getChildren()),O}getDepth(){let v=0,P=this.parent;for(;P;)v++,P=P.parent;return v}_batchTransformChanges(v){this._batchingTransformChange=!0,v(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(w),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(v){return this._batchTransformChanges(()=>{this.x(v.x),this.y(v.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const v=this.getStage();if(!v)return null;const P=v.getPointerPosition();if(!P)return null;const O=this.getAbsoluteTransform().copy();return O.invert(),O.point(P)}getAbsolutePosition(v){let P=!1,O=this.parent;for(;O;){if(O.isCached()){P=!0;break}O=O.parent}P&&!v&&(v=!0);const A=this.getAbsoluteTransform(v).getMatrix(),I=new n.Transform,j=this.offset();return I.m=A.slice(),I.translate(j.x,j.y),I.getTranslation()}setAbsolutePosition(v){const{x:P,y:O,...A}=this._clearTransform();this.attrs.x=P,this.attrs.y=O,this._clearCache(w);const I=this._getAbsoluteTransform().copy();return I.invert(),I.translate(v.x,v.y),v={x:this.attrs.x+I.getTranslation().x,y:this.attrs.y+I.getTranslation().y},this._setTransform(A),this.setPosition({x:v.x,y:v.y}),this._clearCache(w),this._clearSelfAndDescendantCache(l),this}_setTransform(v){let P;for(P in v)this.attrs[P]=v[P]}_clearTransform(){const v={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,v}move(v){let P=v.x,O=v.y,A=this.x(),I=this.y();return P!==void 0&&(A+=P),O!==void 0&&(I+=O),this.setPosition({x:A,y:I}),this}_eachAncestorReverse(v,P){let O=[],A=this.getParent(),I,j;if(!(P&&P._id===this._id)){for(O.unshift(this);A&&(!P||A._id!==P._id);)O.unshift(A),A=A.parent;for(I=O.length,j=0;j<I;j++)v(O[j])}}rotate(v){return this.rotation(this.rotation()+v),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const v=this.index,P=this.parent.getChildren().length;return v<P-1?(this.parent.children.splice(v,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;const v=this.index,P=this.parent.getChildren().length;return v<P-1?(this.parent.children.splice(v,1),this.parent.children.splice(v+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;const v=this.index;return v>0?(this.parent.children.splice(v,1),this.parent.children.splice(v-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const v=this.index;return v>0?(this.parent.children.splice(v,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(v){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(v<0||v>=this.parent.children.length)&&n.Util.warn("Unexpected value "+v+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(v,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let v=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(v*=P.getAbsoluteOpacity()),v}moveTo(v){return this.getParent()!==v&&(this._remove(),v.add(this)),this}toObject(){let v=this.getAttrs(),P,O,A,I,j;const V={attrs:{},className:this.getClassName()};for(P in v)O=v[P],j=n.Util.isObject(O)&&!n.Util._isPlainObject(O)&&!n.Util._isArray(O),!j&&(A=typeof this[P]=="function"&&this[P],delete v[P],I=A?A.call(this):null,v[P]=O,I!==O&&(V.attrs[P]=O));return n.Util._prepareToStringify(V)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(v,P,O){const A=[];P&&this._isMatch(v)&&A.push(this);let I=this.parent;for(;I;){if(I===O)return A;I._isMatch(v)&&A.push(I),I=I.parent}return A}isAncestorOf(v){return!1}findAncestor(v,P,O){return this.findAncestors(v,P,O)[0]}_isMatch(v){if(!v)return!1;if(typeof v=="function")return v(this);let P=v.replace(/ /g,"").split(","),O=P.length,A,I;for(A=0;A<O;A++)if(I=P[A],n.Util.isValidSelector(I)||(n.Util.warn('Selector "'+I+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),I.charAt(0)==="#"){if(this.id()===I.slice(1))return!0}else if(I.charAt(0)==="."){if(this.hasName(I.slice(1)))return!0}else if(this.className===I||this.nodeType===I)return!0;return!1}getLayer(){const v=this.getParent();return v?v.getLayer():null}getStage(){return this._getCache(x,this._getStage)}_getStage(){const v=this.getParent();return v?v.getStage():null}fire(v,P={},O){return P.target=P.target||this,O?this._fireAndBubble(v,P):this._fire(v,P),this}getAbsoluteTransform(v){return v?this._getAbsoluteTransform(v):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(v){let P;if(v)return P=new n.Transform,this._eachAncestorReverse(function(O){const A=O.transformsEnabled();A==="all"?P.multiply(O.getTransform()):A==="position"&&P.translate(O.x()-O.offsetX(),O.y()-O.offsetY())},v),P;{P=this._cache.get(l)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const O=this.transformsEnabled();if(O==="all")P.multiply(this.getTransform());else if(O==="position"){const A=this.attrs.x||0,I=this.attrs.y||0,j=this.attrs.offsetX||0,V=this.attrs.offsetY||0;P.translate(A-j,I-V)}return P.dirty=!1,P}}getAbsoluteScale(v){let P=this;for(;P;)P._isUnderCache&&(v=P),P=P.getParent();const A=this.getAbsoluteTransform(v).decompose();return{x:A.scaleX,y:A.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(w,this._getTransform)}_getTransform(){var v,P;const O=this._cache.get(w)||new n.Transform;O.reset();const A=this.x(),I=this.y(),j=r.Konva.getAngle(this.rotation()),V=(v=this.attrs.scaleX)!==null&&v!==void 0?v:1,it=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,ht=this.attrs.skewX||0,K=this.attrs.skewY||0,N=this.attrs.offsetX||0,Y=this.attrs.offsetY||0;return(A!==0||I!==0)&&O.translate(A,I),j!==0&&O.rotate(j),(ht!==0||K!==0)&&O.skew(ht,K),(V!==1||it!==1)&&O.scale(V,it),(N!==0||Y!==0)&&O.translate(-1*N,-1*Y),O.dirty=!1,O}clone(v){let P=n.Util.cloneObject(this.attrs),O,A,I,j,V;for(O in v)P[O]=v[O];const it=new this.constructor(P);for(O in this.eventListeners)for(A=this.eventListeners[O],I=A.length,j=0;j<I;j++)V=A[j],V.name.indexOf(d)<0&&(it.eventListeners[O]||(it.eventListeners[O]=[]),it.eventListeners[O].push(V));return it}_toKonvaCanvas(v){v=v||{};const P=this.getClientRect(),O=this.getStage(),A=v.x!==void 0?v.x:Math.floor(P.x),I=v.y!==void 0?v.y:Math.floor(P.y),j=v.pixelRatio||1,V=new t.SceneCanvas({width:v.width||Math.ceil(P.width)||(O?O.width():0),height:v.height||Math.ceil(P.height)||(O?O.height():0),pixelRatio:j}),it=V.getContext(),ht=new t.SceneCanvas({width:V.width/V.pixelRatio+Math.abs(A),height:V.height/V.pixelRatio+Math.abs(I),pixelRatio:V.pixelRatio});return v.imageSmoothingEnabled===!1&&(it._context.imageSmoothingEnabled=!1),it.save(),(A||I)&&it.translate(-1*A,-1*I),this.drawScene(V,void 0,ht),it.restore(),V}toCanvas(v){return this._toKonvaCanvas(v)._canvas}toDataURL(v){v=v||{};const P=v.mimeType||null,O=v.quality||null,A=this._toKonvaCanvas(v).toDataURL(P,O);return v.callback&&v.callback(A),A}toImage(v){return new Promise((P,O)=>{try{const A=v?.callback;A&&delete v.callback,n.Util._urlToImage(this.toDataURL(v),function(I){P(I),A?.(I)})}catch(A){O(A)}})}toBlob(v){return new Promise((P,O)=>{try{const A=v?.callback;A&&delete v.callback,this.toCanvas(v).toBlob(I=>{P(I),A?.(I)},v?.mimeType,v?.quality)}catch(A){O(A)}})}setSize(v){return this.width(v.width),this.height(v.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(v,P,O){let A=this.eventListeners[v],I,j,V;for(I=0;I<A.length;I++)if(j=A[I].name,V=A[I].handler,(j!=="konva"||P==="konva")&&(!P||j===P)&&(!O||O===V)){if(A.splice(I,1),A.length===0){delete this.eventListeners[v];break}I--}}_fireChangeEvent(v,P,O){this._fire(v+_,{oldVal:P,newVal:O})}addName(v){if(!this.hasName(v)){const P=this.name(),O=P?P+" "+v:v;this.name(O)}return this}hasName(v){if(!v)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(v)!==-1:!1}removeName(v){const P=(this.name()||"").split(/\s/g),O=P.indexOf(v);return O!==-1&&(P.splice(O,1),this.name(P.join(" "))),this}setAttr(v,P){const O=this[b+n.Util._capitalize(v)];return n.Util._isFunction(O)?O.call(this,P):this._setAttr(v,P),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const v=this.getLayer()||this.getStage();v?.batchDraw()}}_setAttr(v,P){const O=this.attrs[v];O===P&&!n.Util.isObject(P)||(P==null?delete this.attrs[v]:this.attrs[v]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(v,O,P),this._requestDraw())}_setComponentAttr(v,P,O){let A;O!==void 0&&(A=this.attrs[v],A||(this.attrs[v]=this.getAttr(v)),this.attrs[v][P]=O,this._fireChangeEvent(v,A,O))}_fireAndBubble(v,P,O){P&&this.nodeType===R&&(P.target=this);const A=[y,S,C,f,h,m];if(!(A.indexOf(v)!==-1&&(O&&(this===O||this.isAncestorOf&&this.isAncestorOf(O))||this.nodeType==="Stage"&&!O))){this._fire(v,P);const j=A.indexOf(v)!==-1&&O&&O.isAncestorOf&&O.isAncestorOf(this)&&!O.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!j&&(O&&O.parent?this._fireAndBubble.call(this.parent,v,P,O):this._fireAndBubble.call(this.parent,v,P))}}_getProtoListeners(v){var P,O,A;const I=(P=this._cache.get(o))!==null&&P!==void 0?P:{};let j=I?.[v];if(j===void 0){j=[];let V=Object.getPrototypeOf(this);for(;V;){const it=(A=(O=V.eventListeners)===null||O===void 0?void 0:O[v])!==null&&A!==void 0?A:[];j.push(...it),V=Object.getPrototypeOf(V)}I[v]=j,this._cache.set(o,I)}return j}_fire(v,P){P=P||{},P.currentTarget=this,P.type=v;const O=this._getProtoListeners(v);if(O)for(let I=0;I<O.length;I++)O[I].handler.call(this,P);const A=this.eventListeners[v];if(A)for(let I=0;I<A.length;I++)A[I].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(v){const P=v?v.pointerId:void 0,O=this.getStage(),A=this.getAbsolutePosition();if(!O)return;const I=O._getPointerById(P)||O._changedPointerPositions[0]||A;e.DD._dragElements.set(this._id,{node:this,startPointerPos:I,offset:{x:I.x-A.x,y:I.y-A.y},dragStatus:"ready",pointerId:P})}startDrag(v,P=!0){e.DD._dragElements.has(this._id)||this._createDragElement(v);const O=e.DD._dragElements.get(this._id);O.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:v&&v.evt},P)}_setDragPosition(v,P){const O=this.getStage()._getPointerById(P.pointerId);if(!O)return;let A={x:O.x-P.offset.x,y:O.y-P.offset.y};const I=this.dragBoundFunc();if(I!==void 0){const j=I.call(this,A,v);j?A=j:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==A.x||this._lastPos.y!==A.y)&&(this.setAbsolutePosition(A),this._requestDraw()),this._lastPos=A}stopDrag(v){const P=e.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),e.DD._endDragBefore(v),e.DD._endDragAfter(v)}setDraggable(v){this._setAttr("draggable",v),this._dragChange()}isDragging(){const v=e.DD._dragElements.get(this._id);return v?v.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(v){if(!(!(v.evt.button!==void 0)||r.Konva.dragButtons.indexOf(v.evt.button)>=0)||this.isDragging())return;let A=!1;e.DD._dragElements.forEach(I=>{this.isAncestorOf(I.node)&&(A=!0)}),A||this._createDragElement(v)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=e.DD._dragElements.get(this._id),O=P&&P.dragStatus==="dragging",A=P&&P.dragStatus==="ready";O?this.stopDrag():A&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(v={x:0,y:0}){const P=this.getStage();if(!P)return!1;const O={x:-v.x,y:-v.y,width:P.width()+2*v.x,height:P.height()+2*v.y};return n.Util.haveIntersection(O,this.getClientRect())}static create(v,P){return n.Util._isString(v)&&(v=JSON.parse(v)),this._createNode(v,P)}static _createNode(v,P){let O=gs.prototype.getClassName.call(v),A=v.children,I,j,V;P&&(v.attrs.container=P),r.Konva[O]||(n.Util.warn('Can not find a node with class name "'+O+'". Fallback to "Shape".'),O="Shape");const it=r.Konva[O];if(I=new it(v.attrs),A)for(j=A.length,V=0;V<j;V++)I.add(gs._createNode(A[V]));return I}};Ni.Node=W,W.prototype.nodeType="Node",W.prototype._attrsAffectingSize=[],W.prototype.eventListeners={},W.prototype.on.call(W.prototype,B,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(w),this._clearSelfAndDescendantCache(l)}),W.prototype.on.call(W.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(k)}),W.prototype.on.call(W.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),W.prototype.on.call(W.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const H=i.Factory.addGetterSetter;return H(W,"zIndex"),H(W,"absolutePosition"),H(W,"position"),H(W,"x",0,(0,s.getNumberValidator)()),H(W,"y",0,(0,s.getNumberValidator)()),H(W,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),H(W,"opacity",1,(0,s.getNumberValidator)()),H(W,"name","",(0,s.getStringValidator)()),H(W,"id","",(0,s.getStringValidator)()),H(W,"rotation",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(W,"scale",["x","y"]),H(W,"scaleX",1,(0,s.getNumberValidator)()),H(W,"scaleY",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(W,"skew",["x","y"]),H(W,"skewX",0,(0,s.getNumberValidator)()),H(W,"skewY",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(W,"offset",["x","y"]),H(W,"offsetX",0,(0,s.getNumberValidator)()),H(W,"offsetY",0,(0,s.getNumberValidator)()),H(W,"dragDistance",void 0,(0,s.getNumberValidator)()),H(W,"width",0,(0,s.getNumberValidator)()),H(W,"height",0,(0,s.getNumberValidator)()),H(W,"listening",!0,(0,s.getBooleanValidator)()),H(W,"preventDefault",!0,(0,s.getBooleanValidator)()),H(W,"filters",void 0,function(tt){return this._filterUpToDate=!1,tt}),H(W,"visible",!0,(0,s.getBooleanValidator)()),H(W,"transformsEnabled","all",(0,s.getStringValidator)()),H(W,"size"),H(W,"dragBoundFunc"),H(W,"draggable",!1,(0,s.getBooleanValidator)()),i.Factory.backCompat(W,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Ni}var ki={},Io;function Tr(){if(Io)return ki;Io=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Container=void 0;const t=Tt(),e=qt(),i=Rt();let r=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){const a=this.children||[];return s?a.filter(s):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let o=0;o<s.length;o++)this.add(s[o]);return this}const a=s[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const a=this._generalFind(s,!0);return a.length>0?a[0]:void 0}_generalFind(s,a){const o=[];return this._descendants(l=>{const u=l._isMatch(s);return u&&o.push(l),!!(u&&a)}),o}_descendants(s){let a=!1;const o=this.getChildren();for(const l of o){if(a=s(l),a)return!0;if(l.hasChildren()&&(a=l._descendants(s),a))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(a=>{s.children.push(a.toObject())}),s}isAncestorOf(s){let a=s.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(s){const a=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(o){a.add(o.clone())}),a}getAllIntersections(s){const a=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(s)&&a.push(o)}),a}_clearSelfAndDescendantCache(s){var a;super._clearSelfAndDescendantCache(s),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(o){o._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(a,o){a.index=o}),this._requestDraw()}drawScene(s,a,o){const l=this.getLayer(),u=s||l&&l.getCanvas(),c=u&&u.getContext(),_=this._getCanvasCache(),p=_&&_.scene,d=u&&u.isCache;if(!this.isVisible()&&!d)return this;if(p){c.save();const g=this.getAbsoluteTransform(a).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",u,a,o);return this}drawHit(s,a){if(!this.shouldDrawHit(a))return this;const o=this.getLayer(),l=s||o&&o.hitCanvas,u=l&&l.getContext(),c=this._getCanvasCache();if(c&&c.hit){u.save();const p=this.getAbsoluteTransform(a).getMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,a);return this}_drawChildren(s,a,o,l){var u;const c=a&&a.getContext(),_=this.clipWidth(),p=this.clipHeight(),d=this.clipFunc(),g=typeof _=="number"&&typeof p=="number"||d,y=o===this;if(g){c.save();const C=this.getAbsoluteTransform(o);let f=C.getMatrix();c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),c.beginPath();let h;if(d)h=d.call(this,c,this);else{const m=this.clipX(),b=this.clipY();c.rect(m||0,b||0,_,p)}c.clip.apply(c,h),f=C.copy().invert().getMatrix(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const S=!y&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";S&&(c.save(),c._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(C){C[s](a,o,l)}),S&&c.restore(),g&&c.restore()}getClientRect(s={}){var a;const o=s.skipTransform,l=s.relativeTo;let u,c,_,p,d={x:1/0,y:1/0,width:0,height:0};const g=this;(a=this.children)===null||a===void 0||a.forEach(function(C){if(!C.visible())return;const f=C.getClientRect({relativeTo:g,skipShadow:s.skipShadow,skipStroke:s.skipStroke});f.width===0&&f.height===0||(u===void 0?(u=f.x,c=f.y,_=f.x+f.width,p=f.y+f.height):(u=Math.min(u,f.x),c=Math.min(c,f.y),_=Math.max(_,f.x+f.width),p=Math.max(p,f.y+f.height)))});const y=this.find("Shape");let S=!1;for(let C=0;C<y.length;C++)if(y[C]._isVisible(this)){S=!0;break}return S&&u!==void 0?d={x:u,y:c,width:_-u,height:p-c}:d={x:0,y:0,width:0,height:0},o?d:this._transformedRect(d,l)}};return ki.Container=r,t.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(r,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipFunc"),ki}var Qr={},Xe={},Oo;function Ol(){if(Oo)return Xe;Oo=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.getCapturedShape=r,Xe.createEvent=n,Xe.hasPointerCapture=s,Xe.setPointerCapture=a,Xe.releaseCapture=o;const t=Pt(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function r(l){return e.get(l)}function n(l){return{evt:l,pointerId:l.pointerId}}function s(l,u){return e.get(l)===u}function a(l,u){o(l),u.getStage()&&(e.set(l,u),i&&u._fire("gotpointercapture",n(new PointerEvent("gotpointercapture"))))}function o(l,u){const c=e.get(l);if(!c)return;const _=c.getStage();_&&_.content,e.delete(l),i&&c._fire("lostpointercapture",n(new PointerEvent("lostpointercapture")))}return Xe}var No;function zu(){return No||(No=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=Ht(),i=Tt(),r=Tr(),n=Pt(),s=Pr(),a=Ls(),o=Pt(),l=Ol(),u="Stage",c="string",_="px",p="mouseout",d="mouseleave",g="mouseover",y="mouseenter",S="mousemove",C="mousedown",f="mouseup",h="pointermove",m="pointerdown",b="pointerup",R="pointercancel",G="lostpointercapture",x="pointerout",w="pointerleave",T="pointerover",k="pointerenter",B="contextmenu",M="touchstart",W="touchend",H="touchmove",tt="touchcancel",v="wheel",P=5,O=[[y,"_pointerenter"],[C,"_pointerdown"],[S,"_pointermove"],[f,"_pointerup"],[d,"_pointerleave"],[M,"_pointerdown"],[H,"_pointermove"],[W,"_pointerup"],[tt,"_pointercancel"],[g,"_pointerover"],[v,"_wheel"],[B,"_contextmenu"],[m,"_pointerdown"],[h,"_pointermove"],[b,"_pointerup"],[R,"_pointercancel"],[w,"_pointerleave"],[G,"_lostpointercapture"]],A={mouse:{[x]:p,[w]:d,[T]:g,[k]:y,[h]:S,[m]:C,[b]:f,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[x]:"touchout",[w]:"touchleave",[T]:"touchover",[k]:"touchenter",[h]:H,[m]:M,[b]:W,[R]:tt,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[x]:x,[w]:w,[T]:T,[k]:k,[h]:h,[m]:m,[b]:b,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=K=>K.indexOf("pointer")>=0?"pointer":K.indexOf("touch")>=0?"touch":"mouse",j=K=>{const N=I(K);if(N==="pointer")return n.Konva.pointerEventsEnabled&&A.pointer;if(N==="touch")return A.touch;if(N==="mouse")return A.mouse};function V(K={}){return(K.clipFunc||K.clipWidth||K.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),K}const it="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ht extends r.Container{constructor(N){super(V(N)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{V(this.attrs)}),this._checkVisibility()}_validateAdd(N){const Y=N.getType()==="Layer",st=N.getType()==="FastLayer";Y||st||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const N=this.visible()?"":"none";this.content.style.display=N}setContainer(N){if(typeof N===c){let Y;if(N.charAt(0)==="."){const st=N.slice(1);N=document.getElementsByClassName(st)[0]}else N.charAt(0)!=="#"?Y=N:Y=N.slice(1),N=document.getElementById(Y);if(!N)throw"Can not find container in document with id "+Y}return this._setAttr("container",N),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),N.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const N=this.children,Y=N.length;for(let st=0;st<Y;st++)N[st].clear();return this}clone(N){return N||(N={}),N.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,N)}destroy(){super.destroy();const N=this.content;N&&e.Util._isInDocument(N)&&this.container().removeChild(N);const Y=t.stages.indexOf(this);return Y>-1&&t.stages.splice(Y,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const N=this._pointerPositions[0]||this._changedPointerPositions[0];return N?{x:N.x,y:N.y}:(e.Util.warn(it),null)}_getPointerById(N){return this._pointerPositions.find(Y=>Y.id===N)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(N){N=N||{},N.x=N.x||0,N.y=N.y||0,N.width=N.width||this.width(),N.height=N.height||this.height();const Y=new s.SceneCanvas({width:N.width,height:N.height,pixelRatio:N.pixelRatio||1}),st=Y.getContext()._context,ct=this.children;return(N.x||N.y)&&st.translate(-1*N.x,-1*N.y),ct.forEach(function(gt){if(!gt.isVisible())return;const F=gt._toKonvaCanvas(N);st.drawImage(F._canvas,N.x,N.y,F.getWidth()/F.getPixelRatio(),F.getHeight()/F.getPixelRatio())}),Y}getIntersection(N){if(!N)return null;const Y=this.children,st=Y.length,ct=st-1;for(let gt=ct;gt>=0;gt--){const F=Y[gt].getIntersection(N);if(F)return F}return null}_resizeDOM(){const N=this.width(),Y=this.height();this.content&&(this.content.style.width=N+_,this.content.style.height=Y+_),this.bufferCanvas.setSize(N,Y),this.bufferHitCanvas.setSize(N,Y),this.children.forEach(st=>{st.setSize({width:N,height:Y}),st.draw()})}add(N,...Y){if(arguments.length>1){for(let ct=0;ct<arguments.length;ct++)this.add(arguments[ct]);return this}super.add(N);const st=this.children.length;return st>P&&e.Util.warn("The stage has "+st+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),N.setSize({width:this.width(),height:this.height()}),N.draw(),n.Konva.isBrowser&&this.content.appendChild(N.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(N){return l.hasPointerCapture(N,this)}setPointerCapture(N){l.setPointerCapture(N,this)}releaseCapture(N){l.releaseCapture(N,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&O.forEach(([N,Y])=>{this.content.addEventListener(N,st=>{this[Y](st)},{passive:!1})})}_pointerenter(N){this.setPointersPositions(N);const Y=j(N.type);Y&&this._fire(Y.pointerenter,{evt:N,target:this,currentTarget:this})}_pointerover(N){this.setPointersPositions(N);const Y=j(N.type);Y&&this._fire(Y.pointerover,{evt:N,target:this,currentTarget:this})}_getTargetShape(N){let Y=this[N+"targetShape"];return Y&&!Y.getStage()&&(Y=null),Y}_pointerleave(N){const Y=j(N.type),st=I(N.type);if(!Y)return;this.setPointersPositions(N);const ct=this._getTargetShape(st),gt=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;ct&&gt?(ct._fireAndBubble(Y.pointerout,{evt:N}),ct._fireAndBubble(Y.pointerleave,{evt:N}),this._fire(Y.pointerleave,{evt:N,target:this,currentTarget:this}),this[st+"targetShape"]=null):gt&&(this._fire(Y.pointerleave,{evt:N,target:this,currentTarget:this}),this._fire(Y.pointerout,{evt:N,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(N){const Y=j(N.type),st=I(N.type);if(!Y)return;this.setPointersPositions(N);let ct=!1;this._changedPointerPositions.forEach(gt=>{const F=this.getIntersection(gt);if(a.DD.justDragged=!1,n.Konva["_"+st+"ListenClick"]=!0,!F||!F.isListening()){this[st+"ClickStartShape"]=void 0;return}n.Konva.capturePointerEventsEnabled&&F.setPointerCapture(gt.id),this[st+"ClickStartShape"]=F,F._fireAndBubble(Y.pointerdown,{evt:N,pointerId:gt.id}),ct=!0;const L=N.type.indexOf("touch")>=0;F.preventDefault()&&N.cancelable&&L&&N.preventDefault()}),ct||this._fire(Y.pointerdown,{evt:N,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(N){const Y=j(N.type),st=I(N.type);if(!Y||(n.Konva.isDragging()&&a.DD.node.preventDefault()&&N.cancelable&&N.preventDefault(),this.setPointersPositions(N),!(!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled)))return;const gt={};let F=!1;const L=this._getTargetShape(st);this._changedPointerPositions.forEach(z=>{const $=l.getCapturedShape(z.id)||this.getIntersection(z),Q=z.id,Z={evt:N,pointerId:Q},rt=L!==$;if(rt&&L&&(L._fireAndBubble(Y.pointerout,{...Z},$),L._fireAndBubble(Y.pointerleave,{...Z},$)),$){if(gt[$._id])return;gt[$._id]=!0}$&&$.isListening()?(F=!0,rt&&($._fireAndBubble(Y.pointerover,{...Z},L),$._fireAndBubble(Y.pointerenter,{...Z},L),this[st+"targetShape"]=$),$._fireAndBubble(Y.pointermove,{...Z})):L&&(this._fire(Y.pointerover,{evt:N,target:this,currentTarget:this,pointerId:Q}),this[st+"targetShape"]=null)}),F||this._fire(Y.pointermove,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(N){const Y=j(N.type),st=I(N.type);if(!Y)return;this.setPointersPositions(N);const ct=this[st+"ClickStartShape"],gt=this[st+"ClickEndShape"],F={};let L=!1;this._changedPointerPositions.forEach(z=>{const $=l.getCapturedShape(z.id)||this.getIntersection(z);if($){if($.releaseCapture(z.id),F[$._id])return;F[$._id]=!0}const Q=z.id,Z={evt:N,pointerId:Q};let rt=!1;n.Konva["_"+st+"InDblClickWindow"]?(rt=!0,clearTimeout(this[st+"DblTimeout"])):a.DD.justDragged||(n.Konva["_"+st+"InDblClickWindow"]=!0,clearTimeout(this[st+"DblTimeout"])),this[st+"DblTimeout"]=setTimeout(function(){n.Konva["_"+st+"InDblClickWindow"]=!1},n.Konva.dblClickWindow),$&&$.isListening()?(L=!0,this[st+"ClickEndShape"]=$,$._fireAndBubble(Y.pointerup,{...Z}),n.Konva["_"+st+"ListenClick"]&&ct&&ct===$&&($._fireAndBubble(Y.pointerclick,{...Z}),rt&&gt&&gt===$&&$._fireAndBubble(Y.pointerdblclick,{...Z}))):(this[st+"ClickEndShape"]=null,n.Konva["_"+st+"ListenClick"]&&this._fire(Y.pointerclick,{evt:N,target:this,currentTarget:this,pointerId:Q}),rt&&this._fire(Y.pointerdblclick,{evt:N,target:this,currentTarget:this,pointerId:Q}))}),L||this._fire(Y.pointerup,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+st+"ListenClick"]=!1,N.cancelable&&st!=="touch"&&st!=="pointer"&&N.preventDefault()}_contextmenu(N){this.setPointersPositions(N);const Y=this.getIntersection(this.getPointerPosition());Y&&Y.isListening()?Y._fireAndBubble(B,{evt:N}):this._fire(B,{evt:N,target:this,currentTarget:this})}_wheel(N){this.setPointersPositions(N);const Y=this.getIntersection(this.getPointerPosition());Y&&Y.isListening()?Y._fireAndBubble(v,{evt:N}):this._fire(v,{evt:N,target:this,currentTarget:this})}_pointercancel(N){this.setPointersPositions(N);const Y=l.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());Y&&Y._fireAndBubble(b,l.createEvent(N)),l.releaseCapture(N.pointerId)}_lostpointercapture(N){l.releaseCapture(N.pointerId)}setPointersPositions(N){const Y=this._getContentPosition();let st=null,ct=null;N=N||window.event,N.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(N.touches,gt=>{this._pointerPositions.push({id:gt.identifier,x:(gt.clientX-Y.left)/Y.scaleX,y:(gt.clientY-Y.top)/Y.scaleY})}),Array.prototype.forEach.call(N.changedTouches||N.touches,gt=>{this._changedPointerPositions.push({id:gt.identifier,x:(gt.clientX-Y.left)/Y.scaleX,y:(gt.clientY-Y.top)/Y.scaleY})})):(st=(N.clientX-Y.left)/Y.scaleX,ct=(N.clientY-Y.top)/Y.scaleY,this.pointerPos={x:st,y:ct},this._pointerPositions=[{x:st,y:ct,id:e.Util._getFirstPointerId(N)}],this._changedPointerPositions=[{x:st,y:ct,id:e.Util._getFirstPointerId(N)}])}_setPointerPosition(N){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(N)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const N=this.content.getBoundingClientRect();return{top:N.top,left:N.left,scaleX:N.width/this.content.clientWidth||1,scaleY:N.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!n.Konva.isBrowser)return;const N=this.container();if(!N)throw"Stage has no container. A container is required.";N.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),N.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(N){N.batchDraw()}),this}}t.Stage=ht,ht.prototype.nodeType=u,(0,o._registerNode)(ht),i.Factory.addGetterSetter(ht,"container"),n.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(K=>{K.batchDraw()})})})(Qr)),Qr}var Li={},Zr={},ko;function Kt(){return ko||(ko=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Pt(),i=Ht(),r=Tt(),n=qt(),s=Rt(),a=Pt(),o=Ol(),l="hasShadow",u="shadowRGBA",c="patternImage",_="linearGradient",p="radialGradient";let d;function g(){return d||(d=i.Util.createCanvasElement().getContext("2d"),d)}t.shapes={};function y(w){const T=this.attrs.fillRule;T?w.fill(T):w.fill()}function S(w){w.stroke()}function C(w){const T=this.attrs.fillRule;T?w.fill(T):w.fill()}function f(w){w.stroke()}function h(){this._clearCache(l)}function m(){this._clearCache(u)}function b(){this._clearCache(c)}function R(){this._clearCache(_)}function G(){this._clearCache(p)}class x extends n.Node{constructor(T){super(T);let k;for(;k=i.Util.getRandomColor(),!(k&&!(k in t.shapes)););this.colorKey=k,t.shapes[k]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const B=new i.Transform;B.translate(this.fillPatternX(),this.fillPatternY()),B.rotate(e.Konva.getAngle(this.fillPatternRotation())),B.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),B.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const M=B.getMatrix(),W=typeof DOMMatrix>"u"?{a:M[0],b:M[1],c:M[2],d:M[3],e:M[4],f:M[5]}:new DOMMatrix(M);k.setTransform(W)}return k}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const k=g(),B=this.fillLinearGradientStartPoint(),M=this.fillLinearGradientEndPoint(),W=k.createLinearGradient(B.x,B.y,M.x,M.y);for(let H=0;H<T.length;H+=2)W.addColorStop(T[H],T[H+1]);return W}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const k=g(),B=this.fillRadialGradientStartPoint(),M=this.fillRadialGradientEndPoint(),W=k.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),M.x,M.y,this.fillRadialGradientEndRadius());for(let H=0;H<T.length;H+=2)W.addColorStop(T[H],T[H+1]);return W}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=i.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const k=this.getStage();if(!k)return!1;const B=k.bufferHitCanvas;return B.getContext().clear(),this.drawHit(B,void 0,!0),B.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const M=T||this.hasFill(),W=this.hasStroke(),H=this.getAbsoluteOpacity()!==1;if(M&&W&&H)return!0;const tt=this.hasShadow(),v=this.shadowForStrokeEnabled();return!!(M&&W&&tt&&v)}setStrokeHitEnabled(T){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let k=!1,B=this.getParent();for(;B;){if(B.isCached()){k=!0;break}B=B.getParent()}const M=T.skipTransform,W=T.relativeTo||k&&this.getStage()||void 0,H=this.getSelfRect(),v=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,P=H.width+v,O=H.height+v,A=!T.skipShadow&&this.hasShadow(),I=A?this.shadowOffsetX():0,j=A?this.shadowOffsetY():0,V=P+Math.abs(I),it=O+Math.abs(j),ht=A&&this.shadowBlur()||0,K=V+ht*2,N=it+ht*2,Y={width:K,height:N,x:-(v/2+ht)+Math.min(I,0)+H.x,y:-(v/2+ht)+Math.min(j,0)+H.y};return M?Y:this._transformedRect(Y,W)}drawScene(T,k,B){const M=this.getLayer(),W=T||M.getCanvas(),H=W.getContext(),tt=this._getCanvasCache(),v=this.getSceneFunc(),P=this.hasShadow();let O;const A=k===this;if(!this.isVisible()&&!A)return this;if(tt){H.save();const I=this.getAbsoluteTransform(k).getMatrix();return H.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedSceneCanvas(H),H.restore(),this}if(!v)return this;if(H.save(),this._useBufferCanvas()){O=this.getStage();const I=B||O.bufferCanvas,j=I.getContext();j.clear(),j.save(),j._applyLineJoin(this);const V=this.getAbsoluteTransform(k).getMatrix();j.transform(V[0],V[1],V[2],V[3],V[4],V[5]),v.call(this,j,this),j.restore();const it=I.pixelRatio;P&&H._applyShadow(this),H._applyOpacity(this),H._applyGlobalCompositeOperation(this),H.drawImage(I._canvas,I.x||0,I.y||0,I.width/it,I.height/it)}else{if(H._applyLineJoin(this),!A){const I=this.getAbsoluteTransform(k).getMatrix();H.transform(I[0],I[1],I[2],I[3],I[4],I[5]),H._applyOpacity(this),H._applyGlobalCompositeOperation(this)}P&&H._applyShadow(this),v.call(this,H,this)}return H.restore(),this}drawHit(T,k,B=!1){if(!this.shouldDrawHit(k,B))return this;const M=this.getLayer(),W=T||M.hitCanvas,H=W&&W.getContext(),tt=this.hitFunc()||this.sceneFunc(),v=this._getCanvasCache(),P=v&&v.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),P){H.save();const A=this.getAbsoluteTransform(k).getMatrix();return H.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedHitCanvas(H),H.restore(),this}if(!tt)return this;if(H.save(),H._applyLineJoin(this),!(this===k)){const A=this.getAbsoluteTransform(k).getMatrix();H.transform(A[0],A[1],A[2],A[3],A[4],A[5])}return tt.call(this,H,this),H.restore(),this}drawHitFromCache(T=0){const k=this._getCanvasCache(),B=this._getCachedSceneCanvas(),M=k.hit,W=M.getContext(),H=M.getWidth(),tt=M.getHeight();W.clear(),W.drawImage(B._canvas,0,0,H,tt);try{const v=W.getImageData(0,0,H,tt),P=v.data,O=P.length,A=i.Util._hexToRgb(this.colorKey);for(let I=0;I<O;I+=4)P[I+3]>T?(P[I]=A.r,P[I+1]=A.g,P[I+2]=A.b,P[I+3]=255):P[I+3]=0;W.putImageData(v,0,0)}catch(v){i.Util.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(T){return o.hasPointerCapture(T,this)}setPointerCapture(T){o.setPointerCapture(T,this)}releaseCapture(T){o.releaseCapture(T,this)}}t.Shape=x,x.prototype._fillFunc=y,x.prototype._strokeFunc=S,x.prototype._fillFuncHit=C,x.prototype._strokeFuncHit=f,x.prototype._centroid=!1,x.prototype.nodeType="Shape",(0,a._registerNode)(x),x.prototype.eventListeners={},x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",h),x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),r.Factory.addGetterSetter(x,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(x,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(x,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(x,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(x,"lineJoin"),r.Factory.addGetterSetter(x,"lineCap"),r.Factory.addGetterSetter(x,"sceneFunc"),r.Factory.addGetterSetter(x,"hitFunc"),r.Factory.addGetterSetter(x,"dash"),r.Factory.addGetterSetter(x,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(x,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(x,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternImage"),r.Factory.addGetterSetter(x,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(x,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(x,"fillEnabled",!0),r.Factory.addGetterSetter(x,"strokeEnabled",!0),r.Factory.addGetterSetter(x,"shadowEnabled",!0),r.Factory.addGetterSetter(x,"dashEnabled",!0),r.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(x,"fillPriority","color"),r.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(x,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(x,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(x,"fillPatternRotation",0),r.Factory.addGetterSetter(x,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Zr)),Zr}var Lo;function Nl(){if(Lo)return Li;Lo=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Layer=void 0;const t=Ht(),e=Tr(),i=qt(),r=Tt(),n=Pr(),s=Rt(),a=Kt(),o=Pt(),l="#",u="beforeDraw",c="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=_.length;let d=class extends e.Container{constructor(y){super(y),this.canvas=new n.SceneCanvas,this.hitCanvas=new n.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),y<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[y+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),y&&y.parentNode&&t.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:S}){return this.canvas.setSize(y,S),this.hitCanvas.setSize(y,S),this._setSmoothEnabled(),this}_validateAdd(y){const S=y.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let S=1,C=!1;for(;;){for(let f=0;f<p;f++){const h=_[f],m=this._getIntersection({x:y.x+h.x*S,y:y.y+h.y*S}),b=m.shape;if(b)return b;if(C=!!m.antialiased,!m.antialiased)break}if(C)S+=1;else return null}}_getIntersection(y){const S=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(y.x*S),Math.round(y.y*S),1,1).data,f=C[3];if(f===255){const h=t.Util._rgbToHex(C[0],C[1],C[2]),m=a.shapes[l+h];return m?{shape:m}:{antialiased:!0}}else if(f>0)return{antialiased:!0};return{}}drawScene(y,S,C){const f=this.getLayer(),h=y||f&&f.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),e.Container.prototype.drawScene.call(this,h,S,C),this._fire(c,{node:this}),this}drawHit(y,S){const C=this.getLayer(),f=y||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,f,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Li.Layer=d,d.prototype.nodeType="Layer",(0,o._registerNode)(d),r.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(d,"clearBeforeDraw",!0),r.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),Li}var Di={},Do;function Yu(){if(Do)return Di;Do=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.FastLayer=void 0;const t=Ht(),e=Nl(),i=Pt();let r=class extends e.Layer{constructor(s){super(s),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Di.FastLayer=r,r.prototype.nodeType="FastLayer",(0,i._registerNode)(r),Di}var Gi={},Go;function Ds(){if(Go)return Gi;Go=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Group=void 0;const t=Ht(),e=Tr(),i=Pt();let r=class extends e.Container{_validateAdd(s){const a=s.getType();a!=="Group"&&a!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Gi.Group=r,r.prototype.nodeType="Group",(0,i._registerNode)(r),Gi}var Ui={},Uo;function Gs(){if(Uo)return Ui;Uo=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Animation=void 0;const t=Pt(),e=Ht(),i=(function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}})();let r=class bi{constructor(s,a){this.id=bi.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=s,this.setLayers(a)}setLayers(s){let a=[];return s&&(a=Array.isArray(s)?s:[s]),this.layers=a,this}getLayers(){return this.layers}addLayer(s){const a=this.layers,o=a.length;for(let l=0;l<o;l++)if(a[l]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const a=bi.animations,o=a.length;for(let l=0;l<o;l++)if(a[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),bi._addAnimation(this),this}stop(){return bi._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const a=s.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===a){this.animations.splice(u,1);break}}static _runFrames(){const s={},a=this.animations;for(let o=0;o<a.length;o++){const l=a[o],u=l.layers,c=l.func;l._updateFrameObject(i());const _=u.length;let p;if(c?p=c.call(l,l.frame)!==!1:p=!0,!!p)for(let d=0;d<_;d++){const g=u[d];g._id!==void 0&&(s[g._id]=g)}}for(const o in s)s.hasOwnProperty(o)&&s[o].batchDraw()}static _animationLoop(){const s=bi;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Ui.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,Ui}var ts={},Bo;function ju(){return Bo||(Bo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=Ht(),i=Gs(),r=qt(),n=Pt(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,u=["fill","stroke","shadowColor"];let c=0;class _{constructor(g,y,S,C,f,h,m){this.prop=g,this.propFunc=y,this.begin=C,this._pos=C,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=f-this.begin,this.pause()}fire(g){const y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===o?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){const y=this,S=g.node,C=S._id,f=g.easing||t.Easings.Linear,h=!!g.yoyo;let m,b;typeof g.duration>"u"?m=.3:g.duration===0?m=.001:m=g.duration,this.node=S,this._id=c++;const R=S.getLayer()||(S instanceof n.Konva.Stage?S.getLayers():null);R||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){y.tween.onEnterFrame()},R),this.tween=new _(b,function(G){y._tweenFunc(G)},f,0,1,m*1e3,h),this._addListeners(),p.attrs[C]||(p.attrs[C]={}),p.attrs[C][this._id]||(p.attrs[C][this._id]={}),p.tweens[C]||(p.tweens[C]={});for(b in g)s[b]===void 0&&this._addAttr(b,g[b]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){const S=this.node,C=S._id;let f,h,m,b,R;const G=p.tweens[C][g];G&&delete p.attrs[C][G][g];let x=S.getAttr(g);if(e.Util._isArray(y))if(f=[],h=Math.max(y.length,x.length),g==="points"&&y.length!==x.length&&(y.length>x.length?(b=x,x=e.Util._prepareArrayForTween(x,y,S.closed())):(m=y,y=e.Util._prepareArrayForTween(y,x,S.closed()))),g.indexOf("fill")===0)for(let w=0;w<h;w++)if(w%2===0)f.push(y[w]-x[w]);else{const T=e.Util.colorToRGBA(x[w]);R=e.Util.colorToRGBA(y[w]),x[w]=T,f.push({r:R.r-T.r,g:R.g-T.g,b:R.b-T.b,a:R.a-T.a})}else for(let w=0;w<h;w++)f.push(y[w]-x[w]);else u.indexOf(g)!==-1?(x=e.Util.colorToRGBA(x),R=e.Util.colorToRGBA(y),f={r:R.r-x.r,g:R.g-x.g,b:R.b-x.b,a:R.a-x.a}):f=y-x;p.attrs[C][this._id][g]={start:x,diff:f,end:y,trueEnd:m,trueStart:b},p.tweens[C][g]=this._id}_tweenFunc(g){const y=this.node,S=p.attrs[y._id][this._id];let C,f,h,m,b,R,G,x;for(C in S){if(f=S[C],h=f.start,m=f.diff,x=f.end,e.Util._isArray(h))if(b=[],G=Math.max(h.length,x.length),C.indexOf("fill")===0)for(R=0;R<G;R++)R%2===0?b.push((h[R]||0)+m[R]*g):b.push("rgba("+Math.round(h[R].r+m[R].r*g)+","+Math.round(h[R].g+m[R].g*g)+","+Math.round(h[R].b+m[R].b*g)+","+(h[R].a+m[R].a*g)+")");else for(R=0;R<G;R++)b.push((h[R]||0)+m[R]*g);else u.indexOf(C)!==-1?b="rgba("+Math.round(h.r+m.r*g)+","+Math.round(h.g+m.g*g)+","+Math.round(h.b+m.b*g)+","+(h.a+m.a*g)+")":b=h+m*g;y.setAttr(C,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,y=this._id,S=p.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const C in S)delete p.tweens[g][C];delete p.attrs[g][y],p.tweens[g]&&(Object.keys(p.tweens[g]).length===0&&delete p.tweens[g],Object.keys(p.attrs[g]).length===0&&delete p.attrs[g])}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(d){const g=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),g&&g()},new p(d).play()},t.Easings={BackEaseIn(d,g,y,S){return y*(d/=S)*d*((1.70158+1)*d-1.70158)+g},BackEaseOut(d,g,y,S){return y*((d=d/S-1)*d*((1.70158+1)*d+1.70158)+1)+g},BackEaseInOut(d,g,y,S){let C=1.70158;return(d/=S/2)<1?y/2*(d*d*(((C*=1.525)+1)*d-C))+g:y/2*((d-=2)*d*(((C*=1.525)+1)*d+C)+2)+g},ElasticEaseIn(d,g,y,S,C,f){let h=0;return d===0?g:(d/=S)===1?g+y:(f||(f=S*.3),!C||C<Math.abs(y)?(C=y,h=f/4):h=f/(2*Math.PI)*Math.asin(y/C),-(C*Math.pow(2,10*(d-=1))*Math.sin((d*S-h)*(2*Math.PI)/f))+g)},ElasticEaseOut(d,g,y,S,C,f){let h=0;return d===0?g:(d/=S)===1?g+y:(f||(f=S*.3),!C||C<Math.abs(y)?(C=y,h=f/4):h=f/(2*Math.PI)*Math.asin(y/C),C*Math.pow(2,-10*d)*Math.sin((d*S-h)*(2*Math.PI)/f)+y+g)},ElasticEaseInOut(d,g,y,S,C,f){let h=0;return d===0?g:(d/=S/2)===2?g+y:(f||(f=S*(.3*1.5)),!C||C<Math.abs(y)?(C=y,h=f/4):h=f/(2*Math.PI)*Math.asin(y/C),d<1?-.5*(C*Math.pow(2,10*(d-=1))*Math.sin((d*S-h)*(2*Math.PI)/f))+g:C*Math.pow(2,-10*(d-=1))*Math.sin((d*S-h)*(2*Math.PI)/f)*.5+y+g)},BounceEaseOut(d,g,y,S){return(d/=S)<1/2.75?y*(7.5625*d*d)+g:d<2/2.75?y*(7.5625*(d-=1.5/2.75)*d+.75)+g:d<2.5/2.75?y*(7.5625*(d-=2.25/2.75)*d+.9375)+g:y*(7.5625*(d-=2.625/2.75)*d+.984375)+g},BounceEaseIn(d,g,y,S){return y-t.Easings.BounceEaseOut(S-d,0,y,S)+g},BounceEaseInOut(d,g,y,S){return d<S/2?t.Easings.BounceEaseIn(d*2,0,y,S)*.5+g:t.Easings.BounceEaseOut(d*2-S,0,y,S)*.5+y*.5+g},EaseIn(d,g,y,S){return y*(d/=S)*d+g},EaseOut(d,g,y,S){return-y*(d/=S)*(d-2)+g},EaseInOut(d,g,y,S){return(d/=S/2)<1?y/2*d*d+g:-y/2*(--d*(d-2)-1)+g},StrongEaseIn(d,g,y,S){return y*(d/=S)*d*d*d*d+g},StrongEaseOut(d,g,y,S){return y*((d=d/S-1)*d*d*d*d+1)+g},StrongEaseInOut(d,g,y,S){return(d/=S/2)<1?y/2*d*d*d*d*d+g:y/2*((d-=2)*d*d*d*d+2)+g},Linear(d,g,y,S){return y*d/S+g}}})(ts)),ts}var Ho;function Xu(){return Ho||(Ho=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Pt(),i=Ht(),r=qt(),n=Tr(),s=zu(),a=Nl(),o=Yu(),l=Ds(),u=Ls(),c=Kt(),_=Gs(),p=ju(),d=Il(),g=Pr();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:r.Node,Container:n.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:_.Animation,Tween:p.Tween,Easings:p.Easings,Context:d.Context,Canvas:g.Canvas}),t.default=t.Konva})(jr)),jr}var Bi={},Vo;function Ku(){if(Vo)return Bi;Vo=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Arc=void 0;const t=Tt(),e=Kt(),i=Pt(),r=Rt(),n=Pt();let s=class extends e.Shape{_sceneFunc(o){const l=i.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),c=i.Konva.getAngle(u?360-this.angle():this.angle()),_=Math.cos(Math.min(c,Math.PI)),p=1,d=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),g=Math.sin(Math.min(c,Math.PI/2)),y=_*(_>0?o:l),S=p*l,C=d*(d>0?o:l),f=g*(g>0?l:o);return{x:y,y:u?-1*f:C,width:S-y,height:f-C}}};return Bi.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),Bi}var Hi={},Vi={},Wo;function kl(){if(Wo)return Vi;Wo=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Line=void 0;const t=Tt(),e=Pt(),i=Kt(),r=Rt();function n(o,l,u,c,_,p,d){const g=Math.sqrt(Math.pow(u-o,2)+Math.pow(c-l,2)),y=Math.sqrt(Math.pow(_-u,2)+Math.pow(p-c,2)),S=d*g/(g+y),C=d*y/(g+y),f=u-S*(_-o),h=c-S*(p-l),m=u+C*(_-o),b=c+C*(p-l);return[f,h,m,b]}function s(o,l){const u=o.length,c=[];for(let _=2;_<u-2;_+=2){const p=n(o[_-2],o[_-1],o[_],o[_+1],o[_+2],o[_+3],l);isNaN(p[0])||(c.push(p[0]),c.push(p[1]),c.push(o[_]),c.push(o[_+1]),c.push(p[2]),c.push(p[3]))}return c}let a=class extends i.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),c=u.length,_=this.tension(),p=this.closed(),d=this.bezier();if(!c)return;let g=0;if(l.beginPath(),l.moveTo(u[0],u[1]),_!==0&&c>4){const y=this.getTensionPoints(),S=y.length;for(g=p?0:4,p||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);g<S-2;)l.bezierCurveTo(y[g++],y[g++],y[g++],y[g++],y[g++],y[g++]);p||l.quadraticCurveTo(y[S-2],y[S-1],u[c-2],u[c-1])}else if(d)for(g=2;g<c;)l.bezierCurveTo(u[g++],u[g++],u[g++],u[g++],u[g++],u[g++]);else for(g=2;g<c;g+=2)l.lineTo(u[g],u[g+1]);p?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,c=this.tension(),_=n(l[u-2],l[u-1],l[0],l[1],l[2],l[3],c),p=n(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],c),d=s(l,c);return[_[2],_[3]].concat(d).concat([p[0],p[1],l[u-2],l[u-1],p[2],p[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],c=l[0],_=l[1],p=l[1],d,g;for(let y=0;y<l.length/2;y++)d=l[y*2],g=l[y*2+1],u=Math.min(u,d),c=Math.max(c,d),_=Math.min(_,g),p=Math.max(p,g);return{x:u,y:_,width:c-u,height:p-_}}};return Vi.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(a),t.Factory.addGetterSetter(a,"closed",!1),t.Factory.addGetterSetter(a,"bezier",!1),t.Factory.addGetterSetter(a,"tension",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(a,"points",[],(0,r.getNumberArrayValidator)()),Vi}var Wi={},es={},qo;function $u(){return qo||(qo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,o,l)=>{let u,c;const p=l/2;u=0;for(let d=0;d<20;d++)c=p*t.tValues[20][d]+p,u+=t.cValues[20][d]*r(a,o,c);return p*u};t.getCubicArcLength=e;const i=(a,o,l)=>{l===void 0&&(l=1);const u=a[0]-2*a[1]+a[2],c=o[0]-2*o[1]+o[2],_=2*a[1]-2*a[0],p=2*o[1]-2*o[0],d=4*(u*u+c*c),g=4*(u*_+c*p),y=_*_+p*p;if(d===0)return l*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const S=g/(2*d),C=y/d,f=l+S,h=C-S*S,m=f*f+h>0?Math.sqrt(f*f+h):0,b=S*S+h>0?Math.sqrt(S*S+h):0,R=S+Math.sqrt(S*S+h)!==0?h*Math.log(Math.abs((f+m)/(S+b))):0;return Math.sqrt(d)/2*(f*m-S*b+R)};t.getQuadraticArcLength=i;function r(a,o,l){const u=n(1,l,a),c=n(1,l,o),_=u*u+c*c;return Math.sqrt(_)}const n=(a,o,l)=>{const u=l.length-1;let c,_;if(u===0)return 0;if(a===0){_=0;for(let p=0;p<=u;p++)_+=t.binomialCoefficients[u][p]*Math.pow(1-o,u-p)*Math.pow(o,p)*l[p];return _}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return n(a-1,o,c)}},s=(a,o,l)=>{let u=1,c=a/o,_=(a-l(c))/o,p=0;for(;u>.001;){const d=l(c+_),g=Math.abs(a-d)/o;if(g<u)u=g,c+=_;else{const y=l(c-_),S=Math.abs(a-y)/o;S<u?(u=S,c-=_):_/=2}if(p++,p>500)break}return c};t.t2length=s})(es)),es}var zo;function Us(){if(zo)return Wi;zo=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Path=void 0;const t=Tt(),e=Pt(),i=Kt(),r=$u();let n=class ue extends i.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ue.parsePathData(this.data()),this.pathLength=ue.getPathLength(this.dataArray)}_sceneFunc(a){const o=this.dataArray;a.beginPath();let l=!1;for(let u=0;u<o.length;u++){const c=o[u].command,_=o[u].points;switch(c){case"L":a.lineTo(_[0],_[1]);break;case"M":a.moveTo(_[0],_[1]);break;case"C":a.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":a.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":const p=_[0],d=_[1],g=_[2],y=_[3],S=_[4],C=_[5],f=_[6],h=_[7],m=g>y?g:y,b=g>y?1:g/y,R=g>y?y/g:1;a.translate(p,d),a.rotate(f),a.scale(b,R),a.arc(0,0,m,S,S+C,1-h),a.scale(1/b,1/R),a.rotate(-f),a.translate(-p,-d);break;case"z":l=!0,a.closePath();break}}!l&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(d){if(d.command==="A"){const g=d.points[4],y=d.points[5],S=d.points[4]+y;let C=Math.PI/180;if(Math.abs(g-S)<C&&(C=Math.abs(g-S)),y<0)for(let f=g-C;f>S;f-=C){const h=ue.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],f,0);a.push(h.x,h.y)}else for(let f=g+C;f<S;f+=C){const h=ue.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],f,0);a.push(h.x,h.y)}}else if(d.command==="C")for(let g=0;g<=1;g+=.01){const y=ue.getPointOnCubicBezier(g,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);a.push(y.x,y.y)}else a=a.concat(d.points)});let o=a[0],l=a[0],u=a[1],c=a[1],_,p;for(let d=0;d<a.length/2;d++)_=a[d*2],p=a[d*2+1],isNaN(_)||(o=Math.min(o,_),l=Math.max(l,_)),isNaN(p)||(u=Math.min(u,p),c=Math.max(c,p));return{x:o,y:u,width:l-o,height:c-u}}getLength(){return this.pathLength}getPointAtLength(a){return ue.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,o,l,u){return Math.sqrt((l-a)*(l-a)+(u-o)*(u-o))}static getPathLength(a){let o=0;for(let l=0;l<a.length;++l)o+=a[l].pathLength;return o}static getPointAtLengthOfDataArray(a,o){let l,u=0,c=o.length;if(!c)return null;for(;u<c&&a>o[u].pathLength;)a-=o[u].pathLength,++u;if(u===c)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(a<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const _=o[u],p=_.points;switch(_.command){case"L":return ue.getPointOnLine(a,_.start.x,_.start.y,p[0],p[1]);case"C":return ue.getPointOnCubicBezier((0,r.t2length)(a,ue.getPathLength(o),m=>(0,r.getCubicArcLength)([_.start.x,p[0],p[2],p[4]],[_.start.y,p[1],p[3],p[5]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return ue.getPointOnQuadraticBezier((0,r.t2length)(a,ue.getPathLength(o),m=>(0,r.getQuadraticArcLength)([_.start.x,p[0],p[2]],[_.start.y,p[1],p[3]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3]);case"A":const d=p[0],g=p[1],y=p[2],S=p[3],C=p[5],f=p[6];let h=p[4];return h+=C*a/_.pathLength,ue.getPointOnEllipticalArc(d,g,y,S,h,f)}return null}static getPointOnLine(a,o,l,u,c,_,p){_=_??o,p=p??l;const d=this.getLineLength(o,l,u,c);if(d<1e-10)return{x:o,y:l};if(u===o)return{x:_,y:p+(c>l?a:-a)};const g=(c-l)/(u-o),y=Math.sqrt(a*a/(1+g*g))*(u<o?-1:1),S=g*y;if(Math.abs(p-l-g*(_-o))<1e-10)return{x:_+y,y:p+S};const C=((_-o)*(u-o)+(p-l)*(c-l))/(d*d),f=o+C*(u-o),h=l+C*(c-l),m=this.getLineLength(_,p,f,h),b=Math.sqrt(a*a-m*m),R=Math.sqrt(b*b/(1+g*g))*(u<o?-1:1),G=g*R;return{x:f+R,y:h+G}}static getPointOnCubicBezier(a,o,l,u,c,_,p,d,g){function y(b){return b*b*b}function S(b){return 3*b*b*(1-b)}function C(b){return 3*b*(1-b)*(1-b)}function f(b){return(1-b)*(1-b)*(1-b)}const h=d*y(a)+_*S(a)+u*C(a)+o*f(a),m=g*y(a)+p*S(a)+c*C(a)+l*f(a);return{x:h,y:m}}static getPointOnQuadraticBezier(a,o,l,u,c,_,p){function d(f){return f*f}function g(f){return 2*f*(1-f)}function y(f){return(1-f)*(1-f)}const S=_*d(a)+u*g(a)+o*y(a),C=p*d(a)+c*g(a)+l*y(a);return{x:S,y:C}}static getPointOnEllipticalArc(a,o,l,u,c,_){const p=Math.cos(_),d=Math.sin(_),g={x:l*Math.cos(c),y:u*Math.sin(c)};return{x:a+(g.x*p-g.y*d),y:o+(g.x*d+g.y*p)}}static parsePathData(a){if(!a)return[];let o=a;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let S=0;S<l.length;S++)o=o.replace(new RegExp(l[S],"g"),"|"+l[S]);const u=o.split("|"),c=[],_=[];let p=0,d=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let S=1;S<u.length;S++){let C=u[S],f=C.charAt(0);for(C=C.slice(1),_.length=0;y=g.exec(C);)_.push(y[0]);const h=[];for(let m=0,b=_.length;m<b;m++){if(_[m]==="00"){h.push(0,0);continue}const R=parseFloat(_[m]);isNaN(R)?h.push(0):h.push(R)}for(;h.length>0&&!isNaN(h[0]);){let m="",b=[];const R=p,G=d;let x,w,T,k,B,M,W,H,tt,v;switch(f){case"l":p+=h.shift(),d+=h.shift(),m="L",b.push(p,d);break;case"L":p=h.shift(),d=h.shift(),b.push(p,d);break;case"m":const P=h.shift(),O=h.shift();if(p+=P,d+=O,m="M",c.length>2&&c[c.length-1].command==="z"){for(let A=c.length-2;A>=0;A--)if(c[A].command==="M"){p=c[A].points[0]+P,d=c[A].points[1]+O;break}}b.push(p,d),f="l";break;case"M":p=h.shift(),d=h.shift(),m="M",b.push(p,d),f="L";break;case"h":p+=h.shift(),m="L",b.push(p,d);break;case"H":p=h.shift(),m="L",b.push(p,d);break;case"v":d+=h.shift(),m="L",b.push(p,d);break;case"V":d=h.shift(),m="L",b.push(p,d);break;case"C":b.push(h.shift(),h.shift(),h.shift(),h.shift()),p=h.shift(),d=h.shift(),b.push(p,d);break;case"c":b.push(p+h.shift(),d+h.shift(),p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="C",b.push(p,d);break;case"S":w=p,T=d,x=c[c.length-1],x.command==="C"&&(w=p+(p-x.points[2]),T=d+(d-x.points[3])),b.push(w,T,h.shift(),h.shift()),p=h.shift(),d=h.shift(),m="C",b.push(p,d);break;case"s":w=p,T=d,x=c[c.length-1],x.command==="C"&&(w=p+(p-x.points[2]),T=d+(d-x.points[3])),b.push(w,T,p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="C",b.push(p,d);break;case"Q":b.push(h.shift(),h.shift()),p=h.shift(),d=h.shift(),b.push(p,d);break;case"q":b.push(p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="Q",b.push(p,d);break;case"T":w=p,T=d,x=c[c.length-1],x.command==="Q"&&(w=p+(p-x.points[0]),T=d+(d-x.points[1])),p=h.shift(),d=h.shift(),m="Q",b.push(w,T,p,d);break;case"t":w=p,T=d,x=c[c.length-1],x.command==="Q"&&(w=p+(p-x.points[0]),T=d+(d-x.points[1])),p+=h.shift(),d+=h.shift(),m="Q",b.push(w,T,p,d);break;case"A":k=h.shift(),B=h.shift(),M=h.shift(),W=h.shift(),H=h.shift(),tt=p,v=d,p=h.shift(),d=h.shift(),m="A",b=this.convertEndpointToCenterParameterization(tt,v,p,d,W,H,k,B,M);break;case"a":k=h.shift(),B=h.shift(),M=h.shift(),W=h.shift(),H=h.shift(),tt=p,v=d,p+=h.shift(),d+=h.shift(),m="A",b=this.convertEndpointToCenterParameterization(tt,v,p,d,W,H,k,B,M);break}c.push({command:m||f,points:b,start:{x:R,y:G},pathLength:this.calcLength(R,G,m||f,b)})}(f==="z"||f==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(a,o,l,u){let c,_,p,d;const g=ue;switch(l){case"L":return g.getLineLength(a,o,u[0],u[1]);case"C":return(0,r.getCubicArcLength)([a,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,r.getQuadraticArcLength)([a,u[0],u[2]],[o,u[1],u[3]],1);case"A":c=0;const y=u[4],S=u[5],C=u[4]+S;let f=Math.PI/180;if(Math.abs(y-C)<f&&(f=Math.abs(y-C)),_=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),S<0)for(d=y-f;d>C;d-=f)p=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],d,0),c+=g.getLineLength(_.x,_.y,p.x,p.y),_=p;else for(d=y+f;d<C;d+=f)p=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],d,0),c+=g.getLineLength(_.x,_.y,p.x,p.y),_=p;return p=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],C,0),c+=g.getLineLength(_.x,_.y,p.x,p.y),c}return 0}static convertEndpointToCenterParameterization(a,o,l,u,c,_,p,d,g){const y=g*(Math.PI/180),S=Math.cos(y)*(a-l)/2+Math.sin(y)*(o-u)/2,C=-1*Math.sin(y)*(a-l)/2+Math.cos(y)*(o-u)/2,f=S*S/(p*p)+C*C/(d*d);f>1&&(p*=Math.sqrt(f),d*=Math.sqrt(f));let h=Math.sqrt((p*p*(d*d)-p*p*(C*C)-d*d*(S*S))/(p*p*(C*C)+d*d*(S*S)));c===_&&(h*=-1),isNaN(h)&&(h=0);const m=h*p*C/d,b=h*-d*S/p,R=(a+l)/2+Math.cos(y)*m-Math.sin(y)*b,G=(o+u)/2+Math.sin(y)*m+Math.cos(y)*b,x=function(H){return Math.sqrt(H[0]*H[0]+H[1]*H[1])},w=function(H,tt){return(H[0]*tt[0]+H[1]*tt[1])/(x(H)*x(tt))},T=function(H,tt){return(H[0]*tt[1]<H[1]*tt[0]?-1:1)*Math.acos(w(H,tt))},k=T([1,0],[(S-m)/p,(C-b)/d]),B=[(S-m)/p,(C-b)/d],M=[(-1*S-m)/p,(-1*C-b)/d];let W=T(B,M);return w(B,M)<=-1&&(W=Math.PI),w(B,M)>=1&&(W=0),_===0&&W>0&&(W=W-2*Math.PI),_===1&&W<0&&(W=W+2*Math.PI),[R,G,p,d,k,W,y,_]}};return Wi.Path=n,n.prototype.className="Path",n.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(n),t.Factory.addGetterSetter(n,"data"),Wi}var Yo;function Ju(){if(Yo)return Hi;Yo=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Arrow=void 0;const t=Tt(),e=kl(),i=Rt(),r=Pt(),n=Us();let s=class extends e.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let c=u;const _=this.tension()!==0&&u.length>4;_&&(c=this.getTensionPoints());const p=this.pointerLength(),d=u.length;let g,y;if(_){const f=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],u[d-2],u[d-1]],h=n.Path.calcLength(c[c.length-4],c[c.length-3],"C",f),m=n.Path.getPointOnQuadraticBezier(Math.min(1,1-p/h),f[0],f[1],f[2],f[3],f[4],f[5]);g=u[d-2]-m.x,y=u[d-1]-m.y}else g=u[d-2]-u[d-4],y=u[d-1]-u[d-3];const S=(Math.atan2(y,g)+l)%l,C=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[d-2],u[d-1]),o.rotate(S),o.moveTo(0,0),o.lineTo(-p,C/2),o.lineTo(-p,-C/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),_?(g=(c[0]+c[2])/2-u[0],y=(c[1]+c[3])/2-u[1]):(g=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-g)+l)%l),o.moveTo(0,0),o.lineTo(-p,C/2),o.lineTo(-p,-C/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}};return Hi.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerAtBeginning",!1),t.Factory.addGetterSetter(s,"pointerAtEnding",!0),Hi}var qi={},jo;function Qu(){if(jo)return qi;jo=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.Circle=void 0;const t=Tt(),e=Kt(),i=Rt(),r=Pt();let n=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return qi.Circle=n,n.prototype._centroid=!0,n.prototype.className="Circle",n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),qi}var zi={},Xo;function Zu(){if(Xo)return zi;Xo=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Ellipse=void 0;const t=Tt(),e=Kt(),i=Rt(),r=Pt();let n=class extends e.Shape{_sceneFunc(a){const o=this.radiusX(),l=this.radiusY();a.beginPath(),a.save(),o!==l&&a.scale(1,l/o),a.arc(0,0,o,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return zi.Ellipse=n,n.prototype.className="Ellipse",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(n),t.Factory.addComponentsGetterSetter(n,"radius",["x","y"]),t.Factory.addGetterSetter(n,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"radiusY",0,(0,i.getNumberValidator)()),zi}var Yi={},Ko;function td(){if(Ko)return Yi;Ko=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Image=void 0;const t=Ht(),e=Tt(),i=Kt(),r=Pt(),n=Rt();let s=class Ll extends i.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),c=this.cornerRadius(),_=this.attrs.image;let p;if(_){const d=this.attrs.cropWidth,g=this.attrs.cropHeight;d&&g?p=[_,this.cropX(),this.cropY(),d,g,0,0,l,u]:p=[_,0,0,l,u]}(this.hasFill()||this.hasStroke()||c)&&(o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),_&&(c&&o.clip(),o.drawImage.apply(o,p))}_hitFunc(o){const l=this.width(),u=this.height(),c=this.cornerRadius();o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const c=t.Util.createImageElement();c.onload=function(){const _=new Ll({image:c});l(_)},c.onerror=u,c.crossOrigin="Anonymous",c.src=o}};return Yi.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,n.getNumberValidator)()),Yi}var li={},$o;function ed(){if($o)return li;$o=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Tag=li.Label=void 0;const t=Tt(),e=Kt(),i=Ds(),r=Rt(),n=Pt(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",o="none",l="up",u="right",c="down",_="left",p=s.length;let d=class extends i.Group{constructor(S){super(S),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let C=this,f;const h=function(){C._sync()};for(f=0;f<p;f++)S.on(s[f]+a,h)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),C=this.getTag(),f,h,m,b,R,G,x;if(S&&C){switch(f=S.width(),h=S.height(),m=C.pointerDirection(),b=C.pointerWidth(),x=C.pointerHeight(),R=0,G=0,m){case l:R=f/2,G=-1*x;break;case u:R=f+b,G=h/2;break;case c:R=f/2,G=h+x;break;case _:R=-1*b,G=h/2;break}C.setAttrs({x:-1*R,y:-1*G,width:f,height:h}),S.setAttrs({x:-1*R,y:-1*G})}}};li.Label=d,d.prototype.className="Label",(0,n._registerNode)(d);class g extends e.Shape{_sceneFunc(S){const C=this.width(),f=this.height(),h=this.pointerDirection(),m=this.pointerWidth(),b=this.pointerHeight(),R=this.cornerRadius();let G=0,x=0,w=0,T=0;typeof R=="number"?G=x=w=T=Math.min(R,C/2,f/2):(G=Math.min(R[0]||0,C/2,f/2),x=Math.min(R[1]||0,C/2,f/2),T=Math.min(R[2]||0,C/2,f/2),w=Math.min(R[3]||0,C/2,f/2)),S.beginPath(),S.moveTo(G,0),h===l&&(S.lineTo((C-m)/2,0),S.lineTo(C/2,-1*b),S.lineTo((C+m)/2,0)),S.lineTo(C-x,0),S.arc(C-x,x,x,Math.PI*3/2,0,!1),h===u&&(S.lineTo(C,(f-b)/2),S.lineTo(C+m,f/2),S.lineTo(C,(f+b)/2)),S.lineTo(C,f-T),S.arc(C-T,f-T,T,0,Math.PI/2,!1),h===c&&(S.lineTo((C+m)/2,f),S.lineTo(C/2,f+b),S.lineTo((C-m)/2,f)),S.lineTo(w,f),S.arc(w,f-w,w,Math.PI/2,Math.PI,!1),h===_&&(S.lineTo(0,(f+b)/2),S.lineTo(-1*m,f/2),S.lineTo(0,(f-b)/2)),S.lineTo(0,G),S.arc(G,G,G,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,C=0,f=this.pointerWidth(),h=this.pointerHeight(),m=this.pointerDirection(),b=this.width(),R=this.height();return m===l?(C-=h,R+=h):m===c?R+=h:m===_?(S-=f*1.5,b+=f):m===u&&(b+=f*1.5),{x:S,y:C,width:b,height:R}}}return li.Tag=g,g.prototype.className="Tag",(0,n._registerNode)(g),t.Factory.addGetterSetter(g,"pointerDirection",o),t.Factory.addGetterSetter(g,"pointerWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(g,"pointerHeight",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(g,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),li}var ji={},Jo;function Dl(){if(Jo)return ji;Jo=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.Rect=void 0;const t=Tt(),e=Kt(),i=Pt(),r=Ht(),n=Rt();let s=class extends e.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),c=this.height();o.beginPath(),l?r.Util.drawRoundedRectPath(o,u,c,l):o.rect(0,0,u,c),o.closePath(),o.fillStrokeShape(this)}};return ji.Rect=s,s.prototype.className="Rect",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),ji}var Xi={},Qo;function id(){if(Qo)return Xi;Qo=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.RegularPolygon=void 0;const t=Tt(),e=Kt(),i=Rt(),r=Pt();let n=class extends e.Shape{_sceneFunc(a){const o=this._getPoints();a.beginPath(),a.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)a.lineTo(o[l].x,o[l].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<a;u++)l.push({x:o*Math.sin(u*2*Math.PI/a),y:-1*o*Math.cos(u*2*Math.PI/a)});return l}getSelfRect(){const a=this._getPoints();let o=a[0].x,l=a[0].y,u=a[0].x,c=a[0].y;return a.forEach(_=>{o=Math.min(o,_.x),l=Math.max(l,_.x),u=Math.min(u,_.y),c=Math.max(c,_.y)}),{x:o,y:u,width:l-o,height:c-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Xi.RegularPolygon=n,n.prototype.className="RegularPolygon",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"sides",0,(0,i.getNumberValidator)()),Xi}var Ki={},Zo;function nd(){if(Zo)return Ki;Zo=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Ring=void 0;const t=Tt(),e=Kt(),i=Rt(),r=Pt(),n=Math.PI*2;let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,n,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),n,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return Ki.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),Ki}var $i={},ta;function rd(){if(ta)return $i;ta=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Sprite=void 0;const t=Tt(),e=Kt(),i=Gs(),r=Rt(),n=Pt();let s=class extends e.Shape{constructor(o){super(o),this._updated=!0,this.anim=new i.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],p=this.frameOffsets(),d=_[c+0],g=_[c+1],y=_[c+2],S=_[c+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,S),o.closePath(),o.fillStrokeShape(this)),C)if(p){const f=p[l],h=u*2;o.drawImage(C,d,g,y,S,f[h+0],f[h+1],y,S)}else o.drawImage(C,d,g,y,S,0,0,y,S)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],p=this.frameOffsets(),d=_[c+2],g=_[c+3];if(o.beginPath(),p){const y=p[l],S=u*2;o.rect(y[S+0],y[S+1],d,g)}else o.rect(0,0,d,g);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),c=u[l],_=c.length/4;o<_-1?this.frameIndex(o+1):this.frameIndex(0)}};return $i.Sprite=s,s.prototype.className="Sprite",(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"animation"),t.Factory.addGetterSetter(s,"animations"),t.Factory.addGetterSetter(s,"frameOffsets"),t.Factory.addGetterSetter(s,"image"),t.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),t.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),$i}var Ji={},ea;function sd(){if(ea)return Ji;ea=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Star=void 0;const t=Tt(),e=Kt(),i=Rt(),r=Pt();let n=class extends e.Shape{_sceneFunc(a){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();a.beginPath(),a.moveTo(0,0-l);for(let c=1;c<u*2;c++){const _=c%2===0?l:o,p=_*Math.sin(c*Math.PI/u),d=-1*_*Math.cos(c*Math.PI/u);a.lineTo(p,d)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ji.Star=n,n.prototype.className="Star",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),Ji}var yi={},ia;function Gl(){if(ia)return yi;ia=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Text=void 0,yi.stringToArray=a;const t=Ht(),e=Tt(),i=Kt(),r=Pt(),n=Rt(),s=Pt();function a(j){return[...j].reduce((V,it,ht,K)=>{if(new RegExp("\\p{Emoji}","u").test(it)){const N=K[ht+1];N&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(N)?(V.push(it+N),K[ht+1]=""):V.push(it)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(it+(K[ht+1]||""))?V.push(it+K[ht+1]):ht>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(it)?V[V.length-1]+=it:it&&V.push(it);return V},[])}const o="auto",l="center",u="inherit",c="justify",_="Change.konva",p="2d",d="-",g="left",y="text",S="Text",C="top",f="bottom",h="middle",m="normal",b="px ",R=" ",G="right",x="rtl",w="word",T="char",k="none",B="",M=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],W=M.length;function H(j){return j.split(",").map(V=>{V=V.trim();const it=V.indexOf(" ")>=0,ht=V.indexOf('"')>=0||V.indexOf("'")>=0;return it&&!ht&&(V=`"${V}"`),V}).join(", ")}let tt;function v(){return tt||(tt=t.Util.createCanvasElement().getContext(p),tt)}function P(j){j.fillText(this._partialText,this._partialTextX,this._partialTextY)}function O(j){j.setAttr("miterLimit",2),j.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function A(j){return j=j||{},!j.fillLinearGradientColorStops&&!j.fillRadialGradientColorStops&&!j.fillPatternImage&&(j.fill=j.fill||"black"),j}let I=class extends i.Shape{constructor(V){super(A(V)),this._partialTextX=0,this._partialTextY=0;for(let it=0;it<W;it++)this.on(M[it]+_,this._setTextData);this._setTextData()}_sceneFunc(V){const it=this.textArr,ht=it.length;if(!this.text())return;let K=this.padding(),N=this.fontSize(),Y=this.lineHeight()*N,st=this.verticalAlign(),ct=this.direction(),gt=0,F=this.align(),L=this.getWidth(),z=this.letterSpacing(),$=this.fill(),Q=this.textDecoration(),Z=Q.indexOf("underline")!==-1,rt=Q.indexOf("line-through")!==-1,ot;ct=ct===u?V.direction:ct;let nt=Y/2,et=h;if(r.Konva._fixTextRendering){const ut=this.measureSize("M");et="alphabetic",nt=(ut.fontBoundingBoxAscent-ut.fontBoundingBoxDescent)/2+Y/2}for(ct===x&&V.setAttr("direction",ct),V.setAttr("font",this._getContextFont()),V.setAttr("textBaseline",et),V.setAttr("textAlign",g),st===h?gt=(this.getHeight()-ht*Y-K*2)/2:st===f&&(gt=this.getHeight()-ht*Y-K*2),V.translate(K,gt+K),ot=0;ot<ht;ot++){let ut=0,lt=0;const ft=it[ot],pt=ft.text,mt=ft.width,wt=ft.lastInParagraph;if(V.save(),F===G?ut+=L-mt-K*2:F===l&&(ut+=(L-mt-K*2)/2),Z){V.save(),V.beginPath();const vt=r.Konva._fixTextRendering?Math.round(N/4):Math.round(N/2),It=ut,xt=nt+lt+vt;V.moveTo(It,xt);const Et=F===c&&!wt?L-K*2:mt;V.lineTo(It+Math.round(Et),xt),V.lineWidth=N/15;const Mt=this._getLinearGradient();V.strokeStyle=Mt||$,V.stroke(),V.restore()}if(rt){V.save(),V.beginPath();const vt=r.Konva._fixTextRendering?-Math.round(N/4):0;V.moveTo(ut,nt+lt+vt);const It=F===c&&!wt?L-K*2:mt;V.lineTo(ut+Math.round(It),nt+lt+vt),V.lineWidth=N/15;const xt=this._getLinearGradient();V.strokeStyle=xt||$,V.stroke(),V.restore()}if(ct!==x&&(z!==0||F===c)){const vt=pt.split(" ").length-1,It=a(pt);for(let xt=0;xt<It.length;xt++){const Et=It[xt];Et===" "&&!wt&&F===c&&(ut+=(L-K*2-mt)/vt),this._partialTextX=ut,this._partialTextY=nt+lt,this._partialText=Et,V.fillStrokeShape(this),ut+=this.measureSize(Et).width+z}}else z!==0&&V.setAttr("letterSpacing",`${z}px`),this._partialTextX=ut,this._partialTextY=nt+lt,this._partialText=pt,V.fillStrokeShape(this);V.restore(),ht>1&&(nt+=Y)}}_hitFunc(V){const it=this.getWidth(),ht=this.getHeight();V.beginPath(),V.rect(0,0,it,ht),V.closePath(),V.fillStrokeShape(this)}setText(V){const it=t.Util._isString(V)?V:V==null?"":V+"";return this._setAttr(y,it),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(V){var it,ht,K,N,Y,st,ct,gt,F,L,z;let $=v(),Q=this.fontSize(),Z;$.save(),$.font=this._getContextFont(),Z=$.measureText(V),$.restore();const rt=Q/100;return{actualBoundingBoxAscent:(it=Z.actualBoundingBoxAscent)!==null&&it!==void 0?it:71.58203125*rt,actualBoundingBoxDescent:(ht=Z.actualBoundingBoxDescent)!==null&&ht!==void 0?ht:0,actualBoundingBoxLeft:(K=Z.actualBoundingBoxLeft)!==null&&K!==void 0?K:-7.421875*rt,actualBoundingBoxRight:(N=Z.actualBoundingBoxRight)!==null&&N!==void 0?N:75.732421875*rt,alphabeticBaseline:(Y=Z.alphabeticBaseline)!==null&&Y!==void 0?Y:0,emHeightAscent:(st=Z.emHeightAscent)!==null&&st!==void 0?st:100*rt,emHeightDescent:(ct=Z.emHeightDescent)!==null&&ct!==void 0?ct:-20*rt,fontBoundingBoxAscent:(gt=Z.fontBoundingBoxAscent)!==null&&gt!==void 0?gt:91*rt,fontBoundingBoxDescent:(F=Z.fontBoundingBoxDescent)!==null&&F!==void 0?F:21*rt,hangingBaseline:(L=Z.hangingBaseline)!==null&&L!==void 0?L:72.80000305175781*rt,ideographicBaseline:(z=Z.ideographicBaseline)!==null&&z!==void 0?z:-21*rt,width:Z.width,height:Q}}_getContextFont(){return this.fontStyle()+R+this.fontVariant()+R+(this.fontSize()+b)+H(this.fontFamily())}_addTextLine(V){this.align()===c&&(V=V.trim());const ht=this._getTextWidth(V);return this.textArr.push({text:V,width:ht,lastInParagraph:!1})}_getTextWidth(V){const it=this.letterSpacing(),ht=V.length;return v().measureText(V).width+it*ht}_setTextData(){let V=this.text().split(`
`),it=+this.fontSize(),ht=0,K=this.lineHeight()*it,N=this.attrs.width,Y=this.attrs.height,st=N!==o&&N!==void 0,ct=Y!==o&&Y!==void 0,gt=this.padding(),F=N-gt*2,L=Y-gt*2,z=0,$=this.wrap(),Q=$!==k,Z=$!==T&&Q,rt=this.ellipsis();this.textArr=[],v().font=this._getContextFont();const ot=rt?this._getTextWidth(B):0;for(let nt=0,et=V.length;nt<et;++nt){let ut=V[nt],lt=this._getTextWidth(ut);if(st&&lt>F)for(;ut.length>0;){let ft=0,pt=a(ut).length,mt="",wt=0;for(;ft<pt;){const vt=ft+pt>>>1,It=a(ut),xt=It.slice(0,vt+1).join(""),Et=this._getTextWidth(xt);(rt&&ct&&z+K>L?Et+ot:Et)<=F?(ft=vt+1,mt=xt,wt=Et):pt=vt}if(mt){if(Z){const xt=a(ut),Et=a(mt),Mt=xt[Et.length],fe=Mt===R||Mt===d;let ye;if(fe&&wt<=F)ye=Et.length;else{const Bt=Et.lastIndexOf(R),$t=Et.lastIndexOf(d);ye=Math.max(Bt,$t)+1}ye>0&&(ft=ye,mt=xt.slice(0,ft).join(""),wt=this._getTextWidth(mt))}if(mt=mt.trimRight(),this._addTextLine(mt),ht=Math.max(ht,wt),z+=K,this._shouldHandleEllipsis(z)){this._tryToAddEllipsisToLastLine();break}if(ut=a(ut).slice(ft).join("").trimLeft(),ut.length>0&&(lt=this._getTextWidth(ut),lt<=F)){this._addTextLine(ut),z+=K,ht=Math.max(ht,lt);break}}else break}else this._addTextLine(ut),z+=K,ht=Math.max(ht,lt),this._shouldHandleEllipsis(z)&&nt<et-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),ct&&z+K>L)break}this.textHeight=it,this.textWidth=ht}_shouldHandleEllipsis(V){const it=+this.fontSize(),ht=this.lineHeight()*it,K=this.attrs.height,N=K!==o&&K!==void 0,Y=this.padding(),st=K-Y*2;return!(this.wrap()!==k)||N&&V+ht>st}_tryToAddEllipsisToLastLine(){const V=this.attrs.width,it=V!==o&&V!==void 0,ht=this.padding(),K=V-ht*2,N=this.ellipsis(),Y=this.textArr[this.textArr.length-1];!Y||!N||(it&&(this._getTextWidth(Y.text+B)<K||(Y.text=Y.text.slice(0,Y.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Y.text+B))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const V=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,it=this.hasShadow();return V&&it?!0:super._useBufferCanvas()}};return yi.Text=I,I.prototype._fillFunc=P,I.prototype._strokeFunc=O,I.prototype.className=S,I.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(I),e.Factory.overWriteSetter(I,"width",(0,n.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(I,"height",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(I,"direction",u),e.Factory.addGetterSetter(I,"fontFamily","Arial"),e.Factory.addGetterSetter(I,"fontSize",12,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"fontStyle",m),e.Factory.addGetterSetter(I,"fontVariant",m),e.Factory.addGetterSetter(I,"padding",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"align",g),e.Factory.addGetterSetter(I,"verticalAlign",C),e.Factory.addGetterSetter(I,"lineHeight",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"wrap",w),e.Factory.addGetterSetter(I,"ellipsis",!1,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(I,"letterSpacing",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(I,"text","",(0,n.getStringValidator)()),e.Factory.addGetterSetter(I,"textDecoration",""),yi}var Qi={},na;function od(){if(na)return Qi;na=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.TextPath=void 0;const t=Ht(),e=Tt(),i=Kt(),r=Us(),n=Gl(),s=Rt(),a=Pt(),o="",l="normal";function u(p){p.fillText(this.partialText,0,0)}function c(p){p.strokeText(this.partialText,0,0)}let _=class extends i.Shape{constructor(d){super(d),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(d){if(!this.attrs.data)return null;const g=this.pathLength;return d-1>g?null:r.Path.getPointAtLengthOfDataArray(d,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(d){d.setAttr("font",this._getContextFont()),d.setAttr("textBaseline",this.textBaseline()),d.setAttr("textAlign","left"),d.save();const g=this.textDecoration(),y=this.fill(),S=this.fontSize(),C=this.glyphInfo;g==="underline"&&d.beginPath();for(let f=0;f<C.length;f++){d.save();const h=C[f].p0;d.translate(h.x,h.y),d.rotate(C[f].rotation),this.partialText=C[f].text,d.fillStrokeShape(this),g==="underline"&&(f===0&&d.moveTo(0,S/2+1),d.lineTo(S,S/2+1)),d.restore()}g==="underline"&&(d.strokeStyle=y,d.lineWidth=S/20,d.stroke()),d.restore()}_hitFunc(d){d.beginPath();const g=this.glyphInfo;if(g.length>=1){const y=g[0].p0;d.moveTo(y.x,y.y)}for(let y=0;y<g.length;y++){const S=g[y].p1;d.lineTo(S.x,S.y)}d.setAttr("lineWidth",this.fontSize()),d.setAttr("strokeStyle",this.colorKey),d.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(d){return n.Text.prototype.setText.call(this,d)}_getContextFont(){return n.Text.prototype._getContextFont.call(this)}_getTextSize(d){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const S=y.measureText(d);return y.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:d,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=d,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),S=this.align(),C=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let h=0;S==="center"&&(h=Math.max(0,this.pathLength/2-f/2)),S==="right"&&(h=Math.max(0,this.pathLength-f));const m=(0,n.stringToArray)(this.text());let b=h;for(let R=0;R<m.length;R++){const G=this._getPointAtLength(b);if(!G)return;let x=this._getTextSize(m[R]).width+y;if(m[R]===" "&&S==="justify"){const W=this.text().split(" ").length-1;x+=(this.pathLength-f)/W}const w=this._getPointAtLength(b+x);if(!w)return;const T=r.Path.getLineLength(G.x,G.y,w.x,w.y);let k=0;if(C)try{k=C(m[R-1],m[R])*this.fontSize()}catch{k=0}G.x+=k,w.x+=k,this.textWidth+=k;const B=r.Path.getPointOnLine(k+T/2,G.x,G.y,w.x,w.y),M=Math.atan2(w.y-G.y,w.x-G.x);this.glyphInfo.push({transposeX:B.x,transposeY:B.y,text:m[R],rotation:M,p0:G,p1:w}),b+=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const d=[];this.glyphInfo.forEach(function(b){d.push(b.p0.x),d.push(b.p0.y),d.push(b.p1.x),d.push(b.p1.y)});let g=d[0]||0,y=d[0]||0,S=d[1]||0,C=d[1]||0,f,h;for(let b=0;b<d.length/2;b++)f=d[b*2],h=d[b*2+1],g=Math.min(g,f),y=Math.max(y,f),S=Math.min(S,h),C=Math.max(C,h);const m=this.fontSize();return{x:g-m/2,y:S-m/2,width:y-g+m,height:C-S+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Qi.TextPath=_,_.prototype._fillFunc=u,_.prototype._strokeFunc=c,_.prototype._fillFuncHit=u,_.prototype._strokeFuncHit=c,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",o),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),Qi}var Zi={},ra;function ad(){if(ra)return Zi;ra=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Transformer=void 0;const t=Ht(),e=Tt(),i=qt(),r=Kt(),n=Dl(),s=Ds(),a=Pt(),o=Rt(),l=Pt(),u="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(x=>x+`.${u}`).join(" "),_="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],d={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in a.Konva._global;function y(x,w,T){if(x==="rotater")return T;w+=t.Util.degToRad(d[x]||0);const k=(t.Util.radToDeg(w)%360+360)%360;return t.Util._inRange(k,315+22.5,360)||t.Util._inRange(k,0,22.5)?"ns-resize":t.Util._inRange(k,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(k,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(k,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(k,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(k,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(k,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(k,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+k),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(x){return{x:x.x+x.width/2*Math.cos(x.rotation)+x.height/2*Math.sin(-x.rotation),y:x.y+x.height/2*Math.cos(x.rotation)+x.width/2*Math.sin(x.rotation)}}function f(x,w,T){const k=T.x+(x.x-T.x)*Math.cos(w)-(x.y-T.y)*Math.sin(w),B=T.y+(x.x-T.x)*Math.sin(w)+(x.y-T.y)*Math.cos(w);return{...x,rotation:x.rotation+w,x:k,y:B}}function h(x,w){const T=C(x);return f(x,w,T)}function m(x,w,T){let k=w;for(let B=0;B<x.length;B++){const M=a.Konva.getAngle(x[B]),W=Math.abs(M-w)%(Math.PI*2);Math.min(W,Math.PI*2-W)<T&&(k=M)}return k}let b=0,R=class extends s.Group{constructor(w){super(w),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(w){return this.setNode(w),this}setNode(w){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([w])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(w=[]){this._nodes&&this._nodes.length&&this.detach();const T=w.filter(B=>B.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=w=T,w.length===1&&this.useSingleNodeRotation()?this.rotation(w[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(B=>{const M=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(B._attrsAffectingSize.length){const W=B._attrsAffectingSize.map(H=>H+"Change."+this._getEventNamespace()).join(" ");B.on(W,M)}B.on(p.map(W=>W+`.${this._getEventNamespace()}`).join(" "),M),B.on(`absoluteTransformChange.${this._getEventNamespace()}`,M),this._proxyDrag(B)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(w){let T;w.on(`dragstart.${this._getEventNamespace()}`,k=>{T=w.getAbsolutePosition(),!this.isDragging()&&w!==this.findOne(".back")&&this.startDrag(k,!1)}),w.on(`dragmove.${this._getEventNamespace()}`,k=>{if(!T)return;const B=w.getAbsolutePosition(),M=B.x-T.x,W=B.y-T.y;this.nodes().forEach(H=>{if(H===w||H.isDragging())return;const tt=H.getAbsolutePosition();H.setAbsolutePosition({x:tt.x+M,y:tt.y+W}),H.startDrag(k)}),T=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(w=>{w.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(w,T=this.rotation(),k){const B=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),M=w.getAbsoluteScale(k),W=w.getAbsolutePosition(k),H=B.x*M.x-w.offsetX()*M.x,tt=B.y*M.y-w.offsetY()*M.y,v=(a.Konva.getAngle(w.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),P={x:W.x+H*Math.cos(v)+tt*Math.sin(-v),y:W.y+tt*Math.cos(v)+H*Math.sin(v),width:B.width*M.x,height:B.height*M.y,rotation:v};return f(P,-a.Konva.getAngle(T),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const T=[];this.nodes().map(v=>{const P=v.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),O=[{x:P.x,y:P.y},{x:P.x+P.width,y:P.y},{x:P.x+P.width,y:P.y+P.height},{x:P.x,y:P.y+P.height}],A=v.getAbsoluteTransform();O.forEach(function(I){const j=A.point(I);T.push(j)})});const k=new t.Transform;k.rotate(-a.Konva.getAngle(this.rotation()));let B=1/0,M=1/0,W=-1/0,H=-1/0;T.forEach(function(v){const P=k.point(v);B===void 0&&(B=W=P.x,M=H=P.y),B=Math.min(B,P.x),M=Math.min(M,P.y),W=Math.max(W,P.x),H=Math.max(H,P.y)}),k.invert();const tt=k.point({x:B,y:M});return{x:tt.x,y:tt.y,width:W-B,height:H-M,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(w=>{this._createAnchor(w)}),this._createAnchor("rotater")}_createAnchor(w){const T=new n.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:w+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),k=this;T.on("mousedown touchstart",function(B){k._handleMouseDown(B)}),T.on("dragstart",B=>{T.stopDrag(),B.cancelBubble=!0}),T.on("dragend",B=>{B.cancelBubble=!0}),T.on("mouseenter",()=>{const B=a.Konva.getAngle(this.rotation()),M=this.rotateAnchorCursor(),W=y(w,B,M);T.getStage().content&&(T.getStage().content.style.cursor=W),this._cursorChange=!0}),T.on("mouseout",()=>{T.getStage().content&&(T.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(T)}_createBack(){const w=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(T,k){const B=k.getParent(),M=B.padding();T.beginPath(),T.rect(-M,-M,k.width()+M*2,k.height()+M*2),T.moveTo(k.width()/2,-M),B.rotateEnabled()&&B.rotateLineVisible()&&T.lineTo(k.width()/2,-B.rotateAnchorOffset()*t.Util._sign(k.height())-M),T.fillStrokeShape(k)},hitFunc:(T,k)=>{if(!this.shouldOverdrawWholeArea())return;const B=this.padding();T.beginPath(),T.rect(-B,-B,k.width()+B*2,k.height()+B*2),T.fillStrokeShape(k)}});this.add(w),this._proxyDrag(w),w.on("dragstart",T=>{T.cancelBubble=!0}),w.on("dragmove",T=>{T.cancelBubble=!0}),w.on("dragend",T=>{T.cancelBubble=!0}),this.on("dragmove",T=>{this.update()})}_handleMouseDown(w){if(this._transforming)return;this._movingAnchorName=w.target.name().split(" ")[0];const T=this._getNodeRect(),k=T.width,B=T.height,M=Math.sqrt(Math.pow(k,2)+Math.pow(B,2));this.sin=Math.abs(B/M),this.cos=Math.abs(k/M),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const W=w.target.getAbsolutePosition(),H=w.target.getStage().getPointerPosition();this._anchorDragOffset={x:H.x-W.x,y:H.y-W.y},b++,this._fire("transformstart",{evt:w.evt,target:this.getNode()}),this._nodes.forEach(tt=>{tt._fire("transformstart",{evt:w.evt,target:tt})})}_handleMouseMove(w){let T,k,B;const M=this.findOne("."+this._movingAnchorName),W=M.getStage();W.setPointersPositions(w);const H=W.getPointerPosition();let tt={x:H.x-this._anchorDragOffset.x,y:H.y-this._anchorDragOffset.y};const v=M.getAbsolutePosition();this.anchorDragBoundFunc()&&(tt=this.anchorDragBoundFunc()(v,tt,w)),M.setAbsolutePosition(tt);const P=M.getAbsolutePosition();if(v.x===P.x&&v.y===P.y)return;if(this._movingAnchorName==="rotater"){const K=this._getNodeRect();T=M.x()-K.width/2,k=-M.y()+K.height/2;let N=Math.atan2(-k,T)+Math.PI/2;K.height<0&&(N-=Math.PI);const st=a.Konva.getAngle(this.rotation())+N,ct=a.Konva.getAngle(this.rotationSnapTolerance()),F=m(this.rotationSnaps(),st,ct)-K.rotation,L=h(K,F);this._fitNodesInto(L,w);return}const O=this.shiftBehavior();let A;O==="inverted"?A=this.keepRatio()&&!w.shiftKey:O==="none"?A=this.keepRatio():A=this.keepRatio()||w.shiftKey;let I=this.centeredScaling()||w.altKey;if(this._movingAnchorName==="top-left"){if(A){const K=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};B=Math.sqrt(Math.pow(K.x-M.x(),2)+Math.pow(K.y-M.y(),2));const N=this.findOne(".top-left").x()>K.x?-1:1,Y=this.findOne(".top-left").y()>K.y?-1:1;T=B*this.cos*N,k=B*this.sin*Y,this.findOne(".top-left").x(K.x-T),this.findOne(".top-left").y(K.y-k)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(M.y());else if(this._movingAnchorName==="top-right"){if(A){const K=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};B=Math.sqrt(Math.pow(M.x()-K.x,2)+Math.pow(K.y-M.y(),2));const N=this.findOne(".top-right").x()<K.x?-1:1,Y=this.findOne(".top-right").y()>K.y?-1:1;T=B*this.cos*N,k=B*this.sin*Y,this.findOne(".top-right").x(K.x+T),this.findOne(".top-right").y(K.y-k)}var j=M.position();this.findOne(".top-left").y(j.y),this.findOne(".bottom-right").x(j.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(M.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(M.x());else if(this._movingAnchorName==="bottom-left"){if(A){const K=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};B=Math.sqrt(Math.pow(K.x-M.x(),2)+Math.pow(M.y()-K.y,2));const N=K.x<M.x()?-1:1,Y=M.y()<K.y?-1:1;T=B*this.cos*N,k=B*this.sin*Y,M.x(K.x-T),M.y(K.y+k)}j=M.position(),this.findOne(".top-left").x(j.x),this.findOne(".bottom-right").y(j.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(M.y());else if(this._movingAnchorName==="bottom-right"){if(A){const K=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};B=Math.sqrt(Math.pow(M.x()-K.x,2)+Math.pow(M.y()-K.y,2));const N=this.findOne(".bottom-right").x()<K.x?-1:1,Y=this.findOne(".bottom-right").y()<K.y?-1:1;T=B*this.cos*N,k=B*this.sin*Y,this.findOne(".bottom-right").x(K.x+T),this.findOne(".bottom-right").y(K.y+k)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(I=this.centeredScaling()||w.altKey,I){const K=this.findOne(".top-left"),N=this.findOne(".bottom-right"),Y=K.x(),st=K.y(),ct=this.getWidth()-N.x(),gt=this.getHeight()-N.y();N.move({x:-Y,y:-st}),K.move({x:ct,y:gt})}const V=this.findOne(".top-left").getAbsolutePosition();T=V.x,k=V.y;const it=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ht=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:T,y:k,width:it,height:ht,rotation:a.Konva.getAngle(this.rotation())},w)}_handleMouseUp(w){this._removeEvents(w)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(w){var T;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const k=this.getNode();b--,this._fire("transformend",{evt:w,target:k}),(T=this.getLayer())===null||T===void 0||T.batchDraw(),k&&this._nodes.forEach(B=>{var M;B._fire("transformend",{evt:w,target:B}),(M=B.getLayer())===null||M===void 0||M.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(w,T){const k=this._getNodeRect(),B=1;if(t.Util._inRange(w.width,-this.padding()*2-B,B)){this.update();return}if(t.Util._inRange(w.height,-this.padding()*2-B,B)){this.update();return}const M=new t.Transform;if(M.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("left")>=0){const A=M.point({x:-this.padding()*2,y:0});w.x+=A.x,w.y+=A.y,w.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y}else if(this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("right")>=0){const A=M.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,w.width+=this.padding()*2}if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("top")>=0){const A=M.point({x:0,y:-this.padding()*2});w.x+=A.x,w.y+=A.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,w.height+=this.padding()*2}else if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const A=M.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,w.height+=this.padding()*2}if(this.boundBoxFunc()){const A=this.boundBoxFunc()(k,w);A?w=A:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const W=1e7,H=new t.Transform;H.translate(k.x,k.y),H.rotate(k.rotation),H.scale(k.width/W,k.height/W);const tt=new t.Transform,v=w.width/W,P=w.height/W;this.flipEnabled()===!1?(tt.translate(w.x,w.y),tt.rotate(w.rotation),tt.translate(w.width<0?w.width:0,w.height<0?w.height:0),tt.scale(Math.abs(v),Math.abs(P))):(tt.translate(w.x,w.y),tt.rotate(w.rotation),tt.scale(v,P));const O=tt.multiply(H.invert());this._nodes.forEach(A=>{var I;const j=A.getParent().getAbsoluteTransform(),V=A.getTransform().copy();V.translate(A.offsetX(),A.offsetY());const it=new t.Transform;it.multiply(j.copy().invert()).multiply(O).multiply(j).multiply(V);const ht=it.decompose();A.setAttrs(ht),(I=A.getLayer())===null||I===void 0||I.batchDraw()}),this.rotation(t.Util._getRotation(w.rotation)),this._nodes.forEach(A=>{this._fire("transform",{evt:T,target:A}),A._fire("transform",{evt:T,target:A})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(w,T){this.findOne(w).setAttrs(T)}update(){var w;const T=this._getNodeRect();this.rotation(t.Util._getRotation(T.rotation));const k=T.width,B=T.height,M=this.enabledAnchors(),W=this.resizeEnabled(),H=this.padding(),tt=this.anchorSize(),v=this.find("._anchor");v.forEach(O=>{O.setAttrs({width:tt,height:tt,offsetX:tt/2,offsetY:tt/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:tt/2+H,offsetY:tt/2+H,visible:W&&M.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:k/2,y:0,offsetY:tt/2+H,visible:W&&M.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:k,y:0,offsetX:tt/2-H,offsetY:tt/2+H,visible:W&&M.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:B/2,offsetX:tt/2+H,visible:W&&M.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:k,y:B/2,offsetX:tt/2-H,visible:W&&M.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:B,offsetX:tt/2+H,offsetY:tt/2-H,visible:W&&M.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:k/2,y:B,offsetY:tt/2-H,visible:W&&M.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:k,y:B,offsetX:tt/2-H,offsetY:tt/2-H,visible:W&&M.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:k/2,y:-this.rotateAnchorOffset()*t.Util._sign(B)-H,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:k,height:B,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const P=this.anchorStyleFunc();P&&v.forEach(O=>{P(O)}),(w=this.getLayer())===null||w===void 0||w.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const w=this.findOne("."+this._movingAnchorName);w&&w.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(w){return i.Node.prototype.clone.call(this,w)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Zi.Transformer=R,R.isTransforming=()=>b>0;function G(x){return x instanceof Array||t.Util.warn("enabledAnchors value should be an array"),x instanceof Array&&x.forEach(function(w){S.indexOf(w)===-1&&t.Util.warn("Unknown anchor name: "+w+". Available names are: "+S.join(", "))}),x||[]}return R.prototype.className="Transformer",(0,l._registerNode)(R),e.Factory.addGetterSetter(R,"enabledAnchors",S,G),e.Factory.addGetterSetter(R,"flipEnabled",!0,(0,o.getBooleanValidator)()),e.Factory.addGetterSetter(R,"resizeEnabled",!0),e.Factory.addGetterSetter(R,"anchorSize",10,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateEnabled",!0),e.Factory.addGetterSetter(R,"rotateLineVisible",!0),e.Factory.addGetterSetter(R,"rotationSnaps",[]),e.Factory.addGetterSetter(R,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(R,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderEnabled",!0),e.Factory.addGetterSetter(R,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"anchorFill","white"),e.Factory.addGetterSetter(R,"anchorCornerRadius",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"borderStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderDash"),e.Factory.addGetterSetter(R,"keepRatio",!0),e.Factory.addGetterSetter(R,"shiftBehavior","default"),e.Factory.addGetterSetter(R,"centeredScaling",!1),e.Factory.addGetterSetter(R,"ignoreStroke",!1),e.Factory.addGetterSetter(R,"padding",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(R,"nodes"),e.Factory.addGetterSetter(R,"node"),e.Factory.addGetterSetter(R,"boundBoxFunc"),e.Factory.addGetterSetter(R,"anchorDragBoundFunc"),e.Factory.addGetterSetter(R,"anchorStyleFunc"),e.Factory.addGetterSetter(R,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(R,"useSingleNodeRotation",!0),e.Factory.backCompat(R,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Zi}var tn={},sa;function ld(){if(sa)return tn;sa=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.Wedge=void 0;const t=Tt(),e=Kt(),i=Pt(),r=Rt(),n=Pt();let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return tn.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1),t.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),tn}var en={},oa;function hd(){if(oa)return en;oa=1,Object.defineProperty(en,"__esModule",{value:!0}),en.Blur=void 0;const t=Tt(),e=qt(),i=Rt();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(l,u){const c=l.data,_=l.width,p=l.height;let d,g,y,S,C,f,h,m,b,R,G,x,w,T,k,B,M,W,H,tt;const v=u+u+1,P=_-1,O=p-1,A=u+1,I=A*(A+1)/2,j=new r,V=n[u],it=s[u];let ht=null,K=j,N=null,Y=null;for(let st=1;st<v;st++)K=K.next=new r,st===A&&(ht=K);K.next=j,y=g=0;for(let st=0;st<p;st++){x=w=T=k=S=C=f=h=0,m=A*(B=c[g]),b=A*(M=c[g+1]),R=A*(W=c[g+2]),G=A*(H=c[g+3]),S+=I*B,C+=I*M,f+=I*W,h+=I*H,K=j;for(let ct=0;ct<A;ct++)K.r=B,K.g=M,K.b=W,K.a=H,K=K.next;for(let ct=1;ct<A;ct++)d=g+((P<ct?P:ct)<<2),S+=(K.r=B=c[d])*(tt=A-ct),C+=(K.g=M=c[d+1])*tt,f+=(K.b=W=c[d+2])*tt,h+=(K.a=H=c[d+3])*tt,x+=B,w+=M,T+=W,k+=H,K=K.next;N=j,Y=ht;for(let ct=0;ct<_;ct++)c[g+3]=H=h*V>>it,H!==0?(H=255/H,c[g]=(S*V>>it)*H,c[g+1]=(C*V>>it)*H,c[g+2]=(f*V>>it)*H):c[g]=c[g+1]=c[g+2]=0,S-=m,C-=b,f-=R,h-=G,m-=N.r,b-=N.g,R-=N.b,G-=N.a,d=y+((d=ct+u+1)<P?d:P)<<2,x+=N.r=c[d],w+=N.g=c[d+1],T+=N.b=c[d+2],k+=N.a=c[d+3],S+=x,C+=w,f+=T,h+=k,N=N.next,m+=B=Y.r,b+=M=Y.g,R+=W=Y.b,G+=H=Y.a,x-=B,w-=M,T-=W,k-=H,Y=Y.next,g+=4;y+=_}for(let st=0;st<_;st++){w=T=k=x=C=f=h=S=0,g=st<<2,m=A*(B=c[g]),b=A*(M=c[g+1]),R=A*(W=c[g+2]),G=A*(H=c[g+3]),S+=I*B,C+=I*M,f+=I*W,h+=I*H,K=j;for(let gt=0;gt<A;gt++)K.r=B,K.g=M,K.b=W,K.a=H,K=K.next;let ct=_;for(let gt=1;gt<=u;gt++)g=ct+st<<2,S+=(K.r=B=c[g])*(tt=A-gt),C+=(K.g=M=c[g+1])*tt,f+=(K.b=W=c[g+2])*tt,h+=(K.a=H=c[g+3])*tt,x+=B,w+=M,T+=W,k+=H,K=K.next,gt<O&&(ct+=_);g=st,N=j,Y=ht;for(let gt=0;gt<p;gt++)d=g<<2,c[d+3]=H=h*V>>it,H>0?(H=255/H,c[d]=(S*V>>it)*H,c[d+1]=(C*V>>it)*H,c[d+2]=(f*V>>it)*H):c[d]=c[d+1]=c[d+2]=0,S-=m,C-=b,f-=R,h-=G,m-=N.r,b-=N.g,R-=N.b,G-=N.a,d=st+((d=gt+A)<O?d:O)*_<<2,S+=x+=N.r=c[d],C+=w+=N.g=c[d+1],f+=T+=N.b=c[d+2],h+=k+=N.a=c[d+3],N=N.next,m+=B=Y.r,b+=M=Y.g,R+=W=Y.b,G+=H=Y.a,x-=B,w-=M,T-=W,k-=H,Y=Y.next,g+=_}}const o=function(u){const c=Math.round(this.blurRadius());c>0&&a(u,c)};return en.Blur=o,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),en}var nn={},aa;function cd(){if(aa)return nn;aa=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.Brighten=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=this.brightness()*255,a=n.data,o=a.length;for(let l=0;l<o;l+=4)a[l]+=s,a[l+1]+=s,a[l+2]+=s};return nn.Brighten=r,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),nn}var rn={},la;function ud(){if(la)return rn;la=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.Contrast=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=Math.pow((this.contrast()+100)/100,2),a=n.data,o=a.length;let l=150,u=150,c=150;for(let _=0;_<o;_+=4)l=a[_],u=a[_+1],c=a[_+2],l/=255,l-=.5,l*=s,l+=.5,l*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,c=c<0?0:c>255?255:c,a[_]=l,a[_+1]=u,a[_+2]=c};return rn.Contrast=r,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),rn}var sn={},ha;function dd(){if(ha)return sn;ha=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.Emboss=void 0;const t=Tt(),e=qt(),i=Ht(),r=Rt(),n=function(s){const a=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),c=s.data,_=s.width,p=s.height,d=_*4;let g=0,y=0,S=p;switch(l){case"top-left":g=-1,y=-1;break;case"top":g=-1,y=0;break;case"top-right":g=-1,y=1;break;case"right":g=0,y=1;break;case"bottom-right":g=1,y=1;break;case"bottom":g=1,y=0;break;case"bottom-left":g=1,y=-1;break;case"left":g=0,y=-1;break;default:i.Util.error("Unknown emboss direction: "+l)}do{const C=(S-1)*d;let f=g;S+f<1&&(f=0),S+f>p&&(f=0);const h=(S-1+f)*_*4;let m=_;do{const b=C+(m-1)*4;let R=y;m+R<1&&(R=0),m+R>_&&(R=0);const G=h+(m-1+R)*4,x=c[b]-c[G],w=c[b+1]-c[G+1],T=c[b+2]-c[G+2];let k=x;const B=k>0?k:-k,M=w>0?w:-w,W=T>0?T:-T;if(M>B&&(k=w),W>B&&(k=T),k*=a,u){const H=c[b]+k,tt=c[b+1]+k,v=c[b+2]+k;c[b]=H>255?255:H<0?0:H,c[b+1]=tt>255?255:tt<0?0:tt,c[b+2]=v>255?255:v<0?0:v}else{let H=o-k;H<0?H=0:H>255&&(H=255),c[b]=c[b+1]=c[b+2]=H}}while(--m)}while(--S)};return sn.Emboss=n,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),sn}var on={},ca;function fd(){if(ca)return on;ca=1,Object.defineProperty(on,"__esModule",{value:!0}),on.Enhance=void 0;const t=Tt(),e=qt(),i=Rt();function r(s,a,o,l,u){const c=o-a,_=u-l;if(c===0)return l+_/2;if(_===0)return l;let p=(s-a)/c;return p=_*p+l,p}const n=function(s){const a=s.data,o=a.length;let l=a[0],u=l,c,_=a[1],p=_,d,g=a[2],y=g,S;const C=this.enhance();if(C===0)return;for(let x=0;x<o;x+=4)c=a[x+0],c<l?l=c:c>u&&(u=c),d=a[x+1],d<_?_=d:d>p&&(p=d),S=a[x+2],S<g?g=S:S>y&&(y=S);u===l&&(u=255,l=0),p===_&&(p=255,_=0),y===g&&(y=255,g=0);let f,h,m,b,R,G;if(C>0)f=u+C*(255-u),h=l-C*(l-0),m=p+C*(255-p),b=_-C*(_-0),R=y+C*(255-y),G=g-C*(g-0);else{const x=(u+l)*.5;f=u+C*(u-x),h=l+C*(l-x);const w=(p+_)*.5;m=p+C*(p-w),b=_+C*(_-w);const T=(y+g)*.5;R=y+C*(y-T),G=g+C*(g-T)}for(let x=0;x<o;x+=4)a[x+0]=r(a[x+0],l,u,h,f),a[x+1]=r(a[x+1],_,p,b,m),a[x+2]=r(a[x+2],g,y,G,R)};return on.Enhance=n,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),on}var an={},ua;function gd(){if(ua)return an;ua=1,Object.defineProperty(an,"__esModule",{value:!0}),an.Grayscale=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4){const s=.34*i[n]+.5*i[n+1]+.16*i[n+2];i[n]=s,i[n+1]=s,i[n+2]=s}};return an.Grayscale=t,an}var ln={},da;function pd(){if(da)return ln;da=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.HSL=void 0;const t=Tt(),e=qt(),i=Rt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const r=function(n){const s=n.data,a=s.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=this.luminance()*127,_=o*l*Math.cos(u*Math.PI/180),p=o*l*Math.sin(u*Math.PI/180),d=.299*o+.701*_+.167*p,g=.587*o-.587*_+.33*p,y=.114*o-.114*_-.497*p,S=.299*o-.299*_-.328*p,C=.587*o+.413*_+.035*p,f=.114*o-.114*_+.293*p,h=.299*o-.3*_+1.25*p,m=.587*o-.586*_-1.05*p,b=.114*o+.886*_-.2*p;let R,G,x,w;for(let T=0;T<a;T+=4)R=s[T+0],G=s[T+1],x=s[T+2],w=s[T+3],s[T+0]=d*R+g*G+y*x+c,s[T+1]=S*R+C*G+f*x+c,s[T+2]=h*R+m*G+b*x+c,s[T+3]=w};return ln.HSL=r,ln}var hn={},fa;function md(){if(fa)return hn;fa=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.HSV=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=n.data,a=s.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=o*l*Math.cos(u*Math.PI/180),_=o*l*Math.sin(u*Math.PI/180),p=.299*o+.701*c+.167*_,d=.587*o-.587*c+.33*_,g=.114*o-.114*c-.497*_,y=.299*o-.299*c-.328*_,S=.587*o+.413*c+.035*_,C=.114*o-.114*c+.293*_,f=.299*o-.3*c+1.25*_,h=.587*o-.586*c-1.05*_,m=.114*o+.886*c-.2*_;for(let b=0;b<a;b+=4){const R=s[b+0],G=s[b+1],x=s[b+2],w=s[b+3];s[b+0]=p*R+d*G+g*x,s[b+1]=y*R+S*G+C*x,s[b+2]=f*R+h*G+m*x,s[b+3]=w}};return hn.HSV=r,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),hn}var cn={},ga;function _d(){if(ga)return cn;ga=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.Invert=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4)i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2]};return cn.Invert=t,cn}var un={},pa;function yd(){if(pa)return un;pa=1,Object.defineProperty(un,"__esModule",{value:!0}),un.Kaleidoscope=void 0;const t=Tt(),e=qt(),i=Ht(),r=Rt(),n=function(o,l,u){const c=o.data,_=l.data,p=o.width,d=o.height,g=u.polarCenterX||p/2,y=u.polarCenterY||d/2;let S=Math.sqrt(g*g+y*y),C=p-g,f=d-y;const h=Math.sqrt(C*C+f*f);S=h>S?h:S;const m=d,b=p,R=360/b*Math.PI/180;for(let G=0;G<b;G+=1){const x=Math.sin(G*R),w=Math.cos(G*R);for(let T=0;T<m;T+=1){C=Math.floor(g+S*T/m*w),f=Math.floor(y+S*T/m*x);let k=(f*p+C)*4;const B=c[k+0],M=c[k+1],W=c[k+2],H=c[k+3];k=(G+T*p)*4,_[k+0]=B,_[k+1]=M,_[k+2]=W,_[k+3]=H}}},s=function(o,l,u){const c=o.data,_=l.data,p=o.width,d=o.height,g=u.polarCenterX||p/2,y=u.polarCenterY||d/2;let S=Math.sqrt(g*g+y*y),C=p-g,f=d-y;const h=Math.sqrt(C*C+f*f);S=h>S?h:S;const m=d,b=p,R=0;let G,x;for(C=0;C<p;C+=1)for(f=0;f<d;f+=1){const w=C-g,T=f-y,k=Math.sqrt(w*w+T*T)*m/S;let B=(Math.atan2(T,w)*180/Math.PI+360+R)%360;B=B*b/360,G=Math.floor(B),x=Math.floor(k);let M=(x*p+G)*4;const W=c[M+0],H=c[M+1],tt=c[M+2],v=c[M+3];M=(f*p+C)*4,_[M+0]=W,_[M+1]=H,_[M+2]=tt,_[M+3]=v}},a=function(o){const l=o.width,u=o.height;let c,_,p,d,g,y,S,C,f,h,m=Math.round(this.kaleidoscopePower());const b=Math.round(this.kaleidoscopeAngle()),R=Math.floor(l*(b%360)/360);if(m<1)return;const G=i.Util.createCanvasElement();G.width=l,G.height=u;const x=G.getContext("2d").getImageData(0,0,l,u);i.Util.releaseCanvas(G),n(o,x,{polarCenterX:l/2,polarCenterY:u/2});let w=l/Math.pow(2,m);for(;w<=8;)w=w*2,m-=1;w=Math.ceil(w);let T=w,k=0,B=T,M=1;for(R+w>l&&(k=T,B=0,M=-1),_=0;_<u;_+=1)for(c=k;c!==B;c+=M)p=Math.round(c+R)%l,f=(l*_+p)*4,g=x.data[f+0],y=x.data[f+1],S=x.data[f+2],C=x.data[f+3],h=(l*_+c)*4,x.data[h+0]=g,x.data[h+1]=y,x.data[h+2]=S,x.data[h+3]=C;for(_=0;_<u;_+=1)for(T=Math.floor(w),d=0;d<m;d+=1){for(c=0;c<T+1;c+=1)f=(l*_+c)*4,g=x.data[f+0],y=x.data[f+1],S=x.data[f+2],C=x.data[f+3],h=(l*_+T*2-c-1)*4,x.data[h+0]=g,x.data[h+1]=y,x.data[h+2]=S,x.data[h+3]=C;T*=2}s(x,o,{})};return un.Kaleidoscope=a,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),un}var dn={},ma;function vd(){if(ma)return dn;ma=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.Mask=void 0;const t=Tt(),e=qt(),i=Rt();function r(p,d,g){let y=(g*p.width+d)*4;const S=[];return S.push(p.data[y++],p.data[y++],p.data[y++],p.data[y++]),S}function n(p,d){return Math.sqrt(Math.pow(p[0]-d[0],2)+Math.pow(p[1]-d[1],2)+Math.pow(p[2]-d[2],2))}function s(p){const d=[0,0,0];for(let g=0;g<p.length;g++)d[0]+=p[g][0],d[1]+=p[g][1],d[2]+=p[g][2];return d[0]/=p.length,d[1]/=p.length,d[2]/=p.length,d}function a(p,d){const g=r(p,0,0),y=r(p,p.width-1,0),S=r(p,0,p.height-1),C=r(p,p.width-1,p.height-1),f=d||10;if(n(g,y)<f&&n(y,C)<f&&n(C,S)<f&&n(S,g)<f){const h=s([y,g,C,S]),m=[];for(let b=0;b<p.width*p.height;b++){const R=n(h,[p.data[b*4],p.data[b*4+1],p.data[b*4+2]]);m[b]=R<f?0:255}return m}}function o(p,d){for(let g=0;g<p.width*p.height;g++)p.data[4*g+3]=d[g]}function l(p,d,g){const y=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(y.length)),C=Math.floor(S/2),f=[];for(let h=0;h<g;h++)for(let m=0;m<d;m++){const b=h*d+m;let R=0;for(let G=0;G<S;G++)for(let x=0;x<S;x++){const w=h+G-C,T=m+x-C;if(w>=0&&w<g&&T>=0&&T<d){const k=w*d+T,B=y[G*S+x];R+=p[k]*B}}f[b]=R===2040?255:0}return f}function u(p,d,g){const y=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(y.length)),C=Math.floor(S/2),f=[];for(let h=0;h<g;h++)for(let m=0;m<d;m++){const b=h*d+m;let R=0;for(let G=0;G<S;G++)for(let x=0;x<S;x++){const w=h+G-C,T=m+x-C;if(w>=0&&w<g&&T>=0&&T<d){const k=w*d+T,B=y[G*S+x];R+=p[k]*B}}f[b]=R>=1020?255:0}return f}function c(p,d,g){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(y.length)),C=Math.floor(S/2),f=[];for(let h=0;h<g;h++)for(let m=0;m<d;m++){const b=h*d+m;let R=0;for(let G=0;G<S;G++)for(let x=0;x<S;x++){const w=h+G-C,T=m+x-C;if(w>=0&&w<g&&T>=0&&T<d){const k=w*d+T,B=y[G*S+x];R+=p[k]*B}}f[b]=R}return f}const _=function(p){const d=this.threshold();let g=a(p,d);return g&&(g=l(g,p.width,p.height),g=u(g,p.width,p.height),g=c(g,p.width,p.height),o(p,g)),p};return dn.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),dn}var fn={},_a;function bd(){if(_a)return fn;_a=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.Noise=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=this.noise()*255,a=n.data,o=a.length,l=s/2;for(let u=0;u<o;u+=4)a[u+0]+=l-2*l*Math.random(),a[u+1]+=l-2*l*Math.random(),a[u+2]+=l-2*l*Math.random()};return fn.Noise=r,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),fn}var gn={},ya;function Sd(){if(ya)return gn;ya=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.Pixelate=void 0;const t=Tt(),e=Ht(),i=qt(),r=Rt(),n=function(s){let a=Math.ceil(this.pixelSize()),o=s.width,l=s.height,u=Math.ceil(o/a),c=Math.ceil(l/a),_=s.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let p=0;p<u;p+=1)for(let d=0;d<c;d+=1){let g=0,y=0,S=0,C=0;const f=p*a,h=f+a,m=d*a,b=m+a;let R=0;for(let G=f;G<h;G+=1)if(!(G>=o))for(let x=m;x<b;x+=1){if(x>=l)continue;const w=(o*x+G)*4;g+=_[w+0],y+=_[w+1],S+=_[w+2],C+=_[w+3],R+=1}g=g/R,y=y/R,S=S/R,C=C/R;for(let G=f;G<h;G+=1)if(!(G>=o))for(let x=m;x<b;x+=1){if(x>=l)continue;const w=(o*x+G)*4;_[w+0]=g,_[w+1]=y,_[w+2]=S,_[w+3]=C}}};return gn.Pixelate=n,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),gn}var pn={},va;function Cd(){if(va)return pn;va=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.Posterize=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=Math.round(this.levels()*254)+1,a=n.data,o=a.length,l=255/s;for(let u=0;u<o;u+=1)a[u]=Math.floor(a[u]/l)*l};return pn.Posterize=r,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),pn}var mn={},ba;function xd(){if(ba)return mn;ba=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.RGB=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=n.data,a=s.length,o=this.red(),l=this.green(),u=this.blue();for(let c=0;c<a;c+=4){const _=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=_*o,s[c+1]=_*l,s[c+2]=_*u,s[c+3]=s[c+3]}};return mn.RGB=r,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),mn}var _n={},Sa;function wd(){if(Sa)return _n;Sa=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.RGBA=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=n.data,a=s.length,o=this.red(),l=this.green(),u=this.blue(),c=this.alpha();for(let _=0;_<a;_+=4){const p=1-c;s[_]=o*c+s[_]*p,s[_+1]=l*c+s[_+1]*p,s[_+2]=u*c+s[_+2]*p}};return _n.RGBA=r,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n}),_n}var yn={},Ca;function Pd(){if(Ca)return yn;Ca=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.Sepia=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4){const s=i[n+0],a=i[n+1],o=i[n+2];i[n+0]=Math.min(255,s*.393+a*.769+o*.189),i[n+1]=Math.min(255,s*.349+a*.686+o*.168),i[n+2]=Math.min(255,s*.272+a*.534+o*.131)}};return yn.Sepia=t,yn}var vn={},xa;function Td(){if(xa)return vn;xa=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.Solarize=void 0;const t=function(e){const i=e.data,r=e.width,n=e.height,s=r*4;let a=n;do{const o=(a-1)*s;let l=r;do{const u=o+(l-1)*4;let c=i[u],_=i[u+1],p=i[u+2];c>127&&(c=255-c),_>127&&(_=255-_),p>127&&(p=255-p),i[u]=c,i[u+1]=_,i[u+2]=p}while(--l)}while(--a)};return vn.Solarize=t,vn}var bn={},wa;function Rd(){if(wa)return bn;wa=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.Threshold=void 0;const t=Tt(),e=qt(),i=Rt(),r=function(n){const s=this.threshold()*255,a=n.data,o=a.length;for(let l=0;l<o;l+=1)a[l]=a[l]<s?0:255};return bn.Threshold=r,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),bn}var Pa;function Md(){if(Pa)return Oi;Pa=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Konva=void 0;const t=Xu(),e=Ku(),i=Ju(),r=Qu(),n=Zu(),s=td(),a=ed(),o=kl(),l=Us(),u=Dl(),c=id(),_=nd(),p=rd(),d=sd(),g=Gl(),y=od(),S=ad(),C=ld(),f=hd(),h=cd(),m=ud(),b=dd(),R=fd(),G=gd(),x=pd(),w=md(),T=_d(),k=yd(),B=vd(),M=bd(),W=Sd(),H=Cd(),tt=xd(),v=wd(),P=Pd(),O=Td(),A=Rd();return Oi.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:r.Circle,Ellipse:n.Ellipse,Image:s.Image,Label:a.Label,Tag:a.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:c.RegularPolygon,Ring:_.Ring,Sprite:p.Sprite,Star:d.Star,Text:g.Text,TextPath:y.TextPath,Transformer:S.Transformer,Wedge:C.Wedge,Filters:{Blur:f.Blur,Brighten:h.Brighten,Contrast:m.Contrast,Emboss:b.Emboss,Enhance:R.Enhance,Grayscale:G.Grayscale,HSL:x.HSL,HSV:w.HSV,Invert:T.Invert,Kaleidoscope:k.Kaleidoscope,Mask:B.Mask,Noise:M.Noise,Pixelate:W.Pixelate,Posterize:H.Posterize,RGB:tt.RGB,RGBA:v.RGBA,Sepia:P.Sepia,Solarize:O.Solarize,Threshold:A.Threshold}}),Oi}var Ed=Zn.exports,Ta;function Ad(){if(Ta)return Zn.exports;Ta=1,Object.defineProperty(Ed,"__esModule",{value:!0});const t=Md();return Zn.exports=t.Konva,Zn.exports}var Fd=Ad();const ei=qu(Fd);function cr(t){if(!ei.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const Ra={key:!0,style:!0,elm:!0,isRootInsert:!0},is=".vue-konva-event";function Ul(t,e,i,r){const n=t.__konvaNode,s={};let a=!1;for(let o in i){if(Ra.hasOwnProperty(o))continue;const l=o.slice(0,2)==="on",u=i[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),n?.off(c+is,i[o])}!e.hasOwnProperty(o)&&n?.setAttr(o,void 0)}for(let o in e){if(Ra.hasOwnProperty(o))continue;let l=o.slice(0,2)==="on";const u=i[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),e[o]&&(n?.off(c+is),n?.on(c+is,e[o]))}!l&&(e[o]!==i[o]||r&&e[o]!==n?.getAttr(o))&&(a=!0,s[o]=e[o])}a&&n&&(n.setAttrs(s),cr(n))}const Id="V";function Od(t){function e(i){return i?.__konvaNode?i:i?.parent?e(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function Bl(t){return t.component?t.component.__konvaNode||Bl(t.component.subTree):null}function Nd(t){const{el:e,component:i}=t,r=Bl(t);if(e?.tagName&&i&&!r){const n=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${n}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return r}function kd(t){const e=n=>!!n&&typeof n=="object"&&"component"in n,i=n=>Array.isArray(n),r=n=>e(n)?[n,...r(n.children)]:i(n)?n.flatMap(r):[];return r(t.children)}function Hl(t,e){const i=kd(t),r=[];i.forEach(s=>{const a=Nd(s);a&&r.push(a)});let n=!1;r.forEach((s,a)=>{s.getZIndex()!==a&&(s.setZIndex(a),n=!0)}),n&&cr(e)}const Ld=ei.default?.Stage||ei.Stage,Dd=ol({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:i,expose:r}){const n=ks();if(!n)return;const s=Me({}),a=jt(null),o=new Ld({width:t.config.width,height:t.config.height,container:document.createElement("div")});n.__konvaNode=o,c();function l(){return n?.__konvaNode}function u(){return n?.__konvaNode}function c(){if(!n)return;const _=s||{},p={...e,...t.config};Ul(n,p,_,t.__useStrictMode),Object.assign(s,p)}return Sr(()=>{a.value&&(a.value.innerHTML="",o.container(a.value)),c()}),Es(()=>{c(),Hl(n.subTree,o)}),As(()=>{o.destroy()}),ti(()=>t.config,c,{deep:!0}),r({getStage:u,getNode:l}),()=>Al("div",{ref:a,style:e?.style},i.default?.())}}),Gd=".vue-konva-event",Ud={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function Ut(t,e){return ol({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:r,slots:n,expose:s}){const a=ks();if(!a)return;const o=Me({}),l=new e;a.__konvaNode=l,a.vnode.__konvaNode=l,_();function u(){return a?.__konvaNode}function c(){return a?.__konvaNode}function _(){if(!a)return;const d={};for(const S in a?.vnode.props)S.slice(0,2)==="on"&&(d[S]=a.vnode.props[S]);const g=o||{},y={...r,...i.config,...d};Ul(a,y,g,i.__useStrictMode),Object.assign(o,y)}Sr(()=>{const d=Od(a)?.__konvaNode;d&&"add"in d&&d.add(l),cr(l)}),Fs(()=>{cr(l),l.destroy(),l.off(Gd)}),Es(()=>{_(),Hl(a.subTree,l)}),ti(()=>i.config,_,{deep:!0}),s({getStage:c,getNode:u});const p=Ud.hasOwnProperty(t);return()=>p?Al("template",{},n.default?.()):null}})}const Vt=ei.default||ei,Bd=Ut("Arc",Vt.Arc),Hd=Ut("Arrow",Vt.Arrow),Vd=Ut("Circle",Vt.Circle),Wd=Ut("Ellipse",Vt.Ellipse),qd=Ut("FastLayer",Vt.FastLayer),zd=Ut("Group",Vt.Group),Yd=Ut("Image",Vt.Image),jd=Ut("Label",Vt.Label),Xd=Ut("Layer",Vt.Layer),Kd=Ut("Line",Vt.Line),$d=Ut("Path",Vt.Path),Jd=Ut("Rect",Vt.Rect),Qd=Ut("RegularPolygon",Vt.RegularPolygon),Zd=Ut("Ring",Vt.Ring),tf=Ut("Shape",Vt.Shape),ef=Ut("Sprite",Vt.Sprite),nf=Ut("Star",Vt.Star),rf=Ut("Tag",Vt.Tag),sf=Ut("Text",Vt.Text),of=Ut("TextPath",Vt.TextPath),af=Ut("Transformer",Vt.Transformer),lf=Ut("Wedge",Vt.Wedge),hf=Object.freeze(Object.defineProperty({__proto__:null,Arc:Bd,Arrow:Hd,Circle:Vd,Ellipse:Wd,FastLayer:qd,Group:zd,Image:Yd,Label:jd,Layer:Xd,Line:Kd,Path:$d,Rect:Jd,RegularPolygon:Qd,Ring:Zd,Shape:tf,Sprite:ef,Star:nf,Tag:rf,Text:sf,TextPath:of,Transformer:af,Wedge:lf},Symbol.toStringTag,{value:"Module"})),cf={install:(t,e)=>{const i=e?.prefix||Id,r=e?.customNodes?Object.entries(e.customNodes).map(([n,s])=>Ut(n,s)):[];[Dd,...Object.values(hf),...r].forEach(n=>{t.component(`${i}${n.name}`,n)})}};function te(t,e,i){return Math.min(i,Math.max(e,t))}function Ct(t,e=0){const i=Number(t);return Number.isFinite(i)?i:e}const Qe=20,uf=360;function df(t){const e=t.x+t.scaleX*t.width,i=t.y+t.scaleY*t.height;return{minX:Math.min(t.x,e),minY:Math.min(t.y,i),maxX:Math.max(t.x,e),maxY:Math.max(t.y,i)}}function Vl(t=[]){if(!Array.isArray(t)||t.length===0)return null;let e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t){const a=df(s);e=Math.min(e,a.minX),i=Math.min(i,a.minY),r=Math.max(r,a.maxX),n=Math.max(n,a.maxY)}return{minX:e,minY:i,maxX:r,maxY:n}}function ff(t,e=0){if(!Array.isArray(t)||t.length===0)return{x:36,y:36};const i=Vl(t);if(!i)return{x:36,y:36};const r=Math.round(i.maxX+48),n=Math.round(i.minY);if(Number.isFinite(e)&&e>0){const s=Math.max(220,Math.round(e-220));if(r>s)return{x:36,y:Math.round(i.maxY+48)}}return{x:r,y:n}}function gf({createId:t,image:e,label:i="Image",src:r,position:n}){const s=e.naturalWidth||e.width||1,a=e.naturalHeight||e.height||1,o=Math.min(1,uf/s),l=Math.max(Qe,Math.round(s*o)),u=Math.max(Qe,Math.round(a*o));return{kind:"image",id:t("img"),label:i,src:r,image:e,x:Math.round(Ct(n?.x,36)),y:Math.round(Ct(n?.y,36)),width:l,height:u,rotation:0,scaleX:1,scaleY:1,brightness:0,contrast:0,saturation:0,hue:0,lines:[],history:[],historyIndex:-1,isRestoringHistory:!1}}function pf({createId:t}){return{kind:"text",id:t("txt"),text:"Demo text",x:48,y:48,width:240,height:84,rotation:0,scaleX:1,scaleY:1,fontSize:30,fontFamily:"Georgia",fill:"#0f172a"}}function mf({createId:t,source:e,cloneLineList:i}){return{kind:"image",id:t("img"),label:e.label,src:e.src,image:e.image,x:e.x+24,y:e.y+24,width:e.width,height:e.height,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY,brightness:e.brightness,contrast:e.contrast,saturation:e.saturation,hue:e.hue,lines:i(e.lines),history:[],historyIndex:-1,isRestoringHistory:!1}}function _f({rawBlock:t,createId:e,image:i,cloneLineList:r}){return{kind:"image",id:t.id||e("img"),label:t.label||"Image",src:t.src,image:i,x:Ct(t.x),y:Ct(t.y),width:Math.max(Qe,Math.round(Ct(t.width,i.naturalWidth||i.width))),height:Math.max(Qe,Math.round(Ct(t.height,i.naturalHeight||i.height))),rotation:Ct(t.rotation),scaleX:Ct(t.scaleX,1)||1,scaleY:Ct(t.scaleY,1)||1,brightness:Ct(t.brightness),contrast:Ct(t.contrast),saturation:Ct(t.saturation),hue:Ct(t.hue),lines:r(t.lines),history:[],historyIndex:-1,isRestoringHistory:!1}}function yf({rawBlock:t,createId:e}){return{kind:"text",id:t.id||e("txt"),text:t.text||"Demo text",x:Ct(t.x),y:Ct(t.y),width:Math.max(80,Math.round(Ct(t.width,240))),height:Math.max(40,Math.round(Ct(t.height,80))),rotation:Ct(t.rotation),scaleX:Ct(t.scaleX,1)||1,scaleY:Ct(t.scaleY,1)||1,fontSize:Math.max(10,Math.round(Ct(t.fontSize,30))),fontFamily:t.fontFamily||"Georgia",fill:t.fill||"#0f172a"}}function vf(t,{blockGroupName:e,isDraggable:i}){return{id:t.id,name:e,x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation,scaleX:t.scaleX,scaleY:t.scaleY,draggable:i}}function bf(t){return{clip:{x:0,y:0,width:t.width,height:t.height},listening:!1}}function Sf(t,{isSelected:e,canInteractByFrame:i}){let r="#67e8f9",n=2.5,s="rgba(103, 232, 249, 0.08)",a=[8,5],o="rgba(34, 211, 238, 0.35)",l=6;return e&&(r="#22c55e",n=4,s="rgba(34, 197, 94, 0.14)",a=[],o="rgba(34, 197, 94, 0.45)",l=12),{x:0,y:0,width:t.width,height:t.height,fill:s,stroke:r,strokeWidth:n,dash:a,shadowColor:o,shadowBlur:l,shadowOpacity:.9,hitStrokeWidth:14,strokeScaleEnabled:!1,listening:i}}function Cf(t,{isDraggable:e,imageFilters:i,filtersEnabled:r}){return{id:`${t.id}-image`,x:0,y:0,image:t.image,width:t.width,height:t.height,draggable:e,listening:!0,filters:r?i:[],brightness:t.brightness,contrast:t.contrast,saturation:t.saturation,hue:t.hue}}function xf(t,{isDraggable:e}){return{id:t.id,x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation,scaleX:t.scaleX,scaleY:t.scaleY,draggable:e,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fill:t.fill,align:"left",verticalAlign:"top"}}function wf(t){return{id:t.id,points:t.points,stroke:t.color,strokeWidth:t.size,tension:.25,lineCap:"round",lineJoin:"round",listening:!1,globalCompositeOperation:t.tool==="erase"?"destination-out":"source-over"}}function Ma(t,e){return{x:te(Ct(t?.x),0,e.width),y:te(Ct(t?.y),0,e.height)}}function Pf(t,e){const i=e.scaleX(),r=e.scaleY(),n=Math.abs(i),s=Math.abs(r),a=i<0?-1:1,o=r<0?-1:1;t.x=e.x(),t.y=e.y(),t.rotation=e.rotation(),t.kind==="image"?(t.width=Math.max(Qe,Math.round(t.width*n)),t.height=Math.max(Qe,Math.round(t.height*s)),t.lines.length>0&&(t.lines=t.lines.map(l=>({...l,points:l.points.map((u,c)=>c%2===0?u*n:u*s)})))):(t.width=Math.max(Qe,Math.round(e.width()*n)),t.height=Math.max(Qe,Math.round(e.height()*s))),t.scaleX=a,t.scaleY=o,e.scaleX(a),e.scaleY(o),t.kind==="text"&&(t.fontSize=Math.max(10,Math.round(t.fontSize*s)))}function Tf(t,e){if(e==="x"){const r=t.scaleX<0?-1:1;t.x+=r*t.width,t.scaleX*=-1;return}const i=t.scaleY<0?-1:1;t.y+=i*t.height,t.scaleY*=-1}function Rf({createId:t,toNumber:e}){function i(l){return Array.isArray(l)?[...l]:[]}function r(l){return{id:l?.id||t("line"),tool:l?.tool==="erase"?"erase":"pen",color:l?.color||"#0f766e",size:Math.max(1,Math.round(e(l?.size,10))),points:i(l?.points)}}function n(l){return Array.isArray(l)?l.map(u=>r(u)):[]}function s(l){return{label:l.label,src:l.src,x:l.x,y:l.y,width:l.width,height:l.height,rotation:l.rotation,scaleX:l.scaleX,scaleY:l.scaleY,brightness:l.brightness,contrast:l.contrast,saturation:l.saturation,hue:l.hue,lines:n(l.lines)}}function a(l,u,c){l.label=u.label||"Image",l.src=u.src,l.image=c,l.x=e(u.x),l.y=e(u.y),l.width=Math.max(20,Math.round(e(u.width,l.width))),l.height=Math.max(20,Math.round(e(u.height,l.height))),l.rotation=e(u.rotation),l.scaleX=e(u.scaleX,1)||1,l.scaleY=e(u.scaleY,1)||1,l.brightness=e(u.brightness),l.contrast=e(u.contrast),l.saturation=e(u.saturation),l.hue=e(u.hue),l.lines=n(u.lines)}function o(l){return l.kind==="image"?{kind:"image",id:l.id,label:l.label,src:l.src,x:l.x,y:l.y,width:l.width,height:l.height,rotation:l.rotation,scaleX:l.scaleX,scaleY:l.scaleY,brightness:l.brightness,contrast:l.contrast,saturation:l.saturation,hue:l.hue,lines:n(l.lines)}:{kind:"text",id:l.id,text:l.text,x:l.x,y:l.y,width:l.width,height:l.height,rotation:l.rotation,scaleX:l.scaleX,scaleY:l.scaleY,fontSize:l.fontSize,fontFamily:l.fontFamily,fill:l.fill}}return{clonePoints:i,normalizeLine:r,cloneLineList:n,snapshotImageBlockState:s,hydrateImageBlockState:a,serializeBlock:o}}function Mf(){const t=document.createElement("canvas");t.width=1024,t.height=640;const e=t.getContext("2d");if(!e)return"";const i=e.createLinearGradient(0,0,t.width,t.height);return i.addColorStop(0,"#0f172a"),i.addColorStop(1,"#155e75"),e.fillStyle=i,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgba(255, 255, 255, 0.08)",e.beginPath(),e.arc(220,180,130,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(780,360,210,0,Math.PI*2),e.fill(),e.fillStyle="#f8fafc",e.font="700 58px Georgia",e.fillText("Sample Product",72,120),e.fillStyle="#bae6fd",e.font="400 30px Georgia",e.fillText("Upload your files and replace this image",72,180),e.fillStyle="#14b8a6",e.fillRect(72,240,360,220),e.fillStyle="#0f172a",e.font="700 34px Georgia",e.fillText("DEMO BLOCK",102,360),e.strokeStyle="#67e8f9",e.lineWidth=4,e.strokeRect(56,56,t.width-112,t.height-112),t.toDataURL("image/png")}function Ea(){const t=document.createElement("canvas");t.width=860,t.height=520;const e=t.getContext("2d");if(!e)return"";const i=e.createLinearGradient(0,0,t.width,t.height);return i.addColorStop(0,"#0f172a"),i.addColorStop(1,"#155e75"),e.fillStyle=i,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgba(255, 255, 255, 0.08)",e.beginPath(),e.arc(660,300,170,0,Math.PI*2),e.fill(),e.strokeStyle="#67e8f9",e.lineWidth=4,e.strokeRect(42,42,t.width-84,t.height-84),e.fillStyle="#f8fafc",e.font="700 56px Georgia",e.fillText("New Block",86,140),e.fillStyle="#bae6fd",e.font="400 30px Georgia",e.fillText("Replace with your image or edit this block",86,194),t.toDataURL("image/png")}function Ef(t){return t==="image/jpeg"?"jpg":t==="image/webp"?"webp":"png"}function Af(t,e){const i=document.createElement("a");i.href=t,i.download=e,i.click()}function Ff(t,e){const i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=e,r.click(),URL.revokeObjectURL(i)}function If(){const i=[ei.Filters.Brighten,ei.Filters.Contrast,ei.Filters.HSL],r=.35,n=3.5,s=1.08,a=20,o="image-block-group",l=1200,u=jt(null),c=jt(null),_=jt(null),p=jt(null),d=jt(null),g=jt(null),y=jt(null),S=Me({width:960,height:620}),C=Me({x:0,y:0,scale:1}),f=jt(!1),h=jt([]),m=jt(""),b=jt("select"),R=jt(!1),G=jt(""),x=jt("#0f766e"),w=jt(10),T=jt(22),k=Me({brightness:0,contrast:0,saturation:0,hue:0}),B=Me({format:"image/png",quality:.92,pixelRatio:1,width:960,height:620}),M=Me({visible:!1,mode:"upload",preserveBlockSize:!1,targetId:"",queue:[],sourceName:"",sourceSrc:"",sourceWidth:0,sourceHeight:0,cropX:0,cropY:0,cropWidth:0,cropHeight:0,outputWidth:0,outputHeight:0,rotation:0}),W=jt(null),H=jt(""),tt=new Map,v=new Map;let P=0,O=null;const A=oe(()=>h.value.find(E=>E.id===m.value)||null),I=oe(()=>!A.value||A.value.kind!=="image"?null:A.value),j=oe(()=>!A.value||A.value.kind!=="text"?null:A.value),V=oe(()=>h.value.filter(E=>E.kind==="image")),it=oe(()=>h.value.filter(E=>E.kind==="text")),ht=oe(()=>h.value.length),K=oe(()=>A.value?A.value.kind:"none"),N=oe(()=>f.value?"pan":b.value),Y=oe(()=>{if(!I.value)return"0/0";const E=Array.isArray(I.value.history)?I.value.history:[],J=Number.isFinite(I.value.historyIndex)?I.value.historyIndex:-1;return`${J>=0?J+1:0}/${E.length}`}),st=oe(()=>`${Math.round(C.scale*100)}%`),ct=oe(()=>I.value?(Number.isFinite(I.value.historyIndex)?I.value.historyIndex:-1)>0:!1),gt=oe(()=>{if(!I.value)return!1;const E=Array.isArray(I.value.history)?I.value.history:[],J=Number.isFinite(I.value.historyIndex)?I.value.historyIndex:-1;return J>=0&&J<E.length-1}),F=oe(()=>({width:S.width,height:S.height,x:C.x,y:C.y,scaleX:C.scale,scaleY:C.scale,draggable:f.value})),L=oe(()=>({x:0,y:0,width:S.width,height:S.height,listening:!1,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:S.width,y:S.height},fillLinearGradientColorStops:[0,"#020617",.5,"#0b1221",1,"#111827"]})),z={rotateEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-right","bottom-right","bottom-center","bottom-left","middle-left"],boundBoxFunc(E,J){return Math.abs(J.width)<20||Math.abs(J.height)<20?E:J}};function $(E){return P+=1,`${E}-${Date.now()}-${P}`}function Q(E){H.value=E,O&&window.clearTimeout(O),O=window.setTimeout(()=>{H.value=""},4200)}function Z(){return u.value?.getNode?.()||null}function rt(){if(!_.value)return;const E=Math.max(340,Math.floor(_.value.clientWidth-a)),J=Math.max(320,Math.floor(window.innerHeight*.72)),at=Math.round(E*.62),dt=te(at,320,J);S.width=E,S.height=dt}function ot(){B.width=S.width,B.height=S.height}function nt(E,J){const at=C.scale,dt=E>0?at*s:at/s,_t=te(dt,r,n);if(Math.abs(_t-at)<1e-6)return;const bt=J||{x:S.width/2,y:S.height/2},Lt={x:(bt.x-C.x)/at,y:(bt.y-C.y)/at};C.scale=_t,C.x=bt.x-Lt.x*_t,C.y=bt.y-Lt.y*_t}function et(){nt(1)}function ut(){nt(-1)}function lt(){C.x=0,C.y=0,C.scale=1}function ft(E){E.evt.preventDefault();const at=Z()?.getPointerPosition();if(!at)return;let dt=E.evt.deltaY>0?-1:1;E.evt.ctrlKey&&(dt=-dt),nt(dt,at)}function pt(E){const J=Z();!J||E.target!==J||(C.x=E.target.x(),C.y=E.target.y())}function mt(E){E&&Ei(),f.value=!!E,f.value&&(m.value="",Wt(Mt))}function wt(){mt(!f.value)}function vt(){if(!A.value)return;const E=A.value;E.x=Math.max(0,Math.round((S.width-E.width)/2)),E.y=Math.max(0,Math.round((S.height-E.height)/2)),E.rotation=0,E.scaleX=1,E.scaleY=1,E.kind==="image"&&(E.brightness=0,E.contrast=0,E.saturation=0,E.hue=0,Or(),Wt(()=>we(E.id))),le(E),Wt(Mt)}function It(E,J=56){if(!E)return;const at=Math.max(1,E.maxX-E.minX),dt=Math.max(1,E.maxY-E.minY),_t=at+J*2,bt=dt+J*2,Lt=S.width/_t,Oe=S.height/bt,Ye=te(Math.min(Lt,Oe),r,1),Ne=(E.minX+E.maxX)/2,mi=(E.minY+E.maxY)/2;C.scale=Ye,C.x=S.width/2-Ne*Ye,C.y=S.height/2-mi*Ye}function xt(){const E=Vl(h.value);It(E)}function Et(){if(!A.value)return;const E=A.value,J=E.x+E.scaleX*(E.width/2),at=E.y+E.scaleY*(E.height/2);C.x=S.width/2-J*C.scale,C.y=S.height/2-at*C.scale}function Mt(){const E=c.value?.getNode?.(),J=Z();if(!E||!J)return;if(b.value!=="select"||f.value||!m.value){E.nodes([]),E.getLayer()?.batchDraw();return}const at=J.findOne(`#${m.value}`);at?E.nodes([at]):E.nodes([]),E.getLayer()?.batchDraw()}function fe(E){b.value!==E&&Ei(),b.value=E,(f.value||E!=="select")&&mt(!1),E!=="select"&&(m.value=""),Wt(Mt)}function ye(E){b.value!=="select"||f.value||(m.value=E,Wt(Mt))}const{cloneLineList:Bt,snapshotImageBlockState:$t,hydrateImageBlockState:ni,serializeBlock:ri}=Rf({createId:$,toNumber:Ct});function ze(E){return E&&h.value.find(J=>J.id===E&&J.kind==="image")||null}function le(E=I.value){if(!E||E.kind!=="image"||E.isRestoringHistory)return;Array.isArray(E.history)||(E.history=[]),Number.isFinite(E.historyIndex)||(E.historyIndex=E.history.length-1);const J=$t(E),at=E.history.slice(0,E.historyIndex+1);for(at.push(J);at.length>6;)at.shift();E.history=at,E.historyIndex=at.length-1}function Zt(){return{blocks:h.value.map(E=>ri(E)),lines:[]}}async function Ie(E){if(tt.has(E))return tt.get(E);const J=await new Promise((at,dt)=>{const _t=new window.Image;_t.onload=()=>at(_t),_t.onerror=()=>dt(new Error("Image loading failed")),_t.src=E});return tt.set(E,J),J}async function Gn(E){if(E.kind==="image"){const J=Ea(),at=typeof E.src=="string"&&E.src?E.src:J;if(!at)throw new Error("Image source is missing");const dt=await Ie(at);return _f({rawBlock:{...E,src:at},createId:$,image:dt,cloneLineList:Bt})}return yf({rawBlock:E,createId:$})}async function Un(E){if(!E||!Array.isArray(E.blocks))throw new Error("Invalid snapshot format");const J=[];for(const dt of E.blocks)J.push(await Gn(dt));const at=Array.isArray(E.lines)?Bt(E.lines):[];if(at.length>0){const dt=J.find(_t=>_t.kind==="image");dt&&dt.lines.length===0&&(dt.lines=at)}h.value=J,m.value="",G.value="",await Wt();for(const dt of h.value)dt.kind==="image"&&(we(dt.id),dt.history=[],dt.historyIndex=-1,dt.isRestoringHistory=!1,le(dt));Mt()}async function Mi(E){const J=I.value;if(!J)return;const at=Array.isArray(J.history)?J.history:[];if(E<0||E>=at.length)return;const dt=at[E];if(dt)try{J.isRestoringHistory=!0;const _t=await Ie(dt.src);ni(J,dt,_t),await Wt(),we(J.id),J.historyIndex=E,Mt()}catch(_t){Q(`History restore failed: ${_t.message}`)}finally{J.isRestoringHistory=!1}}async function Bn(){if(!ct.value)return;const E=Number.isFinite(I.value?.historyIndex)?I.value.historyIndex:-1;await Mi(E-1)}async function Hn(){if(!gt.value)return;const E=Number.isFinite(I.value?.historyIndex)?I.value.historyIndex:-1;await Mi(E+1)}function Rr(E){return!E||E.kind!=="image"?!1:Math.abs(E.brightness)>1e-4||Math.abs(E.contrast)>1e-4||Math.abs(E.saturation)>1e-4||Math.abs(E.hue)>1e-4}function D(E){const J=Math.max(1,Math.round(Math.max(E.width,E.height)));return te(l/J,.35,1)}function Vn(E){if(!E||v.has(E))return;const J=window.requestAnimationFrame(()=>{v.delete(E),we(E)});v.set(E,J)}function we(E){const J=Z();if(!J)return;const at=J.findOne(`#${E}-image`);if(!at)return;const dt=ze(E);if(!dt)return;const _t=Rr(dt);try{const bt=typeof at.isCached=="function"?at.isCached():!0;if(!_t){bt&&at.clearCache(),at.getLayer()?.batchDraw();return}at.clearCache(),at.cache({pixelRatio:D(dt)}),at.getLayer()?.batchDraw()}catch{at.getLayer()?.batchDraw()}}function Mr(E){return vf(E,{blockGroupName:o,isDraggable:b.value==="select"&&!f.value})}function Wn(E){return bf(E)}function Er(E){return Sf(E,{isSelected:m.value===E.id,canInteractByFrame:b.value==="select"&&!f.value})}function Ar(E){return Cf(E,{isDraggable:!1,imageFilters:i,filtersEnabled:Rr(E)})}function Fr(E){return xf(E,{isDraggable:b.value==="select"&&!f.value})}function Ir(E){return wf(E)}function q(E){const J=E?.findAncestor?.(`.${o}`,!0);return J?ze(J.id()):null}function Jt(E){const J=Z();return!J||!E?null:J.findOne(`#${E}`)}function Ei(){if(!R.value)return;const E=ze(G.value);R.value=!1,G.value="",E&&le(E)}function pi(){Ei()}function Wl(E){const J=E.target.getStage();if(J&&!f.value){if(b.value==="pen"||b.value==="erase"){const at=q(E.target);if(!at)return;const _t=Jt(at.id)?.getRelativePointerPosition?.();if(!_t)return;const bt=Ma(_t,at);R.value=!0,G.value=at.id,m.value=at.id;const Lt=b.value==="erase"?T.value:w.value,Oe=b.value==="erase"?"#000000":x.value;at.lines.push({id:$("line"),tool:b.value,color:Oe,size:Lt,points:[bt.x,bt.y]});return}E.target===J&&(m.value="",Wt(Mt))}}function ql(E){if(f.value||!R.value)return;const J=ze(G.value);if(!J){Ei();return}const dt=Jt(J.id)?.getRelativePointerPosition?.();if(!dt||J.lines.length===0)return;const _t=Ma(dt,J),bt=J.lines.length-1,Lt=J.lines[bt],Oe=[...Lt.points,_t.x,_t.y];J.lines.splice(bt,1,{...Lt,points:Oe})}function zl(){f.value||Ei()}function Yl(E,J){J?.target?.id?.()===E.id&&(E.x=J.target.x(),E.y=J.target.y(),le(E))}function jl(E,J){const at=J.target;Pf(E,at),E.kind==="image"&&Wt(()=>we(E.id)),le(E)}function Or(){if(!I.value){k.brightness=0,k.contrast=0,k.saturation=0,k.hue=0;return}k.brightness=I.value.brightness,k.contrast=I.value.contrast,k.saturation=I.value.saturation,k.hue=I.value.hue}function Xl(E,J){if(!I.value)return;const at=Ct(J);k[E]=at,I.value[E]=at,Vn(I.value.id)}function Kl(){I.value&&le(I.value)}function $l(E){if(!I.value)return;const J=I.value;Tf(J,E),le(J),Wt(Mt)}function Jl(E){A.value&&(A.value.rotation+=E,A.value.kind==="image"&&le(A.value),Wt(Mt))}function Ql(){const E=pf({createId:$});h.value.push(E),m.value=E.id,Wt(Mt)}function Zl(){if(!I.value)return;const E=I.value,J=mf({createId:$,source:E,cloneLineList:Bt});h.value.push(J),m.value=J.id,le(J),Wt(()=>{we(J.id),Mt()})}function th(){A.value&&(G.value===A.value.id&&(R.value=!1,G.value=""),h.value=h.value.filter(E=>E.id!==A.value.id),m.value="",Wt(Mt))}function eh(E){j.value&&(j.value.text=E)}function ih(E){j.value&&(j.value.fill=E)}function nh(E){j.value&&(j.value.fontSize=Math.max(10,Math.round(Ct(E,24))))}function rh(){j.value}function sh(){p.value?.click()}function oh(){if(!I.value){Q("Select an image block first.");return}d.value?.click()}async function ah(){try{const E=Ea();if(!E){Q("New block generation failed.");return}await Nr(E,"new-block.png",{layout:"after-image-blocks"}),xt()}catch(E){Q(`Add block failed: ${E.message}`)}}async function Bs(){try{const E=Mf();if(!E){Q("Sample image generation failed.");return}await Nr(E,"sample-demo.png",{layout:"after-image-blocks"})}catch(E){Q(`Sample add failed: ${E.message}`)}}function lh(){g.value?.click()}function Hs(E){return new Promise((J,at)=>{const dt=new window.FileReader;dt.onload=()=>J(String(dt.result||"")),dt.onerror=()=>at(new Error(`Could not read file: ${E.name}`)),dt.readAsDataURL(E)})}async function hh(E){const J=E.target,at=Array.from(J.files||[]);if(J.value="",at.length===0)return;const dt=at.filter(_t=>_t.type.startsWith("image/"));if(dt.length===0){Q("No supported image files selected.");return}try{for(const _t of dt){const bt=await Hs(_t);M.queue.push({name:_t.name,src:bt})}M.visible||await Vs()}catch(_t){Q(_t.message)}}async function ch(E){const J=E.target.files?.[0];if(E.target.value="",!!J){if(!I.value){Q("Select an image block first.");return}if(!J.type.startsWith("image/")){Q("Only image files are supported.");return}try{const at=await Hs(J);M.queue=[],await kr(at,J.name,"edit",I.value.id,{preserveBlockSize:!0})}catch(at){Q(at.message)}}}async function Nr(E,J="Image",at={}){const dt=await Ie(E),_t=at.position||(at.layout==="after-image-blocks"?ff(V.value,S.width):{x:36+h.value.length%6*16,y:36+h.value.length%6*16}),bt=gf({createId:$,image:dt,label:J,src:E,position:_t});return h.value.push(bt),m.value=bt.id,await Wt(),we(bt.id),Or(),le(bt),Mt(),bt}async function kr(E,J,at="upload",dt="",_t={}){M.mode=at,M.preserveBlockSize=!!_t.preserveBlockSize,M.targetId=dt,M.sourceSrc=E,M.sourceName=J||"image",M.visible=!0;const bt=await Ie(E);if(W.value=bt,M.sourceWidth=bt.naturalWidth||bt.width,M.sourceHeight=bt.naturalHeight||bt.height,M.cropX=0,M.cropY=0,M.cropWidth=M.sourceWidth,M.cropHeight=M.sourceHeight,M.outputWidth=M.sourceWidth,M.outputHeight=M.sourceHeight,M.preserveBlockSize){const Lt=ze(dt);Lt&&(M.outputWidth=te(Math.round(Ct(Lt.width,M.outputWidth)),1,4096),M.outputHeight=te(Math.round(Ct(Lt.height,M.outputHeight)),1,4096))}M.rotation=0,await Wt(),qn()}async function Vs(){const E=M.queue.shift();if(!E){Ai(!0);return}await kr(E.src,E.name,"upload","",{preserveBlockSize:!1})}async function uh(){I.value&&(M.queue=[],await kr(I.value.src,I.value.label,"edit",I.value.id,{preserveBlockSize:!1}))}function Ws(){if(!W.value)return;const E=Math.max(1,Math.round(Ct(M.sourceWidth,1))),J=Math.max(1,Math.round(Ct(M.sourceHeight,1)));M.cropX=te(Math.round(Ct(M.cropX)),0,Math.max(0,E-1)),M.cropY=te(Math.round(Ct(M.cropY)),0,Math.max(0,J-1)),M.cropWidth=te(Math.round(Ct(M.cropWidth,E)),1,Math.max(1,E-M.cropX)),M.cropHeight=te(Math.round(Ct(M.cropHeight,J)),1,Math.max(1,J-M.cropY)),M.outputWidth=te(Math.round(Ct(M.outputWidth,M.cropWidth)),1,4096),M.outputHeight=te(Math.round(Ct(M.outputHeight,M.cropHeight)),1,4096),M.rotation=te(Ct(M.rotation),-180,180)}function dh(){W.value&&(M.cropX=0,M.cropY=0,M.cropWidth=M.sourceWidth,M.cropHeight=M.sourceHeight,M.outputWidth=M.sourceWidth,M.outputHeight=M.sourceHeight,M.rotation=0,qn())}function fh(){if(!W.value)return;const E=Math.min(M.sourceWidth,M.sourceHeight);M.cropX=Math.floor((M.sourceWidth-E)/2),M.cropY=Math.floor((M.sourceHeight-E)/2),M.cropWidth=E,M.cropHeight=E,M.outputWidth=E,M.outputHeight=E,qn()}function qn(){const E=y.value;if(!E||!W.value)return;Ws();const J=M.outputWidth/M.outputHeight,at=420;let dt=at,_t=at;J>=1?_t=Math.max(80,Math.round(at/J)):dt=Math.max(80,Math.round(at*J)),E.width=dt,E.height=_t;const bt=E.getContext("2d");bt&&(bt.clearRect(0,0,dt,_t),bt.fillStyle="#0f172a",bt.fillRect(0,0,dt,_t),bt.save(),bt.translate(dt/2,_t/2),bt.rotate(M.rotation*Math.PI/180),bt.drawImage(W.value,M.cropX,M.cropY,M.cropWidth,M.cropHeight,-dt/2,-_t/2,dt,_t),bt.restore())}function gh(){Ws();const E=document.createElement("canvas");E.width=M.outputWidth,E.height=M.outputHeight;const J=E.getContext("2d");if(!J||!W.value)throw new Error("Cropper canvas is unavailable");return J.clearRect(0,0,E.width,E.height),J.save(),J.translate(E.width/2,E.height/2),J.rotate(M.rotation*Math.PI/180),J.drawImage(W.value,M.cropX,M.cropY,M.cropWidth,M.cropHeight,-E.width/2,-E.height/2,E.width,E.height),J.restore(),E.toDataURL("image/png",1)}function Ai(E=!1){M.visible=!1,M.mode="upload",M.preserveBlockSize=!1,M.targetId="",M.sourceName="",M.sourceSrc="",M.sourceWidth=0,M.sourceHeight=0,M.cropX=0,M.cropY=0,M.cropWidth=0,M.cropHeight=0,M.outputWidth=0,M.outputHeight=0,M.rotation=0,W.value=null,E&&(M.queue=[])}async function ph(){if(W.value)try{const E=gh();if(M.mode==="upload"){const Lt=M.sourceName||"Image";if(await Nr(E,Lt,{layout:"after-image-blocks"}),M.queue.length>0){await Vs();return}Ai(!0);return}const J=h.value.find(Lt=>Lt.id===M.targetId&&Lt.kind==="image");if(!J){Ai(!0);return}const at=await Ie(E),dt=Math.max(1,J.width),_t=Math.max(1,J.height),bt=M.preserveBlockSize;if(J.src=E,J.image=at,!bt&&(J.width=M.outputWidth,J.height=M.outputHeight,J.lines.length>0)){const Lt=J.width/dt,Oe=J.height/_t;J.lines=J.lines.map(Ye=>({...Ye,points:Ye.points.map((Ne,mi)=>mi%2===0?Ne*Lt:Ne*Oe)}))}await Wt(),we(J.id),le(J),Ai(!0)}catch(E){Q(`Crop failed: ${E.message}`)}}async function mh(){if(!window.EyeDropper){Q("EyeDropper API is not available in this browser.");return}try{const J=await new window.EyeDropper().open();x.value=J.sRGBHex,j.value&&(j.value.fill=J.sRGBHex)}catch{Q("Color picking cancelled.")}}async function _h(){const E=Z();if(E)try{const J=B.format,at=te(Ct(B.quality,.92),.1,1),dt=Math.max(1,Ct(B.pixelRatio,1));let _t=E.toDataURL({mimeType:J,quality:at,pixelRatio:dt});const bt=Math.max(1,Math.round(Ct(B.width,S.width))),Lt=Math.max(1,Math.round(Ct(B.height,S.height)));if(bt!==Math.round(S.width*dt)||Lt!==Math.round(S.height*dt)){const Ye=await Ie(_t),Ne=document.createElement("canvas");Ne.width=bt,Ne.height=Lt;const mi=Ne.getContext("2d");mi&&(mi.drawImage(Ye,0,0,bt,Lt),_t=Ne.toDataURL(J,at))}const Oe=Ef(J);Af(_t,`konva-editor-export-${Date.now()}.${Oe}`)}catch(J){Q(`Export failed: ${J.message}`)}}function yh(){try{const E={version:1,generatedAt:new Date().toISOString(),snapshot:Zt()},J=new Blob([JSON.stringify(E,null,2)],{type:"application/json"});Ff(J,`konva-editor-state-${Date.now()}.json`)}catch(E){Q(`State export failed: ${E.message}`)}}async function vh(E){const J=E.target.files?.[0];if(E.target.value="",!!J)try{const at=await J.text(),dt=JSON.parse(at),_t=dt&&dt.snapshot||dt&&dt.board&&dt.board.snapshot||dt&&Array.isArray(dt.boards)&&dt.boards[0]&&dt.boards[0].snapshot||dt;await Un(_t),Q("State imported successfully.")}catch(at){Q(`State import failed: ${at.message}`)}}return ti(I,()=>{Or()}),ti(()=>m.value,()=>{Wt(Mt)}),ti(()=>b.value,()=>{Wt(Mt)}),Sr(()=>{rt(),lt(),ot(),window.addEventListener("resize",rt),window.addEventListener("mouseup",pi),window.addEventListener("touchend",pi),window.addEventListener("touchcancel",pi),Bs()}),As(()=>{window.removeEventListener("resize",rt),window.removeEventListener("mouseup",pi),window.removeEventListener("touchend",pi),window.removeEventListener("touchcancel",pi);for(const E of v.values())window.cancelAnimationFrame(E);v.clear(),O&&window.clearTimeout(O)}),{stageRef:u,transformerRef:c,canvasWrapRef:_,imageInputRef:p,replaceImageInputRef:d,importJsonInputRef:g,cropPreviewRef:y,panMode:f,tool:b,brushColor:x,brushSize:w,eraserSize:T,imageControls:k,exportOptions:B,cropper:M,notice:H,selectedBlock:A,selectedImage:I,selectedText:j,imageBlocks:V,textBlocks:it,totalBlocks:ht,selectedKindLabel:K,activeToolLabel:N,historyCounter:Y,zoomPercent:st,canUndo:ct,canRedo:gt,stageConfig:F,stageBackgroundConfig:L,transformerConfig:z,syncExportSizeWithStage:ot,zoomIn:et,zoomOut:ut,resetStageView:lt,onStageWheel:ft,onStageDragEnd:pt,togglePanMode:wt,resetSelectedBlockState:vt,focusSelectedBlock:Et,setTool:fe,selectBlock:ye,undo:Bn,redo:Hn,getImageBlockGroupConfig:Mr,getImageLineClipConfig:Wn,getImageFrameConfig:Er,getImageNodeConfig:Ar,getTextNodeConfig:Fr,getLineNodeConfig:Ir,onStageMouseDown:Wl,onStageMouseMove:ql,onStageMouseUp:zl,onBlockDragEnd:Yl,onBlockTransformEnd:jl,onImageControlInput:Xl,commitImageControlChange:Kl,flipSelectedImage:$l,rotateSelectedBy:Jl,addTextBlock:Ql,duplicateSelectedBlock:Zl,removeSelectedBlock:th,updateTextContent:eh,updateTextColor:ih,updateTextSize:nh,commitTextChange:rh,triggerImagePicker:sh,triggerReplaceImagePicker:oh,addDefaultBlock:ah,addSampleImageBlock:Bs,triggerImportStatePicker:lh,onImageInputChange:hh,onReplaceImageInputChange:ch,openCropperForSelectedImage:uh,setCropFullImage:dh,setCropSquareCenter:fh,renderCropPreview:qn,closeCropper:Ai,applyCropper:ph,pickColorWithEyedropper:mh,exportImage:_h,exportStateJson:yh,onImportStateChange:vh}}const Of=(t,e)=>{const i=t.__vccOpts||t;for(const[r,n]of e)i[r]=n;return i},Nf={class:"app-shell"},kf={class:"topbar"},Lf={class:"title-wrap"},Df={class:"status-row"},Gf={class:"status-pill"},Uf={class:"status-pill"},Bf={class:"status-pill"},Hf={class:"status-pill"},Vf={class:"status-pill"},Wf={class:"status-pill"},qf={class:"status-pill"},zf={class:"status-pill"},Yf={class:"top-actions"},jf=["disabled"],Xf=["disabled"],Kf=["disabled"],$f=["disabled"],Jf={class:"workspace"},Qf={class:"panel"},Zf={class:"field-grid"},t0={class:"tool-row"},e0={class:"tool-row"},i0={class:"preview-card"},n0={class:"stage-shell"},r0={class:"card-controls"},s0={class:"tool-row card-tool-row"},o0={class:"card-grid"},a0={key:0,class:"card-section"},l0={class:"field-grid"},h0={key:1,class:"card-section"},c0={class:"field-grid"},u0={key:2,class:"card-section"},d0={class:"field-grid"},f0=["value"],g0=["value"],p0=["value"],m0=["value"],_0={class:"tool-row"},y0={key:3,class:"card-section"},v0={class:"field-grid"},b0=["value"],S0=["value"],C0=["value"],x0={key:4,class:"card-empty"},w0={class:"quick-dock"},P0=["disabled"],T0=["disabled"],R0=["disabled"],M0=["disabled"],E0=["disabled"],A0=["disabled"],F0={class:"cropper-modal"},I0={class:"cropper-header"},O0={class:"cropper-content"},N0={class:"crop-preview-wrap"},k0={class:"crop-fields"},L0={class:"tool-row"},D0={class:"tool-row"},G0={key:1,class:"notice"},U0={__name:"App",setup(t){const{stageRef:e,transformerRef:i,canvasWrapRef:r,imageInputRef:n,replaceImageInputRef:s,importJsonInputRef:a,cropPreviewRef:o,panMode:l,tool:u,brushColor:c,brushSize:_,eraserSize:p,imageControls:d,exportOptions:g,cropper:y,notice:S,selectedBlock:C,selectedImage:f,selectedText:h,imageBlocks:m,textBlocks:b,totalBlocks:R,selectedKindLabel:G,activeToolLabel:x,historyCounter:w,zoomPercent:T,canUndo:k,canRedo:B,stageConfig:M,stageBackgroundConfig:W,transformerConfig:H,syncExportSizeWithStage:tt,zoomIn:v,zoomOut:P,resetStageView:O,onStageWheel:A,onStageDragEnd:I,togglePanMode:j,resetSelectedBlockState:V,focusSelectedBlock:it,setTool:ht,selectBlock:K,undo:N,redo:Y,getImageBlockGroupConfig:st,getImageLineClipConfig:ct,getImageFrameConfig:gt,getImageNodeConfig:F,getTextNodeConfig:L,getLineNodeConfig:z,onStageMouseDown:$,onStageMouseMove:Q,onStageMouseUp:Z,onBlockDragEnd:rt,onBlockTransformEnd:ot,onImageControlInput:nt,commitImageControlChange:et,flipSelectedImage:ut,rotateSelectedBy:lt,addTextBlock:ft,duplicateSelectedBlock:pt,removeSelectedBlock:mt,updateTextContent:wt,updateTextColor:vt,updateTextSize:It,commitTextChange:xt,triggerImagePicker:Et,triggerReplaceImagePicker:Mt,addDefaultBlock:fe,addSampleImageBlock:ye,triggerImportStatePicker:Bt,onImageInputChange:$t,onReplaceImageInputChange:ni,openCropperForSelectedImage:ri,setCropFullImage:ze,setCropSquareCenter:le,renderCropPreview:Zt,closeCropper:Ie,applyCropper:Gn,pickColorWithEyedropper:Un,exportImage:Mi,exportStateJson:Bn,onImportStateChange:Hn}=If();return(Rr,D)=>{const Vn=je("v-rect"),we=je("v-image"),Mr=je("v-line"),Wn=je("v-group"),Er=je("v-text"),Ar=je("v-transformer"),Fr=je("v-layer"),Ir=je("v-stage");return se(),Se("div",Nf,[X("header",kf,[X("div",Lf,[D[74]||(D[74]=X("h1",null,"Konva Image Editor Demo",-1)),D[75]||(D[75]=X("p",null,"MVP: upload, crop/resize/rotate, filters, draw/erase, text, eyedropper, undo/redo(5), export.",-1)),X("div",Df,[X("span",Gf,"Tool: "+Dt(U(x)),1),X("span",Uf,"Pan: "+Dt(U(l)?"on":"off"),1),X("span",Bf,"Zoom: "+Dt(U(T)),1),X("span",Hf,"Selected: "+Dt(U(G)),1),X("span",Vf,"Images: "+Dt(U(m).length),1),X("span",Wf,"Texts: "+Dt(U(b).length),1),X("span",qf,"Blocks: "+Dt(U(R)),1),X("span",zf,"History: "+Dt(U(w)),1)])]),X("div",Yf,[X("button",{class:"btn-primary",onClick:D[0]||(D[0]=(...q)=>U(fe)&&U(fe)(...q))},"Add block"),X("button",{class:"btn-soft",onClick:D[1]||(D[1]=(...q)=>U(Et)&&U(Et)(...q))},"Upload image(s)"),X("button",{class:"btn-soft",disabled:!U(f),onClick:D[2]||(D[2]=(...q)=>U(Mt)&&U(Mt)(...q))},"Replace image",8,jf),X("button",{class:"btn-soft",onClick:D[3]||(D[3]=(...q)=>U(ye)&&U(ye)(...q))},"Add sample"),X("button",{class:"btn-soft",onClick:D[4]||(D[4]=(...q)=>U(ft)&&U(ft)(...q))},"Add text"),X("button",{class:"btn-soft",disabled:!U(f),onClick:D[5]||(D[5]=(...q)=>U(pt)&&U(pt)(...q))},"Duplicate block",8,Xf),X("button",{class:"btn-soft",onClick:D[6]||(D[6]=(...q)=>U(P)&&U(P)(...q))},"Zoom -"),X("button",{class:"btn-soft",onClick:D[7]||(D[7]=(...q)=>U(v)&&U(v)(...q))},"Zoom +"),X("button",{class:"btn-soft",disabled:!U(k),onClick:D[8]||(D[8]=(...q)=>U(N)&&U(N)(...q))},"Undo",8,Kf),X("button",{class:"btn-soft",disabled:!U(B),onClick:D[9]||(D[9]=(...q)=>U(Y)&&U(Y)(...q))},"Redo",8,$f)])]),X("div",Jf,[X("aside",Qf,[X("section",null,[D[82]||(D[82]=X("h2",null,"Export / Import",-1)),X("div",Zf,[X("label",null,[D[77]||(D[77]=Gt(" Format ",-1)),ne(X("select",{"onUpdate:modelValue":D[10]||(D[10]=q=>U(g).format=q)},[...D[76]||(D[76]=[X("option",{value:"image/png"},"PNG",-1),X("option",{value:"image/jpeg"},"JPEG",-1),X("option",{value:"image/webp"},"WebP",-1)])],512),[[ku,U(g).format]])]),X("label",null,[D[78]||(D[78]=Gt(" Quality ",-1)),ne(X("input",{"onUpdate:modelValue":D[11]||(D[11]=q=>U(g).quality=q),type:"range",min:"0.1",max:"1",step:"0.01"},null,512),[[he,U(g).quality,void 0,{number:!0}]]),X("span",null,Dt(U(g).quality.toFixed(2)),1)]),X("label",null,[D[79]||(D[79]=Gt(" Pixel ratio ",-1)),ne(X("input",{"onUpdate:modelValue":D[12]||(D[12]=q=>U(g).pixelRatio=q),type:"range",min:"1",max:"3",step:"0.1"},null,512),[[he,U(g).pixelRatio,void 0,{number:!0}]]),X("span",null,Dt(U(g).pixelRatio.toFixed(1))+"x",1)]),X("label",null,[D[80]||(D[80]=Gt(" Width ",-1)),ne(X("input",{"onUpdate:modelValue":D[13]||(D[13]=q=>U(g).width=q),type:"number",min:"1",max:"6000"},null,512),[[he,U(g).width,void 0,{number:!0}]])]),X("label",null,[D[81]||(D[81]=Gt(" Height ",-1)),ne(X("input",{"onUpdate:modelValue":D[14]||(D[14]=q=>U(g).height=q),type:"number",min:"1",max:"6000"},null,512),[[he,U(g).height,void 0,{number:!0}]])]),X("div",t0,[X("button",{onClick:D[15]||(D[15]=(...q)=>U(tt)&&U(tt)(...q))},"Use stage size"),X("button",{onClick:D[16]||(D[16]=(...q)=>U(Mi)&&U(Mi)(...q))},"Export image")]),X("div",e0,[X("button",{onClick:D[17]||(D[17]=(...q)=>U(Bn)&&U(Bn)(...q))},"Export state JSON"),X("button",{onClick:D[18]||(D[18]=(...q)=>U(Bt)&&U(Bt)(...q))},"Import state JSON")])])]),D[83]||(D[83]=X("section",null,[X("h2",null,"Workspace"),X("p",{class:"muted"},"Editing tools and selected block settings are local in the canvas card."),X("p",{class:"muted"},"Undo/redo now works per selected image block, including draw/edit actions in that block."),X("p",{class:"muted"},"Add block creates a separate image block. Replace image updates only selected block content.")],-1))]),X("div",{ref_key:"canvasWrapRef",ref:r,class:"canvas-wrap"},[X("div",i0,[D[99]||(D[99]=X("div",{class:"preview-head"},[X("h2",null,"Canvas")],-1)),X("div",n0,[zt(Ir,{ref_key:"stageRef",ref:e,config:U(M),onMousedown:U($),onMousemove:U(Q),onMouseup:U(Z),onTouchstart:U($),onTouchmove:U(Q),onTouchend:U(Z),onWheel:U(A),onDragend:U(I)},{default:Sn(()=>[zt(Fr,null,{default:Sn(()=>[zt(Vn,{config:U(W)},null,8,["config"]),(se(!0),Se(pe,null,Hr(U(m),q=>(se(),$n(Wn,{key:q.id,config:U(st)(q),onClick:Jt=>U(K)(q.id),onTap:Jt=>U(K)(q.id),onDragend:Jt=>U(rt)(q,Jt),onTransformend:Jt=>U(ot)(q,Jt)},{default:Sn(()=>[zt(we,{config:U(F)(q)},null,8,["config"]),zt(Wn,{config:U(ct)(q)},{default:Sn(()=>[(se(!0),Se(pe,null,Hr(q.lines,Jt=>(se(),$n(Mr,{key:`${q.id}-${Jt.id}`,config:U(z)(Jt)},null,8,["config"]))),128))]),_:2},1032,["config"]),zt(Vn,{config:U(gt)(q)},null,8,["config"])]),_:2},1032,["config","onClick","onTap","onDragend","onTransformend"]))),128)),(se(!0),Se(pe,null,Hr(U(b),q=>(se(),$n(Er,{key:q.id,config:U(L)(q),onClick:Jt=>U(K)(q.id),onTap:Jt=>U(K)(q.id),onDragend:Jt=>U(rt)(q,Jt),onTransformend:Jt=>U(ot)(q,Jt)},null,8,["config","onClick","onTap","onDragend","onTransformend"]))),128)),zt(Ar,{ref_key:"transformerRef",ref:i,config:U(H)},null,8,["config"])]),_:1})]),_:1},8,["config","onMousedown","onMousemove","onMouseup","onTouchstart","onTouchmove","onTouchend","onWheel","onDragend"])]),X("div",r0,[X("div",s0,[X("button",{class:ui(["quick-btn",{active:!U(l)&&U(u)==="select"}]),onClick:D[19]||(D[19]=q=>U(ht)("select"))},"Select",2),X("button",{class:ui(["quick-btn",{active:!U(l)&&U(u)==="pen"}]),onClick:D[20]||(D[20]=q=>U(ht)("pen"))},"Brush",2),X("button",{class:ui(["quick-btn",{active:!U(l)&&U(u)==="erase"}]),onClick:D[21]||(D[21]=q=>U(ht)("erase"))},"Eraser",2),X("button",{class:ui(["quick-btn",{active:U(l)}]),onClick:D[22]||(D[22]=(...q)=>U(j)&&U(j)(...q))},"Pan canvas",2)]),X("div",o0,[!U(l)&&U(u)==="pen"?(se(),Se("section",a0,[D[86]||(D[86]=X("h3",null,"Brush",-1)),X("div",l0,[X("label",null,[D[84]||(D[84]=Gt(" Brush color ",-1)),ne(X("input",{"onUpdate:modelValue":D[23]||(D[23]=q=>Xt(c)?c.value=q:null),type:"color"},null,512),[[he,U(c)]])]),X("label",null,[D[85]||(D[85]=Gt(" Brush size ",-1)),ne(X("input",{"onUpdate:modelValue":D[24]||(D[24]=q=>Xt(_)?_.value=q:null),type:"range",min:"1",max:"50",step:"1"},null,512),[[he,U(_),void 0,{number:!0}]]),X("span",null,Dt(U(_))+" px",1)]),X("button",{onClick:D[25]||(D[25]=(...q)=>U(Un)&&U(Un)(...q))},"Pick color (Eyedropper)")])])):ai("",!0),!U(l)&&U(u)==="erase"?(se(),Se("section",h0,[D[89]||(D[89]=X("h3",null,"Eraser",-1)),X("div",c0,[X("label",null,[D[87]||(D[87]=Gt(" Eraser size ",-1)),ne(X("input",{"onUpdate:modelValue":D[26]||(D[26]=q=>Xt(p)?p.value=q:null),type:"range",min:"2",max:"80",step:"1"},null,512),[[he,U(p),void 0,{number:!0}]]),X("span",null,Dt(U(p))+" px",1)]),D[88]||(D[88]=X("p",{class:"muted"},"Eraser is a separate tool with independent size settings.",-1))])])):ai("",!0),U(f)?(se(),Se("section",u0,[D[94]||(D[94]=X("h3",null,"Selected image",-1)),X("div",d0,[X("label",null,[D[90]||(D[90]=Gt(" Brightness ",-1)),X("input",{value:U(d).brightness,type:"range",min:"-1",max:"1",step:"0.01",onInput:D[27]||(D[27]=q=>U(nt)("brightness",q.target.value)),onChange:D[28]||(D[28]=(...q)=>U(et)&&U(et)(...q))},null,40,f0),X("span",null,Dt(U(d).brightness.toFixed(2)),1)]),X("label",null,[D[91]||(D[91]=Gt(" Contrast ",-1)),X("input",{value:U(d).contrast,type:"range",min:"-100",max:"100",step:"1",onInput:D[29]||(D[29]=q=>U(nt)("contrast",q.target.value)),onChange:D[30]||(D[30]=(...q)=>U(et)&&U(et)(...q))},null,40,g0),X("span",null,Dt(Math.round(U(d).contrast)),1)]),X("label",null,[D[92]||(D[92]=Gt(" Saturation ",-1)),X("input",{value:U(d).saturation,type:"range",min:"-2",max:"2",step:"0.01",onInput:D[31]||(D[31]=q=>U(nt)("saturation",q.target.value)),onChange:D[32]||(D[32]=(...q)=>U(et)&&U(et)(...q))},null,40,p0),X("span",null,Dt(U(d).saturation.toFixed(2)),1)]),X("label",null,[D[93]||(D[93]=Gt(" Hue (WB demo) ",-1)),X("input",{value:U(d).hue,type:"range",min:"-180",max:"180",step:"1",onInput:D[33]||(D[33]=q=>U(nt)("hue",q.target.value)),onChange:D[34]||(D[34]=(...q)=>U(et)&&U(et)(...q))},null,40,m0),X("span",null,Dt(Math.round(U(d).hue))+" deg",1)]),X("div",_0,[X("button",{onClick:D[35]||(D[35]=q=>U(ut)("x"))},"Flip X"),X("button",{onClick:D[36]||(D[36]=q=>U(ut)("y"))},"Flip Y"),X("button",{onClick:D[37]||(D[37]=(...q)=>U(ri)&&U(ri)(...q))},"Crop selected")])])])):ai("",!0),U(h)?(se(),Se("section",y0,[D[98]||(D[98]=X("h3",null,"Selected text",-1)),X("div",v0,[X("label",null,[D[95]||(D[95]=Gt(" Text ",-1)),X("textarea",{value:U(h).text,rows:"3",onInput:D[38]||(D[38]=q=>U(wt)(q.target.value)),onChange:D[39]||(D[39]=(...q)=>U(xt)&&U(xt)(...q)),onBlur:D[40]||(D[40]=(...q)=>U(xt)&&U(xt)(...q))},null,40,b0)]),X("label",null,[D[96]||(D[96]=Gt(" Size ",-1)),X("input",{value:U(h).fontSize,type:"range",min:"10",max:"160",step:"1",onInput:D[41]||(D[41]=q=>U(It)(q.target.value)),onChange:D[42]||(D[42]=(...q)=>U(xt)&&U(xt)(...q))},null,40,S0),X("span",null,Dt(U(h).fontSize)+" px",1)]),X("label",null,[D[97]||(D[97]=Gt(" Color ",-1)),X("input",{value:U(h).fill,type:"color",onInput:D[43]||(D[43]=q=>U(vt)(q.target.value)),onChange:D[44]||(D[44]=(...q)=>U(xt)&&U(xt)(...q))},null,40,C0)])])])):ai("",!0),!U(f)&&!U(h)&&!U(l)&&U(u)==="select"?(se(),Se("p",x0," Select an image or text block to open local settings. ")):ai("",!0)])]),X("div",w0,[X("button",{class:"quick-btn",disabled:!U(C),onClick:D[45]||(D[45]=q=>U(lt)(15))},"Rotate",8,P0),X("button",{class:"quick-btn",disabled:!U(C),onClick:D[46]||(D[46]=(...q)=>U(it)&&U(it)(...q))},"Center",8,T0),X("button",{class:"quick-btn",disabled:!U(k),onClick:D[47]||(D[47]=(...q)=>U(N)&&U(N)(...q))},"Undo",8,R0),X("button",{class:"quick-btn",disabled:!U(B),onClick:D[48]||(D[48]=(...q)=>U(Y)&&U(Y)(...q))},"Redo",8,M0),X("button",{class:"quick-btn",onClick:D[49]||(D[49]=(...q)=>U(O)&&U(O)(...q))},"Reset view"),X("button",{class:"quick-btn",disabled:!U(C),onClick:D[50]||(D[50]=(...q)=>U(V)&&U(V)(...q))},"Reset selected",8,E0),X("button",{class:"quick-btn danger",disabled:!U(C),onClick:D[51]||(D[51]=(...q)=>U(mt)&&U(mt)(...q))},"Delete",8,A0)])]),D[100]||(D[100]=X("p",{class:"canvas-hint"}," Wheel = zoom. Select = move whole block. Use Replace image to update content inside selected block. Undo/redo applies to selected image block. ",-1))],512)]),X("input",{ref_key:"imageInputRef",ref:n,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:D[52]||(D[52]=(...q)=>U($t)&&U($t)(...q))},null,544),X("input",{ref_key:"replaceImageInputRef",ref:s,type:"file",accept:"image/*",class:"hidden",onChange:D[53]||(D[53]=(...q)=>U(ni)&&U(ni)(...q))},null,544),X("input",{ref_key:"importJsonInputRef",ref:a,type:"file",accept:"application/json,.json",class:"hidden",onChange:D[54]||(D[54]=(...q)=>U(Hn)&&U(Hn)(...q))},null,544),U(y).visible?(se(),Se("div",{key:0,class:"cropper-overlay",onClick:D[73]||(D[73]=Gu(q=>U(Ie)(!0),["self"]))},[X("div",F0,[X("div",I0,[D[101]||(D[101]=X("h2",null,"Cropper (upload/edit)",-1)),X("button",{onClick:D[55]||(D[55]=q=>U(Ie)(!0))},"Close")]),X("div",O0,[X("div",N0,[X("canvas",{ref_key:"cropPreviewRef",ref:o,class:"crop-preview"},null,512),X("p",null," Source: "+Dt(U(y).sourceWidth)+"x"+Dt(U(y).sourceHeight)+" | Output: "+Dt(U(y).outputWidth)+"x"+Dt(U(y).outputHeight),1)]),X("div",k0,[X("label",null,[D[102]||(D[102]=Gt(" Crop X ",-1)),ne(X("input",{"onUpdate:modelValue":D[56]||(D[56]=q=>U(y).cropX=q),type:"number",min:"0",onInput:D[57]||(D[57]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).cropX,void 0,{number:!0}]])]),X("label",null,[D[103]||(D[103]=Gt(" Crop Y ",-1)),ne(X("input",{"onUpdate:modelValue":D[58]||(D[58]=q=>U(y).cropY=q),type:"number",min:"0",onInput:D[59]||(D[59]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).cropY,void 0,{number:!0}]])]),X("label",null,[D[104]||(D[104]=Gt(" Crop Width ",-1)),ne(X("input",{"onUpdate:modelValue":D[60]||(D[60]=q=>U(y).cropWidth=q),type:"number",min:"1",onInput:D[61]||(D[61]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).cropWidth,void 0,{number:!0}]])]),X("label",null,[D[105]||(D[105]=Gt(" Crop Height ",-1)),ne(X("input",{"onUpdate:modelValue":D[62]||(D[62]=q=>U(y).cropHeight=q),type:"number",min:"1",onInput:D[63]||(D[63]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).cropHeight,void 0,{number:!0}]])]),X("label",null,[D[106]||(D[106]=Gt(" Output Width ",-1)),ne(X("input",{"onUpdate:modelValue":D[64]||(D[64]=q=>U(y).outputWidth=q),type:"number",min:"1",max:"4096",onInput:D[65]||(D[65]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).outputWidth,void 0,{number:!0}]])]),X("label",null,[D[107]||(D[107]=Gt(" Output Height ",-1)),ne(X("input",{"onUpdate:modelValue":D[66]||(D[66]=q=>U(y).outputHeight=q),type:"number",min:"1",max:"4096",onInput:D[67]||(D[67]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).outputHeight,void 0,{number:!0}]])]),X("label",null,[D[108]||(D[108]=Gt(" Rotation ",-1)),ne(X("input",{"onUpdate:modelValue":D[68]||(D[68]=q=>U(y).rotation=q),type:"range",min:"-180",max:"180",step:"1",onInput:D[69]||(D[69]=(...q)=>U(Zt)&&U(Zt)(...q))},null,544),[[he,U(y).rotation,void 0,{number:!0}]]),X("span",null,Dt(Math.round(U(y).rotation))+" deg",1)]),X("div",L0,[X("button",{onClick:D[70]||(D[70]=(...q)=>U(ze)&&U(ze)(...q))},"Full image"),X("button",{onClick:D[71]||(D[71]=(...q)=>U(le)&&U(le)(...q))},"Centered square")]),X("div",D0,[X("button",{onClick:D[72]||(D[72]=(...q)=>U(Gn)&&U(Gn)(...q))},"Apply crop")])])])])])):ai("",!0),U(S)?(se(),Se("p",G0,Dt(U(S)),1)):ai("",!0)])}}},B0=Of(U0,[["__scopeId","data-v-2ece0700"]]);Hu(B0).use(cf).mount("#app");
