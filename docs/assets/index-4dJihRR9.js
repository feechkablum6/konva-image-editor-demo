(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function xs(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Nt={},En=[],Le=()=>{},Ga=()=>!1,br=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Cs=t=>t.startsWith("onUpdate:"),ee=Object.assign,ws=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ih=Object.prototype.hasOwnProperty,Lt=(t,e)=>Ih.call(t,e),vt=Array.isArray,An=t=>Wi(t)==="[object Map]",Sr=t=>Wi(t)==="[object Set]",Qs=t=>Wi(t)==="[object Date]",xt=t=>typeof t=="function",Xt=t=>typeof t=="string",Oe=t=>typeof t=="symbol",kt=t=>t!==null&&typeof t=="object",Ha=t=>(kt(t)||xt(t))&&xt(t.then)&&xt(t.catch),Ua=Object.prototype.toString,Wi=t=>Ua.call(t),Lh=t=>Wi(t).slice(8,-1),Ba=t=>Wi(t)==="[object Object]",Ms=t=>Xt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fi=xs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xr=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Oh=/-\w/g,Ce=xr(t=>t.replace(Oh,e=>e.slice(1).toUpperCase())),Nh=/\B([A-Z])/g,vn=xr(t=>t.replace(Nh,"-$1").toLowerCase()),Cr=xr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wr=xr(t=>t?`on${Cr(t)}`:""),an=(t,e)=>!Object.is(t,e),rr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Va=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},wr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Zs;const Mr=()=>Zs||(Zs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ts(t){if(vt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Xt(r)?Hh(r):Ts(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Xt(t)||kt(t))return t}const kh=/;(?![^(]*\))/g,Dh=/:([^]+)/,Gh=/\/\*[^]*?\*\//g;function Hh(t){const e={};return t.replace(Gh,"").split(kh).forEach(n=>{if(n){const r=n.split(Dh);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Se(t){let e="";if(Xt(t))e=t;else if(vt(t))for(let n=0;n<t.length;n++){const r=Se(t[n]);r&&(e+=r+" ")}else if(kt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Uh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bh=xs(Uh);function Wa(t){return!!t||t===""}function Vh(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Tr(t[r],e[r]);return n}function Tr(t,e){if(t===e)return!0;let n=Qs(t),r=Qs(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Oe(t),r=Oe(e),n||r)return t===e;if(n=vt(t),r=vt(e),n||r)return n&&r?Vh(t,e):!1;if(n=kt(t),r=kt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Tr(t[a],e[a]))return!1}}return String(t)===String(e)}function Wh(t,e){return t.findIndex(n=>Tr(n,e))}const za=t=>!!(t&&t.__v_isRef===!0),Yt=t=>Xt(t)?t:t==null?"":vt(t)||kt(t)&&(t.toString===Ua||!xt(t.toString))?za(t)?Yt(t.value):JSON.stringify(t,qa,2):String(t),qa=(t,e)=>za(e)?qa(t,e.value):An(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[zr(r,s)+" =>"]=i,n),{})}:Sr(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>zr(n))}:Oe(e)?zr(e):kt(e)&&!vt(e)&&!Ba(e)?String(e):e,zr=(t,e="")=>{var n;return Oe(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let pe;class zh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!e&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=pe;try{return pe=this,e()}finally{pe=n}}}on(){++this._on===1&&(this.prevScope=pe,pe=this)}off(){this._on>0&&--this._on===0&&(pe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function qh(){return pe}let Dt;const qr=new WeakSet;class Ya{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qr.has(this)&&(qr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,to(this),Ka(this);const e=Dt,n=Te;Dt=this,Te=!0;try{return this.fn()}finally{$a(this),Dt=e,Te=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Es(e);this.deps=this.depsTail=void 0,to(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){cs(this)&&this.run()}get dirty(){return cs(this)}}let ja=0,Ii,Li;function Xa(t,e=!1){if(t.flags|=8,e){t.next=Li,Li=t;return}t.next=Ii,Ii=t}function Ps(){ja++}function Rs(){if(--ja>0)return;if(Li){let e=Li;for(Li=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ii;){let e=Ii;for(Ii=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Ka(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function $a(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Es(r),Yh(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function cs(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ja(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ja(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Gi)||(t.globalVersion=Gi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!cs(t))))return;t.flags|=2;const e=t.dep,n=Dt,r=Te;Dt=t,Te=!0;try{Ka(t);const i=t.fn(t._value);(e.version===0||an(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Dt=n,Te=r,$a(t),t.flags&=-3}}function Es(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Es(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Yh(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Te=!0;const Qa=[];function Ye(){Qa.push(Te),Te=!1}function je(){const t=Qa.pop();Te=t===void 0?!0:t}function to(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Dt;Dt=void 0;try{e()}finally{Dt=n}}}let Gi=0;class jh{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class As{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Dt||!Te||Dt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Dt)n=this.activeLink=new jh(Dt,this),Dt.deps?(n.prevDep=Dt.depsTail,Dt.depsTail.nextDep=n,Dt.depsTail=n):Dt.deps=Dt.depsTail=n,Za(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Dt.depsTail,n.nextDep=void 0,Dt.depsTail.nextDep=n,Dt.depsTail=n,Dt.deps===n&&(Dt.deps=r)}return n}trigger(e){this.version++,Gi++,this.notify(e)}notify(e){Ps();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Rs()}}}function Za(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Za(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const us=new WeakMap,_n=Symbol(""),ds=Symbol(""),Hi=Symbol("");function se(t,e,n){if(Te&&Dt){let r=us.get(t);r||us.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new As),i.map=r,i.key=n),i.track()}}function ze(t,e,n,r,i,s){const a=us.get(t);if(!a){Gi++;return}const o=l=>{l&&l.trigger()};if(Ps(),e==="clear")a.forEach(o);else{const l=vt(t),u=l&&Ms(n);if(l&&n==="length"){const c=Number(r);a.forEach((_,m)=>{(m==="length"||m===Hi||!Oe(m)&&m>=c)&&o(_)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),u&&o(a.get(Hi)),e){case"add":l?u&&o(a.get("length")):(o(a.get(_n)),An(t)&&o(a.get(ds)));break;case"delete":l||(o(a.get(_n)),An(t)&&o(a.get(ds)));break;case"set":An(t)&&o(a.get(_n));break}}Rs()}function wn(t){const e=It(t);return e===t?e:(se(e,"iterate",Hi),xe(t)?e:e.map(Pe))}function Pr(t){return se(t=It(t),"iterate",Hi),t}function nn(t,e){return Xe(t)?On(yn(t)?Pe(e):e):Pe(e)}const Xh={__proto__:null,[Symbol.iterator](){return Yr(this,Symbol.iterator,t=>nn(this,t))},concat(...t){return wn(this).concat(...t.map(e=>vt(e)?wn(e):e))},entries(){return Yr(this,"entries",t=>(t[1]=nn(this,t[1]),t))},every(t,e){return He(this,"every",t,e,void 0,arguments)},filter(t,e){return He(this,"filter",t,e,n=>n.map(r=>nn(this,r)),arguments)},find(t,e){return He(this,"find",t,e,n=>nn(this,n),arguments)},findIndex(t,e){return He(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return He(this,"findLast",t,e,n=>nn(this,n),arguments)},findLastIndex(t,e){return He(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return He(this,"forEach",t,e,void 0,arguments)},includes(...t){return jr(this,"includes",t)},indexOf(...t){return jr(this,"indexOf",t)},join(t){return wn(this).join(t)},lastIndexOf(...t){return jr(this,"lastIndexOf",t)},map(t,e){return He(this,"map",t,e,void 0,arguments)},pop(){return Hn(this,"pop")},push(...t){return Hn(this,"push",t)},reduce(t,...e){return eo(this,"reduce",t,e)},reduceRight(t,...e){return eo(this,"reduceRight",t,e)},shift(){return Hn(this,"shift")},some(t,e){return He(this,"some",t,e,void 0,arguments)},splice(...t){return Hn(this,"splice",t)},toReversed(){return wn(this).toReversed()},toSorted(t){return wn(this).toSorted(t)},toSpliced(...t){return wn(this).toSpliced(...t)},unshift(...t){return Hn(this,"unshift",t)},values(){return Yr(this,"values",t=>nn(this,t))}};function Yr(t,e,n){const r=Pr(t),i=r[e]();return r!==t&&!xe(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const Kh=Array.prototype;function He(t,e,n,r,i,s){const a=Pr(t),o=a!==t&&!xe(t),l=a[e];if(l!==Kh[e]){const _=l.apply(t,s);return o?Pe(_):_}let u=n;a!==t&&(o?u=function(_,m){return n.call(this,nn(t,_),m,t)}:n.length>2&&(u=function(_,m){return n.call(this,_,m,t)}));const c=l.call(a,u,r);return o&&i?i(c):c}function eo(t,e,n,r){const i=Pr(t);let s=n;return i!==t&&(xe(t)?n.length>3&&(s=function(a,o,l){return n.call(this,a,o,l,t)}):s=function(a,o,l){return n.call(this,a,nn(t,o),l,t)}),i[e](s,...r)}function jr(t,e,n){const r=It(t);se(r,"iterate",Hi);const i=r[e](...n);return(i===-1||i===!1)&&Ls(n[0])?(n[0]=It(n[0]),r[e](...n)):i}function Hn(t,e,n=[]){Ye(),Ps();const r=It(t)[e].apply(t,n);return Rs(),je(),r}const $h=xs("__proto__,__v_isRef,__isVue"),tl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Oe));function Jh(t){Oe(t)||(t=String(t));const e=It(this);return se(e,"has",t),e.hasOwnProperty(t)}class el{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?ac:sl:s?rl:il).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=vt(e);if(!i){let l;if(a&&(l=Xh[n]))return l;if(n==="hasOwnProperty")return Jh}const o=Reflect.get(e,n,$t(e)?e:r);if((Oe(n)?tl.has(n):$h(n))||(i||se(e,"get",n),s))return o;if($t(o)){const l=a&&Ms(n)?o:o.value;return i&&kt(l)?gs(l):l}return kt(o)?i?gs(o):Ie(o):o}}class nl extends el{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const a=vt(e)&&Ms(n);if(!this._isShallow){const u=Xe(s);if(!xe(r)&&!Xe(r)&&(s=It(s),r=It(r)),!a&&$t(s)&&!$t(r))return u||(s.value=r),!0}const o=a?Number(n)<e.length:Lt(e,n),l=Reflect.set(e,n,r,$t(e)?e:i);return e===It(i)&&(o?an(r,s)&&ze(e,"set",n,r):ze(e,"add",n,r)),l}deleteProperty(e,n){const r=Lt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&ze(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Oe(n)||!tl.has(n))&&se(e,"has",n),r}ownKeys(e){return se(e,"iterate",vt(e)?"length":_n),Reflect.ownKeys(e)}}class Qh extends el{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Zh=new nl,tc=new Qh,ec=new nl(!0);const fs=t=>t,er=t=>Reflect.getPrototypeOf(t);function nc(t,e,n){return function(...r){const i=this.__v_raw,s=It(i),a=An(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=i[t](...r),c=n?fs:e?On:Pe;return!e&&se(s,"iterate",l?ds:_n),ee(Object.create(u),{next(){const{value:_,done:m}=u.next();return m?{value:_,done:m}:{value:o?[c(_[0]),c(_[1])]:c(_),done:m}}})}}function nr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ic(t,e){const n={get(i){const s=this.__v_raw,a=It(s),o=It(i);t||(an(i,o)&&se(a,"get",i),se(a,"get",o));const{has:l}=er(a),u=e?fs:t?On:Pe;if(l.call(a,i))return u(s.get(i));if(l.call(a,o))return u(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!t&&se(It(i),"iterate",_n),i.size},has(i){const s=this.__v_raw,a=It(s),o=It(i);return t||(an(i,o)&&se(a,"has",i),se(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,l=It(o),u=e?fs:t?On:Pe;return!t&&se(l,"iterate",_n),o.forEach((c,_)=>i.call(s,u(c),u(_),a))}};return ee(n,t?{add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear")}:{add(i){!e&&!xe(i)&&!Xe(i)&&(i=It(i));const s=It(this);return er(s).has.call(s,i)||(s.add(i),ze(s,"add",i,i)),this},set(i,s){!e&&!xe(s)&&!Xe(s)&&(s=It(s));const a=It(this),{has:o,get:l}=er(a);let u=o.call(a,i);u||(i=It(i),u=o.call(a,i));const c=l.call(a,i);return a.set(i,s),u?an(s,c)&&ze(a,"set",i,s):ze(a,"add",i,s),this},delete(i){const s=It(this),{has:a,get:o}=er(s);let l=a.call(s,i);l||(i=It(i),l=a.call(s,i)),o&&o.call(s,i);const u=s.delete(i);return l&&ze(s,"delete",i,void 0),u},clear(){const i=It(this),s=i.size!==0,a=i.clear();return s&&ze(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=nc(i,t,e)}),n}function Fs(t,e){const n=ic(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Lt(n,i)&&i in r?n:r,i,s)}const rc={get:Fs(!1,!1)},sc={get:Fs(!1,!0)},oc={get:Fs(!0,!1)};const il=new WeakMap,rl=new WeakMap,sl=new WeakMap,ac=new WeakMap;function lc(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hc(t){return t.__v_skip||!Object.isExtensible(t)?0:lc(Lh(t))}function Ie(t){return Xe(t)?t:Is(t,!1,Zh,rc,il)}function cc(t){return Is(t,!1,ec,sc,rl)}function gs(t){return Is(t,!0,tc,oc,sl)}function Is(t,e,n,r,i){if(!kt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=hc(t);if(s===0)return t;const a=i.get(t);if(a)return a;const o=new Proxy(t,s===2?r:n);return i.set(t,o),o}function yn(t){return Xe(t)?yn(t.__v_raw):!!(t&&t.__v_isReactive)}function Xe(t){return!!(t&&t.__v_isReadonly)}function xe(t){return!!(t&&t.__v_isShallow)}function Ls(t){return t?!!t.__v_raw:!1}function It(t){const e=t&&t.__v_raw;return e?It(e):t}function uc(t){return!Lt(t,"__v_skip")&&Object.isExtensible(t)&&Va(t,"__v_skip",!0),t}const Pe=t=>kt(t)?Ie(t):t,On=t=>kt(t)?gs(t):t;function $t(t){return t?t.__v_isRef===!0:!1}function jt(t){return dc(t,!1)}function dc(t,e){return $t(t)?t:new fc(t,e)}class fc{constructor(e,n){this.dep=new As,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:It(e),this._value=n?e:Pe(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||xe(e)||Xe(e);e=r?e:It(e),an(e,n)&&(this._rawValue=e,this._value=r?e:Pe(e),this.dep.trigger())}}function N(t){return $t(t)?t.value:t}const gc={get:(t,e,n)=>e==="__v_raw"?t:N(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return $t(i)&&!$t(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function ol(t){return yn(t)?t:new Proxy(t,gc)}class pc{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new As(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Gi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return Xa(this,!0),!0}get value(){const e=this.dep.track();return Ja(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function mc(t,e,n=!1){let r,i;return xt(t)?r=t:(r=t.get,i=t.set),new pc(r,i,n)}const ir={},hr=new WeakMap;let pn;function _c(t,e=!1,n=pn){if(n){let r=hr.get(n);r||hr.set(n,r=[]),r.push(t)}}function yc(t,e,n=Nt){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:o,call:l}=n,u=p=>i?p:xe(p)||i===!1||i===0?qe(p,1):qe(p);let c,_,m,f,g=!1,y=!1;if($t(t)?(_=()=>t.value,g=xe(t)):yn(t)?(_=()=>u(t),g=!0):vt(t)?(y=!0,g=t.some(p=>yn(p)||xe(p)),_=()=>t.map(p=>{if($t(p))return p.value;if(yn(p))return u(p);if(xt(p))return l?l(p,2):p()})):xt(t)?e?_=l?()=>l(t,2):t:_=()=>{if(m){Ye();try{m()}finally{je()}}const p=pn;pn=c;try{return l?l(t,3,[f]):t(f)}finally{pn=p}}:_=Le,e&&i){const p=_,b=i===!0?1/0:i;_=()=>qe(p(),b)}const S=qh(),w=()=>{c.stop(),S&&S.active&&ws(S.effects,c)};if(s&&e){const p=e;e=(...b)=>{p(...b),w()}}let d=y?new Array(t.length).fill(ir):ir;const h=p=>{if(!(!(c.flags&1)||!c.dirty&&!p))if(e){const b=c.run();if(i||g||(y?b.some((T,D)=>an(T,d[D])):an(b,d))){m&&m();const T=pn;pn=c;try{const D=[b,d===ir?void 0:y&&d[0]===ir?[]:d,f];d=b,l?l(e,3,D):e(...D)}finally{pn=T}}}else c.run()};return o&&o(h),c=new Ya(_),c.scheduler=a?()=>a(h,!1):h,f=p=>_c(p,!1,c),m=c.onStop=()=>{const p=hr.get(c);if(p){if(l)l(p,4);else for(const b of p)b();hr.delete(c)}},e?r?h(!0):d=c.run():a?a(h.bind(null,!0),!0):c.run(),w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function qe(t,e=1/0,n){if(e<=0||!kt(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,$t(t))qe(t.value,e,n);else if(vt(t))for(let r=0;r<t.length;r++)qe(t[r],e,n);else if(Sr(t)||An(t))t.forEach(r=>{qe(r,e,n)});else if(Ba(t)){for(const r in t)qe(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&qe(t[r],e,n)}return t}function zi(t,e,n,r){try{return r?t(...r):t()}catch(i){Rr(i,e,n)}}function Ne(t,e,n,r){if(xt(t)){const i=zi(t,e,n,r);return i&&Ha(i)&&i.catch(s=>{Rr(s,e,n)}),i}if(vt(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Ne(t[s],e,n,r));return i}}function Rr(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Nt;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let _=0;_<c.length;_++)if(c[_](t,l,u)===!1)return}o=o.parent}if(s){Ye(),zi(s,null,10,[t,l,u]),je();return}}vc(t,n,i,r,a)}function vc(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const he=[];let Ae=-1;const Fn=[];let rn=null,Pn=0;const al=Promise.resolve();let cr=null;function zt(t){const e=cr||al;return t?e.then(this?t.bind(this):t):e}function bc(t){let e=Ae+1,n=he.length;for(;e<n;){const r=e+n>>>1,i=he[r],s=Ui(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Os(t){if(!(t.flags&1)){const e=Ui(t),n=he[he.length-1];!n||!(t.flags&2)&&e>=Ui(n)?he.push(t):he.splice(bc(e),0,t),t.flags|=1,ll()}}function ll(){cr||(cr=al.then(cl))}function Sc(t){vt(t)?Fn.push(...t):rn&&t.id===-1?rn.splice(Pn+1,0,t):t.flags&1||(Fn.push(t),t.flags|=1),ll()}function no(t,e,n=Ae+1){for(;n<he.length;n++){const r=he[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;he.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function hl(t){if(Fn.length){const e=[...new Set(Fn)].sort((n,r)=>Ui(n)-Ui(r));if(Fn.length=0,rn){rn.push(...e);return}for(rn=e,Pn=0;Pn<rn.length;Pn++){const n=rn[Pn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rn=null,Pn=0}}const Ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function cl(t){try{for(Ae=0;Ae<he.length;Ae++){const e=he[Ae];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ae<he.length;Ae++){const e=he[Ae];e&&(e.flags&=-2)}Ae=-1,he.length=0,hl(),cr=null,(he.length||Fn.length)&&cl()}}let ye=null,ul=null;function ur(t){const e=ye;return ye=t,ul=t&&t.type.__scopeId||null,e}function Ri(t,e=ye,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&gr(-1);const s=ur(e);let a;try{a=t(...i)}finally{ur(s),r._d&&gr(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ae(t,e){if(ye===null)return t;const n=Lr(ye),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,o,l=Nt]=e[i];s&&(xt(s)&&(s={mounted:s,updated:s}),s.deep&&qe(a),r.push({dir:s,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function dn(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Ye(),Ne(l,n,8,[t.el,o,t,e]),je())}}function xc(t,e){if(oe){let n=oe.provides;const r=oe.parent&&oe.parent.provides;r===n&&(n=oe.provides=Object.create(r)),n[t]=e}}function sr(t,e,n=!1){const r=Vs();if(r||In){let i=In?In._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&xt(e)?e.call(r&&r.proxy):e}}const Cc=Symbol.for("v-scx"),wc=()=>sr(Cc);function ln(t,e,n){return dl(t,e,n)}function dl(t,e,n=Nt){const{immediate:r,deep:i,flush:s,once:a}=n,o=ee({},n),l=e&&r||!e&&s!=="post";let u;if(Vi){if(s==="sync"){const f=wc();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Le,f.resume=Le,f.pause=Le,f}}const c=oe;o.call=(f,g,y)=>Ne(f,c,g,y);let _=!1;s==="post"?o.scheduler=f=>{_e(f,c&&c.suspense)}:s!=="sync"&&(_=!0,o.scheduler=(f,g)=>{g?f():Os(f)}),o.augmentJob=f=>{e&&(f.flags|=4),_&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const m=yc(t,e,o);return Vi&&(u?u.push(m):l&&m()),m}function Mc(t,e,n){const r=this.proxy,i=Xt(t)?t.includes(".")?fl(r,t):()=>r[t]:t.bind(r,r);let s;xt(e)?s=e:(s=e.handler,n=e);const a=qi(this),o=dl(i,s.bind(r),n);return a(),o}function fl(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Tc=Symbol("_vte"),Pc=t=>t.__isTeleport,Rc=Symbol("_leaveCb");function Ns(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ns(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gl(t,e){return xt(t)?ee({name:t.name},e,{setup:t}):t}function pl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const dr=new WeakMap;function Oi(t,e,n,r,i=!1){if(vt(t)){t.forEach((g,y)=>Oi(g,e&&(vt(e)?e[y]:e),n,r,i));return}if(Ni(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Oi(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Lr(r.component):r.el,a=i?null:s,{i:o,r:l}=t,u=e&&e.r,c=o.refs===Nt?o.refs={}:o.refs,_=o.setupState,m=It(_),f=_===Nt?Ga:g=>Lt(m,g);if(u!=null&&u!==l){if(io(e),Xt(u))c[u]=null,f(u)&&(_[u]=null);else if($t(u)){u.value=null;const g=e;g.k&&(c[g.k]=null)}}if(xt(l))zi(l,o,12,[a,c]);else{const g=Xt(l),y=$t(l);if(g||y){const S=()=>{if(t.f){const w=g?f(l)?_[l]:c[l]:l.value;if(i)vt(w)&&ws(w,s);else if(vt(w))w.includes(s)||w.push(s);else if(g)c[l]=[s],f(l)&&(_[l]=c[l]);else{const d=[s];l.value=d,t.k&&(c[t.k]=d)}}else g?(c[l]=a,f(l)&&(_[l]=a)):y&&(l.value=a,t.k&&(c[t.k]=a))};if(a){const w=()=>{S(),dr.delete(t)};w.id=-1,dr.set(t,w),_e(w,n)}else io(t),S()}}}function io(t){const e=dr.get(t);e&&(e.flags|=8,dr.delete(t))}Mr().requestIdleCallback;Mr().cancelIdleCallback;const Ni=t=>!!t.type.__asyncLoader,ml=t=>t.type.__isKeepAlive;function Ec(t,e){_l(t,"a",e)}function Ac(t,e){_l(t,"da",e)}function _l(t,e,n=oe){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Er(e,r,n),n){let i=n.parent;for(;i&&i.parent;)ml(i.parent.vnode)&&Fc(r,e,n,i),i=i.parent}}function Fc(t,e,n,r){const i=Er(e,t,r,!0);Gs(()=>{ws(r[e],i)},n)}function Er(t,e,n=oe,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{Ye();const o=qi(n),l=Ne(e,n,t,a);return o(),je(),l});return r?i.unshift(s):i.push(s),s}}const Ke=t=>(e,n=oe)=>{(!Vi||t==="sp")&&Er(t,(...r)=>e(...r),n)},Ic=Ke("bm"),Ar=Ke("m"),Lc=Ke("bu"),ks=Ke("u"),Ds=Ke("bum"),Gs=Ke("um"),Oc=Ke("sp"),Nc=Ke("rtg"),kc=Ke("rtc");function Dc(t,e=oe){Er("ec",t,e)}const Gc="components";function tn(t,e){return Uc(Gc,t,!0,e)||t}const Hc=Symbol.for("v-ndc");function Uc(t,e,n=!0,r=!1){const i=ye||oe;if(i){const s=i.type;{const o=wu(s,!1);if(o&&(o===e||o===Ce(e)||o===Cr(Ce(e))))return s}const a=ro(i[t]||s[t],e)||ro(i.appContext[t],e);return!a&&r?s:a}}function ro(t,e){return t&&(t[e]||t[Ce(e)]||t[Cr(Ce(e))])}function Xr(t,e,n,r){let i;const s=n,a=vt(t);if(a||Xt(t)){const o=a&&yn(t);let l=!1,u=!1;o&&(l=!xe(t),u=Xe(t),t=Pr(t)),i=new Array(t.length);for(let c=0,_=t.length;c<_;c++)i[c]=e(l?u?On(Pe(t[c])):Pe(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s)}else if(kt(t))if(t[Symbol.iterator])i=Array.from(t,(o,l)=>e(o,l,void 0,s));else{const o=Object.keys(t);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];i[l]=e(t[c],c,l,s)}}else i=[];return i}const ps=t=>t?kl(t)?Lr(t):ps(t.parent):null,ki=ee(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ps(t.parent),$root:t=>ps(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>vl(t),$forceUpdate:t=>t.f||(t.f=()=>{Os(t.update)}),$nextTick:t=>t.n||(t.n=zt.bind(t.proxy)),$watch:t=>Mc.bind(t)}),Kr=(t,e)=>t!==Nt&&!t.__isScriptSetup&&Lt(t,e),Bc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=t;if(e[0]!=="$"){const m=a[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Kr(r,e))return a[e]=1,r[e];if(i!==Nt&&Lt(i,e))return a[e]=2,i[e];if(Lt(s,e))return a[e]=3,s[e];if(n!==Nt&&Lt(n,e))return a[e]=4,n[e];ms&&(a[e]=0)}}const u=ki[e];let c,_;if(u)return e==="$attrs"&&se(t.attrs,"get",""),u(t);if((c=o.__cssModules)&&(c=c[e]))return c;if(n!==Nt&&Lt(n,e))return a[e]=4,n[e];if(_=l.config.globalProperties,Lt(_,e))return _[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Kr(i,e)?(i[e]=n,!0):r!==Nt&&Lt(r,e)?(r[e]=n,!0):Lt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:a}},o){let l;return!!(n[o]||t!==Nt&&o[0]!=="$"&&Lt(t,o)||Kr(e,o)||Lt(s,o)||Lt(r,o)||Lt(ki,o)||Lt(i.config.globalProperties,o)||(l=a.__cssModules)&&l[o])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Lt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function so(t){return vt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ms=!0;function Vc(t){const e=vl(t),n=t.proxy,r=t.ctx;ms=!1,e.beforeCreate&&oo(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:_,mounted:m,beforeUpdate:f,updated:g,activated:y,deactivated:S,beforeDestroy:w,beforeUnmount:d,destroyed:h,unmounted:p,render:b,renderTracked:T,renderTriggered:D,errorCaptured:x,serverPrefetch:C,expose:P,inheritAttrs:k,components:U,directives:W,filters:q}=e;if(u&&Wc(u,r,null),a)for(const v in a){const M=a[v];xt(M)&&(r[v]=M.bind(n))}if(i){const v=i.call(n,n);kt(v)&&(t.data=Ie(v))}if(ms=!0,s)for(const v in s){const M=s[v],L=xt(M)?M.bind(n,n):xt(M.get)?M.get.bind(n,n):Le,I=!xt(M)&&xt(M.set)?M.set.bind(n):Le,H=te({get:L,set:I});Object.defineProperty(r,v,{enumerable:!0,configurable:!0,get:()=>H.value,set:$=>H.value=$})}if(o)for(const v in o)yl(o[v],r,n,v);if(l){const v=xt(l)?l.call(n):l;Reflect.ownKeys(v).forEach(M=>{xc(M,v[M])})}c&&oo(c,t,"c");function et(v,M){vt(M)?M.forEach(L=>v(L.bind(n))):M&&v(M.bind(n))}if(et(Ic,_),et(Ar,m),et(Lc,f),et(ks,g),et(Ec,y),et(Ac,S),et(Dc,x),et(kc,T),et(Nc,D),et(Ds,d),et(Gs,p),et(Oc,C),vt(P))if(P.length){const v=t.exposed||(t.exposed={});P.forEach(M=>{Object.defineProperty(v,M,{get:()=>n[M],set:L=>n[M]=L,enumerable:!0})})}else t.exposed||(t.exposed={});b&&t.render===Le&&(t.render=b),k!=null&&(t.inheritAttrs=k),U&&(t.components=U),W&&(t.directives=W),C&&pl(t)}function Wc(t,e,n=Le){vt(t)&&(t=_s(t));for(const r in t){const i=t[r];let s;kt(i)?"default"in i?s=sr(i.from||r,i.default,!0):s=sr(i.from||r):s=sr(i),$t(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function oo(t,e,n){Ne(vt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function yl(t,e,n,r){let i=r.includes(".")?fl(n,r):()=>n[r];if(Xt(t)){const s=e[t];xt(s)&&ln(i,s)}else if(xt(t))ln(i,t.bind(n));else if(kt(t))if(vt(t))t.forEach(s=>yl(s,e,n,r));else{const s=xt(t.handler)?t.handler.bind(n):e[t.handler];xt(s)&&ln(i,s,t)}}function vl(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>fr(l,u,a,!0)),fr(l,e,a)),kt(e)&&s.set(e,l),l}function fr(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&fr(t,s,n,!0),i&&i.forEach(a=>fr(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const o=zc[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const zc={data:ao,props:lo,emits:lo,methods:Ei,computed:Ei,beforeCreate:le,created:le,beforeMount:le,mounted:le,beforeUpdate:le,updated:le,beforeDestroy:le,beforeUnmount:le,destroyed:le,unmounted:le,activated:le,deactivated:le,errorCaptured:le,serverPrefetch:le,components:Ei,directives:Ei,watch:Yc,provide:ao,inject:qc};function ao(t,e){return e?t?function(){return ee(xt(t)?t.call(this,this):t,xt(e)?e.call(this,this):e)}:e:t}function qc(t,e){return Ei(_s(t),_s(e))}function _s(t){if(vt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function le(t,e){return t?[...new Set([].concat(t,e))]:e}function Ei(t,e){return t?ee(Object.create(null),t,e):e}function lo(t,e){return t?vt(t)&&vt(e)?[...new Set([...t,...e])]:ee(Object.create(null),so(t),so(e??{})):e}function Yc(t,e){if(!t)return e;if(!e)return t;const n=ee(Object.create(null),t);for(const r in e)n[r]=le(t[r],e[r]);return n}function bl(){return{app:null,config:{isNativeTag:Ga,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jc=0;function Xc(t,e){return function(r,i=null){xt(r)||(r=ee({},r)),i!=null&&!kt(i)&&(i=null);const s=bl(),a=new WeakSet,o=[];let l=!1;const u=s.app={_uid:jc++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Tu,get config(){return s.config},set config(c){},use(c,..._){return a.has(c)||(c&&xt(c.install)?(a.add(c),c.install(u,..._)):xt(c)&&(a.add(c),c(u,..._))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,_){return _?(s.components[c]=_,u):s.components[c]},directive(c,_){return _?(s.directives[c]=_,u):s.directives[c]},mount(c,_,m){if(!l){const f=u._ceVNode||Kt(r,i);return f.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),t(f,c,m),l=!0,u._container=c,c.__vue_app__=u,Lr(f.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Ne(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,_){return s.provides[c]=_,u},runWithContext(c){const _=In;In=u;try{return c()}finally{In=_}}};return u}}let In=null;const Kc=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ce(e)}Modifiers`]||t[`${vn(e)}Modifiers`];function $c(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Nt;let i=n;const s=e.startsWith("update:"),a=s&&Kc(r,e.slice(7));a&&(a.trim&&(i=n.map(c=>Xt(c)?c.trim():c)),a.number&&(i=n.map(wr)));let o,l=r[o=Wr(e)]||r[o=Wr(Ce(e))];!l&&s&&(l=r[o=Wr(vn(e))]),l&&Ne(l,t,6,i);const u=r[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ne(u,t,6,i)}}const Jc=new WeakMap;function Sl(t,e,n=!1){const r=n?Jc:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let a={},o=!1;if(!xt(t)){const l=u=>{const c=Sl(u,e,!0);c&&(o=!0,ee(a,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(kt(t)&&r.set(t,null),null):(vt(s)?s.forEach(l=>a[l]=null):ee(a,s),kt(t)&&r.set(t,a),a)}function Fr(t,e){return!t||!br(e)?!1:(e=e.slice(2).replace(/Once$/,""),Lt(t,e[0].toLowerCase()+e.slice(1))||Lt(t,vn(e))||Lt(t,e))}function ho(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:_,data:m,setupState:f,ctx:g,inheritAttrs:y}=t,S=ur(t);let w,d;try{if(n.shapeFlag&4){const p=i||r,b=p;w=Fe(u.call(b,p,c,_,f,m,g)),d=o}else{const p=e;w=Fe(p.length>1?p(_,{attrs:o,slots:a,emit:l}):p(_,null)),d=e.props?o:Qc(o)}}catch(p){Di.length=0,Rr(p,t,1),w=Kt(hn)}let h=w;if(d&&y!==!1){const p=Object.keys(d),{shapeFlag:b}=h;p.length&&b&7&&(s&&p.some(Cs)&&(d=Zc(d,s)),h=Nn(h,d,!1,!0))}return n.dirs&&(h=Nn(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(n.dirs):n.dirs),n.transition&&Ns(h,n.transition),w=h,ur(S),w}const Qc=t=>{let e;for(const n in t)(n==="class"||n==="style"||br(n))&&((e||(e={}))[n]=t[n]);return e},Zc=(t,e)=>{const n={};for(const r in t)(!Cs(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function tu(t,e,n){const{props:r,children:i,component:s}=t,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?co(r,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let _=0;_<c.length;_++){const m=c[_];if(a[m]!==r[m]&&!Fr(u,m))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?co(r,a,u):!0:!!a;return!1}function co(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Fr(n,s))return!0}return!1}function eu({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const xl={},Cl=()=>Object.create(xl),wl=t=>Object.getPrototypeOf(t)===xl;function nu(t,e,n,r=!1){const i={},s=Cl();t.propsDefaults=Object.create(null),Ml(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:cc(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function iu(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,o=It(i),[l]=t.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let _=0;_<c.length;_++){let m=c[_];if(Fr(t.emitsOptions,m))continue;const f=e[m];if(l)if(Lt(s,m))f!==s[m]&&(s[m]=f,u=!0);else{const g=Ce(m);i[g]=ys(l,o,g,f,t,!1)}else f!==s[m]&&(s[m]=f,u=!0)}}}else{Ml(t,e,i,s)&&(u=!0);let c;for(const _ in o)(!e||!Lt(e,_)&&((c=vn(_))===_||!Lt(e,c)))&&(l?n&&(n[_]!==void 0||n[c]!==void 0)&&(i[_]=ys(l,o,_,void 0,t,!0)):delete i[_]);if(s!==o)for(const _ in s)(!e||!Lt(e,_))&&(delete s[_],u=!0)}u&&ze(t.attrs,"set","")}function Ml(t,e,n,r){const[i,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Fi(l))continue;const u=e[l];let c;i&&Lt(i,c=Ce(l))?!s||!s.includes(c)?n[c]=u:(o||(o={}))[c]=u:Fr(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(s){const l=It(n),u=o||Nt;for(let c=0;c<s.length;c++){const _=s[c];n[_]=ys(i,l,_,u[_],t,!Lt(u,_))}}return a}function ys(t,e,n,r,i,s){const a=t[n];if(a!=null){const o=Lt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&xt(l)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const c=qi(i);r=u[n]=l.call(null,e),c()}}else r=l;i.ce&&i.ce._setProp(n,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===vn(n))&&(r=!0))}return r}const ru=new WeakMap;function Tl(t,e,n=!1){const r=n?ru:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,a={},o=[];let l=!1;if(!xt(t)){const c=_=>{l=!0;const[m,f]=Tl(_,e,!0);ee(a,m),f&&o.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return kt(t)&&r.set(t,En),En;if(vt(s))for(let c=0;c<s.length;c++){const _=Ce(s[c]);uo(_)&&(a[_]=Nt)}else if(s)for(const c in s){const _=Ce(c);if(uo(_)){const m=s[c],f=a[_]=vt(m)||xt(m)?{type:m}:ee({},m),g=f.type;let y=!1,S=!0;if(vt(g))for(let w=0;w<g.length;++w){const d=g[w],h=xt(d)&&d.name;if(h==="Boolean"){y=!0;break}else h==="String"&&(S=!1)}else y=xt(g)&&g.name==="Boolean";f[0]=y,f[1]=S,(y||Lt(f,"default"))&&o.push(_)}}const u=[a,o];return kt(t)&&r.set(t,u),u}function uo(t){return t[0]!=="$"&&!Fi(t)}const Hs=t=>t==="_"||t==="_ctx"||t==="$stable",Us=t=>vt(t)?t.map(Fe):[Fe(t)],su=(t,e,n)=>{if(e._n)return e;const r=Ri((...i)=>Us(e(...i)),n);return r._c=!1,r},Pl=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Hs(i))continue;const s=t[i];if(xt(s))e[i]=su(i,s,r);else if(s!=null){const a=Us(s);e[i]=()=>a}}},Rl=(t,e)=>{const n=Us(e);t.slots.default=()=>n},El=(t,e,n)=>{for(const r in e)(n||!Hs(r))&&(t[r]=e[r])},ou=(t,e,n)=>{const r=t.slots=Cl();if(t.vnode.shapeFlag&32){const i=e._;i?(El(r,e,n),n&&Va(r,"_",i,!0)):Pl(e,r)}else e&&Rl(t,e)},au=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,a=Nt;if(r.shapeFlag&32){const o=e._;o?n&&o===1?s=!1:El(i,e,n):(s=!e.$stable,Pl(e,i)),a=e}else e&&(Rl(t,e),a={default:1});if(s)for(const o in i)!Hs(o)&&a[o]==null&&delete i[o]},_e=du;function lu(t){return hu(t)}function hu(t,e){const n=Mr();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:_,nextSibling:m,setScopeId:f=Le,insertStaticContent:g}=t,y=(A,G,j,Q=null,tt=null,Z=null,rt=void 0,ht=null,st=!!G.dynamicChildren)=>{if(A===G)return;A&&!Un(A,G)&&(Q=O(A),$(A,tt,Z,!0),A=null),G.patchFlag===-2&&(st=!1,G.dynamicChildren=null);const{type:nt,ref:dt,shapeFlag:lt}=G;switch(nt){case Ir:S(A,G,j,Q);break;case hn:w(A,G,j,Q);break;case Jr:A==null&&d(G,j,Q,rt);break;case me:U(A,G,j,Q,tt,Z,rt,ht,st);break;default:lt&1?b(A,G,j,Q,tt,Z,rt,ht,st):lt&6?W(A,G,j,Q,tt,Z,rt,ht,st):(lt&64||lt&128)&&nt.process(A,G,j,Q,tt,Z,rt,ht,st,ut)}dt!=null&&tt?Oi(dt,A&&A.ref,Z,G||A,!G):dt==null&&A&&A.ref!=null&&Oi(A.ref,null,Z,A,!0)},S=(A,G,j,Q)=>{if(A==null)r(G.el=o(G.children),j,Q);else{const tt=G.el=A.el;G.children!==A.children&&u(tt,G.children)}},w=(A,G,j,Q)=>{A==null?r(G.el=l(G.children||""),j,Q):G.el=A.el},d=(A,G,j,Q)=>{[A.el,A.anchor]=g(A.children,G,j,Q,A.el,A.anchor)},h=({el:A,anchor:G},j,Q)=>{let tt;for(;A&&A!==G;)tt=m(A),r(A,j,Q),A=tt;r(G,j,Q)},p=({el:A,anchor:G})=>{let j;for(;A&&A!==G;)j=m(A),i(A),A=j;i(G)},b=(A,G,j,Q,tt,Z,rt,ht,st)=>{if(G.type==="svg"?rt="svg":G.type==="math"&&(rt="mathml"),A==null)T(G,j,Q,tt,Z,rt,ht,st);else{const nt=A.el&&A.el._isVueCE?A.el:null;try{nt&&nt._beginPatch(),C(A,G,tt,Z,rt,ht,st)}finally{nt&&nt._endPatch()}}},T=(A,G,j,Q,tt,Z,rt,ht)=>{let st,nt;const{props:dt,shapeFlag:lt,transition:ct,dirs:mt}=A;if(st=A.el=a(A.type,Z,dt&&dt.is,dt),lt&8?c(st,A.children):lt&16&&x(A.children,st,null,Q,tt,$r(A,Z),rt,ht),mt&&dn(A,null,Q,"created"),D(st,A,A.scopeId,rt,Q),dt){for(const St in dt)St!=="value"&&!Fi(St)&&s(st,St,null,dt[St],Z,Q);"value"in dt&&s(st,"value",null,dt.value,Z),(nt=dt.onVnodeBeforeMount)&&Ee(nt,Q,A)}mt&&dn(A,null,Q,"beforeMount");const pt=cu(tt,ct);pt&&ct.beforeEnter(st),r(st,G,j),((nt=dt&&dt.onVnodeMounted)||pt||mt)&&_e(()=>{nt&&Ee(nt,Q,A),pt&&ct.enter(st),mt&&dn(A,null,Q,"mounted")},tt)},D=(A,G,j,Q,tt)=>{if(j&&f(A,j),Q)for(let Z=0;Z<Q.length;Z++)f(A,Q[Z]);if(tt){let Z=tt.subTree;if(G===Z||Ll(Z.type)&&(Z.ssContent===G||Z.ssFallback===G)){const rt=tt.vnode;D(A,rt,rt.scopeId,rt.slotScopeIds,tt.parent)}}},x=(A,G,j,Q,tt,Z,rt,ht,st=0)=>{for(let nt=st;nt<A.length;nt++){const dt=A[nt]=ht?sn(A[nt]):Fe(A[nt]);y(null,dt,G,j,Q,tt,Z,rt,ht)}},C=(A,G,j,Q,tt,Z,rt)=>{const ht=G.el=A.el;let{patchFlag:st,dynamicChildren:nt,dirs:dt}=G;st|=A.patchFlag&16;const lt=A.props||Nt,ct=G.props||Nt;let mt;if(j&&fn(j,!1),(mt=ct.onVnodeBeforeUpdate)&&Ee(mt,j,G,A),dt&&dn(G,A,j,"beforeUpdate"),j&&fn(j,!0),(lt.innerHTML&&ct.innerHTML==null||lt.textContent&&ct.textContent==null)&&c(ht,""),nt?P(A.dynamicChildren,nt,ht,j,Q,$r(G,tt),Z):rt||M(A,G,ht,null,j,Q,$r(G,tt),Z,!1),st>0){if(st&16)k(ht,lt,ct,j,tt);else if(st&2&&lt.class!==ct.class&&s(ht,"class",null,ct.class,tt),st&4&&s(ht,"style",lt.style,ct.style,tt),st&8){const pt=G.dynamicProps;for(let St=0;St<pt.length;St++){const bt=pt[St],At=lt[bt],Et=ct[bt];(Et!==At||bt==="value")&&s(ht,bt,At,Et,tt,j)}}st&1&&A.children!==G.children&&c(ht,G.children)}else!rt&&nt==null&&k(ht,lt,ct,j,tt);((mt=ct.onVnodeUpdated)||dt)&&_e(()=>{mt&&Ee(mt,j,G,A),dt&&dn(G,A,j,"updated")},Q)},P=(A,G,j,Q,tt,Z,rt)=>{for(let ht=0;ht<G.length;ht++){const st=A[ht],nt=G[ht],dt=st.el&&(st.type===me||!Un(st,nt)||st.shapeFlag&198)?_(st.el):j;y(st,nt,dt,null,Q,tt,Z,rt,!0)}},k=(A,G,j,Q,tt)=>{if(G!==j){if(G!==Nt)for(const Z in G)!Fi(Z)&&!(Z in j)&&s(A,Z,G[Z],null,tt,Q);for(const Z in j){if(Fi(Z))continue;const rt=j[Z],ht=G[Z];rt!==ht&&Z!=="value"&&s(A,Z,ht,rt,tt,Q)}"value"in j&&s(A,"value",G.value,j.value,tt)}},U=(A,G,j,Q,tt,Z,rt,ht,st)=>{const nt=G.el=A?A.el:o(""),dt=G.anchor=A?A.anchor:o("");let{patchFlag:lt,dynamicChildren:ct,slotScopeIds:mt}=G;mt&&(ht=ht?ht.concat(mt):mt),A==null?(r(nt,j,Q),r(dt,j,Q),x(G.children||[],j,dt,tt,Z,rt,ht,st)):lt>0&&lt&64&&ct&&A.dynamicChildren&&A.dynamicChildren.length===ct.length?(P(A.dynamicChildren,ct,j,tt,Z,rt,ht),(G.key!=null||tt&&G===tt.subTree)&&Al(A,G,!0)):M(A,G,j,dt,tt,Z,rt,ht,st)},W=(A,G,j,Q,tt,Z,rt,ht,st)=>{G.slotScopeIds=ht,A==null?G.shapeFlag&512?tt.ctx.activate(G,j,Q,rt,st):q(G,j,Q,tt,Z,rt,st):R(A,G,st)},q=(A,G,j,Q,tt,Z,rt)=>{const ht=A.component=vu(A,Q,tt);if(ml(A)&&(ht.ctx.renderer=ut),bu(ht,!1,rt),ht.asyncDep){if(tt&&tt.registerDep(ht,et,rt),!A.el){const st=ht.subTree=Kt(hn);w(null,st,G,j),A.placeholder=st.el}}else et(ht,A,G,j,tt,Z,rt)},R=(A,G,j)=>{const Q=G.component=A.component;if(tu(A,G,j))if(Q.asyncDep&&!Q.asyncResolved){v(Q,G,j);return}else Q.next=G,Q.update();else G.el=A.el,Q.vnode=G},et=(A,G,j,Q,tt,Z,rt)=>{const ht=()=>{if(A.isMounted){let{next:lt,bu:ct,u:mt,parent:pt,vnode:St}=A;{const Wt=Fl(A);if(Wt){lt&&(lt.el=St.el,v(A,lt,rt)),Wt.asyncDep.then(()=>{A.isUnmounted||ht()});return}}let bt=lt,At;fn(A,!1),lt?(lt.el=St.el,v(A,lt,rt)):lt=St,ct&&rr(ct),(At=lt.props&&lt.props.onVnodeBeforeUpdate)&&Ee(At,pt,lt,St),fn(A,!0);const Et=ho(A),Ft=A.subTree;A.subTree=Et,y(Ft,Et,_(Ft.el),O(Ft),A,tt,Z),lt.el=Et.el,bt===null&&eu(A,Et.el),mt&&_e(mt,tt),(At=lt.props&&lt.props.onVnodeUpdated)&&_e(()=>Ee(At,pt,lt,St),tt)}else{let lt;const{el:ct,props:mt}=G,{bm:pt,m:St,parent:bt,root:At,type:Et}=A,Ft=Ni(G);fn(A,!1),pt&&rr(pt),!Ft&&(lt=mt&&mt.onVnodeBeforeMount)&&Ee(lt,bt,G),fn(A,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(Et);const Wt=A.subTree=ho(A);y(null,Wt,j,Q,A,tt,Z),G.el=Wt.el}if(St&&_e(St,tt),!Ft&&(lt=mt&&mt.onVnodeMounted)){const Wt=G;_e(()=>Ee(lt,bt,Wt),tt)}(G.shapeFlag&256||bt&&Ni(bt.vnode)&&bt.vnode.shapeFlag&256)&&A.a&&_e(A.a,tt),A.isMounted=!0,G=j=Q=null}};A.scope.on();const st=A.effect=new Ya(ht);A.scope.off();const nt=A.update=st.run.bind(st),dt=A.job=st.runIfDirty.bind(st);dt.i=A,dt.id=A.uid,st.scheduler=()=>Os(dt),fn(A,!0),nt()},v=(A,G,j)=>{G.component=A;const Q=A.vnode.props;A.vnode=G,A.next=null,iu(A,G.props,Q,j),au(A,G.children,j),Ye(),no(A),je()},M=(A,G,j,Q,tt,Z,rt,ht,st=!1)=>{const nt=A&&A.children,dt=A?A.shapeFlag:0,lt=G.children,{patchFlag:ct,shapeFlag:mt}=G;if(ct>0){if(ct&128){I(nt,lt,j,Q,tt,Z,rt,ht,st);return}else if(ct&256){L(nt,lt,j,Q,tt,Z,rt,ht,st);return}}mt&8?(dt&16&&J(nt,tt,Z),lt!==nt&&c(j,lt)):dt&16?mt&16?I(nt,lt,j,Q,tt,Z,rt,ht,st):J(nt,tt,Z,!0):(dt&8&&c(j,""),mt&16&&x(lt,j,Q,tt,Z,rt,ht,st))},L=(A,G,j,Q,tt,Z,rt,ht,st)=>{A=A||En,G=G||En;const nt=A.length,dt=G.length,lt=Math.min(nt,dt);let ct;for(ct=0;ct<lt;ct++){const mt=G[ct]=st?sn(G[ct]):Fe(G[ct]);y(A[ct],mt,j,null,tt,Z,rt,ht,st)}nt>dt?J(A,tt,Z,!0,!1,lt):x(G,j,Q,tt,Z,rt,ht,st,lt)},I=(A,G,j,Q,tt,Z,rt,ht,st)=>{let nt=0;const dt=G.length;let lt=A.length-1,ct=dt-1;for(;nt<=lt&&nt<=ct;){const mt=A[nt],pt=G[nt]=st?sn(G[nt]):Fe(G[nt]);if(Un(mt,pt))y(mt,pt,j,null,tt,Z,rt,ht,st);else break;nt++}for(;nt<=lt&&nt<=ct;){const mt=A[lt],pt=G[ct]=st?sn(G[ct]):Fe(G[ct]);if(Un(mt,pt))y(mt,pt,j,null,tt,Z,rt,ht,st);else break;lt--,ct--}if(nt>lt){if(nt<=ct){const mt=ct+1,pt=mt<dt?G[mt].el:Q;for(;nt<=ct;)y(null,G[nt]=st?sn(G[nt]):Fe(G[nt]),j,pt,tt,Z,rt,ht,st),nt++}}else if(nt>ct)for(;nt<=lt;)$(A[nt],tt,Z,!0),nt++;else{const mt=nt,pt=nt,St=new Map;for(nt=pt;nt<=ct;nt++){const Ot=G[nt]=st?sn(G[nt]):Fe(G[nt]);Ot.key!=null&&St.set(Ot.key,nt)}let bt,At=0;const Et=ct-pt+1;let Ft=!1,Wt=0;const be=new Array(Et);for(nt=0;nt<Et;nt++)be[nt]=0;for(nt=mt;nt<=lt;nt++){const Ot=A[nt];if(At>=Et){$(Ot,tt,Z,!0);continue}let Zt;if(Ot.key!=null)Zt=St.get(Ot.key);else for(bt=pt;bt<=ct;bt++)if(be[bt-pt]===0&&Un(Ot,G[bt])){Zt=bt;break}Zt===void 0?$(Ot,tt,Z,!0):(be[Zt-pt]=nt+1,Zt>=Wt?Wt=Zt:Ft=!0,y(Ot,G[Zt],j,null,tt,Z,rt,ht,st),At++)}const we=Ft?uu(be):En;for(bt=we.length-1,nt=Et-1;nt>=0;nt--){const Ot=pt+nt,Zt=G[Ot],cn=G[Ot+1],un=Ot+1<dt?cn.el||Il(cn):Q;be[nt]===0?y(null,Zt,j,un,tt,Z,rt,ht,st):Ft&&(bt<0||nt!==we[bt]?H(Zt,j,un,2):bt--)}}},H=(A,G,j,Q,tt=null)=>{const{el:Z,type:rt,transition:ht,children:st,shapeFlag:nt}=A;if(nt&6){H(A.component.subTree,G,j,Q);return}if(nt&128){A.suspense.move(G,j,Q);return}if(nt&64){rt.move(A,G,j,ut);return}if(rt===me){r(Z,G,j);for(let lt=0;lt<st.length;lt++)H(st[lt],G,j,Q);r(A.anchor,G,j);return}if(rt===Jr){h(A,G,j);return}if(Q!==2&&nt&1&&ht)if(Q===0)ht.beforeEnter(Z),r(Z,G,j),_e(()=>ht.enter(Z),tt);else{const{leave:lt,delayLeave:ct,afterLeave:mt}=ht,pt=()=>{A.ctx.isUnmounted?i(Z):r(Z,G,j)},St=()=>{Z._isLeaving&&Z[Rc](!0),lt(Z,()=>{pt(),mt&&mt()})};ct?ct(Z,pt,St):St()}else r(Z,G,j)},$=(A,G,j,Q=!1,tt=!1)=>{const{type:Z,props:rt,ref:ht,children:st,dynamicChildren:nt,shapeFlag:dt,patchFlag:lt,dirs:ct,cacheIndex:mt}=A;if(lt===-2&&(tt=!1),ht!=null&&(Ye(),Oi(ht,null,j,A,!0),je()),mt!=null&&(G.renderCache[mt]=void 0),dt&256){G.ctx.deactivate(A);return}const pt=dt&1&&ct,St=!Ni(A);let bt;if(St&&(bt=rt&&rt.onVnodeBeforeUnmount)&&Ee(bt,G,A),dt&6)ot(A.component,j,Q);else{if(dt&128){A.suspense.unmount(j,Q);return}pt&&dn(A,null,G,"beforeUnmount"),dt&64?A.type.remove(A,G,j,ut,Q):nt&&!nt.hasOnce&&(Z!==me||lt>0&&lt&64)?J(nt,G,j,!1,!0):(Z===me&&lt&384||!tt&&dt&16)&&J(st,G,j),Q&&B(A)}(St&&(bt=rt&&rt.onVnodeUnmounted)||pt)&&_e(()=>{bt&&Ee(bt,G,A),pt&&dn(A,null,G,"unmounted")},j)},B=A=>{const{type:G,el:j,anchor:Q,transition:tt}=A;if(G===me){K(j,Q);return}if(G===Jr){p(A);return}const Z=()=>{i(j),tt&&!tt.persisted&&tt.afterLeave&&tt.afterLeave()};if(A.shapeFlag&1&&tt&&!tt.persisted){const{leave:rt,delayLeave:ht}=tt,st=()=>rt(j,Z);ht?ht(A.el,Z,st):st()}else Z()},K=(A,G)=>{let j;for(;A!==G;)j=m(A),i(A),A=j;i(G)},ot=(A,G,j)=>{const{bum:Q,scope:tt,job:Z,subTree:rt,um:ht,m:st,a:nt}=A;fo(st),fo(nt),Q&&rr(Q),tt.stop(),Z&&(Z.flags|=8,$(rt,A,G,j)),ht&&_e(ht,G),_e(()=>{A.isUnmounted=!0},G)},J=(A,G,j,Q=!1,tt=!1,Z=0)=>{for(let rt=Z;rt<A.length;rt++)$(A[rt],G,j,Q,tt)},O=A=>{if(A.shapeFlag&6)return O(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const G=m(A.anchor||A.el),j=G&&G[Tc];return j?m(j):G};let X=!1;const at=(A,G,j)=>{let Q;A==null?G._vnode&&($(G._vnode,null,null,!0),Q=G._vnode.component):y(G._vnode||null,A,G,null,null,null,j),G._vnode=A,X||(X=!0,no(Q),hl(),X=!1)},ut={p:y,um:$,m:H,r:B,mt:q,mc:x,pc:M,pbc:P,n:O,o:t};return{render:at,hydrate:void 0,createApp:Xc(at)}}function $r({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function fn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function cu(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Al(t,e,n=!1){const r=t.children,i=e.children;if(vt(r)&&vt(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=sn(i[s]),o.el=a.el),!n&&o.patchFlag!==-2&&Al(a,o)),o.type===Ir&&(o.patchFlag!==-1?o.el=a.el:o.__elIndex=s+(t.type===me?1:0)),o.type===hn&&!o.el&&(o.el=a.el)}}function uu(t){const e=t.slice(),n=[0];let r,i,s,a,o;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,t[n[o]]<u?s=o+1:a=o;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}function Fl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Fl(e)}function fo(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Il(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Il(e.subTree):null}const Ll=t=>t.__isSuspense;function du(t,e){e&&e.pendingBranch?vt(t)?e.effects.push(...t):e.effects.push(t):Sc(t)}const me=Symbol.for("v-fgt"),Ir=Symbol.for("v-txt"),hn=Symbol.for("v-cmt"),Jr=Symbol.for("v-stc"),Di=[];let ve=null;function fe(t=!1){Di.push(ve=t?null:[])}function fu(){Di.pop(),ve=Di[Di.length-1]||null}let Bi=1;function gr(t,e=!1){Bi+=t,t<0&&ve&&e&&(ve.hasOnce=!0)}function Ol(t){return t.dynamicChildren=Bi>0?ve||En:null,fu(),Bi>0&&ve&&ve.push(t),t}function Ue(t,e,n,r,i,s){return Ol(V(t,e,n,r,i,s,!0))}function Ai(t,e,n,r,i){return Ol(Kt(t,e,n,r,i,!0))}function pr(t){return t?t.__v_isVNode===!0:!1}function Un(t,e){return t.type===e.type&&t.key===e.key}const Nl=({key:t})=>t??null,or=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xt(t)||$t(t)||xt(t)?{i:ye,r:t,k:e,f:!!n}:t:null);function V(t,e=null,n=null,r=0,i=null,s=t===me?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Nl(e),ref:e&&or(e),scopeId:ul,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ye};return o?(Bs(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Xt(n)?8:16),Bi>0&&!a&&ve&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ve.push(l),l}const Kt=gu;function gu(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Hc)&&(t=hn),pr(t)){const o=Nn(t,e,!0);return n&&Bs(o,n),Bi>0&&!s&&ve&&(o.shapeFlag&6?ve[ve.indexOf(t)]=o:ve.push(o)),o.patchFlag=-2,o}if(Mu(t)&&(t=t.__vccOpts),e){e=pu(e);let{class:o,style:l}=e;o&&!Xt(o)&&(e.class=Se(o)),kt(l)&&(Ls(l)&&!vt(l)&&(l=ee({},l)),e.style=Ts(l))}const a=Xt(t)?1:Ll(t)?128:Pc(t)?64:kt(t)?4:xt(t)?2:0;return V(t,e,n,r,i,a,s,!0)}function pu(t){return t?Ls(t)||wl(t)?ee({},t):t:null}function Nn(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:l}=t,u=e?mu(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Nl(u),ref:e&&e.ref?n&&s?vt(s)?s.concat(or(e)):[s,or(e)]:or(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==me?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nn(t.ssContent),ssFallback:t.ssFallback&&Nn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ns(c,l.clone(c)),c}function Ut(t=" ",e=0){return Kt(Ir,null,t,e)}function Mn(t="",e=!1){return e?(fe(),Ai(hn,null,t)):Kt(hn,null,t)}function Fe(t){return t==null||typeof t=="boolean"?Kt(hn):vt(t)?Kt(me,null,t.slice()):pr(t)?sn(t):Kt(Ir,null,String(t))}function sn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nn(t)}function Bs(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(vt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Bs(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!wl(e)?e._ctx=ye:i===3&&ye&&(ye.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else xt(e)?(e={default:e,_ctx:ye},n=32):(e=String(e),r&64?(n=16,e=[Ut(e)]):n=8);t.children=e,t.shapeFlag|=n}function mu(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Se([e.class,r.class]));else if(i==="style")e.style=Ts([e.style,r.style]);else if(br(i)){const s=e[i],a=r[i];a&&s!==a&&!(vt(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Ee(t,e,n,r=null){Ne(t,e,7,[n,r])}const _u=bl();let yu=0;function vu(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||_u,s={uid:yu++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tl(r,i),emitsOptions:Sl(r,i),emit:null,emitted:null,propsDefaults:Nt,inheritAttrs:r.inheritAttrs,ctx:Nt,data:Nt,props:Nt,attrs:Nt,slots:Nt,refs:Nt,setupState:Nt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=$c.bind(null,s),t.ce&&t.ce(s),s}let oe=null;const Vs=()=>oe||ye;let mr,vs;{const t=Mr(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};mr=e("__VUE_INSTANCE_SETTERS__",n=>oe=n),vs=e("__VUE_SSR_SETTERS__",n=>Vi=n)}const qi=t=>{const e=oe;return mr(t),t.scope.on(),()=>{t.scope.off(),mr(e)}},go=()=>{oe&&oe.scope.off(),mr(null)};function kl(t){return t.vnode.shapeFlag&4}let Vi=!1;function bu(t,e=!1,n=!1){e&&vs(e);const{props:r,children:i}=t.vnode,s=kl(t);nu(t,r,s,e),ou(t,i,n||e);const a=s?Su(t,e):void 0;return e&&vs(!1),a}function Su(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Bc);const{setup:r}=n;if(r){Ye();const i=t.setupContext=r.length>1?Cu(t):null,s=qi(t),a=zi(r,t,0,[t.props,i]),o=Ha(a);if(je(),s(),(o||t.sp)&&!Ni(t)&&pl(t),o){if(a.then(go,go),e)return a.then(l=>{po(t,l)}).catch(l=>{Rr(l,t,0)});t.asyncDep=a}else po(t,a)}else Dl(t)}function po(t,e,n){xt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:kt(e)&&(t.setupState=ol(e)),Dl(t)}function Dl(t,e,n){const r=t.type;t.render||(t.render=r.render||Le);{const i=qi(t);Ye();try{Vc(t)}finally{je(),i()}}}const xu={get(t,e){return se(t,"get",""),t[e]}};function Cu(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,xu),slots:t.slots,emit:t.emit,expose:e}}function Lr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ol(uc(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ki)return ki[n](t)},has(e,n){return n in e||n in ki}})):t.proxy}function wu(t,e=!0){return xt(t)?t.displayName||t.name:t.name||e&&t.__name}function Mu(t){return xt(t)&&"__vccOpts"in t}const te=(t,e)=>mc(t,e,Vi);function Gl(t,e,n){try{gr(-1);const r=arguments.length;return r===2?kt(e)&&!vt(e)?pr(e)?Kt(t,null,[e]):Kt(t,e):Kt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&pr(n)&&(n=[n]),Kt(t,e,n))}finally{gr(1)}}const Tu="3.5.27";let bs;const mo=typeof window<"u"&&window.trustedTypes;if(mo)try{bs=mo.createPolicy("vue",{createHTML:t=>t})}catch{}const Hl=bs?t=>bs.createHTML(t):t=>t,Pu="http://www.w3.org/2000/svg",Ru="http://www.w3.org/1998/Math/MathML",We=typeof document<"u"?document:null,_o=We&&We.createElement("template"),Eu={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?We.createElementNS(Pu,t):e==="mathml"?We.createElementNS(Ru,t):n?We.createElement(t,{is:n}):We.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>We.createTextNode(t),createComment:t=>We.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>We.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{_o.innerHTML=Hl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const o=_o.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Au=Symbol("_vtc");function Fu(t,e,n){const r=t[Au];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const yo=Symbol("_vod"),Iu=Symbol("_vsh"),Lu=Symbol(""),Ou=/(?:^|;)\s*display\s*:/;function Nu(t,e,n){const r=t.style,i=Xt(n);let s=!1;if(n&&!i){if(e)if(Xt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&ar(r,o,"")}else for(const a in e)n[a]==null&&ar(r,a,"");for(const a in n)a==="display"&&(s=!0),ar(r,a,n[a])}else if(i){if(e!==n){const a=r[Lu];a&&(n+=";"+a),r.cssText=n,s=Ou.test(n)}}else e&&t.removeAttribute("style");yo in t&&(t[yo]=s?r.display:"",t[Iu]&&(r.display="none"))}const vo=/\s*!important$/;function ar(t,e,n){if(vt(n))n.forEach(r=>ar(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ku(t,e);vo.test(n)?t.setProperty(vn(r),n.replace(vo,""),"important"):t[r]=n}}const bo=["Webkit","Moz","ms"],Qr={};function ku(t,e){const n=Qr[e];if(n)return n;let r=Ce(e);if(r!=="filter"&&r in t)return Qr[e]=r;r=Cr(r);for(let i=0;i<bo.length;i++){const s=bo[i]+r;if(s in t)return Qr[e]=s}return e}const So="http://www.w3.org/1999/xlink";function xo(t,e,n,r,i,s=Bh(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(So,e.slice(6,e.length)):t.setAttributeNS(So,e,n):n==null||s&&!Wa(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Oe(n)?String(n):n)}function Co(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hl(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=Wa(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(i||e)}function mn(t,e,n,r){t.addEventListener(e,n,r)}function Du(t,e,n,r){t.removeEventListener(e,n,r)}const wo=Symbol("_vei");function Gu(t,e,n,r,i=null){const s=t[wo]||(t[wo]={}),a=s[e];if(r&&a)a.value=r;else{const[o,l]=Hu(e);if(r){const u=s[e]=Vu(r,i);mn(t,o,u,l)}else a&&(Du(t,o,a,l),s[e]=void 0)}}const Mo=/(?:Once|Passive|Capture)$/;function Hu(t){let e;if(Mo.test(t)){e={};let r;for(;r=t.match(Mo);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):vn(t.slice(2)),e]}let Zr=0;const Uu=Promise.resolve(),Bu=()=>Zr||(Uu.then(()=>Zr=0),Zr=Date.now());function Vu(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ne(Wu(r,n.value),e,5,[r])};return n.value=t,n.attached=Bu(),n}function Wu(t,e){if(vt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const To=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,zu=(t,e,n,r,i,s)=>{const a=i==="svg";e==="class"?Fu(t,r,a):e==="style"?Nu(t,n,r):br(e)?Cs(e)||Gu(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):qu(t,e,r,a))?(Co(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&xo(t,e,r,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xt(r))?Co(t,Ce(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),xo(t,e,r,a))};function qu(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&To(e)&&xt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return To(e)&&Xt(n)?!1:e in t}const _r=t=>{const e=t.props["onUpdate:modelValue"]||!1;return vt(e)?n=>rr(e,n):e};function Yu(t){t.target.composing=!0}function Po(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ln=Symbol("_assign");function Ro(t,e,n){return e&&(t=t.trim()),n&&(t=wr(t)),t}const ue={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Ln]=_r(i);const s=r||i.props&&i.props.type==="number";mn(t,e?"change":"input",a=>{a.target.composing||t[Ln](Ro(t.value,n,s))}),(n||s)&&mn(t,"change",()=>{t.value=Ro(t.value,n,s)}),e||(mn(t,"compositionstart",Yu),mn(t,"compositionend",Po),mn(t,"change",Po))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},a){if(t[Ln]=_r(a),t.composing)return;const o=(s||t.type==="number")&&!/^0\d/.test(t.value)?wr(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},ju={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Sr(e);mn(t,"change",()=>{const s=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?wr(yr(a)):yr(a));t[Ln](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,zt(()=>{t._assigning=!1})}),t[Ln]=_r(r)},mounted(t,{value:e}){Eo(t,e)},beforeUpdate(t,e,n){t[Ln]=_r(n)},updated(t,{value:e}){t._assigning||Eo(t,e)}};function Eo(t,e){const n=t.multiple,r=vt(e);if(!(n&&!r&&!Sr(e))){for(let i=0,s=t.options.length;i<s;i++){const a=t.options[i],o=yr(a);if(n)if(r){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(o)):a.selected=Wh(e,o)>-1}else a.selected=e.has(o);else if(Tr(yr(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function yr(t){return"_value"in t?t._value:t.value}const Xu=["ctrl","shift","alt","meta"],Ku={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Xu.some(n=>t[`${n}Key`]&&!e.includes(n))},$u=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let a=0;a<e.length;a++){const o=Ku[e[a]];if(o&&o(i,e))return}return t(i,...s)}))},Ju=ee({patchProp:zu},Eu);let Ao;function Qu(){return Ao||(Ao=lu(Ju))}const Zu=((...t)=>{const e=Qu().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=ed(r);if(!i)return;const s=e._component;!xt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,td(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function td(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ed(t){return Xt(t)?document.querySelector(t):t}var Fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lr={exports:{}},Bn={},ts={},es={},Io;function wt(){return Io||(Io=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Fo<"u"?Fo:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return t.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var i;return(i=t.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(i){t.glob.Konva=i}};const r=i=>{t.Konva[i.prototype.getClassName()]=i};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(es)),es}var ns={},Lo;function Bt(){return Lo||(Lo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=wt();class n{constructor(p=[1,0,0,1,0,0]){this.dirty=!1,this.m=p&&p.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(p){p.m[0]=this.m[0],p.m[1]=this.m[1],p.m[2]=this.m[2],p.m[3]=this.m[3],p.m[4]=this.m[4],p.m[5]=this.m[5]}point(p){const b=this.m;return{x:b[0]*p.x+b[2]*p.y+b[4],y:b[1]*p.x+b[3]*p.y+b[5]}}translate(p,b){return this.m[4]+=this.m[0]*p+this.m[2]*b,this.m[5]+=this.m[1]*p+this.m[3]*b,this}scale(p,b){return this.m[0]*=p,this.m[1]*=p,this.m[2]*=b,this.m[3]*=b,this}rotate(p){const b=Math.cos(p),T=Math.sin(p),D=this.m[0]*b+this.m[2]*T,x=this.m[1]*b+this.m[3]*T,C=this.m[0]*-T+this.m[2]*b,P=this.m[1]*-T+this.m[3]*b;return this.m[0]=D,this.m[1]=x,this.m[2]=C,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(p,b){const T=this.m[0]+this.m[2]*b,D=this.m[1]+this.m[3]*b,x=this.m[2]+this.m[0]*p,C=this.m[3]+this.m[1]*p;return this.m[0]=T,this.m[1]=D,this.m[2]=x,this.m[3]=C,this}multiply(p){const b=this.m[0]*p.m[0]+this.m[2]*p.m[1],T=this.m[1]*p.m[0]+this.m[3]*p.m[1],D=this.m[0]*p.m[2]+this.m[2]*p.m[3],x=this.m[1]*p.m[2]+this.m[3]*p.m[3],C=this.m[0]*p.m[4]+this.m[2]*p.m[5]+this.m[4],P=this.m[1]*p.m[4]+this.m[3]*p.m[5]+this.m[5];return this.m[0]=b,this.m[1]=T,this.m[2]=D,this.m[3]=x,this.m[4]=C,this.m[5]=P,this}invert(){const p=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*p,T=-this.m[1]*p,D=-this.m[2]*p,x=this.m[0]*p,C=p*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=p*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=T,this.m[2]=D,this.m[3]=x,this.m[4]=C,this.m[5]=P,this}getMatrix(){return this.m}decompose(){const p=this.m[0],b=this.m[1],T=this.m[2],D=this.m[3],x=this.m[4],C=this.m[5],P=p*D-b*T,k={x,y:C,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(p!=0||b!=0){const U=Math.sqrt(p*p+b*b);k.rotation=b>0?Math.acos(p/U):-Math.acos(p/U),k.scaleX=U,k.scaleY=P/U,k.skewX=(p*T+b*D)/P,k.skewY=0}else if(T!=0||D!=0){const U=Math.sqrt(T*T+D*D);k.rotation=Math.PI/2-(D>0?Math.acos(-T/U):-Math.acos(T/U)),k.scaleX=P/U,k.scaleY=U,k.skewX=0,k.skewY=(p*T+b*D)/P}return k.rotation=t.Util._getRotation(k.rotation),k}}t.Transform=n;const r="[object Array]",i="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",c="",_="0",m="Konva warning: ",f="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let w=[];const d=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(h){setTimeout(h,60)};t.Util={_isElement(h){return!!(h&&h.nodeType==1)},_isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject(h){return!!h&&h.constructor===Object},_isArray(h){return Object.prototype.toString.call(h)===r},_isNumber(h){return Object.prototype.toString.call(h)===i&&!isNaN(h)&&isFinite(h)},_isString(h){return Object.prototype.toString.call(h)===s},_isBoolean(h){return Object.prototype.toString.call(h)===a},isObject(h){return h instanceof Object},isValidSelector(h){if(typeof h!="string")return!1;const p=h[0];return p==="#"||p==="."||p===p.toUpperCase()},_sign(h){return h===0||h>0?1:-1},requestAnimFrame(h){w.push(h),w.length===1&&d(function(){const p=w;w=[],p.forEach(function(b){b()})})},createCanvasElement(){const h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement(){return document.createElement("img")},_isInDocument(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_urlToImage(h,p){const b=t.Util.createImageElement();b.onload=function(){p(b)},b.src=h},_rgbToHex(h,p,b){return((1<<24)+(h<<16)+(p<<8)+b).toString(16).slice(1)},_hexToRgb(h){h=h.replace(u,c);const p=parseInt(h,16);return{r:p>>16&255,g:p>>8&255,b:p&255}},getRandomColor(){let h=(Math.random()*16777215<<0).toString(16);for(;h.length<6;)h=_+h;return u+h},getRGB(h){let p;return h in y?(p=y[h],{r:p[0],g:p[1],b:p[2]}):h[0]===u?this._hexToRgb(h.substring(1)):h.substr(0,4)===g?(p=S.exec(h.replace(/ /g,"")),{r:parseInt(p[1],10),g:parseInt(p[2],10),b:parseInt(p[3],10)}):{r:0,g:0,b:0}},colorToRGBA(h){return h=h||"black",t.Util._namedColorToRBA(h)||t.Util._hex3ColorToRGBA(h)||t.Util._hex4ColorToRGBA(h)||t.Util._hex6ColorToRGBA(h)||t.Util._hex8ColorToRGBA(h)||t.Util._rgbColorToRGBA(h)||t.Util._rgbaColorToRGBA(h)||t.Util._hslColorToRGBA(h)},_namedColorToRBA(h){const p=y[h.toLowerCase()];return p?{r:p[0],g:p[1],b:p[2],a:1}:null},_rgbColorToRGBA(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];const p=h.split(/ *, */).map(Number);return{r:p[0],g:p[1],b:p[2],a:1}}},_rgbaColorToRGBA(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];const p=h.split(/ *, */).map((b,T)=>b.slice(-1)==="%"?T===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:p[0],g:p[1],b:p[2],a:p[3]}}},_hex8ColorToRGBA(h){if(h[0]==="#"&&h.length===9)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:parseInt(h.slice(7,9),16)/255}},_hex6ColorToRGBA(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex4ColorToRGBA(h){if(h[0]==="#"&&h.length===5)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:parseInt(h[4]+h[4],16)/255}},_hex3ColorToRGBA(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){const[p,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h),T=Number(b[0])/360,D=Number(b[1])/100,x=Number(b[2])/100;let C,P,k;if(D===0)return k=x*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};x<.5?C=x*(1+D):C=x+D-x*D;const U=2*x-C,W=[0,0,0];for(let q=0;q<3;q++)P=T+1/3*-(q-1),P<0&&P++,P>1&&P--,6*P<1?k=U+(C-U)*6*P:2*P<1?k=C:3*P<2?k=U+(C-U)*(2/3-P)*6:k=U,W[q]=k*255;return{r:Math.round(W[0]),g:Math.round(W[1]),b:Math.round(W[2]),a:1}}},haveIntersection(h,p){return!(p.x>h.x+h.width||p.x+p.width<h.x||p.y>h.y+h.height||p.y+p.height<h.y)},cloneObject(h){const p={};for(const b in h)this._isPlainObject(h[b])?p[b]=this.cloneObject(h[b]):this._isArray(h[b])?p[b]=this.cloneArray(h[b]):p[b]=h[b];return p},cloneArray(h){return h.slice(0)},degToRad(h){return h*o},radToDeg(h){return h*l},_degToRad(h){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(h)},_radToDeg(h){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(h)},_getRotation(h){return e.Konva.angleDeg?t.Util.radToDeg(h):h},_capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw(h){throw new Error(f+h)},error(h){console.error(f+h)},warn(h){e.Konva.showWarnings&&console.warn(m+h)},each(h,p){for(const b in h)p(b,h[b])},_inRange(h,p,b){return p<=h&&h<b},_getProjectionToSegment(h,p,b,T,D,x){let C,P,k;const U=(h-b)*(h-b)+(p-T)*(p-T);if(U==0)C=h,P=p,k=(D-b)*(D-b)+(x-T)*(x-T);else{const W=((D-h)*(b-h)+(x-p)*(T-p))/U;W<0?(C=h,P=p,k=(h-D)*(h-D)+(p-x)*(p-x)):W>1?(C=b,P=T,k=(b-D)*(b-D)+(T-x)*(T-x)):(C=h+W*(b-h),P=p+W*(T-p),k=(C-D)*(C-D)+(P-x)*(P-x))}return[C,P,k]},_getProjectionToLine(h,p,b){const T=t.Util.cloneObject(h);let D=Number.MAX_VALUE;return p.forEach(function(x,C){if(!b&&C===p.length-1)return;const P=p[(C+1)%p.length],k=t.Util._getProjectionToSegment(x.x,x.y,P.x,P.y,h.x,h.y),U=k[0],W=k[1],q=k[2];q<D&&(T.x=U,T.y=W,D=q)}),T},_prepareArrayForTween(h,p,b){const T=[],D=[];if(h.length>p.length){const C=p;p=h,h=C}for(let C=0;C<h.length;C+=2)T.push({x:h[C],y:h[C+1]});for(let C=0;C<p.length;C+=2)D.push({x:p[C],y:p[C+1]});const x=[];return D.forEach(function(C){const P=t.Util._getProjectionToLine(C,T,b);x.push(P.x),x.push(P.y)}),x},_prepareToStringify(h){let p;h.visitedByCircularReferenceRemoval=!0;for(const b in h)if(h.hasOwnProperty(b)&&h[b]&&typeof h[b]=="object"){if(p=Object.getOwnPropertyDescriptor(h,b),h[b].visitedByCircularReferenceRemoval||t.Util._isElement(h[b]))if(p.configurable)delete h[b];else return null;else if(t.Util._prepareToStringify(h[b])===null)if(p.configurable)delete h[b];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign(h,p){for(const b in p)h[b]=p[b];return h},_getFirstPointerId(h){return h.touches?h.changedTouches[0].identifier:h.pointerId||999},releaseCanvas(...h){e.Konva.releaseCanvasOnDestroy&&h.forEach(p=>{p.width=0,p.height=0})},drawRoundedRectPath(h,p,b,T){let D=0,x=0,C=0,P=0;typeof T=="number"?D=x=C=P=Math.min(T,p/2,b/2):(D=Math.min(T[0]||0,p/2,b/2),x=Math.min(T[1]||0,p/2,b/2),P=Math.min(T[2]||0,p/2,b/2),C=Math.min(T[3]||0,p/2,b/2)),h.moveTo(D,0),h.lineTo(p-x,0),h.arc(p-x,x,x,Math.PI*3/2,0,!1),h.lineTo(p,b-P),h.arc(p-P,b-P,P,0,Math.PI/2,!1),h.lineTo(C,b),h.arc(C,b-C,C,Math.PI/2,Math.PI,!1),h.lineTo(0,D),h.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}})(ns)),ns}var Vn={},Be={},Ve={},Oo;function Ul(){if(Oo)return Ve;Oo=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.HitContext=Ve.SceneContext=Ve.Context=void 0;const t=Bt(),e=wt();function n(w){const d=[],h=w.length,p=t.Util;for(let b=0;b<h;b++){let T=w[b];p._isNumber(T)?T=Math.round(T*1e3)/1e3:p._isString(T)||(T=T+""),d.push(T)}return d}const r=",",i="(",s=")",a="([",o="])",l=";",u="()",c="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100;let g=class{constructor(d){this.canvas=d,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(d){d.fillEnabled()&&this._fill(d)}_fill(d){}strokeShape(d){d.hasStroke()&&this._stroke(d)}_stroke(d){}fillStrokeShape(d){d.attrs.fillAfterStrokeEnabled?(this.strokeShape(d),this.fillShape(d)):(this.fillShape(d),this.strokeShape(d))}getTrace(d,h){let p=this.traceArr,b=p.length,T="",D,x,C,P;for(D=0;D<b;D++)x=p[D],C=x.method,C?(P=x.args,T+=C,d?T+=u:t.Util._isArray(P[0])?T+=a+P.join(r)+o:(h&&(P=P.map(k=>typeof k=="number"?Math.floor(k):k)),T+=i+P.join(r)+s)):(T+=x.property,d||(T+=c+x.val)),T+=l;return T}clearTrace(){this.traceArr=[]}_trace(d){let h=this.traceArr,p;h.push(d),p=h.length,p>=f&&h.shift()}reset(){const d=this.getCanvas().getPixelRatio();this.setTransform(1*d,0,0,1*d,0,0)}getCanvas(){return this.canvas}clear(d){const h=this.getCanvas();d?this.clearRect(d.x||0,d.y||0,d.width||0,d.height||0):this.clearRect(0,0,h.getWidth()/h.pixelRatio,h.getHeight()/h.pixelRatio)}_applyLineCap(d){const h=d.attrs.lineCap;h&&this.setAttr("lineCap",h)}_applyOpacity(d){const h=d.getAbsoluteOpacity();h!==1&&this.setAttr("globalAlpha",h)}_applyLineJoin(d){const h=d.attrs.lineJoin;h&&this.setAttr("lineJoin",h)}setAttr(d,h){this._context[d]=h}arc(d,h,p,b,T,D){this._context.arc(d,h,p,b,T,D)}arcTo(d,h,p,b,T){this._context.arcTo(d,h,p,b,T)}beginPath(){this._context.beginPath()}bezierCurveTo(d,h,p,b,T,D){this._context.bezierCurveTo(d,h,p,b,T,D)}clearRect(d,h,p,b){this._context.clearRect(d,h,p,b)}clip(...d){this._context.clip.apply(this._context,d)}closePath(){this._context.closePath()}createImageData(d,h){const p=arguments;if(p.length===2)return this._context.createImageData(d,h);if(p.length===1)return this._context.createImageData(d)}createLinearGradient(d,h,p,b){return this._context.createLinearGradient(d,h,p,b)}createPattern(d,h){return this._context.createPattern(d,h)}createRadialGradient(d,h,p,b,T,D){return this._context.createRadialGradient(d,h,p,b,T,D)}drawImage(d,h,p,b,T,D,x,C,P){const k=arguments,U=this._context;k.length===3?U.drawImage(d,h,p):k.length===5?U.drawImage(d,h,p,b,T):k.length===9&&U.drawImage(d,h,p,b,T,D,x,C,P)}ellipse(d,h,p,b,T,D,x,C){this._context.ellipse(d,h,p,b,T,D,x,C)}isPointInPath(d,h,p,b){return p?this._context.isPointInPath(p,d,h,b):this._context.isPointInPath(d,h,b)}fill(...d){this._context.fill.apply(this._context,d)}fillRect(d,h,p,b){this._context.fillRect(d,h,p,b)}strokeRect(d,h,p,b){this._context.strokeRect(d,h,p,b)}fillText(d,h,p,b){b?this._context.fillText(d,h,p,b):this._context.fillText(d,h,p)}measureText(d){return this._context.measureText(d)}getImageData(d,h,p,b){return this._context.getImageData(d,h,p,b)}lineTo(d,h){this._context.lineTo(d,h)}moveTo(d,h){this._context.moveTo(d,h)}rect(d,h,p,b){this._context.rect(d,h,p,b)}roundRect(d,h,p,b,T){this._context.roundRect(d,h,p,b,T)}putImageData(d,h,p){this._context.putImageData(d,h,p)}quadraticCurveTo(d,h,p,b){this._context.quadraticCurveTo(d,h,p,b)}restore(){this._context.restore()}rotate(d){this._context.rotate(d)}save(){this._context.save()}scale(d,h){this._context.scale(d,h)}setLineDash(d){this._context.setLineDash?this._context.setLineDash(d):"mozDash"in this._context?this._context.mozDash=d:"webkitLineDash"in this._context&&(this._context.webkitLineDash=d)}getLineDash(){return this._context.getLineDash()}setTransform(d,h,p,b,T,D){this._context.setTransform(d,h,p,b,T,D)}stroke(d){d?this._context.stroke(d):this._context.stroke()}strokeText(d,h,p,b){this._context.strokeText(d,h,p,b)}transform(d,h,p,b,T,D){this._context.transform(d,h,p,b,T,D)}translate(d,h){this._context.translate(d,h)}_enableTrace(){let d=this,h=_.length,p=this.setAttr,b,T;const D=function(x){let C=d[x],P;d[x]=function(){return T=n(Array.prototype.slice.call(arguments,0)),P=C.apply(d,arguments),d._trace({method:x,args:T}),P}};for(b=0;b<h;b++)D(_[b]);d.setAttr=function(){p.apply(d,arguments);const x=arguments[0];let C=arguments[1];(x==="shadowOffsetX"||x==="shadowOffsetY"||x==="shadowBlur")&&(C=C/this.canvas.getPixelRatio()),d._trace({property:x,val:C})}}_applyGlobalCompositeOperation(d){const h=d.attrs.globalCompositeOperation;!h||h==="source-over"||this.setAttr("globalCompositeOperation",h)}};Ve.Context=g,m.forEach(function(w){Object.defineProperty(g.prototype,w,{get(){return this._context[w]},set(d){this._context[w]=d}})});class y extends g{constructor(d,{willReadFrequently:h=!1}={}){super(d),this._context=d._canvas.getContext("2d",{willReadFrequently:h})}_fillColor(d){const h=d.fill();this.setAttr("fillStyle",h),d._fillFunc(this)}_fillPattern(d){this.setAttr("fillStyle",d._getFillPattern()),d._fillFunc(this)}_fillLinearGradient(d){const h=d._getLinearGradient();h&&(this.setAttr("fillStyle",h),d._fillFunc(this))}_fillRadialGradient(d){const h=d._getRadialGradient();h&&(this.setAttr("fillStyle",h),d._fillFunc(this))}_fill(d){const h=d.fill(),p=d.getFillPriority();if(h&&p==="color"){this._fillColor(d);return}const b=d.getFillPatternImage();if(b&&p==="pattern"){this._fillPattern(d);return}const T=d.getFillLinearGradientColorStops();if(T&&p==="linear-gradient"){this._fillLinearGradient(d);return}const D=d.getFillRadialGradientColorStops();if(D&&p==="radial-gradient"){this._fillRadialGradient(d);return}h?this._fillColor(d):b?this._fillPattern(d):T?this._fillLinearGradient(d):D&&this._fillRadialGradient(d)}_strokeLinearGradient(d){const h=d.getStrokeLinearGradientStartPoint(),p=d.getStrokeLinearGradientEndPoint(),b=d.getStrokeLinearGradientColorStops(),T=this.createLinearGradient(h.x,h.y,p.x,p.y);if(b){for(let D=0;D<b.length;D+=2)T.addColorStop(b[D],b[D+1]);this.setAttr("strokeStyle",T)}}_stroke(d){const h=d.dash(),p=d.getStrokeScaleEnabled();if(d.hasStroke()){if(!p){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(d),h&&d.dashEnabled()&&(this.setLineDash(h),this.setAttr("lineDashOffset",d.dashOffset())),this.setAttr("lineWidth",d.strokeWidth()),d.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),d.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(d):this.setAttr("strokeStyle",d.stroke()),d._strokeFunc(this),p||this.restore()}}_applyShadow(d){var h,p,b;const T=(h=d.getShadowRGBA())!==null&&h!==void 0?h:"black",D=(p=d.getShadowBlur())!==null&&p!==void 0?p:5,x=(b=d.getShadowOffset())!==null&&b!==void 0?b:{x:0,y:0},C=d.getAbsoluteScale(),P=this.canvas.getPixelRatio(),k=C.x*P,U=C.y*P;this.setAttr("shadowColor",T),this.setAttr("shadowBlur",D*Math.min(Math.abs(k),Math.abs(U))),this.setAttr("shadowOffsetX",x.x*k),this.setAttr("shadowOffsetY",x.y*U)}}Ve.SceneContext=y;class S extends g{constructor(d){super(d),this._context=d._canvas.getContext("2d",{willReadFrequently:!0})}_fill(d){this.save(),this.setAttr("fillStyle",d.colorKey),d._fillFuncHit(this),this.restore()}strokeShape(d){d.hasHitStroke()&&this._stroke(d)}_stroke(d){if(d.hasHitStroke()){const h=d.getStrokeScaleEnabled();if(!h){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(d);const p=d.hitStrokeWidth(),b=p==="auto"?d.strokeWidth():p;this.setAttr("lineWidth",b),this.setAttr("strokeStyle",d.colorKey),d._strokeFuncHit(this),h||this.restore()}}}return Ve.HitContext=S,Ve}var No;function Or(){if(No)return Be;No=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.HitCanvas=Be.SceneCanvas=Be.Canvas=void 0;const t=Bt(),e=Ul(),n=wt();let r;function i(){if(r)return r;const l=t.Util.createCanvasElement(),u=l.getContext("2d");return r=(function(){const c=n.Konva._global.devicePixelRatio||1,_=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return c/_})(),t.Util.releaseCanvas(l),r}let s=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(u||{}).pixelRatio||n.Konva.pixelRatio||i();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const c=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/c,this.getHeight()/c)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,c){this.setWidth(u||0),this.setHeight(c||0)}toDataURL(u,c){try{return this._canvas.toDataURL(u,c)}catch{try{return this._canvas.toDataURL()}catch(m){return t.Util.error("Unable to get data URL. "+m.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Be.Canvas=s;class a extends s{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new e.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Be.SceneCanvas=a;class o extends s{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(u.width,u.height)}}return Be.HitCanvas=o,Be}var is={},ko;function Ws(){return ko||(ko=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=wt(),n=Bt();t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];t.DD._dragElements.forEach((s,a)=>{const{node:o}=s,l=o.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(c=>c.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){const c=o.dragDistance();if(Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y))<c||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,s),i.push(o)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];t.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&i.indexOf(u)===-1&&i.push(u)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(is)),is}var rs={},de={},Do;function Pt(){if(Do)return de;Do=1,Object.defineProperty(de,"__esModule",{value:!0}),de.RGBComponent=r,de.alphaComponent=i,de.getNumberValidator=s,de.getNumberOrArrayOfNumbersValidator=a,de.getNumberOrAutoValidator=o,de.getStringValidator=l,de.getStringOrGradientValidator=u,de.getFunctionValidator=c,de.getNumberArrayValidator=_,de.getBooleanValidator=m,de.getComponentValidator=f;const t=wt(),e=Bt();function n(g){return e.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||e.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function r(g){return g>255?255:g<0?0:Math.round(g)}function i(g){return g>1?1:g<1e-4?1e-4:g}function s(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isNumber(g)||e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),g}}function a(g){if(t.Konva.isUnminified)return function(y,S){let w=e.Util._isNumber(y),d=e.Util._isArray(y)&&y.length==g;return!w&&!d&&e.Util.warn(n(y)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+g+")"),y}}function o(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isNumber(g)||g==="auto"||e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),g}}function l(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isString(g)||e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),g}}function u(){if(t.Konva.isUnminified)return function(g,y){const S=e.Util._isString(g),w=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return S||w||e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),g}}function c(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isFunction(g)||e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),g}}function _(){if(t.Konva.isUnminified)return function(g,y){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&g instanceof S||(e.Util._isArray(g)?g.forEach(function(w){e.Util._isNumber(w)||e.Util.warn('"'+y+'" attribute has non numeric element '+w+". Make sure that all elements are numbers.")}):e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),g}}function m(){if(t.Konva.isUnminified)return function(g,y){return g===!0||g===!1||e.Util.warn(n(g)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),g}}function f(g){if(t.Konva.isUnminified)return function(y,S){return y==null||e.Util.isObject(y)||e.Util.warn(n(y)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+g),y}}return de}var Go;function Tt(){return Go||(Go=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=Bt(),n=Pt(),r="get",i="set";t.Factory={addGetterSetter(s,a,o,l,u){t.Factory.addGetter(s,a,o),t.Factory.addSetter(s,a,l,u),t.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){const l=r+e.Util._capitalize(a);s.prototype[l]=s.prototype[l]||function(){const u=this.attrs[a];return u===void 0?o:u}},addSetter(s,a,o,l){const u=i+e.Util._capitalize(a);s.prototype[u]||t.Factory.overWriteSetter(s,a,o,l)},overWriteSetter(s,a,o,l){const u=i+e.Util._capitalize(a);s.prototype[u]=function(c){return o&&c!==void 0&&c!==null&&(c=o.call(this,c,a)),this._setAttr(a,c),l&&l.call(this),this}},addComponentsGetterSetter(s,a,o,l,u){const c=o.length,_=e.Util._capitalize,m=r+_(a),f=i+_(a);s.prototype[m]=function(){const y={};for(let S=0;S<c;S++){const w=o[S];y[w]=this.getAttr(a+_(w))}return y};const g=(0,n.getComponentValidator)(o);s.prototype[f]=function(y){const S=this.attrs[a];l&&(y=l.call(this,y,a)),g&&g.call(this,y,a);for(const w in y)y.hasOwnProperty(w)&&this._setAttr(a+_(w),y[w]);return y||o.forEach(w=>{this._setAttr(a+_(w),void 0)}),this._fireChangeEvent(a,S,y),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){const o=e.Util._capitalize(a),l=i+o,u=r+o;s.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,a,o,l){e.Util.error("Adding deprecated "+a);const u=r+e.Util._capitalize(a),c=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(c);const _=this.attrs[a];return _===void 0?o:_},t.Factory.addSetter(s,a,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){e.Util.each(a,function(o,l){const u=s.prototype[l],c=r+e.Util._capitalize(o),_=i+e.Util._capitalize(o);function m(){u.apply(this,arguments),e.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[o]=m,s.prototype[c]=m,s.prototype[_]=m})},afterSetFilter(){this._filterUpToDate=!1}}})(rs)),rs}var Ho;function qt(){if(Ho)return Vn;Ho=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.Node=void 0;const t=Or(),e=Ws(),n=Tt(),r=wt(),i=Bt(),s=Pt(),a="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",c="canvas",_="Change",m="children",f="konva",g="listening",y="mouseenter",S="mouseleave",w="pointerenter",d="pointerleave",h="touchenter",p="touchleave",b="set",T="Shape",D=" ",x="stage",C="transform",P="Stage",k="visible",U=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(D);let W=1,q=class Ss{constructor(v){this._id=W++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(v),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(v){(v===C||v===l)&&this._cache.get(v)?this._cache.get(v).dirty=!0:v?this._cache.delete(v):this._cache.clear()}_getCache(v,M){let L=this._cache.get(v);return(L===void 0||(v===C||v===l)&&L.dirty===!0)&&(L=M.call(this),this._cache.set(v,L)),L}_calculate(v,M,L){if(!this._attachedDepsListeners.get(v)){const I=M.map(H=>H+"Change.konva").join(D);this.on(I,()=>{this._clearCache(v)}),this._attachedDepsListeners.set(v,!0)}return this._getCache(v,L)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(v){this._clearCache(v),v===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:v,filter:M,hit:L,buffer:I}=this._cache.get(c);i.Util.releaseCanvas(v,M,L,I),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(v){const M=v||{};let L={};(M.x===void 0||M.y===void 0||M.width===void 0||M.height===void 0)&&(L=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let I=Math.ceil(M.width||L.width),H=Math.ceil(M.height||L.height),$=M.pixelRatio,B=M.x===void 0?Math.floor(L.x):M.x,K=M.y===void 0?Math.floor(L.y):M.y,ot=M.offset||0,J=M.drawBorder||!1,O=M.hitCanvasPixelRatio||1;if(!I||!H){i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const X=Math.abs(Math.round(L.x)-B)>.5?1:0,at=Math.abs(Math.round(L.y)-K)>.5?1:0;I+=ot*2+X,H+=ot*2+at,B-=ot,K-=ot;const ut=new t.SceneCanvas({pixelRatio:$,width:I,height:H}),gt=new t.SceneCanvas({pixelRatio:$,width:0,height:0,willReadFrequently:!0}),A=new t.HitCanvas({pixelRatio:O,width:I,height:H}),G=ut.getContext(),j=A.getContext(),Q=new t.SceneCanvas({width:ut.width/ut.pixelRatio+Math.abs(B),height:ut.height/ut.pixelRatio+Math.abs(K),pixelRatio:ut.pixelRatio}),tt=Q.getContext();return A.isCache=!0,ut.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,M.imageSmoothingEnabled===!1&&(ut.getContext()._context.imageSmoothingEnabled=!1,gt.getContext()._context.imageSmoothingEnabled=!1),G.save(),j.save(),tt.save(),G.translate(-B,-K),j.translate(-B,-K),tt.translate(-B,-K),Q.x=B,Q.y=K,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this.drawScene(ut,this,Q),this.drawHit(A,this),this._isUnderCache=!1,G.restore(),j.restore(),J&&(G.save(),G.beginPath(),G.rect(0,0,I,H),G.closePath(),G.setAttr("strokeStyle","red"),G.setAttr("lineWidth",5),G.stroke(),G.restore()),this._cache.set(c,{scene:ut,filter:gt,hit:A,buffer:Q,x:B,y:K}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(v){throw new Error('abstract "getClientRect" method call')}_transformedRect(v,M){const L=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}];let I=1/0,H=1/0,$=-1/0,B=-1/0;const K=this.getAbsoluteTransform(M);return L.forEach(function(ot){const J=K.point(ot);I===void 0&&(I=$=J.x,H=B=J.y),I=Math.min(I,J.x),H=Math.min(H,J.y),$=Math.max($,J.x),B=Math.max(B,J.y)}),{x:I,y:H,width:$-I,height:B-H}}_drawCachedSceneCanvas(v){v.save(),v._applyOpacity(this),v._applyGlobalCompositeOperation(this);const M=this._getCanvasCache();v.translate(M.x,M.y);const L=this._getCachedSceneCanvas(),I=L.pixelRatio;v.drawImage(L._canvas,0,0,L.width/I,L.height/I),v.restore()}_drawCachedHitCanvas(v){const M=this._getCanvasCache(),L=M.hit;v.save(),v.translate(M.x,M.y),v.drawImage(L._canvas,0,0,L.width/L.pixelRatio,L.height/L.pixelRatio),v.restore()}_getCachedSceneCanvas(){let v=this.filters(),M=this._getCanvasCache(),L=M.scene,I=M.filter,H=I.getContext(),$,B,K,ot;if(v){if(!this._filterUpToDate){const J=L.pixelRatio;I.setSize(L.width/L.pixelRatio,L.height/L.pixelRatio);try{for($=v.length,H.clear(),H.drawImage(L._canvas,0,0,L.getWidth()/J,L.getHeight()/J),B=H.getImageData(0,0,I.getWidth(),I.getHeight()),K=0;K<$;K++){if(ot=v[K],typeof ot!="function"){i.Util.error("Filter should be type of function, but got "+typeof ot+" instead. Please check correct filters");continue}ot.call(this,B),H.putImageData(B,0,0)}}catch(O){i.Util.error("Unable to apply filter. "+O.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return I}return L}on(v,M){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const L=v.split(D);for(let I=0;I<L.length;I++){const $=L[I].split("."),B=$[0],K=$[1]||"";this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:K,handler:M})}return this}off(v,M){let L=(v||"").split(D),I=L.length,H,$,B,K,ot,J;if(this._cache&&this._cache.delete(o),!v)for($ in this.eventListeners)this._off($);for(H=0;H<I;H++)if(B=L[H],K=B.split("."),ot=K[0],J=K[1],ot)this.eventListeners[ot]&&this._off(ot,J,M);else for($ in this.eventListeners)this._off($,J,M);return this}dispatchEvent(v){const M={target:this,type:v.type,evt:v};return this.fire(v.type,M),this}addEventListener(v,M){return this.on(v,function(L){M.call(this,L.evt)}),this}removeEventListener(v){return this.off(v),this}_delegate(v,M,L){const I=this;this.on(v,function(H){const $=H.target.findAncestors(M,!0,I);for(let B=0;B<$.length;B++)H=i.Util.cloneObject(H),H.currentTarget=$[B],L.call($[B],H)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const v=this.getParent();v&&v.children&&(v.children.splice(this.index,1),v._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(v){const M="get"+i.Util._capitalize(v);return i.Util._isFunction(this[M])?this[M]():this.attrs[v]}getAncestors(){let v=this.getParent(),M=[];for(;v;)M.push(v),v=v.getParent();return M}getAttrs(){return this.attrs||{}}setAttrs(v){return this._batchTransformChanges(()=>{let M,L;if(!v)return this;for(M in v)M!==m&&(L=b+i.Util._capitalize(M),i.Util._isFunction(this[L])?this[L](v[M]):this._setAttr(M,v[M]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(v){if(!this.listening())return!1;const L=this.getParent();return L&&L!==v&&this!==v?L._isListening(v):!0}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(v){if(!this.visible())return!1;const L=this.getParent();return L&&L!==v&&this!==v?L._isVisible(v):!0}shouldDrawHit(v,M=!1){if(v)return this._isVisible(v)&&this._isListening(v);const L=this.getLayer();let I=!1;e.DD._dragElements.forEach($=>{$.dragStatus==="dragging"&&($.node.nodeType==="Stage"||$.node.getLayer()===L)&&(I=!0)});const H=!M&&!r.Konva.hitOnDragEnabled&&(I||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!H}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let v=this.getDepth(),M=this,L=0,I,H,$,B;function K(J){for(I=[],H=J.length,$=0;$<H;$++)B=J[$],L++,B.nodeType!==T&&(I=I.concat(B.getChildren().slice())),B._id===M._id&&($=H);I.length>0&&I[0].getDepth()<=v&&K(I)}const ot=this.getStage();return M.nodeType!==P&&ot&&K(ot.getChildren()),L}getDepth(){let v=0,M=this.parent;for(;M;)v++,M=M.parent;return v}_batchTransformChanges(v){this._batchingTransformChange=!0,v(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(C),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(v){return this._batchTransformChanges(()=>{this.x(v.x),this.y(v.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const v=this.getStage();if(!v)return null;const M=v.getPointerPosition();if(!M)return null;const L=this.getAbsoluteTransform().copy();return L.invert(),L.point(M)}getAbsolutePosition(v){let M=!1,L=this.parent;for(;L;){if(L.isCached()){M=!0;break}L=L.parent}M&&!v&&(v=!0);const I=this.getAbsoluteTransform(v).getMatrix(),H=new i.Transform,$=this.offset();return H.m=I.slice(),H.translate($.x,$.y),H.getTranslation()}setAbsolutePosition(v){const{x:M,y:L,...I}=this._clearTransform();this.attrs.x=M,this.attrs.y=L,this._clearCache(C);const H=this._getAbsoluteTransform().copy();return H.invert(),H.translate(v.x,v.y),v={x:this.attrs.x+H.getTranslation().x,y:this.attrs.y+H.getTranslation().y},this._setTransform(I),this.setPosition({x:v.x,y:v.y}),this._clearCache(C),this._clearSelfAndDescendantCache(l),this}_setTransform(v){let M;for(M in v)this.attrs[M]=v[M]}_clearTransform(){const v={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,v}move(v){let M=v.x,L=v.y,I=this.x(),H=this.y();return M!==void 0&&(I+=M),L!==void 0&&(H+=L),this.setPosition({x:I,y:H}),this}_eachAncestorReverse(v,M){let L=[],I=this.getParent(),H,$;if(!(M&&M._id===this._id)){for(L.unshift(this);I&&(!M||I._id!==M._id);)L.unshift(I),I=I.parent;for(H=L.length,$=0;$<H;$++)v(L[$])}}rotate(v){return this.rotation(this.rotation()+v),this}moveToTop(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const v=this.index,M=this.parent.getChildren().length;return v<M-1?(this.parent.children.splice(v,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;const v=this.index,M=this.parent.getChildren().length;return v<M-1?(this.parent.children.splice(v,1),this.parent.children.splice(v+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;const v=this.index;return v>0?(this.parent.children.splice(v,1),this.parent.children.splice(v-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const v=this.index;return v>0?(this.parent.children.splice(v,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(v){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(v<0||v>=this.parent.children.length)&&i.Util.warn("Unexpected value "+v+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const M=this.index;return this.parent.children.splice(M,1),this.parent.children.splice(v,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let v=this.opacity();const M=this.getParent();return M&&!M._isUnderCache&&(v*=M.getAbsoluteOpacity()),v}moveTo(v){return this.getParent()!==v&&(this._remove(),v.add(this)),this}toObject(){let v=this.getAttrs(),M,L,I,H,$;const B={attrs:{},className:this.getClassName()};for(M in v)L=v[M],$=i.Util.isObject(L)&&!i.Util._isPlainObject(L)&&!i.Util._isArray(L),!$&&(I=typeof this[M]=="function"&&this[M],delete v[M],H=I?I.call(this):null,v[M]=L,H!==L&&(B.attrs[M]=L));return i.Util._prepareToStringify(B)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(v,M,L){const I=[];M&&this._isMatch(v)&&I.push(this);let H=this.parent;for(;H;){if(H===L)return I;H._isMatch(v)&&I.push(H),H=H.parent}return I}isAncestorOf(v){return!1}findAncestor(v,M,L){return this.findAncestors(v,M,L)[0]}_isMatch(v){if(!v)return!1;if(typeof v=="function")return v(this);let M=v.replace(/ /g,"").split(","),L=M.length,I,H;for(I=0;I<L;I++)if(H=M[I],i.Util.isValidSelector(H)||(i.Util.warn('Selector "'+H+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),H.charAt(0)==="#"){if(this.id()===H.slice(1))return!0}else if(H.charAt(0)==="."){if(this.hasName(H.slice(1)))return!0}else if(this.className===H||this.nodeType===H)return!0;return!1}getLayer(){const v=this.getParent();return v?v.getLayer():null}getStage(){return this._getCache(x,this._getStage)}_getStage(){const v=this.getParent();return v?v.getStage():null}fire(v,M={},L){return M.target=M.target||this,L?this._fireAndBubble(v,M):this._fire(v,M),this}getAbsoluteTransform(v){return v?this._getAbsoluteTransform(v):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(v){let M;if(v)return M=new i.Transform,this._eachAncestorReverse(function(L){const I=L.transformsEnabled();I==="all"?M.multiply(L.getTransform()):I==="position"&&M.translate(L.x()-L.offsetX(),L.y()-L.offsetY())},v),M;{M=this._cache.get(l)||new i.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(M):M.reset();const L=this.transformsEnabled();if(L==="all")M.multiply(this.getTransform());else if(L==="position"){const I=this.attrs.x||0,H=this.attrs.y||0,$=this.attrs.offsetX||0,B=this.attrs.offsetY||0;M.translate(I-$,H-B)}return M.dirty=!1,M}}getAbsoluteScale(v){let M=this;for(;M;)M._isUnderCache&&(v=M),M=M.getParent();const I=this.getAbsoluteTransform(v).decompose();return{x:I.scaleX,y:I.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(C,this._getTransform)}_getTransform(){var v,M;const L=this._cache.get(C)||new i.Transform;L.reset();const I=this.x(),H=this.y(),$=r.Konva.getAngle(this.rotation()),B=(v=this.attrs.scaleX)!==null&&v!==void 0?v:1,K=(M=this.attrs.scaleY)!==null&&M!==void 0?M:1,ot=this.attrs.skewX||0,J=this.attrs.skewY||0,O=this.attrs.offsetX||0,X=this.attrs.offsetY||0;return(I!==0||H!==0)&&L.translate(I,H),$!==0&&L.rotate($),(ot!==0||J!==0)&&L.skew(ot,J),(B!==1||K!==1)&&L.scale(B,K),(O!==0||X!==0)&&L.translate(-1*O,-1*X),L.dirty=!1,L}clone(v){let M=i.Util.cloneObject(this.attrs),L,I,H,$,B;for(L in v)M[L]=v[L];const K=new this.constructor(M);for(L in this.eventListeners)for(I=this.eventListeners[L],H=I.length,$=0;$<H;$++)B=I[$],B.name.indexOf(f)<0&&(K.eventListeners[L]||(K.eventListeners[L]=[]),K.eventListeners[L].push(B));return K}_toKonvaCanvas(v){v=v||{};const M=this.getClientRect(),L=this.getStage(),I=v.x!==void 0?v.x:Math.floor(M.x),H=v.y!==void 0?v.y:Math.floor(M.y),$=v.pixelRatio||1,B=new t.SceneCanvas({width:v.width||Math.ceil(M.width)||(L?L.width():0),height:v.height||Math.ceil(M.height)||(L?L.height():0),pixelRatio:$}),K=B.getContext(),ot=new t.SceneCanvas({width:B.width/B.pixelRatio+Math.abs(I),height:B.height/B.pixelRatio+Math.abs(H),pixelRatio:B.pixelRatio});return v.imageSmoothingEnabled===!1&&(K._context.imageSmoothingEnabled=!1),K.save(),(I||H)&&K.translate(-1*I,-1*H),this.drawScene(B,void 0,ot),K.restore(),B}toCanvas(v){return this._toKonvaCanvas(v)._canvas}toDataURL(v){v=v||{};const M=v.mimeType||null,L=v.quality||null,I=this._toKonvaCanvas(v).toDataURL(M,L);return v.callback&&v.callback(I),I}toImage(v){return new Promise((M,L)=>{try{const I=v?.callback;I&&delete v.callback,i.Util._urlToImage(this.toDataURL(v),function(H){M(H),I?.(H)})}catch(I){L(I)}})}toBlob(v){return new Promise((M,L)=>{try{const I=v?.callback;I&&delete v.callback,this.toCanvas(v).toBlob(H=>{M(H),I?.(H)},v?.mimeType,v?.quality)}catch(I){L(I)}})}setSize(v){return this.width(v.width),this.height(v.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(v,M,L){let I=this.eventListeners[v],H,$,B;for(H=0;H<I.length;H++)if($=I[H].name,B=I[H].handler,($!=="konva"||M==="konva")&&(!M||$===M)&&(!L||L===B)){if(I.splice(H,1),I.length===0){delete this.eventListeners[v];break}H--}}_fireChangeEvent(v,M,L){this._fire(v+_,{oldVal:M,newVal:L})}addName(v){if(!this.hasName(v)){const M=this.name(),L=M?M+" "+v:v;this.name(L)}return this}hasName(v){if(!v)return!1;const M=this.name();return M?(M||"").split(/\s/g).indexOf(v)!==-1:!1}removeName(v){const M=(this.name()||"").split(/\s/g),L=M.indexOf(v);return L!==-1&&(M.splice(L,1),this.name(M.join(" "))),this}setAttr(v,M){const L=this[b+i.Util._capitalize(v)];return i.Util._isFunction(L)?L.call(this,M):this._setAttr(v,M),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const v=this.getLayer()||this.getStage();v?.batchDraw()}}_setAttr(v,M){const L=this.attrs[v];L===M&&!i.Util.isObject(M)||(M==null?delete this.attrs[v]:this.attrs[v]=M,this._shouldFireChangeEvents&&this._fireChangeEvent(v,L,M),this._requestDraw())}_setComponentAttr(v,M,L){let I;L!==void 0&&(I=this.attrs[v],I||(this.attrs[v]=this.getAttr(v)),this.attrs[v][M]=L,this._fireChangeEvent(v,I,L))}_fireAndBubble(v,M,L){M&&this.nodeType===T&&(M.target=this);const I=[y,S,w,d,h,p];if(!(I.indexOf(v)!==-1&&(L&&(this===L||this.isAncestorOf&&this.isAncestorOf(L))||this.nodeType==="Stage"&&!L))){this._fire(v,M);const $=I.indexOf(v)!==-1&&L&&L.isAncestorOf&&L.isAncestorOf(this)&&!L.isAncestorOf(this.parent);(M&&!M.cancelBubble||!M)&&this.parent&&this.parent.isListening()&&!$&&(L&&L.parent?this._fireAndBubble.call(this.parent,v,M,L):this._fireAndBubble.call(this.parent,v,M))}}_getProtoListeners(v){var M,L,I;const H=(M=this._cache.get(o))!==null&&M!==void 0?M:{};let $=H?.[v];if($===void 0){$=[];let B=Object.getPrototypeOf(this);for(;B;){const K=(I=(L=B.eventListeners)===null||L===void 0?void 0:L[v])!==null&&I!==void 0?I:[];$.push(...K),B=Object.getPrototypeOf(B)}H[v]=$,this._cache.set(o,H)}return $}_fire(v,M){M=M||{},M.currentTarget=this,M.type=v;const L=this._getProtoListeners(v);if(L)for(let H=0;H<L.length;H++)L[H].handler.call(this,M);const I=this.eventListeners[v];if(I)for(let H=0;H<I.length;H++)I[H].handler.call(this,M)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(v){const M=v?v.pointerId:void 0,L=this.getStage(),I=this.getAbsolutePosition();if(!L)return;const H=L._getPointerById(M)||L._changedPointerPositions[0]||I;e.DD._dragElements.set(this._id,{node:this,startPointerPos:H,offset:{x:H.x-I.x,y:H.y-I.y},dragStatus:"ready",pointerId:M})}startDrag(v,M=!0){e.DD._dragElements.has(this._id)||this._createDragElement(v);const L=e.DD._dragElements.get(this._id);L.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:v&&v.evt},M)}_setDragPosition(v,M){const L=this.getStage()._getPointerById(M.pointerId);if(!L)return;let I={x:L.x-M.offset.x,y:L.y-M.offset.y};const H=this.dragBoundFunc();if(H!==void 0){const $=H.call(this,I,v);$?I=$:i.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==I.x||this._lastPos.y!==I.y)&&(this.setAbsolutePosition(I),this._requestDraw()),this._lastPos=I}stopDrag(v){const M=e.DD._dragElements.get(this._id);M&&(M.dragStatus="stopped"),e.DD._endDragBefore(v),e.DD._endDragAfter(v)}setDraggable(v){this._setAttr("draggable",v),this._dragChange()}isDragging(){const v=e.DD._dragElements.get(this._id);return v?v.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(v){if(!(!(v.evt.button!==void 0)||r.Konva.dragButtons.indexOf(v.evt.button)>=0)||this.isDragging())return;let I=!1;e.DD._dragElements.forEach(H=>{this.isAncestorOf(H.node)&&(I=!0)}),I||this._createDragElement(v)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const M=e.DD._dragElements.get(this._id),L=M&&M.dragStatus==="dragging",I=M&&M.dragStatus==="ready";L?this.stopDrag():I&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(v={x:0,y:0}){const M=this.getStage();if(!M)return!1;const L={x:-v.x,y:-v.y,width:M.width()+2*v.x,height:M.height()+2*v.y};return i.Util.haveIntersection(L,this.getClientRect())}static create(v,M){return i.Util._isString(v)&&(v=JSON.parse(v)),this._createNode(v,M)}static _createNode(v,M){let L=Ss.prototype.getClassName.call(v),I=v.children,H,$,B;M&&(v.attrs.container=M),r.Konva[L]||(i.Util.warn('Can not find a node with class name "'+L+'". Fallback to "Shape".'),L="Shape");const K=r.Konva[L];if(H=new K(v.attrs),I)for($=I.length,B=0;B<$;B++)H.add(Ss._createNode(I[B]));return H}};Vn.Node=q,q.prototype.nodeType="Node",q.prototype._attrsAffectingSize=[],q.prototype.eventListeners={},q.prototype.on.call(q.prototype,U,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(C),this._clearSelfAndDescendantCache(l)}),q.prototype.on.call(q.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(k)}),q.prototype.on.call(q.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),q.prototype.on.call(q.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const R=n.Factory.addGetterSetter;return R(q,"zIndex"),R(q,"absolutePosition"),R(q,"position"),R(q,"x",0,(0,s.getNumberValidator)()),R(q,"y",0,(0,s.getNumberValidator)()),R(q,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),R(q,"opacity",1,(0,s.getNumberValidator)()),R(q,"name","",(0,s.getStringValidator)()),R(q,"id","",(0,s.getStringValidator)()),R(q,"rotation",0,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(q,"scale",["x","y"]),R(q,"scaleX",1,(0,s.getNumberValidator)()),R(q,"scaleY",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(q,"skew",["x","y"]),R(q,"skewX",0,(0,s.getNumberValidator)()),R(q,"skewY",0,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(q,"offset",["x","y"]),R(q,"offsetX",0,(0,s.getNumberValidator)()),R(q,"offsetY",0,(0,s.getNumberValidator)()),R(q,"dragDistance",void 0,(0,s.getNumberValidator)()),R(q,"width",0,(0,s.getNumberValidator)()),R(q,"height",0,(0,s.getNumberValidator)()),R(q,"listening",!0,(0,s.getBooleanValidator)()),R(q,"preventDefault",!0,(0,s.getBooleanValidator)()),R(q,"filters",void 0,function(et){return this._filterUpToDate=!1,et}),R(q,"visible",!0,(0,s.getBooleanValidator)()),R(q,"transformsEnabled","all",(0,s.getStringValidator)()),R(q,"size"),R(q,"dragBoundFunc"),R(q,"draggable",!1,(0,s.getBooleanValidator)()),n.Factory.backCompat(q,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Vn}var Wn={},Uo;function Nr(){if(Uo)return Wn;Uo=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Container=void 0;const t=Tt(),e=qt(),n=Pt();let r=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){const a=this.children||[];return s?a.filter(s):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let o=0;o<s.length;o++)this.add(s[o]);return this}const a=s[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const a=this._generalFind(s,!0);return a.length>0?a[0]:void 0}_generalFind(s,a){const o=[];return this._descendants(l=>{const u=l._isMatch(s);return u&&o.push(l),!!(u&&a)}),o}_descendants(s){let a=!1;const o=this.getChildren();for(const l of o){if(a=s(l),a)return!0;if(l.hasChildren()&&(a=l._descendants(s),a))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(a=>{s.children.push(a.toObject())}),s}isAncestorOf(s){let a=s.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(s){const a=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(o){a.add(o.clone())}),a}getAllIntersections(s){const a=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(s)&&a.push(o)}),a}_clearSelfAndDescendantCache(s){var a;super._clearSelfAndDescendantCache(s),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(o){o._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(a,o){a.index=o}),this._requestDraw()}drawScene(s,a,o){const l=this.getLayer(),u=s||l&&l.getCanvas(),c=u&&u.getContext(),_=this._getCanvasCache(),m=_&&_.scene,f=u&&u.isCache;if(!this.isVisible()&&!f)return this;if(m){c.save();const g=this.getAbsoluteTransform(a).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",u,a,o);return this}drawHit(s,a){if(!this.shouldDrawHit(a))return this;const o=this.getLayer(),l=s||o&&o.hitCanvas,u=l&&l.getContext(),c=this._getCanvasCache();if(c&&c.hit){u.save();const m=this.getAbsoluteTransform(a).getMatrix();u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,a);return this}_drawChildren(s,a,o,l){var u;const c=a&&a.getContext(),_=this.clipWidth(),m=this.clipHeight(),f=this.clipFunc(),g=typeof _=="number"&&typeof m=="number"||f,y=o===this;if(g){c.save();const w=this.getAbsoluteTransform(o);let d=w.getMatrix();c.transform(d[0],d[1],d[2],d[3],d[4],d[5]),c.beginPath();let h;if(f)h=f.call(this,c,this);else{const p=this.clipX(),b=this.clipY();c.rect(p||0,b||0,_,m)}c.clip.apply(c,h),d=w.copy().invert().getMatrix(),c.transform(d[0],d[1],d[2],d[3],d[4],d[5])}const S=!y&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";S&&(c.save(),c._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(w){w[s](a,o,l)}),S&&c.restore(),g&&c.restore()}getClientRect(s={}){var a;const o=s.skipTransform,l=s.relativeTo;let u,c,_,m,f={x:1/0,y:1/0,width:0,height:0};const g=this;(a=this.children)===null||a===void 0||a.forEach(function(w){if(!w.visible())return;const d=w.getClientRect({relativeTo:g,skipShadow:s.skipShadow,skipStroke:s.skipStroke});d.width===0&&d.height===0||(u===void 0?(u=d.x,c=d.y,_=d.x+d.width,m=d.y+d.height):(u=Math.min(u,d.x),c=Math.min(c,d.y),_=Math.max(_,d.x+d.width),m=Math.max(m,d.y+d.height)))});const y=this.find("Shape");let S=!1;for(let w=0;w<y.length;w++)if(y[w]._isVisible(this)){S=!0;break}return S&&u!==void 0?f={x:u,y:c,width:_-u,height:m-c}:f={x:0,y:0,width:0,height:0},o?f:this._transformedRect(f,l)}};return Wn.Container=r,t.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipFunc"),Wn}var ss={},en={},Bo;function Bl(){if(Bo)return en;Bo=1,Object.defineProperty(en,"__esModule",{value:!0}),en.getCapturedShape=r,en.createEvent=i,en.hasPointerCapture=s,en.setPointerCapture=a,en.releaseCapture=o;const t=wt(),e=new Map,n=t.Konva._global.PointerEvent!==void 0;function r(l){return e.get(l)}function i(l){return{evt:l,pointerId:l.pointerId}}function s(l,u){return e.get(l)===u}function a(l,u){o(l),u.getStage()&&(e.set(l,u),n&&u._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function o(l,u){const c=e.get(l);if(!c)return;const _=c.getStage();_&&_.content,e.delete(l),n&&c._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return en}var Vo;function id(){return Vo||(Vo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=Bt(),n=Tt(),r=Nr(),i=wt(),s=Or(),a=Ws(),o=wt(),l=Bl(),u="Stage",c="string",_="px",m="mouseout",f="mouseleave",g="mouseover",y="mouseenter",S="mousemove",w="mousedown",d="mouseup",h="pointermove",p="pointerdown",b="pointerup",T="pointercancel",D="lostpointercapture",x="pointerout",C="pointerleave",P="pointerover",k="pointerenter",U="contextmenu",W="touchstart",q="touchend",R="touchmove",et="touchcancel",v="wheel",M=5,L=[[y,"_pointerenter"],[w,"_pointerdown"],[S,"_pointermove"],[d,"_pointerup"],[f,"_pointerleave"],[W,"_pointerdown"],[R,"_pointermove"],[q,"_pointerup"],[et,"_pointercancel"],[g,"_pointerover"],[v,"_wheel"],[U,"_contextmenu"],[p,"_pointerdown"],[h,"_pointermove"],[b,"_pointerup"],[T,"_pointercancel"],[C,"_pointerleave"],[D,"_lostpointercapture"]],I={mouse:{[x]:m,[C]:f,[P]:g,[k]:y,[h]:S,[p]:w,[b]:d,[T]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[x]:"touchout",[C]:"touchleave",[P]:"touchover",[k]:"touchenter",[h]:R,[p]:W,[b]:q,[T]:et,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[x]:x,[C]:C,[P]:P,[k]:k,[h]:h,[p]:p,[b]:b,[T]:T,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},H=J=>J.indexOf("pointer")>=0?"pointer":J.indexOf("touch")>=0?"touch":"mouse",$=J=>{const O=H(J);if(O==="pointer")return i.Konva.pointerEventsEnabled&&I.pointer;if(O==="touch")return I.touch;if(O==="mouse")return I.mouse};function B(J={}){return(J.clipFunc||J.clipWidth||J.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),J}const K="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ot extends r.Container{constructor(O){super(B(O)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B(this.attrs)}),this._checkVisibility()}_validateAdd(O){const X=O.getType()==="Layer",at=O.getType()==="FastLayer";X||at||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const O=this.visible()?"":"none";this.content.style.display=O}setContainer(O){if(typeof O===c){let X;if(O.charAt(0)==="."){const at=O.slice(1);O=document.getElementsByClassName(at)[0]}else O.charAt(0)!=="#"?X=O:X=O.slice(1),O=document.getElementById(X);if(!O)throw"Can not find container in document with id "+X}return this._setAttr("container",O),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),O.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const O=this.children,X=O.length;for(let at=0;at<X;at++)O[at].clear();return this}clone(O){return O||(O={}),O.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,O)}destroy(){super.destroy();const O=this.content;O&&e.Util._isInDocument(O)&&this.container().removeChild(O);const X=t.stages.indexOf(this);return X>-1&&t.stages.splice(X,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const O=this._pointerPositions[0]||this._changedPointerPositions[0];return O?{x:O.x,y:O.y}:(e.Util.warn(K),null)}_getPointerById(O){return this._pointerPositions.find(X=>X.id===O)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(O){O=O||{},O.x=O.x||0,O.y=O.y||0,O.width=O.width||this.width(),O.height=O.height||this.height();const X=new s.SceneCanvas({width:O.width,height:O.height,pixelRatio:O.pixelRatio||1}),at=X.getContext()._context,ut=this.children;return(O.x||O.y)&&at.translate(-1*O.x,-1*O.y),ut.forEach(function(gt){if(!gt.isVisible())return;const A=gt._toKonvaCanvas(O);at.drawImage(A._canvas,O.x,O.y,A.getWidth()/A.getPixelRatio(),A.getHeight()/A.getPixelRatio())}),X}getIntersection(O){if(!O)return null;const X=this.children,at=X.length,ut=at-1;for(let gt=ut;gt>=0;gt--){const A=X[gt].getIntersection(O);if(A)return A}return null}_resizeDOM(){const O=this.width(),X=this.height();this.content&&(this.content.style.width=O+_,this.content.style.height=X+_),this.bufferCanvas.setSize(O,X),this.bufferHitCanvas.setSize(O,X),this.children.forEach(at=>{at.setSize({width:O,height:X}),at.draw()})}add(O,...X){if(arguments.length>1){for(let ut=0;ut<arguments.length;ut++)this.add(arguments[ut]);return this}super.add(O);const at=this.children.length;return at>M&&e.Util.warn("The stage has "+at+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),O.setSize({width:this.width(),height:this.height()}),O.draw(),i.Konva.isBrowser&&this.content.appendChild(O.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(O){return l.hasPointerCapture(O,this)}setPointerCapture(O){l.setPointerCapture(O,this)}releaseCapture(O){l.releaseCapture(O,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&L.forEach(([O,X])=>{this.content.addEventListener(O,at=>{this[X](at)},{passive:!1})})}_pointerenter(O){this.setPointersPositions(O);const X=$(O.type);X&&this._fire(X.pointerenter,{evt:O,target:this,currentTarget:this})}_pointerover(O){this.setPointersPositions(O);const X=$(O.type);X&&this._fire(X.pointerover,{evt:O,target:this,currentTarget:this})}_getTargetShape(O){let X=this[O+"targetShape"];return X&&!X.getStage()&&(X=null),X}_pointerleave(O){const X=$(O.type),at=H(O.type);if(!X)return;this.setPointersPositions(O);const ut=this._getTargetShape(at),gt=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;ut&&gt?(ut._fireAndBubble(X.pointerout,{evt:O}),ut._fireAndBubble(X.pointerleave,{evt:O}),this._fire(X.pointerleave,{evt:O,target:this,currentTarget:this}),this[at+"targetShape"]=null):gt&&(this._fire(X.pointerleave,{evt:O,target:this,currentTarget:this}),this._fire(X.pointerout,{evt:O,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(O){const X=$(O.type),at=H(O.type);if(!X)return;this.setPointersPositions(O);let ut=!1;this._changedPointerPositions.forEach(gt=>{const A=this.getIntersection(gt);if(a.DD.justDragged=!1,i.Konva["_"+at+"ListenClick"]=!0,!A||!A.isListening()){this[at+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&A.setPointerCapture(gt.id),this[at+"ClickStartShape"]=A,A._fireAndBubble(X.pointerdown,{evt:O,pointerId:gt.id}),ut=!0;const G=O.type.indexOf("touch")>=0;A.preventDefault()&&O.cancelable&&G&&O.preventDefault()}),ut||this._fire(X.pointerdown,{evt:O,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(O){const X=$(O.type),at=H(O.type);if(!X||(i.Konva.isDragging()&&a.DD.node.preventDefault()&&O.cancelable&&O.preventDefault(),this.setPointersPositions(O),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const gt={};let A=!1;const G=this._getTargetShape(at);this._changedPointerPositions.forEach(j=>{const Q=l.getCapturedShape(j.id)||this.getIntersection(j),tt=j.id,Z={evt:O,pointerId:tt},rt=G!==Q;if(rt&&G&&(G._fireAndBubble(X.pointerout,{...Z},Q),G._fireAndBubble(X.pointerleave,{...Z},Q)),Q){if(gt[Q._id])return;gt[Q._id]=!0}Q&&Q.isListening()?(A=!0,rt&&(Q._fireAndBubble(X.pointerover,{...Z},G),Q._fireAndBubble(X.pointerenter,{...Z},G),this[at+"targetShape"]=Q),Q._fireAndBubble(X.pointermove,{...Z})):G&&(this._fire(X.pointerover,{evt:O,target:this,currentTarget:this,pointerId:tt}),this[at+"targetShape"]=null)}),A||this._fire(X.pointermove,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(O){const X=$(O.type),at=H(O.type);if(!X)return;this.setPointersPositions(O);const ut=this[at+"ClickStartShape"],gt=this[at+"ClickEndShape"],A={};let G=!1;this._changedPointerPositions.forEach(j=>{const Q=l.getCapturedShape(j.id)||this.getIntersection(j);if(Q){if(Q.releaseCapture(j.id),A[Q._id])return;A[Q._id]=!0}const tt=j.id,Z={evt:O,pointerId:tt};let rt=!1;i.Konva["_"+at+"InDblClickWindow"]?(rt=!0,clearTimeout(this[at+"DblTimeout"])):a.DD.justDragged||(i.Konva["_"+at+"InDblClickWindow"]=!0,clearTimeout(this[at+"DblTimeout"])),this[at+"DblTimeout"]=setTimeout(function(){i.Konva["_"+at+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),Q&&Q.isListening()?(G=!0,this[at+"ClickEndShape"]=Q,Q._fireAndBubble(X.pointerup,{...Z}),i.Konva["_"+at+"ListenClick"]&&ut&&ut===Q&&(Q._fireAndBubble(X.pointerclick,{...Z}),rt&&gt&&gt===Q&&Q._fireAndBubble(X.pointerdblclick,{...Z}))):(this[at+"ClickEndShape"]=null,i.Konva["_"+at+"ListenClick"]&&this._fire(X.pointerclick,{evt:O,target:this,currentTarget:this,pointerId:tt}),rt&&this._fire(X.pointerdblclick,{evt:O,target:this,currentTarget:this,pointerId:tt}))}),G||this._fire(X.pointerup,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+at+"ListenClick"]=!1,O.cancelable&&at!=="touch"&&at!=="pointer"&&O.preventDefault()}_contextmenu(O){this.setPointersPositions(O);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(U,{evt:O}):this._fire(U,{evt:O,target:this,currentTarget:this})}_wheel(O){this.setPointersPositions(O);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(v,{evt:O}):this._fire(v,{evt:O,target:this,currentTarget:this})}_pointercancel(O){this.setPointersPositions(O);const X=l.getCapturedShape(O.pointerId)||this.getIntersection(this.getPointerPosition());X&&X._fireAndBubble(b,l.createEvent(O)),l.releaseCapture(O.pointerId)}_lostpointercapture(O){l.releaseCapture(O.pointerId)}setPointersPositions(O){const X=this._getContentPosition();let at=null,ut=null;O=O||window.event,O.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(O.touches,gt=>{this._pointerPositions.push({id:gt.identifier,x:(gt.clientX-X.left)/X.scaleX,y:(gt.clientY-X.top)/X.scaleY})}),Array.prototype.forEach.call(O.changedTouches||O.touches,gt=>{this._changedPointerPositions.push({id:gt.identifier,x:(gt.clientX-X.left)/X.scaleX,y:(gt.clientY-X.top)/X.scaleY})})):(at=(O.clientX-X.left)/X.scaleX,ut=(O.clientY-X.top)/X.scaleY,this.pointerPos={x:at,y:ut},this._pointerPositions=[{x:at,y:ut,id:e.Util._getFirstPointerId(O)}],this._changedPointerPositions=[{x:at,y:ut,id:e.Util._getFirstPointerId(O)}])}_setPointerPosition(O){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(O)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const O=this.content.getBoundingClientRect();return{top:O.top,left:O.left,scaleX:O.width/this.content.clientWidth||1,scaleY:O.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const O=this.container();if(!O)throw"Stage has no container. A container is required.";O.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),O.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(O){O.batchDraw()}),this}}t.Stage=ot,ot.prototype.nodeType=u,(0,o._registerNode)(ot),n.Factory.addGetterSetter(ot,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(J=>{J.batchDraw()})})})(ss)),ss}var zn={},os={},Wo;function Qt(){return Wo||(Wo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=wt(),n=Bt(),r=Tt(),i=qt(),s=Pt(),a=wt(),o=Bl(),l="hasShadow",u="shadowRGBA",c="patternImage",_="linearGradient",m="radialGradient";let f;function g(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y(C){const P=this.attrs.fillRule;P?C.fill(P):C.fill()}function S(C){C.stroke()}function w(C){const P=this.attrs.fillRule;P?C.fill(P):C.fill()}function d(C){C.stroke()}function h(){this._clearCache(l)}function p(){this._clearCache(u)}function b(){this._clearCache(c)}function T(){this._clearCache(_)}function D(){this._clearCache(m)}class x extends i.Node{constructor(P){super(P);let k;for(;k=n.Util.getRandomColor(),!(k&&!(k in t.shapes)););this.colorKey=k,t.shapes[k]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const U=new n.Transform;U.translate(this.fillPatternX(),this.fillPatternY()),U.rotate(e.Konva.getAngle(this.fillPatternRotation())),U.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),U.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const W=U.getMatrix(),q=typeof DOMMatrix>"u"?{a:W[0],b:W[1],c:W[2],d:W[3],e:W[4],f:W[5]}:new DOMMatrix(W);k.setTransform(q)}return k}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const P=this.fillLinearGradientColorStops();if(P){const k=g(),U=this.fillLinearGradientStartPoint(),W=this.fillLinearGradientEndPoint(),q=k.createLinearGradient(U.x,U.y,W.x,W.y);for(let R=0;R<P.length;R+=2)q.addColorStop(P[R],P[R+1]);return q}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const P=this.fillRadialGradientColorStops();if(P){const k=g(),U=this.fillRadialGradientStartPoint(),W=this.fillRadialGradientEndPoint(),q=k.createRadialGradient(U.x,U.y,this.fillRadialGradientStartRadius(),W.x,W.y,this.fillRadialGradientEndRadius());for(let R=0;R<P.length;R+=2)q.addColorStop(P[R],P[R+1]);return q}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){const k=this.getStage();if(!k)return!1;const U=k.bufferHitCanvas;return U.getContext().clear(),this.drawHit(U,void 0,!0),U.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const W=P||this.hasFill(),q=this.hasStroke(),R=this.getAbsoluteOpacity()!==1;if(W&&q&&R)return!0;const et=this.hasShadow(),v=this.shadowForStrokeEnabled();return!!(W&&q&&et&&v)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){let k=!1,U=this.getParent();for(;U;){if(U.isCached()){k=!0;break}U=U.getParent()}const W=P.skipTransform,q=P.relativeTo||k&&this.getStage()||void 0,R=this.getSelfRect(),v=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,M=R.width+v,L=R.height+v,I=!P.skipShadow&&this.hasShadow(),H=I?this.shadowOffsetX():0,$=I?this.shadowOffsetY():0,B=M+Math.abs(H),K=L+Math.abs($),ot=I&&this.shadowBlur()||0,J=B+ot*2,O=K+ot*2,X={width:J,height:O,x:-(v/2+ot)+Math.min(H,0)+R.x,y:-(v/2+ot)+Math.min($,0)+R.y};return W?X:this._transformedRect(X,q)}drawScene(P,k,U){const W=this.getLayer(),q=P||W.getCanvas(),R=q.getContext(),et=this._getCanvasCache(),v=this.getSceneFunc(),M=this.hasShadow();let L;const I=k===this;if(!this.isVisible()&&!I)return this;if(et){R.save();const H=this.getAbsoluteTransform(k).getMatrix();return R.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedSceneCanvas(R),R.restore(),this}if(!v)return this;if(R.save(),this._useBufferCanvas()){L=this.getStage();const H=U||L.bufferCanvas,$=H.getContext();$.clear(),$.save(),$._applyLineJoin(this);const B=this.getAbsoluteTransform(k).getMatrix();$.transform(B[0],B[1],B[2],B[3],B[4],B[5]),v.call(this,$,this),$.restore();const K=H.pixelRatio;M&&R._applyShadow(this),R._applyOpacity(this),R._applyGlobalCompositeOperation(this),R.drawImage(H._canvas,H.x||0,H.y||0,H.width/K,H.height/K)}else{if(R._applyLineJoin(this),!I){const H=this.getAbsoluteTransform(k).getMatrix();R.transform(H[0],H[1],H[2],H[3],H[4],H[5]),R._applyOpacity(this),R._applyGlobalCompositeOperation(this)}M&&R._applyShadow(this),v.call(this,R,this)}return R.restore(),this}drawHit(P,k,U=!1){if(!this.shouldDrawHit(k,U))return this;const W=this.getLayer(),q=P||W.hitCanvas,R=q&&q.getContext(),et=this.hitFunc()||this.sceneFunc(),v=this._getCanvasCache(),M=v&&v.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),M){R.save();const I=this.getAbsoluteTransform(k).getMatrix();return R.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedHitCanvas(R),R.restore(),this}if(!et)return this;if(R.save(),R._applyLineJoin(this),!(this===k)){const I=this.getAbsoluteTransform(k).getMatrix();R.transform(I[0],I[1],I[2],I[3],I[4],I[5])}return et.call(this,R,this),R.restore(),this}drawHitFromCache(P=0){const k=this._getCanvasCache(),U=this._getCachedSceneCanvas(),W=k.hit,q=W.getContext(),R=W.getWidth(),et=W.getHeight();q.clear(),q.drawImage(U._canvas,0,0,R,et);try{const v=q.getImageData(0,0,R,et),M=v.data,L=M.length,I=n.Util._hexToRgb(this.colorKey);for(let H=0;H<L;H+=4)M[H+3]>P?(M[H]=I.r,M[H+1]=I.g,M[H+2]=I.b,M[H+3]=255):M[H+3]=0;q.putImageData(v,0,0)}catch(v){n.Util.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(P){return o.hasPointerCapture(P,this)}setPointerCapture(P){o.setPointerCapture(P,this)}releaseCapture(P){o.releaseCapture(P,this)}}t.Shape=x,x.prototype._fillFunc=y,x.prototype._strokeFunc=S,x.prototype._fillFuncHit=w,x.prototype._strokeFuncHit=d,x.prototype._centroid=!1,x.prototype.nodeType="Shape",(0,a._registerNode)(x),x.prototype.eventListeners={},x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",h),x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",p),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",T),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),r.Factory.addGetterSetter(x,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(x,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(x,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(x,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(x,"lineJoin"),r.Factory.addGetterSetter(x,"lineCap"),r.Factory.addGetterSetter(x,"sceneFunc"),r.Factory.addGetterSetter(x,"hitFunc"),r.Factory.addGetterSetter(x,"dash"),r.Factory.addGetterSetter(x,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(x,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(x,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternImage"),r.Factory.addGetterSetter(x,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(x,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(x,"fillEnabled",!0),r.Factory.addGetterSetter(x,"strokeEnabled",!0),r.Factory.addGetterSetter(x,"shadowEnabled",!0),r.Factory.addGetterSetter(x,"dashEnabled",!0),r.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(x,"fillPriority","color"),r.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(x,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(x,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(x,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(x,"fillPatternRotation",0),r.Factory.addGetterSetter(x,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(os)),os}var zo;function Vl(){if(zo)return zn;zo=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.Layer=void 0;const t=Bt(),e=Nr(),n=qt(),r=Tt(),i=Or(),s=Pt(),a=Qt(),o=wt(),l="#",u="beforeDraw",c="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=_.length;let f=class extends e.Container{constructor(y){super(y),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),y<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[y+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),y&&y.parentNode&&t.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:S}){return this.canvas.setSize(y,S),this.hitCanvas.setSize(y,S),this._setSmoothEnabled(),this}_validateAdd(y){const S=y.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let S=1,w=!1;for(;;){for(let d=0;d<m;d++){const h=_[d],p=this._getIntersection({x:y.x+h.x*S,y:y.y+h.y*S}),b=p.shape;if(b)return b;if(w=!!p.antialiased,!p.antialiased)break}if(w)S+=1;else return null}}_getIntersection(y){const S=this.hitCanvas.pixelRatio,w=this.hitCanvas.context.getImageData(Math.round(y.x*S),Math.round(y.y*S),1,1).data,d=w[3];if(d===255){const h=t.Util._rgbToHex(w[0],w[1],w[2]),p=a.shapes[l+h];return p?{shape:p}:{antialiased:!0}}else if(d>0)return{antialiased:!0};return{}}drawScene(y,S,w){const d=this.getLayer(),h=y||d&&d.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),e.Container.prototype.drawScene.call(this,h,S,w),this._fire(c,{node:this}),this}drawHit(y,S){const w=this.getLayer(),d=y||w&&w.hitCanvas;return w&&w.clearBeforeDraw()&&w.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,d,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return zn.Layer=f,f.prototype.nodeType="Layer",(0,o._registerNode)(f),r.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(f,"clearBeforeDraw",!0),r.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),zn}var qn={},qo;function rd(){if(qo)return qn;qo=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.FastLayer=void 0;const t=Bt(),e=Vl(),n=wt();let r=class extends e.Layer{constructor(s){super(s),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return qn.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),qn}var Yn={},Yo;function zs(){if(Yo)return Yn;Yo=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.Group=void 0;const t=Bt(),e=Nr(),n=wt();let r=class extends e.Container{_validateAdd(s){const a=s.getType();a!=="Group"&&a!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Yn.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),Yn}var jn={},jo;function qs(){if(jo)return jn;jo=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.Animation=void 0;const t=wt(),e=Bt(),n=(function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}})();let r=class Rn{constructor(s,a){this.id=Rn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=s,this.setLayers(a)}setLayers(s){let a=[];return s&&(a=Array.isArray(s)?s:[s]),this.layers=a,this}getLayers(){return this.layers}addLayer(s){const a=this.layers,o=a.length;for(let l=0;l<o;l++)if(a[l]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const a=Rn.animations,o=a.length;for(let l=0;l<o;l++)if(a[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Rn._addAnimation(this),this}stop(){return Rn._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const a=s.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===a){this.animations.splice(u,1);break}}static _runFrames(){const s={},a=this.animations;for(let o=0;o<a.length;o++){const l=a[o],u=l.layers,c=l.func;l._updateFrameObject(n());const _=u.length;let m;if(c?m=c.call(l,l.frame)!==!1:m=!0,!!m)for(let f=0;f<_;f++){const g=u[f];g._id!==void 0&&(s[g._id]=g)}}for(const o in s)s.hasOwnProperty(o)&&s[o].batchDraw()}static _animationLoop(){const s=Rn;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return jn.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,jn}var as={},Xo;function sd(){return Xo||(Xo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=Bt(),n=qs(),r=qt(),i=wt(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,u=["fill","stroke","shadowColor"];let c=0;class _{constructor(g,y,S,w,d,h,p){this.prop=g,this.propFunc=y,this.begin=w,this._pos=w,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=p,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=d-this.begin,this.pause()}fire(g){const y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===o?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(g){const y=this,S=g.node,w=S._id,d=g.easing||t.Easings.Linear,h=!!g.yoyo;let p,b;typeof g.duration>"u"?p=.3:g.duration===0?p=.001:p=g.duration,this.node=S,this._id=c++;const T=S.getLayer()||(S instanceof i.Konva.Stage?S.getLayers():null);T||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},T),this.tween=new _(b,function(D){y._tweenFunc(D)},d,0,1,p*1e3,h),this._addListeners(),m.attrs[w]||(m.attrs[w]={}),m.attrs[w][this._id]||(m.attrs[w][this._id]={}),m.tweens[w]||(m.tweens[w]={});for(b in g)s[b]===void 0&&this._addAttr(b,g[b]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){const S=this.node,w=S._id;let d,h,p,b,T;const D=m.tweens[w][g];D&&delete m.attrs[w][D][g];let x=S.getAttr(g);if(e.Util._isArray(y))if(d=[],h=Math.max(y.length,x.length),g==="points"&&y.length!==x.length&&(y.length>x.length?(b=x,x=e.Util._prepareArrayForTween(x,y,S.closed())):(p=y,y=e.Util._prepareArrayForTween(y,x,S.closed()))),g.indexOf("fill")===0)for(let C=0;C<h;C++)if(C%2===0)d.push(y[C]-x[C]);else{const P=e.Util.colorToRGBA(x[C]);T=e.Util.colorToRGBA(y[C]),x[C]=P,d.push({r:T.r-P.r,g:T.g-P.g,b:T.b-P.b,a:T.a-P.a})}else for(let C=0;C<h;C++)d.push(y[C]-x[C]);else u.indexOf(g)!==-1?(x=e.Util.colorToRGBA(x),T=e.Util.colorToRGBA(y),d={r:T.r-x.r,g:T.g-x.g,b:T.b-x.b,a:T.a-x.a}):d=y-x;m.attrs[w][this._id][g]={start:x,diff:d,end:y,trueEnd:p,trueStart:b},m.tweens[w][g]=this._id}_tweenFunc(g){const y=this.node,S=m.attrs[y._id][this._id];let w,d,h,p,b,T,D,x;for(w in S){if(d=S[w],h=d.start,p=d.diff,x=d.end,e.Util._isArray(h))if(b=[],D=Math.max(h.length,x.length),w.indexOf("fill")===0)for(T=0;T<D;T++)T%2===0?b.push((h[T]||0)+p[T]*g):b.push("rgba("+Math.round(h[T].r+p[T].r*g)+","+Math.round(h[T].g+p[T].g*g)+","+Math.round(h[T].b+p[T].b*g)+","+(h[T].a+p[T].a*g)+")");else for(T=0;T<D;T++)b.push((h[T]||0)+p[T]*g);else u.indexOf(w)!==-1?b="rgba("+Math.round(h.r+p.r*g)+","+Math.round(h.g+p.g*g)+","+Math.round(h.b+p.b*g)+","+(h.a+p.a*g)+")":b=h+p*g;y.setAttr(w,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,y=m.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,y=m.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,y=this._id,S=m.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const w in S)delete m.tweens[g][w];delete m.attrs[g][y],m.tweens[g]&&(Object.keys(m.tweens[g]).length===0&&delete m.tweens[g],Object.keys(m.attrs[g]).length===0&&delete m.attrs[g])}}t.Tween=m,m.attrs={},m.tweens={},r.Node.prototype.to=function(f){const g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()},new m(f).play()},t.Easings={BackEaseIn(f,g,y,S){return y*(f/=S)*f*((1.70158+1)*f-1.70158)+g},BackEaseOut(f,g,y,S){return y*((f=f/S-1)*f*((1.70158+1)*f+1.70158)+1)+g},BackEaseInOut(f,g,y,S){let w=1.70158;return(f/=S/2)<1?y/2*(f*f*(((w*=1.525)+1)*f-w))+g:y/2*((f-=2)*f*(((w*=1.525)+1)*f+w)+2)+g},ElasticEaseIn(f,g,y,S,w,d){let h=0;return f===0?g:(f/=S)===1?g+y:(d||(d=S*.3),!w||w<Math.abs(y)?(w=y,h=d/4):h=d/(2*Math.PI)*Math.asin(y/w),-(w*Math.pow(2,10*(f-=1))*Math.sin((f*S-h)*(2*Math.PI)/d))+g)},ElasticEaseOut(f,g,y,S,w,d){let h=0;return f===0?g:(f/=S)===1?g+y:(d||(d=S*.3),!w||w<Math.abs(y)?(w=y,h=d/4):h=d/(2*Math.PI)*Math.asin(y/w),w*Math.pow(2,-10*f)*Math.sin((f*S-h)*(2*Math.PI)/d)+y+g)},ElasticEaseInOut(f,g,y,S,w,d){let h=0;return f===0?g:(f/=S/2)===2?g+y:(d||(d=S*(.3*1.5)),!w||w<Math.abs(y)?(w=y,h=d/4):h=d/(2*Math.PI)*Math.asin(y/w),f<1?-.5*(w*Math.pow(2,10*(f-=1))*Math.sin((f*S-h)*(2*Math.PI)/d))+g:w*Math.pow(2,-10*(f-=1))*Math.sin((f*S-h)*(2*Math.PI)/d)*.5+y+g)},BounceEaseOut(f,g,y,S){return(f/=S)<1/2.75?y*(7.5625*f*f)+g:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+g:y*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,y,S){return y-t.Easings.BounceEaseOut(S-f,0,y,S)+g},BounceEaseInOut(f,g,y,S){return f<S/2?t.Easings.BounceEaseIn(f*2,0,y,S)*.5+g:t.Easings.BounceEaseOut(f*2-S,0,y,S)*.5+y*.5+g},EaseIn(f,g,y,S){return y*(f/=S)*f+g},EaseOut(f,g,y,S){return-y*(f/=S)*(f-2)+g},EaseInOut(f,g,y,S){return(f/=S/2)<1?y/2*f*f+g:-y/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,y,S){return y*(f/=S)*f*f*f*f+g},StrongEaseOut(f,g,y,S){return y*((f=f/S-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,y,S){return(f/=S/2)<1?y/2*f*f*f*f*f+g:y/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,y,S){return y*f/S+g}}})(as)),as}var Ko;function od(){return Ko||(Ko=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=wt(),n=Bt(),r=qt(),i=Nr(),s=id(),a=Vl(),o=rd(),l=zs(),u=Ws(),c=Qt(),_=qs(),m=sd(),f=Ul(),g=Or();t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:_.Animation,Tween:m.Tween,Easings:m.Easings,Context:f.Context,Canvas:g.Canvas}),t.default=t.Konva})(ts)),ts}var Xn={},$o;function ad(){if($o)return Xn;$o=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.Arc=void 0;const t=Tt(),e=Qt(),n=wt(),r=Pt(),i=wt();let s=class extends e.Shape{_sceneFunc(o){const l=n.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),c=n.Konva.getAngle(u?360-this.angle():this.angle()),_=Math.cos(Math.min(c,Math.PI)),m=1,f=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),g=Math.sin(Math.min(c,Math.PI/2)),y=_*(_>0?o:l),S=m*l,w=f*(f>0?o:l),d=g*(g>0?l:o);return{x:y,y:u?-1*d:w,width:S-y,height:d-w}}};return Xn.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),Xn}var Kn={},$n={},Jo;function Wl(){if(Jo)return $n;Jo=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.Line=void 0;const t=Tt(),e=wt(),n=Qt(),r=Pt();function i(o,l,u,c,_,m,f){const g=Math.sqrt(Math.pow(u-o,2)+Math.pow(c-l,2)),y=Math.sqrt(Math.pow(_-u,2)+Math.pow(m-c,2)),S=f*g/(g+y),w=f*y/(g+y),d=u-S*(_-o),h=c-S*(m-l),p=u+w*(_-o),b=c+w*(m-l);return[d,h,p,b]}function s(o,l){const u=o.length,c=[];for(let _=2;_<u-2;_+=2){const m=i(o[_-2],o[_-1],o[_],o[_+1],o[_+2],o[_+3],l);isNaN(m[0])||(c.push(m[0]),c.push(m[1]),c.push(o[_]),c.push(o[_+1]),c.push(m[2]),c.push(m[3]))}return c}let a=class extends n.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),c=u.length,_=this.tension(),m=this.closed(),f=this.bezier();if(!c)return;let g=0;if(l.beginPath(),l.moveTo(u[0],u[1]),_!==0&&c>4){const y=this.getTensionPoints(),S=y.length;for(g=m?0:4,m||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);g<S-2;)l.bezierCurveTo(y[g++],y[g++],y[g++],y[g++],y[g++],y[g++]);m||l.quadraticCurveTo(y[S-2],y[S-1],u[c-2],u[c-1])}else if(f)for(g=2;g<c;)l.bezierCurveTo(u[g++],u[g++],u[g++],u[g++],u[g++],u[g++]);else for(g=2;g<c;g+=2)l.lineTo(u[g],u[g+1]);m?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,c=this.tension(),_=i(l[u-2],l[u-1],l[0],l[1],l[2],l[3],c),m=i(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],c),f=s(l,c);return[_[2],_[3]].concat(f).concat([m[0],m[1],l[u-2],l[u-1],m[2],m[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],c=l[0],_=l[1],m=l[1],f,g;for(let y=0;y<l.length/2;y++)f=l[y*2],g=l[y*2+1],u=Math.min(u,f),c=Math.max(c,f),_=Math.min(_,g),m=Math.max(m,g);return{x:u,y:_,width:c-u,height:m-_}}};return $n.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(a),t.Factory.addGetterSetter(a,"closed",!1),t.Factory.addGetterSetter(a,"bezier",!1),t.Factory.addGetterSetter(a,"tension",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(a,"points",[],(0,r.getNumberArrayValidator)()),$n}var Jn={},ls={},Qo;function ld(){return Qo||(Qo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,o,l)=>{let u,c;const m=l/2;u=0;for(let f=0;f<20;f++)c=m*t.tValues[20][f]+m,u+=t.cValues[20][f]*r(a,o,c);return m*u};t.getCubicArcLength=e;const n=(a,o,l)=>{l===void 0&&(l=1);const u=a[0]-2*a[1]+a[2],c=o[0]-2*o[1]+o[2],_=2*a[1]-2*a[0],m=2*o[1]-2*o[0],f=4*(u*u+c*c),g=4*(u*_+c*m),y=_*_+m*m;if(f===0)return l*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const S=g/(2*f),w=y/f,d=l+S,h=w-S*S,p=d*d+h>0?Math.sqrt(d*d+h):0,b=S*S+h>0?Math.sqrt(S*S+h):0,T=S+Math.sqrt(S*S+h)!==0?h*Math.log(Math.abs((d+p)/(S+b))):0;return Math.sqrt(f)/2*(d*p-S*b+T)};t.getQuadraticArcLength=n;function r(a,o,l){const u=i(1,l,a),c=i(1,l,o),_=u*u+c*c;return Math.sqrt(_)}const i=(a,o,l)=>{const u=l.length-1;let c,_;if(u===0)return 0;if(a===0){_=0;for(let m=0;m<=u;m++)_+=t.binomialCoefficients[u][m]*Math.pow(1-o,u-m)*Math.pow(o,m)*l[m];return _}else{c=new Array(u);for(let m=0;m<u;m++)c[m]=u*(l[m+1]-l[m]);return i(a-1,o,c)}},s=(a,o,l)=>{let u=1,c=a/o,_=(a-l(c))/o,m=0;for(;u>.001;){const f=l(c+_),g=Math.abs(a-f)/o;if(g<u)u=g,c+=_;else{const y=l(c-_),S=Math.abs(a-y)/o;S<u?(u=S,c-=_):_/=2}if(m++,m>500)break}return c};t.t2length=s})(ls)),ls}var Zo;function Ys(){if(Zo)return Jn;Zo=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Path=void 0;const t=Tt(),e=wt(),n=Qt(),r=ld();let i=class ge extends n.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ge.parsePathData(this.data()),this.pathLength=ge.getPathLength(this.dataArray)}_sceneFunc(a){const o=this.dataArray;a.beginPath();let l=!1;for(let u=0;u<o.length;u++){const c=o[u].command,_=o[u].points;switch(c){case"L":a.lineTo(_[0],_[1]);break;case"M":a.moveTo(_[0],_[1]);break;case"C":a.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":a.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":const m=_[0],f=_[1],g=_[2],y=_[3],S=_[4],w=_[5],d=_[6],h=_[7],p=g>y?g:y,b=g>y?1:g/y,T=g>y?y/g:1;a.translate(m,f),a.rotate(d),a.scale(b,T),a.arc(0,0,p,S,S+w,1-h),a.scale(1/b,1/T),a.rotate(-d),a.translate(-m,-f);break;case"z":l=!0,a.closePath();break}}!l&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(f){if(f.command==="A"){const g=f.points[4],y=f.points[5],S=f.points[4]+y;let w=Math.PI/180;if(Math.abs(g-S)<w&&(w=Math.abs(g-S)),y<0)for(let d=g-w;d>S;d-=w){const h=ge.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],d,0);a.push(h.x,h.y)}else for(let d=g+w;d<S;d+=w){const h=ge.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],d,0);a.push(h.x,h.y)}}else if(f.command==="C")for(let g=0;g<=1;g+=.01){const y=ge.getPointOnCubicBezier(g,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);a.push(y.x,y.y)}else a=a.concat(f.points)});let o=a[0],l=a[0],u=a[1],c=a[1],_,m;for(let f=0;f<a.length/2;f++)_=a[f*2],m=a[f*2+1],isNaN(_)||(o=Math.min(o,_),l=Math.max(l,_)),isNaN(m)||(u=Math.min(u,m),c=Math.max(c,m));return{x:o,y:u,width:l-o,height:c-u}}getLength(){return this.pathLength}getPointAtLength(a){return ge.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,o,l,u){return Math.sqrt((l-a)*(l-a)+(u-o)*(u-o))}static getPathLength(a){let o=0;for(let l=0;l<a.length;++l)o+=a[l].pathLength;return o}static getPointAtLengthOfDataArray(a,o){let l,u=0,c=o.length;if(!c)return null;for(;u<c&&a>o[u].pathLength;)a-=o[u].pathLength,++u;if(u===c)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(a<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const _=o[u],m=_.points;switch(_.command){case"L":return ge.getPointOnLine(a,_.start.x,_.start.y,m[0],m[1]);case"C":return ge.getPointOnCubicBezier((0,r.t2length)(a,ge.getPathLength(o),p=>(0,r.getCubicArcLength)([_.start.x,m[0],m[2],m[4]],[_.start.y,m[1],m[3],m[5]],p)),_.start.x,_.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return ge.getPointOnQuadraticBezier((0,r.t2length)(a,ge.getPathLength(o),p=>(0,r.getQuadraticArcLength)([_.start.x,m[0],m[2]],[_.start.y,m[1],m[3]],p)),_.start.x,_.start.y,m[0],m[1],m[2],m[3]);case"A":const f=m[0],g=m[1],y=m[2],S=m[3],w=m[5],d=m[6];let h=m[4];return h+=w*a/_.pathLength,ge.getPointOnEllipticalArc(f,g,y,S,h,d)}return null}static getPointOnLine(a,o,l,u,c,_,m){_=_??o,m=m??l;const f=this.getLineLength(o,l,u,c);if(f<1e-10)return{x:o,y:l};if(u===o)return{x:_,y:m+(c>l?a:-a)};const g=(c-l)/(u-o),y=Math.sqrt(a*a/(1+g*g))*(u<o?-1:1),S=g*y;if(Math.abs(m-l-g*(_-o))<1e-10)return{x:_+y,y:m+S};const w=((_-o)*(u-o)+(m-l)*(c-l))/(f*f),d=o+w*(u-o),h=l+w*(c-l),p=this.getLineLength(_,m,d,h),b=Math.sqrt(a*a-p*p),T=Math.sqrt(b*b/(1+g*g))*(u<o?-1:1),D=g*T;return{x:d+T,y:h+D}}static getPointOnCubicBezier(a,o,l,u,c,_,m,f,g){function y(b){return b*b*b}function S(b){return 3*b*b*(1-b)}function w(b){return 3*b*(1-b)*(1-b)}function d(b){return(1-b)*(1-b)*(1-b)}const h=f*y(a)+_*S(a)+u*w(a)+o*d(a),p=g*y(a)+m*S(a)+c*w(a)+l*d(a);return{x:h,y:p}}static getPointOnQuadraticBezier(a,o,l,u,c,_,m){function f(d){return d*d}function g(d){return 2*d*(1-d)}function y(d){return(1-d)*(1-d)}const S=_*f(a)+u*g(a)+o*y(a),w=m*f(a)+c*g(a)+l*y(a);return{x:S,y:w}}static getPointOnEllipticalArc(a,o,l,u,c,_){const m=Math.cos(_),f=Math.sin(_),g={x:l*Math.cos(c),y:u*Math.sin(c)};return{x:a+(g.x*m-g.y*f),y:o+(g.x*f+g.y*m)}}static parsePathData(a){if(!a)return[];let o=a;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let S=0;S<l.length;S++)o=o.replace(new RegExp(l[S],"g"),"|"+l[S]);const u=o.split("|"),c=[],_=[];let m=0,f=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let S=1;S<u.length;S++){let w=u[S],d=w.charAt(0);for(w=w.slice(1),_.length=0;y=g.exec(w);)_.push(y[0]);const h=[];for(let p=0,b=_.length;p<b;p++){if(_[p]==="00"){h.push(0,0);continue}const T=parseFloat(_[p]);isNaN(T)?h.push(0):h.push(T)}for(;h.length>0&&!isNaN(h[0]);){let p="",b=[];const T=m,D=f;let x,C,P,k,U,W,q,R,et,v;switch(d){case"l":m+=h.shift(),f+=h.shift(),p="L",b.push(m,f);break;case"L":m=h.shift(),f=h.shift(),b.push(m,f);break;case"m":const M=h.shift(),L=h.shift();if(m+=M,f+=L,p="M",c.length>2&&c[c.length-1].command==="z"){for(let I=c.length-2;I>=0;I--)if(c[I].command==="M"){m=c[I].points[0]+M,f=c[I].points[1]+L;break}}b.push(m,f),d="l";break;case"M":m=h.shift(),f=h.shift(),p="M",b.push(m,f),d="L";break;case"h":m+=h.shift(),p="L",b.push(m,f);break;case"H":m=h.shift(),p="L",b.push(m,f);break;case"v":f+=h.shift(),p="L",b.push(m,f);break;case"V":f=h.shift(),p="L",b.push(m,f);break;case"C":b.push(h.shift(),h.shift(),h.shift(),h.shift()),m=h.shift(),f=h.shift(),b.push(m,f);break;case"c":b.push(m+h.shift(),f+h.shift(),m+h.shift(),f+h.shift()),m+=h.shift(),f+=h.shift(),p="C",b.push(m,f);break;case"S":C=m,P=f,x=c[c.length-1],x.command==="C"&&(C=m+(m-x.points[2]),P=f+(f-x.points[3])),b.push(C,P,h.shift(),h.shift()),m=h.shift(),f=h.shift(),p="C",b.push(m,f);break;case"s":C=m,P=f,x=c[c.length-1],x.command==="C"&&(C=m+(m-x.points[2]),P=f+(f-x.points[3])),b.push(C,P,m+h.shift(),f+h.shift()),m+=h.shift(),f+=h.shift(),p="C",b.push(m,f);break;case"Q":b.push(h.shift(),h.shift()),m=h.shift(),f=h.shift(),b.push(m,f);break;case"q":b.push(m+h.shift(),f+h.shift()),m+=h.shift(),f+=h.shift(),p="Q",b.push(m,f);break;case"T":C=m,P=f,x=c[c.length-1],x.command==="Q"&&(C=m+(m-x.points[0]),P=f+(f-x.points[1])),m=h.shift(),f=h.shift(),p="Q",b.push(C,P,m,f);break;case"t":C=m,P=f,x=c[c.length-1],x.command==="Q"&&(C=m+(m-x.points[0]),P=f+(f-x.points[1])),m+=h.shift(),f+=h.shift(),p="Q",b.push(C,P,m,f);break;case"A":k=h.shift(),U=h.shift(),W=h.shift(),q=h.shift(),R=h.shift(),et=m,v=f,m=h.shift(),f=h.shift(),p="A",b=this.convertEndpointToCenterParameterization(et,v,m,f,q,R,k,U,W);break;case"a":k=h.shift(),U=h.shift(),W=h.shift(),q=h.shift(),R=h.shift(),et=m,v=f,m+=h.shift(),f+=h.shift(),p="A",b=this.convertEndpointToCenterParameterization(et,v,m,f,q,R,k,U,W);break}c.push({command:p||d,points:b,start:{x:T,y:D},pathLength:this.calcLength(T,D,p||d,b)})}(d==="z"||d==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(a,o,l,u){let c,_,m,f;const g=ge;switch(l){case"L":return g.getLineLength(a,o,u[0],u[1]);case"C":return(0,r.getCubicArcLength)([a,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,r.getQuadraticArcLength)([a,u[0],u[2]],[o,u[1],u[3]],1);case"A":c=0;const y=u[4],S=u[5],w=u[4]+S;let d=Math.PI/180;if(Math.abs(y-w)<d&&(d=Math.abs(y-w)),_=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),S<0)for(f=y-d;f>w;f-=d)m=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],f,0),c+=g.getLineLength(_.x,_.y,m.x,m.y),_=m;else for(f=y+d;f<w;f+=d)m=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],f,0),c+=g.getLineLength(_.x,_.y,m.x,m.y),_=m;return m=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],w,0),c+=g.getLineLength(_.x,_.y,m.x,m.y),c}return 0}static convertEndpointToCenterParameterization(a,o,l,u,c,_,m,f,g){const y=g*(Math.PI/180),S=Math.cos(y)*(a-l)/2+Math.sin(y)*(o-u)/2,w=-1*Math.sin(y)*(a-l)/2+Math.cos(y)*(o-u)/2,d=S*S/(m*m)+w*w/(f*f);d>1&&(m*=Math.sqrt(d),f*=Math.sqrt(d));let h=Math.sqrt((m*m*(f*f)-m*m*(w*w)-f*f*(S*S))/(m*m*(w*w)+f*f*(S*S)));c===_&&(h*=-1),isNaN(h)&&(h=0);const p=h*m*w/f,b=h*-f*S/m,T=(a+l)/2+Math.cos(y)*p-Math.sin(y)*b,D=(o+u)/2+Math.sin(y)*p+Math.cos(y)*b,x=function(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])},C=function(R,et){return(R[0]*et[0]+R[1]*et[1])/(x(R)*x(et))},P=function(R,et){return(R[0]*et[1]<R[1]*et[0]?-1:1)*Math.acos(C(R,et))},k=P([1,0],[(S-p)/m,(w-b)/f]),U=[(S-p)/m,(w-b)/f],W=[(-1*S-p)/m,(-1*w-b)/f];let q=P(U,W);return C(U,W)<=-1&&(q=Math.PI),C(U,W)>=1&&(q=0),_===0&&q>0&&(q=q-2*Math.PI),_===1&&q<0&&(q=q+2*Math.PI),[T,D,m,f,k,q,y,_]}};return Jn.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(i),t.Factory.addGetterSetter(i,"data"),Jn}var ta;function hd(){if(ta)return Kn;ta=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.Arrow=void 0;const t=Tt(),e=Wl(),n=Pt(),r=wt(),i=Ys();let s=class extends e.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let c=u;const _=this.tension()!==0&&u.length>4;_&&(c=this.getTensionPoints());const m=this.pointerLength(),f=u.length;let g,y;if(_){const d=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],u[f-2],u[f-1]],h=i.Path.calcLength(c[c.length-4],c[c.length-3],"C",d),p=i.Path.getPointOnQuadraticBezier(Math.min(1,1-m/h),d[0],d[1],d[2],d[3],d[4],d[5]);g=u[f-2]-p.x,y=u[f-1]-p.y}else g=u[f-2]-u[f-4],y=u[f-1]-u[f-3];const S=(Math.atan2(y,g)+l)%l,w=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[f-2],u[f-1]),o.rotate(S),o.moveTo(0,0),o.lineTo(-m,w/2),o.lineTo(-m,-w/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),_?(g=(c[0]+c[2])/2-u[0],y=(c[1]+c[3])/2-u[1]):(g=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-g)+l)%l),o.moveTo(0,0),o.lineTo(-m,w/2),o.lineTo(-m,-w/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}};return Kn.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"pointerLength",10,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerWidth",10,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerAtBeginning",!1),t.Factory.addGetterSetter(s,"pointerAtEnding",!0),Kn}var Qn={},ea;function cd(){if(ea)return Qn;ea=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.Circle=void 0;const t=Tt(),e=Qt(),n=Pt(),r=wt();let i=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return Qn.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),t.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),Qn}var Zn={},na;function ud(){if(na)return Zn;na=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.Ellipse=void 0;const t=Tt(),e=Qt(),n=Pt(),r=wt();let i=class extends e.Shape{_sceneFunc(a){const o=this.radiusX(),l=this.radiusY();a.beginPath(),a.save(),o!==l&&a.scale(1,l/o),a.arc(0,0,o,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return Zn.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(i),t.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),t.Factory.addGetterSetter(i,"radiusX",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"radiusY",0,(0,n.getNumberValidator)()),Zn}var ti={},ia;function dd(){if(ia)return ti;ia=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Image=void 0;const t=Bt(),e=Tt(),n=Qt(),r=wt(),i=Pt();let s=class zl extends n.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),c=this.cornerRadius(),_=this.attrs.image;let m;if(_){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?m=[_,this.cropX(),this.cropY(),f,g,0,0,l,u]:m=[_,0,0,l,u]}(this.hasFill()||this.hasStroke()||c)&&(o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),_&&(c&&o.clip(),o.drawImage.apply(o,m))}_hitFunc(o){const l=this.width(),u=this.height(),c=this.cornerRadius();o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const c=t.Util.createImageElement();c.onload=function(){const _=new zl({image:c});l(_)},c.onerror=u,c.crossOrigin="Anonymous",c.src=o}};return ti.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,i.getNumberValidator)()),ti}var gn={},ra;function fd(){if(ra)return gn;ra=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.Tag=gn.Label=void 0;const t=Tt(),e=Qt(),n=zs(),r=Pt(),i=wt(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",o="none",l="up",u="right",c="down",_="left",m=s.length;let f=class extends n.Group{constructor(S){super(S),this.on("add.konva",function(w){this._addListeners(w.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let w=this,d;const h=function(){w._sync()};for(d=0;d<m;d++)S.on(s[d]+a,h)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),w=this.getTag(),d,h,p,b,T,D,x;if(S&&w){switch(d=S.width(),h=S.height(),p=w.pointerDirection(),b=w.pointerWidth(),x=w.pointerHeight(),T=0,D=0,p){case l:T=d/2,D=-1*x;break;case u:T=d+b,D=h/2;break;case c:T=d/2,D=h+x;break;case _:T=-1*b,D=h/2;break}w.setAttrs({x:-1*T,y:-1*D,width:d,height:h}),S.setAttrs({x:-1*T,y:-1*D})}}};gn.Label=f,f.prototype.className="Label",(0,i._registerNode)(f);class g extends e.Shape{_sceneFunc(S){const w=this.width(),d=this.height(),h=this.pointerDirection(),p=this.pointerWidth(),b=this.pointerHeight(),T=this.cornerRadius();let D=0,x=0,C=0,P=0;typeof T=="number"?D=x=C=P=Math.min(T,w/2,d/2):(D=Math.min(T[0]||0,w/2,d/2),x=Math.min(T[1]||0,w/2,d/2),P=Math.min(T[2]||0,w/2,d/2),C=Math.min(T[3]||0,w/2,d/2)),S.beginPath(),S.moveTo(D,0),h===l&&(S.lineTo((w-p)/2,0),S.lineTo(w/2,-1*b),S.lineTo((w+p)/2,0)),S.lineTo(w-x,0),S.arc(w-x,x,x,Math.PI*3/2,0,!1),h===u&&(S.lineTo(w,(d-b)/2),S.lineTo(w+p,d/2),S.lineTo(w,(d+b)/2)),S.lineTo(w,d-P),S.arc(w-P,d-P,P,0,Math.PI/2,!1),h===c&&(S.lineTo((w+p)/2,d),S.lineTo(w/2,d+b),S.lineTo((w-p)/2,d)),S.lineTo(C,d),S.arc(C,d-C,C,Math.PI/2,Math.PI,!1),h===_&&(S.lineTo(0,(d+b)/2),S.lineTo(-1*p,d/2),S.lineTo(0,(d-b)/2)),S.lineTo(0,D),S.arc(D,D,D,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,w=0,d=this.pointerWidth(),h=this.pointerHeight(),p=this.pointerDirection(),b=this.width(),T=this.height();return p===l?(w-=h,T+=h):p===c?T+=h:p===_?(S-=d*1.5,b+=d):p===u&&(b+=d*1.5),{x:S,y:w,width:b,height:T}}}return gn.Tag=g,g.prototype.className="Tag",(0,i._registerNode)(g),t.Factory.addGetterSetter(g,"pointerDirection",o),t.Factory.addGetterSetter(g,"pointerWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(g,"pointerHeight",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(g,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),gn}var ei={},sa;function ql(){if(sa)return ei;sa=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Rect=void 0;const t=Tt(),e=Qt(),n=wt(),r=Bt(),i=Pt();let s=class extends e.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),c=this.height();o.beginPath(),l?r.Util.drawRoundedRectPath(o,u,c,l):o.rect(0,0,u,c),o.closePath(),o.fillStrokeShape(this)}};return ei.Rect=s,s.prototype.className="Rect",(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),ei}var ni={},oa;function gd(){if(oa)return ni;oa=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.RegularPolygon=void 0;const t=Tt(),e=Qt(),n=Pt(),r=wt();let i=class extends e.Shape{_sceneFunc(a){const o=this._getPoints();a.beginPath(),a.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)a.lineTo(o[l].x,o[l].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<a;u++)l.push({x:o*Math.sin(u*2*Math.PI/a),y:-1*o*Math.cos(u*2*Math.PI/a)});return l}getSelfRect(){const a=this._getPoints();let o=a[0].x,l=a[0].y,u=a[0].x,c=a[0].y;return a.forEach(_=>{o=Math.min(o,_.x),l=Math.max(l,_.x),u=Math.min(u,_.y),c=Math.max(c,_.y)}),{x:o,y:u,width:l-o,height:c-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return ni.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),t.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"sides",0,(0,n.getNumberValidator)()),ni}var ii={},aa;function pd(){if(aa)return ii;aa=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Ring=void 0;const t=Tt(),e=Qt(),n=Pt(),r=wt(),i=Math.PI*2;let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,i,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),i,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return ii.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),ii}var ri={},la;function md(){if(la)return ri;la=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Sprite=void 0;const t=Tt(),e=Qt(),n=qs(),r=Pt(),i=wt();let s=class extends e.Shape{constructor(o){super(o),this._updated=!0,this.anim=new n.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],m=this.frameOffsets(),f=_[c+0],g=_[c+1],y=_[c+2],S=_[c+3],w=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,S),o.closePath(),o.fillStrokeShape(this)),w)if(m){const d=m[l],h=u*2;o.drawImage(w,f,g,y,S,d[h+0],d[h+1],y,S)}else o.drawImage(w,f,g,y,S,0,0,y,S)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],m=this.frameOffsets(),f=_[c+2],g=_[c+3];if(o.beginPath(),m){const y=m[l],S=u*2;o.rect(y[S+0],y[S+1],f,g)}else o.rect(0,0,f,g);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),c=u[l],_=c.length/4;o<_-1?this.frameIndex(o+1):this.frameIndex(0)}};return ri.Sprite=s,s.prototype.className="Sprite",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"animation"),t.Factory.addGetterSetter(s,"animations"),t.Factory.addGetterSetter(s,"frameOffsets"),t.Factory.addGetterSetter(s,"image"),t.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),t.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),ri}var si={},ha;function _d(){if(ha)return si;ha=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Star=void 0;const t=Tt(),e=Qt(),n=Pt(),r=wt();let i=class extends e.Shape{_sceneFunc(a){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();a.beginPath(),a.moveTo(0,0-l);for(let c=1;c<u*2;c++){const _=c%2===0?l:o,m=_*Math.sin(c*Math.PI/u),f=-1*_*Math.cos(c*Math.PI/u);a.lineTo(m,f)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return si.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),t.Factory.addGetterSetter(i,"numPoints",5,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"outerRadius",0,(0,n.getNumberValidator)()),si}var Tn={},ca;function Yl(){if(ca)return Tn;ca=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Text=void 0,Tn.stringToArray=a;const t=Bt(),e=Tt(),n=Qt(),r=wt(),i=Pt(),s=wt();function a($){return[...$].reduce((B,K,ot,J)=>{if(new RegExp("\\p{Emoji}","u").test(K)){const O=J[ot+1];O&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(O)?(B.push(K+O),J[ot+1]=""):B.push(K)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(K+(J[ot+1]||""))?B.push(K+J[ot+1]):ot>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(K)?B[B.length-1]+=K:K&&B.push(K);return B},[])}const o="auto",l="center",u="inherit",c="justify",_="Change.konva",m="2d",f="-",g="left",y="text",S="Text",w="top",d="bottom",h="middle",p="normal",b="px ",T=" ",D="right",x="rtl",C="word",P="char",k="none",U="",W=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],q=W.length;function R($){return $.split(",").map(B=>{B=B.trim();const K=B.indexOf(" ")>=0,ot=B.indexOf('"')>=0||B.indexOf("'")>=0;return K&&!ot&&(B=`"${B}"`),B}).join(", ")}let et;function v(){return et||(et=t.Util.createCanvasElement().getContext(m),et)}function M($){$.fillText(this._partialText,this._partialTextX,this._partialTextY)}function L($){$.setAttr("miterLimit",2),$.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function I($){return $=$||{},!$.fillLinearGradientColorStops&&!$.fillRadialGradientColorStops&&!$.fillPatternImage&&($.fill=$.fill||"black"),$}let H=class extends n.Shape{constructor(B){super(I(B)),this._partialTextX=0,this._partialTextY=0;for(let K=0;K<q;K++)this.on(W[K]+_,this._setTextData);this._setTextData()}_sceneFunc(B){const K=this.textArr,ot=K.length;if(!this.text())return;let J=this.padding(),O=this.fontSize(),X=this.lineHeight()*O,at=this.verticalAlign(),ut=this.direction(),gt=0,A=this.align(),G=this.getWidth(),j=this.letterSpacing(),Q=this.fill(),tt=this.textDecoration(),Z=tt.indexOf("underline")!==-1,rt=tt.indexOf("line-through")!==-1,ht;ut=ut===u?B.direction:ut;let st=X/2,nt=h;if(r.Konva._fixTextRendering){const dt=this.measureSize("M");nt="alphabetic",st=(dt.fontBoundingBoxAscent-dt.fontBoundingBoxDescent)/2+X/2}for(ut===x&&B.setAttr("direction",ut),B.setAttr("font",this._getContextFont()),B.setAttr("textBaseline",nt),B.setAttr("textAlign",g),at===h?gt=(this.getHeight()-ot*X-J*2)/2:at===d&&(gt=this.getHeight()-ot*X-J*2),B.translate(J,gt+J),ht=0;ht<ot;ht++){let dt=0,lt=0;const ct=K[ht],mt=ct.text,pt=ct.width,St=ct.lastInParagraph;if(B.save(),A===D?dt+=G-pt-J*2:A===l&&(dt+=(G-pt-J*2)/2),Z){B.save(),B.beginPath();const bt=r.Konva._fixTextRendering?Math.round(O/4):Math.round(O/2),At=dt,Et=st+lt+bt;B.moveTo(At,Et);const Ft=A===c&&!St?G-J*2:pt;B.lineTo(At+Math.round(Ft),Et),B.lineWidth=O/15;const Wt=this._getLinearGradient();B.strokeStyle=Wt||Q,B.stroke(),B.restore()}if(rt){B.save(),B.beginPath();const bt=r.Konva._fixTextRendering?-Math.round(O/4):0;B.moveTo(dt,st+lt+bt);const At=A===c&&!St?G-J*2:pt;B.lineTo(dt+Math.round(At),st+lt+bt),B.lineWidth=O/15;const Et=this._getLinearGradient();B.strokeStyle=Et||Q,B.stroke(),B.restore()}if(ut!==x&&(j!==0||A===c)){const bt=mt.split(" ").length-1,At=a(mt);for(let Et=0;Et<At.length;Et++){const Ft=At[Et];Ft===" "&&!St&&A===c&&(dt+=(G-J*2-pt)/bt),this._partialTextX=dt,this._partialTextY=st+lt,this._partialText=Ft,B.fillStrokeShape(this),dt+=this.measureSize(Ft).width+j}}else j!==0&&B.setAttr("letterSpacing",`${j}px`),this._partialTextX=dt,this._partialTextY=st+lt,this._partialText=mt,B.fillStrokeShape(this);B.restore(),ot>1&&(st+=X)}}_hitFunc(B){const K=this.getWidth(),ot=this.getHeight();B.beginPath(),B.rect(0,0,K,ot),B.closePath(),B.fillStrokeShape(this)}setText(B){const K=t.Util._isString(B)?B:B==null?"":B+"";return this._setAttr(y,K),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(B){var K,ot,J,O,X,at,ut,gt,A,G,j;let Q=v(),tt=this.fontSize(),Z;Q.save(),Q.font=this._getContextFont(),Z=Q.measureText(B),Q.restore();const rt=tt/100;return{actualBoundingBoxAscent:(K=Z.actualBoundingBoxAscent)!==null&&K!==void 0?K:71.58203125*rt,actualBoundingBoxDescent:(ot=Z.actualBoundingBoxDescent)!==null&&ot!==void 0?ot:0,actualBoundingBoxLeft:(J=Z.actualBoundingBoxLeft)!==null&&J!==void 0?J:-7.421875*rt,actualBoundingBoxRight:(O=Z.actualBoundingBoxRight)!==null&&O!==void 0?O:75.732421875*rt,alphabeticBaseline:(X=Z.alphabeticBaseline)!==null&&X!==void 0?X:0,emHeightAscent:(at=Z.emHeightAscent)!==null&&at!==void 0?at:100*rt,emHeightDescent:(ut=Z.emHeightDescent)!==null&&ut!==void 0?ut:-20*rt,fontBoundingBoxAscent:(gt=Z.fontBoundingBoxAscent)!==null&&gt!==void 0?gt:91*rt,fontBoundingBoxDescent:(A=Z.fontBoundingBoxDescent)!==null&&A!==void 0?A:21*rt,hangingBaseline:(G=Z.hangingBaseline)!==null&&G!==void 0?G:72.80000305175781*rt,ideographicBaseline:(j=Z.ideographicBaseline)!==null&&j!==void 0?j:-21*rt,width:Z.width,height:tt}}_getContextFont(){return this.fontStyle()+T+this.fontVariant()+T+(this.fontSize()+b)+R(this.fontFamily())}_addTextLine(B){this.align()===c&&(B=B.trim());const ot=this._getTextWidth(B);return this.textArr.push({text:B,width:ot,lastInParagraph:!1})}_getTextWidth(B){const K=this.letterSpacing(),ot=B.length;return v().measureText(B).width+K*ot}_setTextData(){let B=this.text().split(`
`),K=+this.fontSize(),ot=0,J=this.lineHeight()*K,O=this.attrs.width,X=this.attrs.height,at=O!==o&&O!==void 0,ut=X!==o&&X!==void 0,gt=this.padding(),A=O-gt*2,G=X-gt*2,j=0,Q=this.wrap(),tt=Q!==k,Z=Q!==P&&tt,rt=this.ellipsis();this.textArr=[],v().font=this._getContextFont();const ht=rt?this._getTextWidth(U):0;for(let st=0,nt=B.length;st<nt;++st){let dt=B[st],lt=this._getTextWidth(dt);if(at&&lt>A)for(;dt.length>0;){let ct=0,mt=a(dt).length,pt="",St=0;for(;ct<mt;){const bt=ct+mt>>>1,At=a(dt),Et=At.slice(0,bt+1).join(""),Ft=this._getTextWidth(Et);(rt&&ut&&j+J>G?Ft+ht:Ft)<=A?(ct=bt+1,pt=Et,St=Ft):mt=bt}if(pt){if(Z){const Et=a(dt),Ft=a(pt),Wt=Et[Ft.length],be=Wt===T||Wt===f;let we;if(be&&St<=A)we=Ft.length;else{const Ot=Ft.lastIndexOf(T),Zt=Ft.lastIndexOf(f);we=Math.max(Ot,Zt)+1}we>0&&(ct=we,pt=Et.slice(0,ct).join(""),St=this._getTextWidth(pt))}if(pt=pt.trimRight(),this._addTextLine(pt),ot=Math.max(ot,St),j+=J,this._shouldHandleEllipsis(j)){this._tryToAddEllipsisToLastLine();break}if(dt=a(dt).slice(ct).join("").trimLeft(),dt.length>0&&(lt=this._getTextWidth(dt),lt<=A)){this._addTextLine(dt),j+=J,ot=Math.max(ot,lt);break}}else break}else this._addTextLine(dt),j+=J,ot=Math.max(ot,lt),this._shouldHandleEllipsis(j)&&st<nt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),ut&&j+J>G)break}this.textHeight=K,this.textWidth=ot}_shouldHandleEllipsis(B){const K=+this.fontSize(),ot=this.lineHeight()*K,J=this.attrs.height,O=J!==o&&J!==void 0,X=this.padding(),at=J-X*2;return!(this.wrap()!==k)||O&&B+ot>at}_tryToAddEllipsisToLastLine(){const B=this.attrs.width,K=B!==o&&B!==void 0,ot=this.padding(),J=B-ot*2,O=this.ellipsis(),X=this.textArr[this.textArr.length-1];!X||!O||(K&&(this._getTextWidth(X.text+U)<J||(X.text=X.text.slice(0,X.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(X.text+U))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const B=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,K=this.hasShadow();return B&&K?!0:super._useBufferCanvas()}};return Tn.Text=H,H.prototype._fillFunc=M,H.prototype._strokeFunc=L,H.prototype.className=S,H.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(H),e.Factory.overWriteSetter(H,"width",(0,i.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(H,"height",(0,i.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(H,"direction",u),e.Factory.addGetterSetter(H,"fontFamily","Arial"),e.Factory.addGetterSetter(H,"fontSize",12,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"fontStyle",p),e.Factory.addGetterSetter(H,"fontVariant",p),e.Factory.addGetterSetter(H,"padding",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"align",g),e.Factory.addGetterSetter(H,"verticalAlign",w),e.Factory.addGetterSetter(H,"lineHeight",1,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"wrap",C),e.Factory.addGetterSetter(H,"ellipsis",!1,(0,i.getBooleanValidator)()),e.Factory.addGetterSetter(H,"letterSpacing",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"text","",(0,i.getStringValidator)()),e.Factory.addGetterSetter(H,"textDecoration",""),Tn}var oi={},ua;function yd(){if(ua)return oi;ua=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.TextPath=void 0;const t=Bt(),e=Tt(),n=Qt(),r=Ys(),i=Yl(),s=Pt(),a=wt(),o="",l="normal";function u(m){m.fillText(this.partialText,0,0)}function c(m){m.strokeText(this.partialText,0,0)}let _=class extends n.Shape{constructor(f){super(f),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(f){if(!this.attrs.data)return null;const g=this.pathLength;return f-1>g?null:r.Path.getPointAtLengthOfDataArray(f,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(f){f.setAttr("font",this._getContextFont()),f.setAttr("textBaseline",this.textBaseline()),f.setAttr("textAlign","left"),f.save();const g=this.textDecoration(),y=this.fill(),S=this.fontSize(),w=this.glyphInfo;g==="underline"&&f.beginPath();for(let d=0;d<w.length;d++){f.save();const h=w[d].p0;f.translate(h.x,h.y),f.rotate(w[d].rotation),this.partialText=w[d].text,f.fillStrokeShape(this),g==="underline"&&(d===0&&f.moveTo(0,S/2+1),f.lineTo(S,S/2+1)),f.restore()}g==="underline"&&(f.strokeStyle=y,f.lineWidth=S/20,f.stroke()),f.restore()}_hitFunc(f){f.beginPath();const g=this.glyphInfo;if(g.length>=1){const y=g[0].p0;f.moveTo(y.x,y.y)}for(let y=0;y<g.length;y++){const S=g[y].p1;f.lineTo(S.x,S.y)}f.setAttr("lineWidth",this.fontSize()),f.setAttr("strokeStyle",this.colorKey),f.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(f){return i.Text.prototype.setText.call(this,f)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(f){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const S=y.measureText(f);return y.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:f,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=f,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),S=this.align(),w=this.kerningFunc(),d=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let h=0;S==="center"&&(h=Math.max(0,this.pathLength/2-d/2)),S==="right"&&(h=Math.max(0,this.pathLength-d));const p=(0,i.stringToArray)(this.text());let b=h;for(let T=0;T<p.length;T++){const D=this._getPointAtLength(b);if(!D)return;let x=this._getTextSize(p[T]).width+y;if(p[T]===" "&&S==="justify"){const q=this.text().split(" ").length-1;x+=(this.pathLength-d)/q}const C=this._getPointAtLength(b+x);if(!C)return;const P=r.Path.getLineLength(D.x,D.y,C.x,C.y);let k=0;if(w)try{k=w(p[T-1],p[T])*this.fontSize()}catch{k=0}D.x+=k,C.x+=k,this.textWidth+=k;const U=r.Path.getPointOnLine(k+P/2,D.x,D.y,C.x,C.y),W=Math.atan2(C.y-D.y,C.x-D.x);this.glyphInfo.push({transposeX:U.x,transposeY:U.y,text:p[T],rotation:W,p0:D,p1:C}),b+=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const f=[];this.glyphInfo.forEach(function(b){f.push(b.p0.x),f.push(b.p0.y),f.push(b.p1.x),f.push(b.p1.y)});let g=f[0]||0,y=f[0]||0,S=f[1]||0,w=f[1]||0,d,h;for(let b=0;b<f.length/2;b++)d=f[b*2],h=f[b*2+1],g=Math.min(g,d),y=Math.max(y,d),S=Math.min(S,h),w=Math.max(w,h);const p=this.fontSize();return{x:g-p/2,y:S-p/2,width:y-g+p,height:w-S+p}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return oi.TextPath=_,_.prototype._fillFunc=u,_.prototype._strokeFunc=c,_.prototype._fillFuncHit=u,_.prototype._strokeFuncHit=c,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",o),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),oi}var ai={},da;function vd(){if(da)return ai;da=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Transformer=void 0;const t=Bt(),e=Tt(),n=qt(),r=Qt(),i=ql(),s=zs(),a=wt(),o=Pt(),l=wt(),u="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(x=>x+`.${u}`).join(" "),_="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in a.Konva._global;function y(x,C,P){if(x==="rotater")return P;C+=t.Util.degToRad(f[x]||0);const k=(t.Util.radToDeg(C)%360+360)%360;return t.Util._inRange(k,315+22.5,360)||t.Util._inRange(k,0,22.5)?"ns-resize":t.Util._inRange(k,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(k,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(k,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(k,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(k,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(k,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(k,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+k),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function w(x){return{x:x.x+x.width/2*Math.cos(x.rotation)+x.height/2*Math.sin(-x.rotation),y:x.y+x.height/2*Math.cos(x.rotation)+x.width/2*Math.sin(x.rotation)}}function d(x,C,P){const k=P.x+(x.x-P.x)*Math.cos(C)-(x.y-P.y)*Math.sin(C),U=P.y+(x.x-P.x)*Math.sin(C)+(x.y-P.y)*Math.cos(C);return{...x,rotation:x.rotation+C,x:k,y:U}}function h(x,C){const P=w(x);return d(x,C,P)}function p(x,C,P){let k=C;for(let U=0;U<x.length;U++){const W=a.Konva.getAngle(x[U]),q=Math.abs(W-C)%(Math.PI*2);Math.min(q,Math.PI*2-q)<P&&(k=W)}return k}let b=0,T=class extends s.Group{constructor(C){super(C),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(C){return this.setNode(C),this}setNode(C){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([C])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(C=[]){this._nodes&&this._nodes.length&&this.detach();const P=C.filter(U=>U.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=C=P,C.length===1&&this.useSingleNodeRotation()?this.rotation(C[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(U=>{const W=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(U._attrsAffectingSize.length){const q=U._attrsAffectingSize.map(R=>R+"Change."+this._getEventNamespace()).join(" ");U.on(q,W)}U.on(m.map(q=>q+`.${this._getEventNamespace()}`).join(" "),W),U.on(`absoluteTransformChange.${this._getEventNamespace()}`,W),this._proxyDrag(U)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(C){let P;C.on(`dragstart.${this._getEventNamespace()}`,k=>{P=C.getAbsolutePosition(),!this.isDragging()&&C!==this.findOne(".back")&&this.startDrag(k,!1)}),C.on(`dragmove.${this._getEventNamespace()}`,k=>{if(!P)return;const U=C.getAbsolutePosition(),W=U.x-P.x,q=U.y-P.y;this.nodes().forEach(R=>{if(R===C||R.isDragging())return;const et=R.getAbsolutePosition();R.setAbsolutePosition({x:et.x+W,y:et.y+q}),R.startDrag(k)}),P=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(C=>{C.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(C,P=this.rotation(),k){const U=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),W=C.getAbsoluteScale(k),q=C.getAbsolutePosition(k),R=U.x*W.x-C.offsetX()*W.x,et=U.y*W.y-C.offsetY()*W.y,v=(a.Konva.getAngle(C.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),M={x:q.x+R*Math.cos(v)+et*Math.sin(-v),y:q.y+et*Math.cos(v)+R*Math.sin(v),width:U.width*W.x,height:U.height*W.y,rotation:v};return d(M,-a.Konva.getAngle(P),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const P=[];this.nodes().map(v=>{const M=v.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),L=[{x:M.x,y:M.y},{x:M.x+M.width,y:M.y},{x:M.x+M.width,y:M.y+M.height},{x:M.x,y:M.y+M.height}],I=v.getAbsoluteTransform();L.forEach(function(H){const $=I.point(H);P.push($)})});const k=new t.Transform;k.rotate(-a.Konva.getAngle(this.rotation()));let U=1/0,W=1/0,q=-1/0,R=-1/0;P.forEach(function(v){const M=k.point(v);U===void 0&&(U=q=M.x,W=R=M.y),U=Math.min(U,M.x),W=Math.min(W,M.y),q=Math.max(q,M.x),R=Math.max(R,M.y)}),k.invert();const et=k.point({x:U,y:W});return{x:et.x,y:et.y,width:q-U,height:R-W,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(C=>{this._createAnchor(C)}),this._createAnchor("rotater")}_createAnchor(C){const P=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:C+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),k=this;P.on("mousedown touchstart",function(U){k._handleMouseDown(U)}),P.on("dragstart",U=>{P.stopDrag(),U.cancelBubble=!0}),P.on("dragend",U=>{U.cancelBubble=!0}),P.on("mouseenter",()=>{const U=a.Konva.getAngle(this.rotation()),W=this.rotateAnchorCursor(),q=y(C,U,W);P.getStage().content&&(P.getStage().content.style.cursor=q),this._cursorChange=!0}),P.on("mouseout",()=>{P.getStage().content&&(P.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(P)}_createBack(){const C=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(P,k){const U=k.getParent(),W=U.padding();P.beginPath(),P.rect(-W,-W,k.width()+W*2,k.height()+W*2),P.moveTo(k.width()/2,-W),U.rotateEnabled()&&U.rotateLineVisible()&&P.lineTo(k.width()/2,-U.rotateAnchorOffset()*t.Util._sign(k.height())-W),P.fillStrokeShape(k)},hitFunc:(P,k)=>{if(!this.shouldOverdrawWholeArea())return;const U=this.padding();P.beginPath(),P.rect(-U,-U,k.width()+U*2,k.height()+U*2),P.fillStrokeShape(k)}});this.add(C),this._proxyDrag(C),C.on("dragstart",P=>{P.cancelBubble=!0}),C.on("dragmove",P=>{P.cancelBubble=!0}),C.on("dragend",P=>{P.cancelBubble=!0}),this.on("dragmove",P=>{this.update()})}_handleMouseDown(C){if(this._transforming)return;this._movingAnchorName=C.target.name().split(" ")[0];const P=this._getNodeRect(),k=P.width,U=P.height,W=Math.sqrt(Math.pow(k,2)+Math.pow(U,2));this.sin=Math.abs(U/W),this.cos=Math.abs(k/W),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const q=C.target.getAbsolutePosition(),R=C.target.getStage().getPointerPosition();this._anchorDragOffset={x:R.x-q.x,y:R.y-q.y},b++,this._fire("transformstart",{evt:C.evt,target:this.getNode()}),this._nodes.forEach(et=>{et._fire("transformstart",{evt:C.evt,target:et})})}_handleMouseMove(C){let P,k,U;const W=this.findOne("."+this._movingAnchorName),q=W.getStage();q.setPointersPositions(C);const R=q.getPointerPosition();let et={x:R.x-this._anchorDragOffset.x,y:R.y-this._anchorDragOffset.y};const v=W.getAbsolutePosition();this.anchorDragBoundFunc()&&(et=this.anchorDragBoundFunc()(v,et,C)),W.setAbsolutePosition(et);const M=W.getAbsolutePosition();if(v.x===M.x&&v.y===M.y)return;if(this._movingAnchorName==="rotater"){const J=this._getNodeRect();P=W.x()-J.width/2,k=-W.y()+J.height/2;let O=Math.atan2(-k,P)+Math.PI/2;J.height<0&&(O-=Math.PI);const at=a.Konva.getAngle(this.rotation())+O,ut=a.Konva.getAngle(this.rotationSnapTolerance()),A=p(this.rotationSnaps(),at,ut)-J.rotation,G=h(J,A);this._fitNodesInto(G,C);return}const L=this.shiftBehavior();let I;L==="inverted"?I=this.keepRatio()&&!C.shiftKey:L==="none"?I=this.keepRatio():I=this.keepRatio()||C.shiftKey;let H=this.centeredScaling()||C.altKey;if(this._movingAnchorName==="top-left"){if(I){const J=H?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};U=Math.sqrt(Math.pow(J.x-W.x(),2)+Math.pow(J.y-W.y(),2));const O=this.findOne(".top-left").x()>J.x?-1:1,X=this.findOne(".top-left").y()>J.y?-1:1;P=U*this.cos*O,k=U*this.sin*X,this.findOne(".top-left").x(J.x-P),this.findOne(".top-left").y(J.y-k)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(W.y());else if(this._movingAnchorName==="top-right"){if(I){const J=H?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};U=Math.sqrt(Math.pow(W.x()-J.x,2)+Math.pow(J.y-W.y(),2));const O=this.findOne(".top-right").x()<J.x?-1:1,X=this.findOne(".top-right").y()>J.y?-1:1;P=U*this.cos*O,k=U*this.sin*X,this.findOne(".top-right").x(J.x+P),this.findOne(".top-right").y(J.y-k)}var $=W.position();this.findOne(".top-left").y($.y),this.findOne(".bottom-right").x($.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(W.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(W.x());else if(this._movingAnchorName==="bottom-left"){if(I){const J=H?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};U=Math.sqrt(Math.pow(J.x-W.x(),2)+Math.pow(W.y()-J.y,2));const O=J.x<W.x()?-1:1,X=W.y()<J.y?-1:1;P=U*this.cos*O,k=U*this.sin*X,W.x(J.x-P),W.y(J.y+k)}$=W.position(),this.findOne(".top-left").x($.x),this.findOne(".bottom-right").y($.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(W.y());else if(this._movingAnchorName==="bottom-right"){if(I){const J=H?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};U=Math.sqrt(Math.pow(W.x()-J.x,2)+Math.pow(W.y()-J.y,2));const O=this.findOne(".bottom-right").x()<J.x?-1:1,X=this.findOne(".bottom-right").y()<J.y?-1:1;P=U*this.cos*O,k=U*this.sin*X,this.findOne(".bottom-right").x(J.x+P),this.findOne(".bottom-right").y(J.y+k)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(H=this.centeredScaling()||C.altKey,H){const J=this.findOne(".top-left"),O=this.findOne(".bottom-right"),X=J.x(),at=J.y(),ut=this.getWidth()-O.x(),gt=this.getHeight()-O.y();O.move({x:-X,y:-at}),J.move({x:ut,y:gt})}const B=this.findOne(".top-left").getAbsolutePosition();P=B.x,k=B.y;const K=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ot=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:P,y:k,width:K,height:ot,rotation:a.Konva.getAngle(this.rotation())},C)}_handleMouseUp(C){this._removeEvents(C)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(C){var P;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const k=this.getNode();b--,this._fire("transformend",{evt:C,target:k}),(P=this.getLayer())===null||P===void 0||P.batchDraw(),k&&this._nodes.forEach(U=>{var W;U._fire("transformend",{evt:C,target:U}),(W=U.getLayer())===null||W===void 0||W.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(C,P){const k=this._getNodeRect(),U=1;if(t.Util._inRange(C.width,-this.padding()*2-U,U)){this.update();return}if(t.Util._inRange(C.height,-this.padding()*2-U,U)){this.update();return}const W=new t.Transform;if(W.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&C.width<0&&this._movingAnchorName.indexOf("left")>=0){const I=W.point({x:-this.padding()*2,y:0});C.x+=I.x,C.y+=I.y,C.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y}else if(this._movingAnchorName&&C.width<0&&this._movingAnchorName.indexOf("right")>=0){const I=W.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,C.width+=this.padding()*2}if(this._movingAnchorName&&C.height<0&&this._movingAnchorName.indexOf("top")>=0){const I=W.point({x:0,y:-this.padding()*2});C.x+=I.x,C.y+=I.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,C.height+=this.padding()*2}else if(this._movingAnchorName&&C.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const I=W.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,C.height+=this.padding()*2}if(this.boundBoxFunc()){const I=this.boundBoxFunc()(k,C);I?C=I:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const q=1e7,R=new t.Transform;R.translate(k.x,k.y),R.rotate(k.rotation),R.scale(k.width/q,k.height/q);const et=new t.Transform,v=C.width/q,M=C.height/q;this.flipEnabled()===!1?(et.translate(C.x,C.y),et.rotate(C.rotation),et.translate(C.width<0?C.width:0,C.height<0?C.height:0),et.scale(Math.abs(v),Math.abs(M))):(et.translate(C.x,C.y),et.rotate(C.rotation),et.scale(v,M));const L=et.multiply(R.invert());this._nodes.forEach(I=>{var H;const $=I.getParent().getAbsoluteTransform(),B=I.getTransform().copy();B.translate(I.offsetX(),I.offsetY());const K=new t.Transform;K.multiply($.copy().invert()).multiply(L).multiply($).multiply(B);const ot=K.decompose();I.setAttrs(ot),(H=I.getLayer())===null||H===void 0||H.batchDraw()}),this.rotation(t.Util._getRotation(C.rotation)),this._nodes.forEach(I=>{this._fire("transform",{evt:P,target:I}),I._fire("transform",{evt:P,target:I})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(C,P){this.findOne(C).setAttrs(P)}update(){var C;const P=this._getNodeRect();this.rotation(t.Util._getRotation(P.rotation));const k=P.width,U=P.height,W=this.enabledAnchors(),q=this.resizeEnabled(),R=this.padding(),et=this.anchorSize(),v=this.find("._anchor");v.forEach(L=>{L.setAttrs({width:et,height:et,offsetX:et/2,offsetY:et/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:et/2+R,offsetY:et/2+R,visible:q&&W.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:k/2,y:0,offsetY:et/2+R,visible:q&&W.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:k,y:0,offsetX:et/2-R,offsetY:et/2+R,visible:q&&W.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:U/2,offsetX:et/2+R,visible:q&&W.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:k,y:U/2,offsetX:et/2-R,visible:q&&W.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:U,offsetX:et/2+R,offsetY:et/2-R,visible:q&&W.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:k/2,y:U,offsetY:et/2-R,visible:q&&W.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:k,y:U,offsetX:et/2-R,offsetY:et/2-R,visible:q&&W.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:k/2,y:-this.rotateAnchorOffset()*t.Util._sign(U)-R,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:k,height:U,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const M=this.anchorStyleFunc();M&&v.forEach(L=>{M(L)}),(C=this.getLayer())===null||C===void 0||C.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const C=this.findOne("."+this._movingAnchorName);C&&C.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(C){return n.Node.prototype.clone.call(this,C)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};ai.Transformer=T,T.isTransforming=()=>b>0;function D(x){return x instanceof Array||t.Util.warn("enabledAnchors value should be an array"),x instanceof Array&&x.forEach(function(C){S.indexOf(C)===-1&&t.Util.warn("Unknown anchor name: "+C+". Available names are: "+S.join(", "))}),x||[]}return T.prototype.className="Transformer",(0,l._registerNode)(T),e.Factory.addGetterSetter(T,"enabledAnchors",S,D),e.Factory.addGetterSetter(T,"flipEnabled",!0,(0,o.getBooleanValidator)()),e.Factory.addGetterSetter(T,"resizeEnabled",!0),e.Factory.addGetterSetter(T,"anchorSize",10,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"rotateEnabled",!0),e.Factory.addGetterSetter(T,"rotateLineVisible",!0),e.Factory.addGetterSetter(T,"rotationSnaps",[]),e.Factory.addGetterSetter(T,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(T,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderEnabled",!0),e.Factory.addGetterSetter(T,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(T,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"anchorFill","white"),e.Factory.addGetterSetter(T,"anchorCornerRadius",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(T,"borderStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderDash"),e.Factory.addGetterSetter(T,"keepRatio",!0),e.Factory.addGetterSetter(T,"shiftBehavior","default"),e.Factory.addGetterSetter(T,"centeredScaling",!1),e.Factory.addGetterSetter(T,"ignoreStroke",!1),e.Factory.addGetterSetter(T,"padding",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"nodes"),e.Factory.addGetterSetter(T,"node"),e.Factory.addGetterSetter(T,"boundBoxFunc"),e.Factory.addGetterSetter(T,"anchorDragBoundFunc"),e.Factory.addGetterSetter(T,"anchorStyleFunc"),e.Factory.addGetterSetter(T,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(T,"useSingleNodeRotation",!0),e.Factory.backCompat(T,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ai}var li={},fa;function bd(){if(fa)return li;fa=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Wedge=void 0;const t=Tt(),e=Qt(),n=wt(),r=Pt(),i=wt();let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return li.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1),t.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),li}var hi={},ga;function Sd(){if(ga)return hi;ga=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Blur=void 0;const t=Tt(),e=qt(),n=Pt();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(l,u){const c=l.data,_=l.width,m=l.height;let f,g,y,S,w,d,h,p,b,T,D,x,C,P,k,U,W,q,R,et;const v=u+u+1,M=_-1,L=m-1,I=u+1,H=I*(I+1)/2,$=new r,B=i[u],K=s[u];let ot=null,J=$,O=null,X=null;for(let at=1;at<v;at++)J=J.next=new r,at===I&&(ot=J);J.next=$,y=g=0;for(let at=0;at<m;at++){x=C=P=k=S=w=d=h=0,p=I*(U=c[g]),b=I*(W=c[g+1]),T=I*(q=c[g+2]),D=I*(R=c[g+3]),S+=H*U,w+=H*W,d+=H*q,h+=H*R,J=$;for(let ut=0;ut<I;ut++)J.r=U,J.g=W,J.b=q,J.a=R,J=J.next;for(let ut=1;ut<I;ut++)f=g+((M<ut?M:ut)<<2),S+=(J.r=U=c[f])*(et=I-ut),w+=(J.g=W=c[f+1])*et,d+=(J.b=q=c[f+2])*et,h+=(J.a=R=c[f+3])*et,x+=U,C+=W,P+=q,k+=R,J=J.next;O=$,X=ot;for(let ut=0;ut<_;ut++)c[g+3]=R=h*B>>K,R!==0?(R=255/R,c[g]=(S*B>>K)*R,c[g+1]=(w*B>>K)*R,c[g+2]=(d*B>>K)*R):c[g]=c[g+1]=c[g+2]=0,S-=p,w-=b,d-=T,h-=D,p-=O.r,b-=O.g,T-=O.b,D-=O.a,f=y+((f=ut+u+1)<M?f:M)<<2,x+=O.r=c[f],C+=O.g=c[f+1],P+=O.b=c[f+2],k+=O.a=c[f+3],S+=x,w+=C,d+=P,h+=k,O=O.next,p+=U=X.r,b+=W=X.g,T+=q=X.b,D+=R=X.a,x-=U,C-=W,P-=q,k-=R,X=X.next,g+=4;y+=_}for(let at=0;at<_;at++){C=P=k=x=w=d=h=S=0,g=at<<2,p=I*(U=c[g]),b=I*(W=c[g+1]),T=I*(q=c[g+2]),D=I*(R=c[g+3]),S+=H*U,w+=H*W,d+=H*q,h+=H*R,J=$;for(let gt=0;gt<I;gt++)J.r=U,J.g=W,J.b=q,J.a=R,J=J.next;let ut=_;for(let gt=1;gt<=u;gt++)g=ut+at<<2,S+=(J.r=U=c[g])*(et=I-gt),w+=(J.g=W=c[g+1])*et,d+=(J.b=q=c[g+2])*et,h+=(J.a=R=c[g+3])*et,x+=U,C+=W,P+=q,k+=R,J=J.next,gt<L&&(ut+=_);g=at,O=$,X=ot;for(let gt=0;gt<m;gt++)f=g<<2,c[f+3]=R=h*B>>K,R>0?(R=255/R,c[f]=(S*B>>K)*R,c[f+1]=(w*B>>K)*R,c[f+2]=(d*B>>K)*R):c[f]=c[f+1]=c[f+2]=0,S-=p,w-=b,d-=T,h-=D,p-=O.r,b-=O.g,T-=O.b,D-=O.a,f=at+((f=gt+I)<L?f:L)*_<<2,S+=x+=O.r=c[f],w+=C+=O.g=c[f+1],d+=P+=O.b=c[f+2],h+=k+=O.a=c[f+3],O=O.next,p+=U=X.r,b+=W=X.g,T+=q=X.b,D+=R=X.a,x-=U,C-=W,P-=q,k-=R,X=X.next,g+=_}}const o=function(u){const c=Math.round(this.blurRadius());c>0&&a(u,c)};return hi.Blur=o,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),hi}var ci={},pa;function xd(){if(pa)return ci;pa=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Brighten=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=this.brightness()*255,a=i.data,o=a.length;for(let l=0;l<o;l+=4)a[l]+=s,a[l+1]+=s,a[l+2]+=s};return ci.Brighten=r,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),ci}var ui={},ma;function Cd(){if(ma)return ui;ma=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Contrast=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=Math.pow((this.contrast()+100)/100,2),a=i.data,o=a.length;let l=150,u=150,c=150;for(let _=0;_<o;_+=4)l=a[_],u=a[_+1],c=a[_+2],l/=255,l-=.5,l*=s,l+=.5,l*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,c=c<0?0:c>255?255:c,a[_]=l,a[_+1]=u,a[_+2]=c};return ui.Contrast=r,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),ui}var di={},_a;function wd(){if(_a)return di;_a=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Emboss=void 0;const t=Tt(),e=qt(),n=Bt(),r=Pt(),i=function(s){const a=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),c=s.data,_=s.width,m=s.height,f=_*4;let g=0,y=0,S=m;switch(l){case"top-left":g=-1,y=-1;break;case"top":g=-1,y=0;break;case"top-right":g=-1,y=1;break;case"right":g=0,y=1;break;case"bottom-right":g=1,y=1;break;case"bottom":g=1,y=0;break;case"bottom-left":g=1,y=-1;break;case"left":g=0,y=-1;break;default:n.Util.error("Unknown emboss direction: "+l)}do{const w=(S-1)*f;let d=g;S+d<1&&(d=0),S+d>m&&(d=0);const h=(S-1+d)*_*4;let p=_;do{const b=w+(p-1)*4;let T=y;p+T<1&&(T=0),p+T>_&&(T=0);const D=h+(p-1+T)*4,x=c[b]-c[D],C=c[b+1]-c[D+1],P=c[b+2]-c[D+2];let k=x;const U=k>0?k:-k,W=C>0?C:-C,q=P>0?P:-P;if(W>U&&(k=C),q>U&&(k=P),k*=a,u){const R=c[b]+k,et=c[b+1]+k,v=c[b+2]+k;c[b]=R>255?255:R<0?0:R,c[b+1]=et>255?255:et<0?0:et,c[b+2]=v>255?255:v<0?0:v}else{let R=o-k;R<0?R=0:R>255&&(R=255),c[b]=c[b+1]=c[b+2]=R}}while(--p)}while(--S)};return di.Emboss=i,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),di}var fi={},ya;function Md(){if(ya)return fi;ya=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Enhance=void 0;const t=Tt(),e=qt(),n=Pt();function r(s,a,o,l,u){const c=o-a,_=u-l;if(c===0)return l+_/2;if(_===0)return l;let m=(s-a)/c;return m=_*m+l,m}const i=function(s){const a=s.data,o=a.length;let l=a[0],u=l,c,_=a[1],m=_,f,g=a[2],y=g,S;const w=this.enhance();if(w===0)return;for(let x=0;x<o;x+=4)c=a[x+0],c<l?l=c:c>u&&(u=c),f=a[x+1],f<_?_=f:f>m&&(m=f),S=a[x+2],S<g?g=S:S>y&&(y=S);u===l&&(u=255,l=0),m===_&&(m=255,_=0),y===g&&(y=255,g=0);let d,h,p,b,T,D;if(w>0)d=u+w*(255-u),h=l-w*(l-0),p=m+w*(255-m),b=_-w*(_-0),T=y+w*(255-y),D=g-w*(g-0);else{const x=(u+l)*.5;d=u+w*(u-x),h=l+w*(l-x);const C=(m+_)*.5;p=m+w*(m-C),b=_+w*(_-C);const P=(y+g)*.5;T=y+w*(y-P),D=g+w*(g-P)}for(let x=0;x<o;x+=4)a[x+0]=r(a[x+0],l,u,h,d),a[x+1]=r(a[x+1],_,m,b,p),a[x+2]=r(a[x+2],g,y,D,T)};return fi.Enhance=i,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),fi}var gi={},va;function Td(){if(va)return gi;va=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Grayscale=void 0;const t=function(e){const n=e.data,r=n.length;for(let i=0;i<r;i+=4){const s=.34*n[i]+.5*n[i+1]+.16*n[i+2];n[i]=s,n[i+1]=s,n[i+2]=s}};return gi.Grayscale=t,gi}var pi={},ba;function Pd(){if(ba)return pi;ba=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.HSL=void 0;const t=Tt(),e=qt(),n=Pt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter);const r=function(i){const s=i.data,a=s.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=this.luminance()*127,_=o*l*Math.cos(u*Math.PI/180),m=o*l*Math.sin(u*Math.PI/180),f=.299*o+.701*_+.167*m,g=.587*o-.587*_+.33*m,y=.114*o-.114*_-.497*m,S=.299*o-.299*_-.328*m,w=.587*o+.413*_+.035*m,d=.114*o-.114*_+.293*m,h=.299*o-.3*_+1.25*m,p=.587*o-.586*_-1.05*m,b=.114*o+.886*_-.2*m;let T,D,x,C;for(let P=0;P<a;P+=4)T=s[P+0],D=s[P+1],x=s[P+2],C=s[P+3],s[P+0]=f*T+g*D+y*x+c,s[P+1]=S*T+w*D+d*x+c,s[P+2]=h*T+p*D+b*x+c,s[P+3]=C};return pi.HSL=r,pi}var mi={},Sa;function Rd(){if(Sa)return mi;Sa=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.HSV=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=i.data,a=s.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=o*l*Math.cos(u*Math.PI/180),_=o*l*Math.sin(u*Math.PI/180),m=.299*o+.701*c+.167*_,f=.587*o-.587*c+.33*_,g=.114*o-.114*c-.497*_,y=.299*o-.299*c-.328*_,S=.587*o+.413*c+.035*_,w=.114*o-.114*c+.293*_,d=.299*o-.3*c+1.25*_,h=.587*o-.586*c-1.05*_,p=.114*o+.886*c-.2*_;for(let b=0;b<a;b+=4){const T=s[b+0],D=s[b+1],x=s[b+2],C=s[b+3];s[b+0]=m*T+f*D+g*x,s[b+1]=y*T+S*D+w*x,s[b+2]=d*T+h*D+p*x,s[b+3]=C}};return mi.HSV=r,t.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),mi}var _i={},xa;function Ed(){if(xa)return _i;xa=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Invert=void 0;const t=function(e){const n=e.data,r=n.length;for(let i=0;i<r;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]};return _i.Invert=t,_i}var yi={},Ca;function Ad(){if(Ca)return yi;Ca=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Kaleidoscope=void 0;const t=Tt(),e=qt(),n=Bt(),r=Pt(),i=function(o,l,u){const c=o.data,_=l.data,m=o.width,f=o.height,g=u.polarCenterX||m/2,y=u.polarCenterY||f/2;let S=Math.sqrt(g*g+y*y),w=m-g,d=f-y;const h=Math.sqrt(w*w+d*d);S=h>S?h:S;const p=f,b=m,T=360/b*Math.PI/180;for(let D=0;D<b;D+=1){const x=Math.sin(D*T),C=Math.cos(D*T);for(let P=0;P<p;P+=1){w=Math.floor(g+S*P/p*C),d=Math.floor(y+S*P/p*x);let k=(d*m+w)*4;const U=c[k+0],W=c[k+1],q=c[k+2],R=c[k+3];k=(D+P*m)*4,_[k+0]=U,_[k+1]=W,_[k+2]=q,_[k+3]=R}}},s=function(o,l,u){const c=o.data,_=l.data,m=o.width,f=o.height,g=u.polarCenterX||m/2,y=u.polarCenterY||f/2;let S=Math.sqrt(g*g+y*y),w=m-g,d=f-y;const h=Math.sqrt(w*w+d*d);S=h>S?h:S;const p=f,b=m,T=0;let D,x;for(w=0;w<m;w+=1)for(d=0;d<f;d+=1){const C=w-g,P=d-y,k=Math.sqrt(C*C+P*P)*p/S;let U=(Math.atan2(P,C)*180/Math.PI+360+T)%360;U=U*b/360,D=Math.floor(U),x=Math.floor(k);let W=(x*m+D)*4;const q=c[W+0],R=c[W+1],et=c[W+2],v=c[W+3];W=(d*m+w)*4,_[W+0]=q,_[W+1]=R,_[W+2]=et,_[W+3]=v}},a=function(o){const l=o.width,u=o.height;let c,_,m,f,g,y,S,w,d,h,p=Math.round(this.kaleidoscopePower());const b=Math.round(this.kaleidoscopeAngle()),T=Math.floor(l*(b%360)/360);if(p<1)return;const D=n.Util.createCanvasElement();D.width=l,D.height=u;const x=D.getContext("2d").getImageData(0,0,l,u);n.Util.releaseCanvas(D),i(o,x,{polarCenterX:l/2,polarCenterY:u/2});let C=l/Math.pow(2,p);for(;C<=8;)C=C*2,p-=1;C=Math.ceil(C);let P=C,k=0,U=P,W=1;for(T+C>l&&(k=P,U=0,W=-1),_=0;_<u;_+=1)for(c=k;c!==U;c+=W)m=Math.round(c+T)%l,d=(l*_+m)*4,g=x.data[d+0],y=x.data[d+1],S=x.data[d+2],w=x.data[d+3],h=(l*_+c)*4,x.data[h+0]=g,x.data[h+1]=y,x.data[h+2]=S,x.data[h+3]=w;for(_=0;_<u;_+=1)for(P=Math.floor(C),f=0;f<p;f+=1){for(c=0;c<P+1;c+=1)d=(l*_+c)*4,g=x.data[d+0],y=x.data[d+1],S=x.data[d+2],w=x.data[d+3],h=(l*_+P*2-c-1)*4,x.data[h+0]=g,x.data[h+1]=y,x.data[h+2]=S,x.data[h+3]=w;P*=2}s(x,o,{})};return yi.Kaleidoscope=a,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),yi}var vi={},wa;function Fd(){if(wa)return vi;wa=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Mask=void 0;const t=Tt(),e=qt(),n=Pt();function r(m,f,g){let y=(g*m.width+f)*4;const S=[];return S.push(m.data[y++],m.data[y++],m.data[y++],m.data[y++]),S}function i(m,f){return Math.sqrt(Math.pow(m[0]-f[0],2)+Math.pow(m[1]-f[1],2)+Math.pow(m[2]-f[2],2))}function s(m){const f=[0,0,0];for(let g=0;g<m.length;g++)f[0]+=m[g][0],f[1]+=m[g][1],f[2]+=m[g][2];return f[0]/=m.length,f[1]/=m.length,f[2]/=m.length,f}function a(m,f){const g=r(m,0,0),y=r(m,m.width-1,0),S=r(m,0,m.height-1),w=r(m,m.width-1,m.height-1),d=f||10;if(i(g,y)<d&&i(y,w)<d&&i(w,S)<d&&i(S,g)<d){const h=s([y,g,w,S]),p=[];for(let b=0;b<m.width*m.height;b++){const T=i(h,[m.data[b*4],m.data[b*4+1],m.data[b*4+2]]);p[b]=T<d?0:255}return p}}function o(m,f){for(let g=0;g<m.width*m.height;g++)m.data[4*g+3]=f[g]}function l(m,f,g){const y=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(y.length)),w=Math.floor(S/2),d=[];for(let h=0;h<g;h++)for(let p=0;p<f;p++){const b=h*f+p;let T=0;for(let D=0;D<S;D++)for(let x=0;x<S;x++){const C=h+D-w,P=p+x-w;if(C>=0&&C<g&&P>=0&&P<f){const k=C*f+P,U=y[D*S+x];T+=m[k]*U}}d[b]=T===2040?255:0}return d}function u(m,f,g){const y=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(y.length)),w=Math.floor(S/2),d=[];for(let h=0;h<g;h++)for(let p=0;p<f;p++){const b=h*f+p;let T=0;for(let D=0;D<S;D++)for(let x=0;x<S;x++){const C=h+D-w,P=p+x-w;if(C>=0&&C<g&&P>=0&&P<f){const k=C*f+P,U=y[D*S+x];T+=m[k]*U}}d[b]=T>=1020?255:0}return d}function c(m,f,g){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(y.length)),w=Math.floor(S/2),d=[];for(let h=0;h<g;h++)for(let p=0;p<f;p++){const b=h*f+p;let T=0;for(let D=0;D<S;D++)for(let x=0;x<S;x++){const C=h+D-w,P=p+x-w;if(C>=0&&C<g&&P>=0&&P<f){const k=C*f+P,U=y[D*S+x];T+=m[k]*U}}d[b]=T}return d}const _=function(m){const f=this.threshold();let g=a(m,f);return g&&(g=l(g,m.width,m.height),g=u(g,m.width,m.height),g=c(g,m.width,m.height),o(m,g)),m};return vi.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),vi}var bi={},Ma;function Id(){if(Ma)return bi;Ma=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Noise=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=this.noise()*255,a=i.data,o=a.length,l=s/2;for(let u=0;u<o;u+=4)a[u+0]+=l-2*l*Math.random(),a[u+1]+=l-2*l*Math.random(),a[u+2]+=l-2*l*Math.random()};return bi.Noise=r,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),bi}var Si={},Ta;function Ld(){if(Ta)return Si;Ta=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Pixelate=void 0;const t=Tt(),e=Bt(),n=qt(),r=Pt(),i=function(s){let a=Math.ceil(this.pixelSize()),o=s.width,l=s.height,u=Math.ceil(o/a),c=Math.ceil(l/a),_=s.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let m=0;m<u;m+=1)for(let f=0;f<c;f+=1){let g=0,y=0,S=0,w=0;const d=m*a,h=d+a,p=f*a,b=p+a;let T=0;for(let D=d;D<h;D+=1)if(!(D>=o))for(let x=p;x<b;x+=1){if(x>=l)continue;const C=(o*x+D)*4;g+=_[C+0],y+=_[C+1],S+=_[C+2],w+=_[C+3],T+=1}g=g/T,y=y/T,S=S/T,w=w/T;for(let D=d;D<h;D+=1)if(!(D>=o))for(let x=p;x<b;x+=1){if(x>=l)continue;const C=(o*x+D)*4;_[C+0]=g,_[C+1]=y,_[C+2]=S,_[C+3]=w}}};return Si.Pixelate=i,t.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),Si}var xi={},Pa;function Od(){if(Pa)return xi;Pa=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Posterize=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=Math.round(this.levels()*254)+1,a=i.data,o=a.length,l=255/s;for(let u=0;u<o;u+=1)a[u]=Math.floor(a[u]/l)*l};return xi.Posterize=r,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),xi}var Ci={},Ra;function Nd(){if(Ra)return Ci;Ra=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.RGB=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=i.data,a=s.length,o=this.red(),l=this.green(),u=this.blue();for(let c=0;c<a;c+=4){const _=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=_*o,s[c+1]=_*l,s[c+2]=_*u,s[c+3]=s[c+3]}};return Ci.RGB=r,t.Factory.addGetterSetter(e.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),Ci}var wi={},Ea;function kd(){if(Ea)return wi;Ea=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.RGBA=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=i.data,a=s.length,o=this.red(),l=this.green(),u=this.blue(),c=this.alpha();for(let _=0;_<a;_+=4){const m=1-c;s[_]=o*c+s[_]*m,s[_+1]=l*c+s[_+1]*m,s[_+2]=u*c+s[_+2]*m}};return wi.RGBA=r,t.Factory.addGetterSetter(e.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),wi}var Mi={},Aa;function Dd(){if(Aa)return Mi;Aa=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Sepia=void 0;const t=function(e){const n=e.data,r=n.length;for(let i=0;i<r;i+=4){const s=n[i+0],a=n[i+1],o=n[i+2];n[i+0]=Math.min(255,s*.393+a*.769+o*.189),n[i+1]=Math.min(255,s*.349+a*.686+o*.168),n[i+2]=Math.min(255,s*.272+a*.534+o*.131)}};return Mi.Sepia=t,Mi}var Ti={},Fa;function Gd(){if(Fa)return Ti;Fa=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Solarize=void 0;const t=function(e){const n=e.data,r=e.width,i=e.height,s=r*4;let a=i;do{const o=(a-1)*s;let l=r;do{const u=o+(l-1)*4;let c=n[u],_=n[u+1],m=n[u+2];c>127&&(c=255-c),_>127&&(_=255-_),m>127&&(m=255-m),n[u]=c,n[u+1]=_,n[u+2]=m}while(--l)}while(--a)};return Ti.Solarize=t,Ti}var Pi={},Ia;function Hd(){if(Ia)return Pi;Ia=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Threshold=void 0;const t=Tt(),e=qt(),n=Pt(),r=function(i){const s=this.threshold()*255,a=i.data,o=a.length;for(let l=0;l<o;l+=1)a[l]=a[l]<s?0:255};return Pi.Threshold=r,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Pi}var La;function Ud(){if(La)return Bn;La=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.Konva=void 0;const t=od(),e=ad(),n=hd(),r=cd(),i=ud(),s=dd(),a=fd(),o=Wl(),l=Ys(),u=ql(),c=gd(),_=pd(),m=md(),f=_d(),g=Yl(),y=yd(),S=vd(),w=bd(),d=Sd(),h=xd(),p=Cd(),b=wd(),T=Md(),D=Td(),x=Pd(),C=Rd(),P=Ed(),k=Ad(),U=Fd(),W=Id(),q=Ld(),R=Od(),et=Nd(),v=kd(),M=Dd(),L=Gd(),I=Hd();return Bn.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:i.Ellipse,Image:s.Image,Label:a.Label,Tag:a.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:c.RegularPolygon,Ring:_.Ring,Sprite:m.Sprite,Star:f.Star,Text:g.Text,TextPath:y.TextPath,Transformer:S.Transformer,Wedge:w.Wedge,Filters:{Blur:d.Blur,Brighten:h.Brighten,Contrast:p.Contrast,Emboss:b.Emboss,Enhance:T.Enhance,Grayscale:D.Grayscale,HSL:x.HSL,HSV:C.HSV,Invert:P.Invert,Kaleidoscope:k.Kaleidoscope,Mask:U.Mask,Noise:W.Noise,Pixelate:q.Pixelate,Posterize:R.Posterize,RGB:et.RGB,RGBA:v.RGBA,Sepia:M.Sepia,Solarize:L.Solarize,Threshold:I.Threshold}}),Bn}var Bd=lr.exports,Oa;function Vd(){if(Oa)return lr.exports;Oa=1,Object.defineProperty(Bd,"__esModule",{value:!0});const t=Ud();return lr.exports=t.Konva,lr.exports}var Wd=Vd();const Me=nd(Wd);function vr(t){if(!Me.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const Na={key:!0,style:!0,elm:!0,isRootInsert:!0},hs=".vue-konva-event";function jl(t,e,n,r){const i=t.__konvaNode,s={};let a=!1;for(let o in n){if(Na.hasOwnProperty(o))continue;const l=o.slice(0,2)==="on",u=n[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),i?.off(c+hs,n[o])}!e.hasOwnProperty(o)&&i?.setAttr(o,void 0)}for(let o in e){if(Na.hasOwnProperty(o))continue;let l=o.slice(0,2)==="on";const u=n[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),e[o]&&(i?.off(c+hs),i?.on(c+hs,e[o]))}!l&&(e[o]!==n[o]||r&&e[o]!==i?.getAttr(o))&&(a=!0,s[o]=e[o])}a&&i&&(i.setAttrs(s),vr(i))}const zd="V";function qd(t){function e(n){return n?.__konvaNode?n:n?.parent?e(n.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function Xl(t){return t.component?t.component.__konvaNode||Xl(t.component.subTree):null}function Yd(t){const{el:e,component:n}=t,r=Xl(t);if(e?.tagName&&n&&!r){const i=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${i}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return r}function jd(t){const e=i=>!!i&&typeof i=="object"&&"component"in i,n=i=>Array.isArray(i),r=i=>e(i)?[i,...r(i.children)]:n(i)?i.flatMap(r):[];return r(t.children)}function Kl(t,e){const n=jd(t),r=[];n.forEach(s=>{const a=Yd(s);a&&r.push(a)});let i=!1;r.forEach((s,a)=>{s.getZIndex()!==a&&(s.setZIndex(a),i=!0)}),i&&vr(e)}const Xd=Me.default?.Stage||Me.Stage,Kd=gl({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:n,expose:r}){const i=Vs();if(!i)return;const s=Ie({}),a=jt(null),o=new Xd({width:t.config.width,height:t.config.height,container:document.createElement("div")});i.__konvaNode=o,c();function l(){return i?.__konvaNode}function u(){return i?.__konvaNode}function c(){if(!i)return;const _=s||{},m={...e,...t.config};jl(i,m,_,t.__useStrictMode),Object.assign(s,m)}return Ar(()=>{a.value&&(a.value.innerHTML="",o.container(a.value)),c()}),ks(()=>{c(),Kl(i.subTree,o)}),Ds(()=>{o.destroy()}),ln(()=>t.config,c,{deep:!0}),r({getStage:u,getNode:l}),()=>Gl("div",{ref:a,style:e?.style},n.default?.())}}),$d=".vue-konva-event",Jd={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function Ht(t,e){return gl({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(n,{attrs:r,slots:i,expose:s}){const a=Vs();if(!a)return;const o=Ie({}),l=new e;a.__konvaNode=l,a.vnode.__konvaNode=l,_();function u(){return a?.__konvaNode}function c(){return a?.__konvaNode}function _(){if(!a)return;const f={};for(const S in a?.vnode.props)S.slice(0,2)==="on"&&(f[S]=a.vnode.props[S]);const g=o||{},y={...r,...n.config,...f};jl(a,y,g,n.__useStrictMode),Object.assign(o,y)}Ar(()=>{const f=qd(a)?.__konvaNode;f&&"add"in f&&f.add(l),vr(l)}),Gs(()=>{vr(l),l.destroy(),l.off($d)}),ks(()=>{_(),Kl(a.subTree,l)}),ln(()=>n.config,_,{deep:!0}),s({getStage:c,getNode:u});const m=Jd.hasOwnProperty(t);return()=>m?Gl("template",{},i.default?.()):null}})}const Vt=Me.default||Me,Qd=Ht("Arc",Vt.Arc),Zd=Ht("Arrow",Vt.Arrow),tf=Ht("Circle",Vt.Circle),ef=Ht("Ellipse",Vt.Ellipse),nf=Ht("FastLayer",Vt.FastLayer),rf=Ht("Group",Vt.Group),sf=Ht("Image",Vt.Image),of=Ht("Label",Vt.Label),af=Ht("Layer",Vt.Layer),lf=Ht("Line",Vt.Line),hf=Ht("Path",Vt.Path),cf=Ht("Rect",Vt.Rect),uf=Ht("RegularPolygon",Vt.RegularPolygon),df=Ht("Ring",Vt.Ring),ff=Ht("Shape",Vt.Shape),gf=Ht("Sprite",Vt.Sprite),pf=Ht("Star",Vt.Star),mf=Ht("Tag",Vt.Tag),_f=Ht("Text",Vt.Text),yf=Ht("TextPath",Vt.TextPath),vf=Ht("Transformer",Vt.Transformer),bf=Ht("Wedge",Vt.Wedge),Sf=Object.freeze(Object.defineProperty({__proto__:null,Arc:Qd,Arrow:Zd,Circle:tf,Ellipse:ef,FastLayer:nf,Group:rf,Image:sf,Label:of,Layer:af,Line:lf,Path:hf,Rect:cf,RegularPolygon:uf,Ring:df,Shape:ff,Sprite:gf,Star:pf,Tag:mf,Text:_f,TextPath:yf,Transformer:vf,Wedge:bf},Symbol.toStringTag,{value:"Module"})),xf={install:(t,e)=>{const n=e?.prefix||zd,r=e?.customNodes?Object.entries(e.customNodes).map(([i,s])=>Ht(i,s)):[];[Kd,...Object.values(Sf),...r].forEach(i=>{t.component(`${n}${i.name}`,i)})}};function re(t,e,n){return Math.min(n,Math.max(e,t))}function Ct(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}const on=20,Cf=360;function $l(t){const e=t.x+t.scaleX*t.width,n=t.y+t.scaleY*t.height;return{minX:Math.min(t.x,e),minY:Math.min(t.y,n),maxX:Math.max(t.x,e),maxY:Math.max(t.y,n)}}function Jl(t=[]){if(!Array.isArray(t)||t.length===0)return null;let e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const s of t){const a=$l(s);e=Math.min(e,a.minX),n=Math.min(n,a.minY),r=Math.max(r,a.maxX),i=Math.max(i,a.maxY)}return{minX:e,minY:n,maxX:r,maxY:i}}function wf(t,e=0){if(!Array.isArray(t)||t.length===0)return{x:36,y:36};const n=Jl(t);if(!n)return{x:36,y:36};const r=Math.round(n.maxX+48),i=Math.round(n.minY);if(Number.isFinite(e)&&e>0){const s=Math.max(220,Math.round(e-220));if(r>s)return{x:36,y:Math.round(n.maxY+48)}}return{x:r,y:i}}function Mf({createId:t,image:e,label:n="Image",src:r,position:i}){const s=e.naturalWidth||e.width||1,a=e.naturalHeight||e.height||1,o=Math.min(1,Cf/s),l=Math.max(on,Math.round(s*o)),u=Math.max(on,Math.round(a*o));return{kind:"image",id:t("img"),label:n,src:r,image:e,x:Math.round(Ct(i?.x,36)),y:Math.round(Ct(i?.y,36)),width:l,height:u,rotation:0,scaleX:1,scaleY:1,brightness:0,contrast:0,saturation:0,hue:0,lines:[],history:[],historyIndex:-1,isRestoringHistory:!1}}function Tf({createId:t}){return{kind:"text",id:t("txt"),text:"Demo text",x:48,y:48,width:240,height:84,rotation:0,scaleX:1,scaleY:1,fontSize:30,fontFamily:"Georgia",fill:"#0f172a"}}function Pf({createId:t,source:e,cloneLineList:n}){return{kind:"image",id:t("img"),label:e.label,src:e.src,image:e.image,x:e.x+24,y:e.y+24,width:e.width,height:e.height,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY,brightness:e.brightness,contrast:e.contrast,saturation:e.saturation,hue:e.hue,lines:n(e.lines),history:[],historyIndex:-1,isRestoringHistory:!1}}function Rf({rawBlock:t,createId:e,image:n,cloneLineList:r}){return{kind:"image",id:t.id||e("img"),label:t.label||"Image",src:t.src,image:n,x:Ct(t.x),y:Ct(t.y),width:Math.max(on,Math.round(Ct(t.width,n.naturalWidth||n.width))),height:Math.max(on,Math.round(Ct(t.height,n.naturalHeight||n.height))),rotation:Ct(t.rotation),scaleX:Ct(t.scaleX,1)||1,scaleY:Ct(t.scaleY,1)||1,brightness:Ct(t.brightness),contrast:Ct(t.contrast),saturation:Ct(t.saturation),hue:Ct(t.hue),lines:r(t.lines),history:[],historyIndex:-1,isRestoringHistory:!1}}function Ef({rawBlock:t,createId:e}){return{kind:"text",id:t.id||e("txt"),text:t.text||"Demo text",x:Ct(t.x),y:Ct(t.y),width:Math.max(80,Math.round(Ct(t.width,240))),height:Math.max(40,Math.round(Ct(t.height,80))),rotation:Ct(t.rotation),scaleX:Ct(t.scaleX,1)||1,scaleY:Ct(t.scaleY,1)||1,fontSize:Math.max(10,Math.round(Ct(t.fontSize,30))),fontFamily:t.fontFamily||"Georgia",fill:t.fill||"#0f172a"}}function Af(t,{blockGroupName:e,isDraggable:n}){return{id:t.id,name:e,x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation,scaleX:t.scaleX,scaleY:t.scaleY,draggable:n}}function Ff(t){return{clip:{x:0,y:0,width:t.width,height:t.height},listening:!1}}function If(t,{isSelected:e,canInteractByFrame:n}){let r="transparent",i=0,s="rgba(15, 23, 42, 0.001)",a=[];return e&&(r="#22c55e",i=2,s="rgba(34, 197, 94, 0.08)",a=[]),{x:0,y:0,width:t.width,height:t.height,fill:s,stroke:r,strokeWidth:i,dash:a,hitStrokeWidth:14,strokeScaleEnabled:!1,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:n}}function Lf(t,{isDraggable:e,imageFilters:n,filtersEnabled:r}){return{id:`${t.id}-image`,x:0,y:0,image:t.image,width:t.width,height:t.height,draggable:e,listening:!0,perfectDrawEnabled:!1,filters:r?n:[],brightness:t.brightness,contrast:t.contrast,saturation:t.saturation,hue:t.hue}}function Of(t,{isDraggable:e}){return{id:t.id,x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation,scaleX:t.scaleX,scaleY:t.scaleY,draggable:e,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fill:t.fill,align:"left",verticalAlign:"top",perfectDrawEnabled:!1}}function Nf(t){return{id:t.id,points:t.points,stroke:t.color,strokeWidth:t.size,tension:.25,lineCap:"round",lineJoin:"round",listening:!1,perfectDrawEnabled:!1,globalCompositeOperation:t.tool==="erase"?"destination-out":"source-over"}}function ka(t,e){return{x:re(Ct(t?.x),0,e.width),y:re(Ct(t?.y),0,e.height)}}function kf(t,e){const n=e.scaleX(),r=e.scaleY(),i=Math.abs(n),s=Math.abs(r),a=n<0?-1:1,o=r<0?-1:1;t.x=e.x(),t.y=e.y(),t.rotation=e.rotation(),t.kind==="image"?(t.width=Math.max(on,Math.round(t.width*i)),t.height=Math.max(on,Math.round(t.height*s)),t.lines.length>0&&(t.lines=t.lines.map(l=>({...l,points:l.points.map((u,c)=>c%2===0?u*i:u*s)})))):(t.width=Math.max(on,Math.round(e.width()*i)),t.height=Math.max(on,Math.round(e.height()*s))),t.scaleX=a,t.scaleY=o,e.scaleX(a),e.scaleY(o),t.kind==="text"&&(t.fontSize=Math.max(10,Math.round(t.fontSize*s)))}function Df(t,e){if(e==="x"){const r=t.scaleX<0?-1:1;t.x+=r*t.width,t.scaleX*=-1;return}const n=t.scaleY<0?-1:1;t.y+=n*t.height,t.scaleY*=-1}function Gf({createId:t,toNumber:e}){function n(l){return Array.isArray(l)?[...l]:[]}function r(l){return{id:l?.id||t("line"),tool:l?.tool==="erase"?"erase":"pen",color:l?.color||"#0f766e",size:Math.max(1,Math.round(e(l?.size,10))),points:n(l?.points)}}function i(l){return Array.isArray(l)?l.map(u=>r(u)):[]}function s(l){return{label:l.label,src:l.src,x:l.x,y:l.y,width:l.width,height:l.height,rotation:l.rotation,scaleX:l.scaleX,scaleY:l.scaleY,brightness:l.brightness,contrast:l.contrast,saturation:l.saturation,hue:l.hue,lines:i(l.lines)}}function a(l,u,c){l.label=u.label||"Image",l.src=u.src,l.image=c,l.x=e(u.x),l.y=e(u.y),l.width=Math.max(20,Math.round(e(u.width,l.width))),l.height=Math.max(20,Math.round(e(u.height,l.height))),l.rotation=e(u.rotation),l.scaleX=e(u.scaleX,1)||1,l.scaleY=e(u.scaleY,1)||1,l.brightness=e(u.brightness),l.contrast=e(u.contrast),l.saturation=e(u.saturation),l.hue=e(u.hue),l.lines=i(u.lines)}function o(l){return l.kind==="image"?{kind:"image",id:l.id,label:l.label,src:l.src,x:l.x,y:l.y,width:l.width,height:l.height,rotation:l.rotation,scaleX:l.scaleX,scaleY:l.scaleY,brightness:l.brightness,contrast:l.contrast,saturation:l.saturation,hue:l.hue,lines:i(l.lines)}:{kind:"text",id:l.id,text:l.text,x:l.x,y:l.y,width:l.width,height:l.height,rotation:l.rotation,scaleX:l.scaleX,scaleY:l.scaleY,fontSize:l.fontSize,fontFamily:l.fontFamily,fill:l.fill}}return{clonePoints:n,normalizeLine:r,cloneLineList:i,snapshotImageBlockState:s,hydrateImageBlockState:a,serializeBlock:o}}function Hf(){const t=document.createElement("canvas");t.width=1024,t.height=640;const e=t.getContext("2d");if(!e)return"";const n=e.createLinearGradient(0,0,t.width,t.height);return n.addColorStop(0,"#0f172a"),n.addColorStop(1,"#155e75"),e.fillStyle=n,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgba(255, 255, 255, 0.08)",e.beginPath(),e.arc(220,180,130,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(780,360,210,0,Math.PI*2),e.fill(),e.fillStyle="#f8fafc",e.font="700 58px Georgia",e.fillText("Sample Product",72,120),e.fillStyle="#bae6fd",e.font="400 30px Georgia",e.fillText("Upload your files and replace this image",72,180),e.fillStyle="#14b8a6",e.fillRect(72,240,360,220),e.fillStyle="#0f172a",e.font="700 34px Georgia",e.fillText("DEMO BLOCK",102,360),e.strokeStyle="#67e8f9",e.lineWidth=4,e.strokeRect(56,56,t.width-112,t.height-112),t.toDataURL("image/png")}function Da(){const t=document.createElement("canvas");t.width=860,t.height=520;const e=t.getContext("2d");if(!e)return"";const n=e.createLinearGradient(0,0,t.width,t.height);return n.addColorStop(0,"#0f172a"),n.addColorStop(1,"#155e75"),e.fillStyle=n,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgba(255, 255, 255, 0.08)",e.beginPath(),e.arc(660,300,170,0,Math.PI*2),e.fill(),e.strokeStyle="#67e8f9",e.lineWidth=4,e.strokeRect(42,42,t.width-84,t.height-84),e.fillStyle="#f8fafc",e.font="700 56px Georgia",e.fillText("New Block",86,140),e.fillStyle="#bae6fd",e.font="400 30px Georgia",e.fillText("Replace with your image or edit this block",86,194),t.toDataURL("image/png")}function Uf(t){return t==="image/jpeg"?"jpg":t==="image/webp"?"webp":"png"}function Bf(t,e){const n=document.createElement("a");n.href=t,n.download=e,n.click()}function Vf(t,e){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.click(),URL.revokeObjectURL(n)}function Wf(){const n=[Me.Filters.Brighten,Me.Filters.Contrast,Me.Filters.HSL],r=.35,i=3.5,s=1.08,a=20,o="image-block-group",l=1200,u=18,c=220,_=jt(null),m=jt(null),f=jt(null),g=jt(null),y=jt(null),S=jt(null),w=jt(null),d=Ie({width:960,height:620}),h=Ie({x:0,y:0,scale:1}),p=jt(!1),b=jt([]),T=jt(""),D=jt("select"),x=jt(!1),C=jt(""),P=jt("#0f766e"),k=jt(10),U=jt(22),W=Ie({brightness:0,contrast:0,saturation:0,hue:0}),q=Ie({format:"image/png",quality:.92,pixelRatio:1,width:960,height:620}),R=Ie({visible:!1,mode:"upload",preserveBlockSize:!1,targetId:"",queue:[],sourceName:"",sourceSrc:"",sourceWidth:0,sourceHeight:0,cropX:0,cropY:0,cropWidth:0,cropHeight:0,outputWidth:0,outputHeight:0,rotation:0}),et=jt(null),v=jt(""),M=new Map,L=new Map,I=Me.pixelRatio;let H=0,$=null;const B=te(()=>b.value.find(E=>E.id===T.value)||null),K=te(()=>!B.value||B.value.kind!=="image"?null:B.value),ot=te(()=>!B.value||B.value.kind!=="text"?null:B.value),J=te(()=>b.value.filter(E=>E.kind==="image")),O=te(()=>b.value.filter(E=>E.kind==="text")),X=te(()=>b.value.length),at=te(()=>B.value?B.value.kind:"none"),ut=te(()=>p.value?"pan":D.value),gt=te(()=>{if(!K.value)return"0/0";const E=Array.isArray(K.value.history)?K.value.history:[],Y=Number.isFinite(K.value.historyIndex)?K.value.historyIndex:-1;return`${Y>=0?Y+1:0}/${E.length}`}),A=te(()=>`${Math.round(h.scale*100)}%`);function G(E=c){const Y=Math.max(1e-6,h.scale),it=(-h.x-E)/Y,ft=(-h.y-E)/Y,_t=it+(d.width+E*2)/Y,yt=ft+(d.height+E*2)/Y;return{left:it,top:ft,right:_t,bottom:yt}}function j(E,Y){if(!E||!Y)return!1;const it=$l(E);return it.maxX>=Y.left&&it.minX<=Y.right&&it.maxY>=Y.top&&it.minY<=Y.bottom}function Q(E){if(!Array.isArray(E)||E.length<=u)return E;const Y=G();return E.filter(it=>it?it.id===T.value||it.id===C.value?!0:j(it,Y):!1)}const tt=te(()=>K.value?(Number.isFinite(K.value.historyIndex)?K.value.historyIndex:-1)>0:!1),Z=te(()=>{if(!K.value)return!1;const E=Array.isArray(K.value.history)?K.value.history:[],Y=Number.isFinite(K.value.historyIndex)?K.value.historyIndex:-1;return Y>=0&&Y<E.length-1}),rt=te(()=>Q(J.value)),ht=te(()=>Q(O.value)),st=te(()=>({width:d.width,height:d.height,x:h.x,y:h.y,scaleX:h.scale,scaleY:h.scale,draggable:p.value})),nt=te(()=>({x:0,y:0,width:d.width,height:d.height,listening:!1,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:d.width,y:d.height},fillLinearGradientColorStops:[0,"#020617",.5,"#0b1221",1,"#111827"]})),dt={rotateEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-right","bottom-right","bottom-center","bottom-left","middle-left"],boundBoxFunc(E,Y){return Math.abs(Y.width)<20||Math.abs(Y.height)<20?E:Y}};function lt(E){return H+=1,`${E}-${Date.now()}-${H}`}function ct(E){v.value=E,$&&window.clearTimeout($),$=window.setTimeout(()=>{v.value=""},4200)}function mt(){window.devicePixelRatio>1&&(Me.pixelRatio=1)}function pt(){return _.value?.getNode?.()||null}function St(){if(!f.value)return;const E=window.innerWidth<=900,Y=E?220:280,it=Math.max(300,Math.floor(f.value.clientWidth-a)),ft=Math.max(Y,Math.floor(window.innerHeight-(E?260:360))),_t=Math.round(it*.58),yt=re(_t,Y,ft);d.width=it,d.height=yt}function bt(){q.width=d.width,q.height=d.height}function At(E,Y){const it=h.scale,ft=E>0?it*s:it/s,_t=re(ft,r,i);if(Math.abs(_t-it)<1e-6)return;const yt=Y||{x:d.width/2,y:d.height/2},Gt={x:(yt.x-h.x)/it,y:(yt.y-h.y)/it};h.scale=_t,h.x=yt.x-Gt.x*_t,h.y=yt.y-Gt.y*_t}function Et(){At(1)}function Ft(){At(-1)}function Wt(){h.x=0,h.y=0,h.scale=1}function be(E){E.evt.preventDefault();const it=pt()?.getPointerPosition();if(!it)return;let ft=E.evt.deltaY>0?-1:1;E.evt.ctrlKey&&(ft=-ft),At(ft,it)}function we(E){const Y=pt();!Y||E.target!==Y||(h.x=E.target.x(),h.y=E.target.y())}function Ot(E){E&&Dn(),p.value=!!E,p.value&&(T.value="",zt(Jt))}function Zt(){Ot(!p.value)}function cn(){if(!B.value)return;const E=B.value;E.x=Math.max(0,Math.round((d.width-E.width)/2)),E.y=Math.max(0,Math.round((d.height-E.height)/2)),E.rotation=0,E.scaleX=1,E.scaleY=1,E.kind==="image"&&(E.brightness=0,E.contrast=0,E.saturation=0,E.hue=0,Ur(),zt(()=>Re(E.id))),ce(E),zt(Jt)}function un(E,Y=56){if(!E)return;const it=Math.max(1,E.maxX-E.minX),ft=Math.max(1,E.maxY-E.minY),_t=it+Y*2,yt=ft+Y*2,Gt=d.width/_t,De=d.height/yt,Ze=re(Math.min(Gt,De),r,1),Ge=(E.minX+E.maxX)/2,Cn=(E.minY+E.maxY)/2;h.scale=Ze,h.x=d.width/2-Ge*Ze,h.y=d.height/2-Cn*Ze}function kn(){const E=Jl(b.value);un(E)}function Yi(){if(!B.value)return;const E=B.value,Y=E.x+E.scaleX*(E.width/2),it=E.y+E.scaleY*(E.height/2);h.x=d.width/2-Y*h.scale,h.y=d.height/2-it*h.scale}function Jt(){const E=m.value?.getNode?.(),Y=pt();if(!E||!Y)return;if(D.value!=="select"||p.value||!T.value){E.nodes([]),E.getLayer()?.batchDraw();return}const it=Y.findOne(`#${T.value}`);it?E.nodes([it]):E.nodes([]),E.getLayer()?.batchDraw()}function ji(E){D.value!==E&&Dn(),D.value=E,(p.value||E!=="select")&&Ot(!1),E!=="select"&&(T.value=""),zt(Jt)}function bn(E){D.value!=="select"||p.value||(T.value=E,zt(Jt))}const{cloneLineList:Sn,snapshotImageBlockState:Xi,hydrateImageBlockState:ne,serializeBlock:Ki}=Gf({createId:lt,toNumber:Ct});function $e(E){return E&&b.value.find(Y=>Y.id===E&&Y.kind==="image")||null}function ce(E=K.value){if(!E||E.kind!=="image"||E.isRestoringHistory)return;Array.isArray(E.history)||(E.history=[]),Number.isFinite(E.historyIndex)||(E.historyIndex=E.history.length-1);const Y=Xi(E),it=E.history.slice(0,E.historyIndex+1);for(it.push(Y);it.length>6;)it.shift();E.history=it,E.historyIndex=it.length-1}function $i(){return{blocks:b.value.map(E=>Ki(E)),lines:[]}}async function ke(E){if(M.has(E))return M.get(E);const Y=await new Promise((it,ft)=>{const _t=new window.Image;_t.onload=()=>it(_t),_t.onerror=()=>ft(new Error("Image loading failed")),_t.src=E});return M.set(E,Y),Y}async function Ji(E){if(E.kind==="image"){const Y=Da(),it=typeof E.src=="string"&&E.src?E.src:Y;if(!it)throw new Error("Image source is missing");const ft=await ke(it);return Rf({rawBlock:{...E,src:it},createId:lt,image:ft,cloneLineList:Sn})}return Ef({rawBlock:E,createId:lt})}async function Je(E){if(!E||!Array.isArray(E.blocks))throw new Error("Invalid snapshot format");const Y=[];for(const ft of E.blocks)Y.push(await Ji(ft));const it=Array.isArray(E.lines)?Sn(E.lines):[];if(it.length>0){const ft=Y.find(_t=>_t.kind==="image");ft&&ft.lines.length===0&&(ft.lines=it)}b.value=Y,T.value="",C.value="",await zt();for(const ft of b.value)ft.kind==="image"&&(Qe(ft)&&Re(ft.id),ft.history=[],ft.historyIndex=-1,ft.isRestoringHistory=!1,ce(ft));Jt()}async function F(E){const Y=K.value;if(!Y)return;const it=Array.isArray(Y.history)?Y.history:[];if(E<0||E>=it.length)return;const ft=it[E];if(ft)try{Y.isRestoringHistory=!0;const _t=await ke(ft.src);ne(Y,ft,_t),await zt(),Re(Y.id),Y.historyIndex=E,Jt()}catch(_t){ct(`History restore failed: ${_t.message}`)}finally{Y.isRestoringHistory=!1}}async function Qi(){if(!tt.value)return;const E=Number.isFinite(K.value?.historyIndex)?K.value.historyIndex:-1;await F(E-1)}async function kr(){if(!Z.value)return;const E=Number.isFinite(K.value?.historyIndex)?K.value.historyIndex:-1;await F(E+1)}function Qe(E){return!E||E.kind!=="image"?!1:Math.abs(E.brightness)>1e-4||Math.abs(E.contrast)>1e-4||Math.abs(E.saturation)>1e-4||Math.abs(E.hue)>1e-4}function Zi(E){const Y=Math.max(1,Math.round(Math.max(E.width,E.height)));return re(l/Y,.35,1)}function Dr(E){if(!E||L.has(E))return;const Y=window.requestAnimationFrame(()=>{L.delete(E),Re(E)});L.set(E,Y)}function Re(E){const Y=pt();if(!Y)return;const it=Y.findOne(`#${E}-image`);if(!it)return;const ft=$e(E);if(!ft)return;const _t=Qe(ft);try{const yt=typeof it.isCached=="function"?it.isCached():!0;if(!_t){yt&&it.clearCache(),it.getLayer()?.batchDraw();return}it.clearCache(),it.cache({pixelRatio:Zi(ft)}),it.getLayer()?.batchDraw()}catch{it.getLayer()?.batchDraw()}}function Gr(E){return Af(E,{blockGroupName:o,isDraggable:D.value==="select"&&!p.value&&T.value===E.id})}function Hr(E){return Ff(E)}function z(E){return If(E,{isSelected:T.value===E.id,canInteractByFrame:D.value==="select"&&!p.value})}function ie(E){return Lf(E,{isDraggable:!1,imageFilters:n,filtersEnabled:Qe(E)})}function Ql(E){return Of(E,{isDraggable:D.value==="select"&&!p.value&&T.value===E.id})}function Zl(E){return Nf(E)}function th(E){const Y=E?.findAncestor?.(`.${o}`,!0);return Y?$e(Y.id()):null}function js(E){const Y=pt();return!Y||!E?null:Y.findOne(`#${E}`)}function Dn(){if(!x.value)return;const E=$e(C.value);x.value=!1,C.value="",E&&ce(E)}function xn(){Dn()}function eh(E){const Y=E.target.getStage();if(Y&&!p.value){if(D.value==="pen"||D.value==="erase"){const it=th(E.target);if(!it)return;const _t=js(it.id)?.getRelativePointerPosition?.();if(!_t)return;const yt=ka(_t,it);x.value=!0,C.value=it.id,T.value=it.id;const Gt=D.value==="erase"?U.value:k.value,De=D.value==="erase"?"#000000":P.value;it.lines.push({id:lt("line"),tool:D.value,color:De,size:Gt,points:[yt.x,yt.y]});return}E.target===Y&&(T.value="",zt(Jt))}}function nh(E){if(p.value||!x.value)return;const Y=$e(C.value);if(!Y){Dn();return}const ft=js(Y.id)?.getRelativePointerPosition?.();if(!ft||Y.lines.length===0)return;const _t=ka(ft,Y),yt=Y.lines.length-1,Gt=Y.lines[yt],De=[...Gt.points,_t.x,_t.y];Y.lines.splice(yt,1,{...Gt,points:De})}function ih(){p.value||Dn()}function rh(E,Y){Y?.target?.id?.()===E.id&&(E.x=Y.target.x(),E.y=Y.target.y(),ce(E))}function sh(E,Y){const it=Y.target;kf(E,it),E.kind==="image"&&Qe(E)&&zt(()=>Re(E.id)),ce(E)}function Ur(){if(!K.value){W.brightness=0,W.contrast=0,W.saturation=0,W.hue=0;return}W.brightness=K.value.brightness,W.contrast=K.value.contrast,W.saturation=K.value.saturation,W.hue=K.value.hue}function oh(E,Y){if(!K.value)return;const it=Ct(Y);W[E]=it,K.value[E]=it,Dr(K.value.id)}function ah(){K.value&&ce(K.value)}function lh(E){if(!K.value)return;const Y=K.value;Df(Y,E),ce(Y),zt(Jt)}function hh(E){B.value&&(B.value.rotation+=E,B.value.kind==="image"&&ce(B.value),zt(Jt))}function ch(){const E=Tf({createId:lt});b.value.push(E),T.value=E.id,zt(Jt)}function uh(){if(!K.value)return;const E=K.value,Y=Pf({createId:lt,source:E,cloneLineList:Sn});b.value.push(Y),T.value=Y.id,ce(Y),zt(()=>{Qe(Y)&&Re(Y.id),Jt()})}function dh(){B.value&&(C.value===B.value.id&&(x.value=!1,C.value=""),b.value=b.value.filter(E=>E.id!==B.value.id),T.value="",zt(Jt))}function fh(E){ot.value&&(ot.value.text=E)}function gh(E){ot.value&&(ot.value.fill=E)}function ph(E){ot.value&&(ot.value.fontSize=Math.max(10,Math.round(Ct(E,24))))}function mh(){ot.value}function _h(){g.value?.click()}function yh(){if(!K.value){ct("Select an image block first.");return}y.value?.click()}async function vh(){try{const E=Da();if(!E){ct("New block generation failed.");return}await Br(E,"new-block.png",{layout:"after-image-blocks"}),kn()}catch(E){ct(`Add block failed: ${E.message}`)}}async function Xs(){try{const E=Hf();if(!E){ct("Sample image generation failed.");return}await Br(E,"sample-demo.png",{layout:"after-image-blocks"})}catch(E){ct(`Sample add failed: ${E.message}`)}}function bh(){S.value?.click()}function Ks(E){return new Promise((Y,it)=>{const ft=new window.FileReader;ft.onload=()=>Y(String(ft.result||"")),ft.onerror=()=>it(new Error(`Could not read file: ${E.name}`)),ft.readAsDataURL(E)})}async function Sh(E){const Y=E.target,it=Array.from(Y.files||[]);if(Y.value="",it.length===0)return;const ft=it.filter(_t=>_t.type.startsWith("image/"));if(ft.length===0){ct("No supported image files selected.");return}try{for(const _t of ft){const yt=await Ks(_t);R.queue.push({name:_t.name,src:yt})}R.visible||await $s()}catch(_t){ct(_t.message)}}async function xh(E){const Y=E.target.files?.[0];if(E.target.value="",!!Y){if(!K.value){ct("Select an image block first.");return}if(!Y.type.startsWith("image/")){ct("Only image files are supported.");return}try{const it=await Ks(Y);R.queue=[],await Vr(it,Y.name,"edit",K.value.id,{preserveBlockSize:!0})}catch(it){ct(it.message)}}}async function Br(E,Y="Image",it={}){const ft=await ke(E),_t=it.position||(it.layout==="after-image-blocks"?wf(J.value,d.width):{x:36+b.value.length%6*16,y:36+b.value.length%6*16}),yt=Mf({createId:lt,image:ft,label:Y,src:E,position:_t});return b.value.push(yt),T.value=yt.id,await zt(),Qe(yt)&&Re(yt.id),Ur(),ce(yt),Jt(),yt}async function Vr(E,Y,it="upload",ft="",_t={}){R.mode=it,R.preserveBlockSize=!!_t.preserveBlockSize,R.targetId=ft,R.sourceSrc=E,R.sourceName=Y||"image",R.visible=!0;const yt=await ke(E);if(et.value=yt,R.sourceWidth=yt.naturalWidth||yt.width,R.sourceHeight=yt.naturalHeight||yt.height,R.cropX=0,R.cropY=0,R.cropWidth=R.sourceWidth,R.cropHeight=R.sourceHeight,R.outputWidth=R.sourceWidth,R.outputHeight=R.sourceHeight,R.preserveBlockSize){const Gt=$e(ft);Gt&&(R.outputWidth=re(Math.round(Ct(Gt.width,R.outputWidth)),1,4096),R.outputHeight=re(Math.round(Ct(Gt.height,R.outputHeight)),1,4096))}R.rotation=0,await zt(),tr()}async function $s(){const E=R.queue.shift();if(!E){Gn(!0);return}await Vr(E.src,E.name,"upload","",{preserveBlockSize:!1})}async function Ch(){K.value&&(R.queue=[],await Vr(K.value.src,K.value.label,"edit",K.value.id,{preserveBlockSize:!1}))}function Js(){if(!et.value)return;const E=Math.max(1,Math.round(Ct(R.sourceWidth,1))),Y=Math.max(1,Math.round(Ct(R.sourceHeight,1)));R.cropX=re(Math.round(Ct(R.cropX)),0,Math.max(0,E-1)),R.cropY=re(Math.round(Ct(R.cropY)),0,Math.max(0,Y-1)),R.cropWidth=re(Math.round(Ct(R.cropWidth,E)),1,Math.max(1,E-R.cropX)),R.cropHeight=re(Math.round(Ct(R.cropHeight,Y)),1,Math.max(1,Y-R.cropY)),R.outputWidth=re(Math.round(Ct(R.outputWidth,R.cropWidth)),1,4096),R.outputHeight=re(Math.round(Ct(R.outputHeight,R.cropHeight)),1,4096),R.rotation=re(Ct(R.rotation),-180,180)}function wh(){et.value&&(R.cropX=0,R.cropY=0,R.cropWidth=R.sourceWidth,R.cropHeight=R.sourceHeight,R.outputWidth=R.sourceWidth,R.outputHeight=R.sourceHeight,R.rotation=0,tr())}function Mh(){if(!et.value)return;const E=Math.min(R.sourceWidth,R.sourceHeight);R.cropX=Math.floor((R.sourceWidth-E)/2),R.cropY=Math.floor((R.sourceHeight-E)/2),R.cropWidth=E,R.cropHeight=E,R.outputWidth=E,R.outputHeight=E,tr()}function tr(){const E=w.value;if(!E||!et.value)return;Js();const Y=R.outputWidth/R.outputHeight,it=420;let ft=it,_t=it;Y>=1?_t=Math.max(80,Math.round(it/Y)):ft=Math.max(80,Math.round(it*Y)),E.width=ft,E.height=_t;const yt=E.getContext("2d");yt&&(yt.clearRect(0,0,ft,_t),yt.fillStyle="#0f172a",yt.fillRect(0,0,ft,_t),yt.save(),yt.translate(ft/2,_t/2),yt.rotate(R.rotation*Math.PI/180),yt.drawImage(et.value,R.cropX,R.cropY,R.cropWidth,R.cropHeight,-ft/2,-_t/2,ft,_t),yt.restore())}function Th(){Js();const E=document.createElement("canvas");E.width=R.outputWidth,E.height=R.outputHeight;const Y=E.getContext("2d");if(!Y||!et.value)throw new Error("Cropper canvas is unavailable");return Y.clearRect(0,0,E.width,E.height),Y.save(),Y.translate(E.width/2,E.height/2),Y.rotate(R.rotation*Math.PI/180),Y.drawImage(et.value,R.cropX,R.cropY,R.cropWidth,R.cropHeight,-E.width/2,-E.height/2,E.width,E.height),Y.restore(),E.toDataURL("image/png",1)}function Gn(E=!1){R.visible=!1,R.mode="upload",R.preserveBlockSize=!1,R.targetId="",R.sourceName="",R.sourceSrc="",R.sourceWidth=0,R.sourceHeight=0,R.cropX=0,R.cropY=0,R.cropWidth=0,R.cropHeight=0,R.outputWidth=0,R.outputHeight=0,R.rotation=0,et.value=null,E&&(R.queue=[])}async function Ph(){if(et.value)try{const E=Th();if(R.mode==="upload"){const Gt=R.sourceName||"Image";if(await Br(E,Gt,{layout:"after-image-blocks"}),R.queue.length>0){await $s();return}Gn(!0);return}const Y=b.value.find(Gt=>Gt.id===R.targetId&&Gt.kind==="image");if(!Y){Gn(!0);return}const it=await ke(E),ft=Math.max(1,Y.width),_t=Math.max(1,Y.height),yt=R.preserveBlockSize;if(Y.src=E,Y.image=it,!yt&&(Y.width=R.outputWidth,Y.height=R.outputHeight,Y.lines.length>0)){const Gt=Y.width/ft,De=Y.height/_t;Y.lines=Y.lines.map(Ze=>({...Ze,points:Ze.points.map((Ge,Cn)=>Cn%2===0?Ge*Gt:Ge*De)}))}await zt(),Re(Y.id),ce(Y),Gn(!0)}catch(E){ct(`Crop failed: ${E.message}`)}}async function Rh(){if(!window.EyeDropper){ct("EyeDropper API is not available in this browser.");return}try{const Y=await new window.EyeDropper().open();P.value=Y.sRGBHex,ot.value&&(ot.value.fill=Y.sRGBHex)}catch{ct("Color picking cancelled.")}}async function Eh(){const E=pt();if(E)try{const Y=q.format,it=re(Ct(q.quality,.92),.1,1),ft=Math.max(1,Ct(q.pixelRatio,1));let _t=E.toDataURL({mimeType:Y,quality:it,pixelRatio:ft});const yt=Math.max(1,Math.round(Ct(q.width,d.width))),Gt=Math.max(1,Math.round(Ct(q.height,d.height)));if(yt!==Math.round(d.width*ft)||Gt!==Math.round(d.height*ft)){const Ze=await ke(_t),Ge=document.createElement("canvas");Ge.width=yt,Ge.height=Gt;const Cn=Ge.getContext("2d");Cn&&(Cn.drawImage(Ze,0,0,yt,Gt),_t=Ge.toDataURL(Y,it))}const De=Uf(Y);Bf(_t,`konva-editor-export-${Date.now()}.${De}`)}catch(Y){ct(`Export failed: ${Y.message}`)}}function Ah(){try{const E={version:1,generatedAt:new Date().toISOString(),snapshot:$i()},Y=new Blob([JSON.stringify(E,null,2)],{type:"application/json"});Vf(Y,`konva-editor-state-${Date.now()}.json`)}catch(E){ct(`State export failed: ${E.message}`)}}async function Fh(E){const Y=E.target.files?.[0];if(E.target.value="",!!Y)try{const it=await Y.text(),ft=JSON.parse(it),_t=ft&&ft.snapshot||ft&&ft.board&&ft.board.snapshot||ft&&Array.isArray(ft.boards)&&ft.boards[0]&&ft.boards[0].snapshot||ft;await Je(_t),ct("State imported successfully.")}catch(it){ct(`State import failed: ${it.message}`)}}return ln(K,()=>{Ur()}),ln(()=>T.value,()=>{zt(Jt)}),ln(()=>D.value,()=>{zt(Jt)}),Ar(()=>{mt(),St(),Wt(),bt(),window.addEventListener("resize",St),window.addEventListener("mouseup",xn),window.addEventListener("touchend",xn),window.addEventListener("touchcancel",xn),Xs()}),Ds(()=>{window.removeEventListener("resize",St),window.removeEventListener("mouseup",xn),window.removeEventListener("touchend",xn),window.removeEventListener("touchcancel",xn);for(const E of L.values())window.cancelAnimationFrame(E);L.clear(),$&&window.clearTimeout($),Me.pixelRatio=I}),{stageRef:_,transformerRef:m,canvasWrapRef:f,imageInputRef:g,replaceImageInputRef:y,importJsonInputRef:S,cropPreviewRef:w,panMode:p,tool:D,brushColor:P,brushSize:k,eraserSize:U,imageControls:W,exportOptions:q,cropper:R,notice:v,selectedBlock:B,selectedImage:K,selectedText:ot,imageBlocks:J,textBlocks:O,renderImageBlocks:rt,renderTextBlocks:ht,totalBlocks:X,selectedKindLabel:at,activeToolLabel:ut,historyCounter:gt,zoomPercent:A,canUndo:tt,canRedo:Z,stageConfig:st,stageBackgroundConfig:nt,transformerConfig:dt,syncExportSizeWithStage:bt,zoomIn:Et,zoomOut:Ft,resetStageView:Wt,onStageWheel:be,onStageDragEnd:we,togglePanMode:Zt,resetSelectedBlockState:cn,focusSelectedBlock:Yi,fitViewportToAllBlocks:kn,setTool:ji,selectBlock:bn,undo:Qi,redo:kr,getImageBlockGroupConfig:Gr,getImageLineClipConfig:Hr,getImageFrameConfig:z,getImageNodeConfig:ie,getTextNodeConfig:Ql,getLineNodeConfig:Zl,onStageMouseDown:eh,onStageMouseMove:nh,onStageMouseUp:ih,onBlockDragEnd:rh,onBlockTransformEnd:sh,onImageControlInput:oh,commitImageControlChange:ah,flipSelectedImage:lh,rotateSelectedBy:hh,addTextBlock:ch,duplicateSelectedBlock:uh,removeSelectedBlock:dh,updateTextContent:fh,updateTextColor:gh,updateTextSize:ph,commitTextChange:mh,triggerImagePicker:_h,triggerReplaceImagePicker:yh,addDefaultBlock:vh,addSampleImageBlock:Xs,triggerImportStatePicker:bh,onImageInputChange:Sh,onReplaceImageInputChange:xh,openCropperForSelectedImage:Ch,setCropFullImage:wh,setCropSquareCenter:Mh,renderCropPreview:tr,closeCropper:Gn,applyCropper:Ph,pickColorWithEyedropper:Rh,exportImage:Eh,exportStateJson:Ah,onImportStateChange:Fh}}const Rt=(t,e="")=>`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"${e}>${t}</svg>`,Mt={cursor:Rt('<path d="M5 3l14 8-6 1-3 6z"/><path d="M13 12l4 4"/>'),brush:Rt('<path d="M18 4l2 2-9 9-4 1 1-4z"/><path d="M7 16c-2 0-4 2-4 4h4c0-2 0-4-1-4z"/>'),eraser:Rt('<path d="M7 21h10"/><path d="M16 4l4 4-9 9H6l-2-2z"/>'),pan:Rt('<path d="M18 11V6a2 2 0 00-4 0"/><path d="M14 10V4a2 2 0 00-4 0v6"/><path d="M10 9.5V6a2 2 0 00-4 0v8"/><path d="M18 11a2 2 0 014 0v3a8 8 0 01-8 8h-2c-4 0-6-2-8-5l-1-2a2 2 0 013-2h1"/>'),plusSquare:Rt('<rect x="3" y="3" width="18" height="18" rx="3"/><path d="M12 8v8M8 12h8"/>'),upload:Rt('<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>'),replace:Rt('<path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0115-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 01-15 6.7L3 16"/>'),text:Rt('<polyline points="4 7 4 4 20 4 20 7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/>'),undo:Rt('<polyline points="1 4 1 10 7 10"/><path d="M3.5 14a9 9 0 109-9.5L1 10"/>'),redo:Rt('<polyline points="23 4 23 10 17 10"/><path d="M20.5 14a9 9 0 11-9-9.5L23 10"/>'),crosshair:Rt('<circle cx="12" cy="12" r="7"/><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/>'),fit:Rt('<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/>'),resetView:Rt('<path d="M3 12a9 9 0 1018 0 9 9 0 00-18 0z"/><path d="M12 7v5l3 2"/>'),trash:Rt('<polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 01-2 2H8a2 2 0 01-2-2L5 6"/><path d="M10 6V4a2 2 0 012-2h0a2 2 0 012 2v2"/>'),more:Rt('<circle cx="12" cy="5" r="1" fill="currentColor"/><circle cx="12" cy="12" r="1" fill="currentColor"/><circle cx="12" cy="19" r="1" fill="currentColor"/>',' stroke-width="0"'),copy:Rt('<rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>'),crop:Rt('<path d="M6 2v14a2 2 0 002 2h14"/><path d="M18 22V8a2 2 0 00-2-2H2"/>'),flipX:Rt('<path d="M12 2v20"/><path d="M8 8L4 12l4 4"/><path d="M16 8l4 4-4 4"/>'),flipY:Rt('<path d="M2 12h20"/><path d="M8 8L12 4l4 4"/><path d="M8 16l4 4 4-4"/>'),rotate:Rt('<path d="M21 2v6h-6"/><path d="M21 13a9 9 0 11-3-7.7L21 8"/>'),reset:Rt('<path d="M3 2v6h6"/><path d="M3 13a9 9 0 103-7.7L3 8"/>'),image:Rt('<rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/>'),download:Rt('<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>'),fileJson:Rt('<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/>'),fileImport:Rt('<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><path d="M9 15h6"/><path d="M12 12l3 3-3 3"/>'),maximize:Rt('<path d="M8 3H5a2 2 0 00-2 2v3"/><path d="M21 8V5a2 2 0 00-2-2h-3"/><path d="M3 16v3a2 2 0 002 2h3"/><path d="M16 21h3a2 2 0 002-2v-3"/>'),eyedropper:Rt('<path d="M16.2 3.8a2.8 2.8 0 014 4L14 14l-4 1 1-4z"/><path d="M9 15l-4 4"/>'),close:Rt('<line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>'),check:Rt('<polyline points="4 12 9 17 20 6"/>'),squareCenter:Rt('<rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/>'),fullImage:Rt('<path d="M3 7V5a2 2 0 012-2h2"/><path d="M17 3h2a2 2 0 012 2v2"/><path d="M21 17v2a2 2 0 01-2 2h-2"/><path d="M7 21H5a2 2 0 01-2-2v-2"/>'),zoomIn:Rt('<circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/>'),zoomOut:Rt('<circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/>'),sun:Rt('<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.2" y1="4.2" x2="5.6" y2="5.6"/><line x1="18.4" y1="18.4" x2="19.8" y2="19.8"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.2" y1="19.8" x2="5.6" y2="18.4"/><line x1="18.4" y1="5.6" x2="19.8" y2="4.2"/>'),sliders:Rt('<line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/>')},zf=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},qf={class:"app-shell"},Yf={class:"topbar"},jf={class:"title-wrap"},Xf={class:"title-row"},Kf={class:"status-row"},$f={class:"status-pill"},Jf={class:"status-pill"},Qf={class:"status-pill"},Zf={class:"status-pill"},t0={class:"workspace"},e0={class:"canvas-overlay canvas-overlay-left"},n0={class:"toolbar overlay-row"},i0=["innerHTML"],r0=["innerHTML"],s0=["disabled"],o0=["innerHTML"],a0=["innerHTML"],l0=["disabled"],h0=["innerHTML"],c0=["disabled"],u0=["innerHTML"],d0={class:"toolbar overlay-row"},f0=["innerHTML"],g0=["innerHTML"],p0={class:"popover-inner"},m0={class:"popover-field"},_0={class:"popover-field"},y0={class:"popover-label"},v0=["innerHTML"],b0=["innerHTML"],S0={class:"popover-inner"},x0={class:"popover-field"},C0={class:"popover-label"},w0=["innerHTML"],M0={class:"canvas-overlay canvas-overlay-right"},T0={class:"toolbar overlay-row align-end"},P0=["innerHTML"],R0=["innerHTML"],E0=["disabled"],A0=["innerHTML"],F0=["innerHTML"],I0=["innerHTML"],L0=["disabled"],O0=["innerHTML"],N0={class:"icon-btn","data-tip":"More"},k0=["innerHTML"],D0={class:"popover-inner"},G0={class:"popover-section"},H0={class:"popover-btn-row"},U0=["disabled"],B0=["innerHTML"],V0=["disabled"],W0=["innerHTML"],z0=["disabled"],q0=["innerHTML"],Y0=["disabled"],j0=["innerHTML"],X0=["disabled"],K0=["innerHTML"],$0=["disabled"],J0=["innerHTML"],Q0=["innerHTML"],Z0={class:"popover-section"},t1={class:"popover-btn-row"},e1={class:"popover-field popover-field-inline"},n1={class:"popover-field"},i1={class:"popover-label"},r1={class:"popover-field"},s1={class:"popover-label"},o1={class:"popover-btn-row"},a1={class:"popover-field popover-field-inline"},l1={class:"popover-field popover-field-inline"},h1={class:"popover-btn-row"},c1=["innerHTML"],u1={class:"popover-section"},d1={class:"popover-btn-row"},f1=["innerHTML"],g1=["innerHTML"],p1={key:0,class:"canvas-overlay canvas-overlay-bottom"},m1={class:"context-bar overlay-row"},_1={class:"icon-btn","data-tip":"Adjustments"},y1=["innerHTML"],v1={class:"popover-inner"},b1={class:"popover-field"},S1={class:"popover-label"},x1=["value"],C1={class:"popover-field"},w1={class:"popover-label"},M1=["value"],T1={class:"popover-field"},P1={class:"popover-label"},R1=["value"],E1={class:"popover-field"},A1={class:"popover-label"},F1=["value"],I1=["innerHTML"],L1=["innerHTML"],O1=["innerHTML"],N1={class:"icon-btn","data-tip":"Edit text"},k1=["innerHTML"],D1={class:"popover-inner"},G1={class:"popover-field"},H1=["value"],U1={class:"popover-field"},B1={class:"popover-label"},V1=["value"],W1={class:"popover-field"},z1=["value"],q1={class:"stage-shell"},Y1={class:"cropper-modal"},j1={class:"cropper-header"},X1=["innerHTML"],K1={class:"cropper-content"},$1={class:"crop-preview-wrap"},J1={class:"crop-fields"},Q1={class:"tool-row"},Z1=["innerHTML"],tg=["innerHTML"],eg={class:"tool-row"},ng=["innerHTML"],ig={key:1,class:"notice"},rg={__name:"App",setup(t){const e=jt("");let n=null;function r(Je){n&&(clearTimeout(n),n=null),e.value=Je}function i(Je){n=setTimeout(()=>{e.value===Je&&(e.value="")},120)}function s(Je){n&&(clearTimeout(n),n=null),e.value=Je}const{stageRef:a,transformerRef:o,canvasWrapRef:l,imageInputRef:u,replaceImageInputRef:c,importJsonInputRef:_,cropPreviewRef:m,panMode:f,tool:g,brushColor:y,brushSize:S,eraserSize:w,imageControls:d,exportOptions:h,cropper:p,notice:b,selectedBlock:T,selectedImage:D,selectedText:x,renderImageBlocks:C,renderTextBlocks:P,totalBlocks:k,activeToolLabel:U,historyCounter:W,zoomPercent:q,canUndo:R,canRedo:et,stageConfig:v,stageBackgroundConfig:M,transformerConfig:L,syncExportSizeWithStage:I,zoomIn:H,zoomOut:$,fitViewportToAllBlocks:B,resetStageView:K,onStageWheel:ot,onStageDragEnd:J,togglePanMode:O,resetSelectedBlockState:X,focusSelectedBlock:at,setTool:ut,selectBlock:gt,undo:A,redo:G,getImageBlockGroupConfig:j,getImageLineClipConfig:Q,getImageFrameConfig:tt,getImageNodeConfig:Z,getTextNodeConfig:rt,getLineNodeConfig:ht,onStageMouseDown:st,onStageMouseMove:nt,onStageMouseUp:dt,onBlockDragEnd:lt,onBlockTransformEnd:ct,onImageControlInput:mt,commitImageControlChange:pt,flipSelectedImage:St,rotateSelectedBy:bt,addTextBlock:At,duplicateSelectedBlock:Et,removeSelectedBlock:Ft,updateTextContent:Wt,updateTextColor:be,updateTextSize:we,commitTextChange:Ot,triggerImagePicker:Zt,triggerReplaceImagePicker:cn,addDefaultBlock:un,addSampleImageBlock:kn,triggerImportStatePicker:Yi,onImageInputChange:Jt,onReplaceImageInputChange:ji,openCropperForSelectedImage:bn,setCropFullImage:Sn,setCropSquareCenter:Xi,renderCropPreview:ne,closeCropper:Ki,applyCropper:$e,pickColorWithEyedropper:ce,exportImage:$i,exportStateJson:ke,onImportStateChange:Ji}=Wf();return(Je,F)=>{const Qi=tn("v-rect"),kr=tn("v-image"),Qe=tn("v-line"),Zi=tn("v-group"),Dr=tn("v-text"),Re=tn("v-transformer"),Gr=tn("v-layer"),Hr=tn("v-stage");return fe(),Ue("div",qf,[V("header",Yf,[V("div",jf,[V("div",Xf,[F[96]||(F[96]=V("h1",null,"Konva Image Editor",-1)),V("div",Kf,[V("span",$f,Yt(N(U)),1),V("span",Jf,Yt(N(q)),1),V("span",Qf,Yt(N(k))+" blocks",1),V("span",Zf,Yt(N(W)),1)])])])]),V("div",t0,[V("div",{ref_key:"canvasWrapRef",ref:l,class:"canvas-wrap"},[V("div",e0,[V("div",n0,[V("button",{class:"icon-btn","data-tip":"Add block",onClick:F[0]||(F[0]=(...z)=>N(un)&&N(un)(...z))},[V("span",{innerHTML:N(Mt).plusSquare},null,8,i0)]),V("button",{class:"icon-btn","data-tip":"Upload",onClick:F[1]||(F[1]=(...z)=>N(Zt)&&N(Zt)(...z))},[V("span",{innerHTML:N(Mt).upload},null,8,r0)]),V("button",{class:"icon-btn","data-tip":"Replace",disabled:!N(D),onClick:F[2]||(F[2]=(...z)=>N(cn)&&N(cn)(...z))},[V("span",{innerHTML:N(Mt).replace},null,8,o0)],8,s0),V("button",{class:"icon-btn","data-tip":"Add text",onClick:F[3]||(F[3]=(...z)=>N(At)&&N(At)(...z))},[V("span",{innerHTML:N(Mt).text},null,8,a0)]),F[97]||(F[97]=V("span",{class:"toolbar-sep"},null,-1)),V("button",{class:"icon-btn","data-tip":"Undo",disabled:!N(R),onClick:F[4]||(F[4]=(...z)=>N(A)&&N(A)(...z))},[V("span",{innerHTML:N(Mt).undo},null,8,h0)],8,l0),V("button",{class:"icon-btn","data-tip":"Redo",disabled:!N(et),onClick:F[5]||(F[5]=(...z)=>N(G)&&N(G)(...z))},[V("span",{innerHTML:N(Mt).redo},null,8,u0)],8,c0)]),V("div",d0,[V("button",{class:Se(["icon-btn",{active:!N(f)&&N(g)==="select"}]),"data-tip":"Select",onClick:F[6]||(F[6]=z=>N(ut)("select"))},[V("span",{innerHTML:N(Mt).cursor},null,8,f0)],2),V("div",{class:"popover-anchor popover-anchor-left",onMouseenter:F[13]||(F[13]=z=>r("brush")),onMouseleave:F[14]||(F[14]=z=>i("brush"))},[V("button",{class:Se(["icon-btn",{active:!N(f)&&N(g)==="pen"}]),"data-tip":"Brush",onClick:F[7]||(F[7]=z=>N(ut)("pen"))},[V("span",{innerHTML:N(Mt).brush},null,8,g0)],2),V("div",{class:Se(["popover popover-below",{"popover-open":e.value==="brush"}]),onMouseenter:F[11]||(F[11]=z=>s("brush")),onMouseleave:F[12]||(F[12]=z=>i("brush"))},[V("div",p0,[V("label",m0,[F[98]||(F[98]=V("span",{class:"popover-label"},"Color",-1)),ae(V("input",{"onUpdate:modelValue":F[8]||(F[8]=z=>$t(y)?y.value=z:null),type:"color",class:"color-swatch"},null,512),[[ue,N(y)]])]),V("label",_0,[V("span",y0,"Size: "+Yt(N(S))+"px",1),ae(V("input",{"onUpdate:modelValue":F[9]||(F[9]=z=>$t(S)?S.value=z:null),type:"range",min:"1",max:"50",step:"1"},null,512),[[ue,N(S),void 0,{number:!0}]])]),V("button",{class:"mini-btn",onClick:F[10]||(F[10]=(...z)=>N(ce)&&N(ce)(...z))},[V("span",{innerHTML:N(Mt).eyedropper},null,8,v0),F[99]||(F[99]=Ut(" Pick ",-1))])])],34)],32),V("div",{class:"popover-anchor popover-anchor-left",onMouseenter:F[19]||(F[19]=z=>r("eraser")),onMouseleave:F[20]||(F[20]=z=>i("eraser"))},[V("button",{class:Se(["icon-btn",{active:!N(f)&&N(g)==="erase"}]),"data-tip":"Eraser",onClick:F[15]||(F[15]=z=>N(ut)("erase"))},[V("span",{innerHTML:N(Mt).eraser},null,8,b0)],2),V("div",{class:Se(["popover popover-below",{"popover-open":e.value==="eraser"}]),onMouseenter:F[17]||(F[17]=z=>s("eraser")),onMouseleave:F[18]||(F[18]=z=>i("eraser"))},[V("div",S0,[V("label",x0,[V("span",C0,"Size: "+Yt(N(w))+"px",1),ae(V("input",{"onUpdate:modelValue":F[16]||(F[16]=z=>$t(w)?w.value=z:null),type:"range",min:"2",max:"80",step:"1"},null,512),[[ue,N(w),void 0,{number:!0}]])])])],34)],32),V("button",{class:Se(["icon-btn",{active:N(f)}]),"data-tip":"Pan",onClick:F[21]||(F[21]=(...z)=>N(O)&&N(O)(...z))},[V("span",{innerHTML:N(Mt).pan},null,8,w0)],2)])]),V("div",M0,[V("div",T0,[V("button",{class:"icon-btn","data-tip":"Zoom in",onClick:F[22]||(F[22]=(...z)=>N(H)&&N(H)(...z))},[V("span",{innerHTML:N(Mt).zoomIn},null,8,P0)]),V("button",{class:"icon-btn","data-tip":"Zoom out",onClick:F[23]||(F[23]=(...z)=>N($)&&N($)(...z))},[V("span",{innerHTML:N(Mt).zoomOut},null,8,R0)]),V("button",{class:"icon-btn","data-tip":"Center",disabled:!N(T),onClick:F[24]||(F[24]=(...z)=>N(at)&&N(at)(...z))},[V("span",{innerHTML:N(Mt).crosshair},null,8,A0)],8,E0),V("button",{class:"icon-btn","data-tip":"Fit all",onClick:F[25]||(F[25]=(...z)=>N(B)&&N(B)(...z))},[V("span",{innerHTML:N(Mt).fit},null,8,F0)]),V("button",{class:"icon-btn","data-tip":"Reset view",onClick:F[26]||(F[26]=(...z)=>N(K)&&N(K)(...z))},[V("span",{innerHTML:N(Mt).maximize},null,8,I0)]),V("button",{class:"icon-btn danger","data-tip":"Delete",disabled:!N(T),onClick:F[27]||(F[27]=(...z)=>N(Ft)&&N(Ft)(...z))},[V("span",{innerHTML:N(Mt).trash},null,8,O0)],8,L0)]),V("div",{class:"popover-anchor popover-anchor-right",onMouseenter:F[46]||(F[46]=z=>r("more")),onMouseleave:F[47]||(F[47]=z=>i("more"))},[V("button",N0,[V("span",{innerHTML:N(Mt).more},null,8,k0)]),V("div",{class:Se(["popover popover-below popover-wide",{"popover-open":e.value==="more"}]),onMouseenter:F[44]||(F[44]=z=>s("more")),onMouseleave:F[45]||(F[45]=z=>i("more"))},[V("div",D0,[V("div",G0,[F[107]||(F[107]=V("span",{class:"popover-heading"},"Actions",-1)),V("div",H0,[V("button",{class:"mini-btn",disabled:!N(D),onClick:F[28]||(F[28]=(...z)=>N(Et)&&N(Et)(...z))},[V("span",{innerHTML:N(Mt).copy},null,8,B0),F[100]||(F[100]=Ut(" Duplicate ",-1))],8,U0),V("button",{class:"mini-btn",disabled:!N(D),onClick:F[29]||(F[29]=(...z)=>N(bn)&&N(bn)(...z))},[V("span",{innerHTML:N(Mt).crop},null,8,W0),F[101]||(F[101]=Ut(" Crop ",-1))],8,V0),V("button",{class:"mini-btn",disabled:!N(D),onClick:F[30]||(F[30]=z=>N(St)("x"))},[V("span",{innerHTML:N(Mt).flipX},null,8,q0),F[102]||(F[102]=Ut(" Flip X ",-1))],8,z0),V("button",{class:"mini-btn",disabled:!N(D),onClick:F[31]||(F[31]=z=>N(St)("y"))},[V("span",{innerHTML:N(Mt).flipY},null,8,j0),F[103]||(F[103]=Ut(" Flip Y ",-1))],8,Y0),V("button",{class:"mini-btn",disabled:!N(T),onClick:F[32]||(F[32]=z=>N(bt)(15))},[V("span",{innerHTML:N(Mt).rotate},null,8,K0),F[104]||(F[104]=Ut(" +15 ",-1))],8,X0),V("button",{class:"mini-btn",disabled:!N(T),onClick:F[33]||(F[33]=(...z)=>N(X)&&N(X)(...z))},[V("span",{innerHTML:N(Mt).reset},null,8,J0),F[105]||(F[105]=Ut(" Reset ",-1))],8,$0),V("button",{class:"mini-btn",onClick:F[34]||(F[34]=(...z)=>N(kn)&&N(kn)(...z))},[V("span",{innerHTML:N(Mt).image},null,8,Q0),F[106]||(F[106]=Ut(" Sample ",-1))])])]),V("div",Z0,[F[112]||(F[112]=V("span",{class:"popover-heading"},"Export",-1)),V("div",t1,[V("label",e1,[ae(V("select",{"onUpdate:modelValue":F[35]||(F[35]=z=>N(h).format=z)},[...F[108]||(F[108]=[V("option",{value:"image/png"},"PNG",-1),V("option",{value:"image/jpeg"},"JPEG",-1),V("option",{value:"image/webp"},"WebP",-1)])],512),[[ju,N(h).format]])])]),V("label",n1,[V("span",i1,"Quality "+Yt(N(h).quality.toFixed(2)),1),ae(V("input",{"onUpdate:modelValue":F[36]||(F[36]=z=>N(h).quality=z),type:"range",min:"0.1",max:"1",step:"0.01"},null,512),[[ue,N(h).quality,void 0,{number:!0}]])]),V("label",r1,[V("span",s1,"Pixel ratio "+Yt(N(h).pixelRatio.toFixed(1))+"x",1),ae(V("input",{"onUpdate:modelValue":F[37]||(F[37]=z=>N(h).pixelRatio=z),type:"range",min:"1",max:"3",step:"0.1"},null,512),[[ue,N(h).pixelRatio,void 0,{number:!0}]])]),V("div",o1,[V("label",a1,[F[109]||(F[109]=V("span",{class:"popover-label"},"W",-1)),ae(V("input",{"onUpdate:modelValue":F[38]||(F[38]=z=>N(h).width=z),type:"number",min:"1",max:"6000",class:"num-input"},null,512),[[ue,N(h).width,void 0,{number:!0}]])]),V("label",l1,[F[110]||(F[110]=V("span",{class:"popover-label"},"H",-1)),ae(V("input",{"onUpdate:modelValue":F[39]||(F[39]=z=>N(h).height=z),type:"number",min:"1",max:"6000",class:"num-input"},null,512),[[ue,N(h).height,void 0,{number:!0}]])])]),V("div",h1,[V("button",{class:"mini-btn",onClick:F[40]||(F[40]=(...z)=>N(I)&&N(I)(...z))},"Stage size"),V("button",{class:"mini-btn accent",onClick:F[41]||(F[41]=(...z)=>N($i)&&N($i)(...z))},[V("span",{innerHTML:N(Mt).download},null,8,c1),F[111]||(F[111]=Ut(" Export ",-1))])])]),V("div",u1,[F[115]||(F[115]=V("span",{class:"popover-heading"},"State",-1)),V("div",d1,[V("button",{class:"mini-btn",onClick:F[42]||(F[42]=(...z)=>N(ke)&&N(ke)(...z))},[V("span",{innerHTML:N(Mt).fileJson},null,8,f1),F[113]||(F[113]=Ut(" Save JSON ",-1))]),V("button",{class:"mini-btn",onClick:F[43]||(F[43]=(...z)=>N(Yi)&&N(Yi)(...z))},[V("span",{innerHTML:N(Mt).fileImport},null,8,g1),F[114]||(F[114]=Ut(" Load JSON ",-1))])])])])],34)],32)]),N(D)||N(x)?(fe(),Ue("div",p1,[V("div",m1,[N(D)?(fe(),Ue(me,{key:0},[V("div",{class:"popover-anchor popover-anchor-left",onMouseenter:F[58]||(F[58]=z=>r("adjust")),onMouseleave:F[59]||(F[59]=z=>i("adjust"))},[V("button",_1,[V("span",{innerHTML:N(Mt).sliders},null,8,y1)]),V("div",{class:Se(["popover popover-above",{"popover-open":e.value==="adjust"}]),onMouseenter:F[56]||(F[56]=z=>s("adjust")),onMouseleave:F[57]||(F[57]=z=>i("adjust"))},[V("div",v1,[F[116]||(F[116]=V("span",{class:"popover-heading"},"Adjustments",-1)),V("label",b1,[V("span",S1,"Brightness "+Yt(N(d).brightness.toFixed(2)),1),V("input",{value:N(d).brightness,type:"range",min:"-1",max:"1",step:"0.01",onInput:F[48]||(F[48]=z=>N(mt)("brightness",z.target.value)),onChange:F[49]||(F[49]=(...z)=>N(pt)&&N(pt)(...z))},null,40,x1)]),V("label",C1,[V("span",w1,"Contrast "+Yt(Math.round(N(d).contrast)),1),V("input",{value:N(d).contrast,type:"range",min:"-100",max:"100",step:"1",onInput:F[50]||(F[50]=z=>N(mt)("contrast",z.target.value)),onChange:F[51]||(F[51]=(...z)=>N(pt)&&N(pt)(...z))},null,40,M1)]),V("label",T1,[V("span",P1,"Saturation "+Yt(N(d).saturation.toFixed(2)),1),V("input",{value:N(d).saturation,type:"range",min:"-2",max:"2",step:"0.01",onInput:F[52]||(F[52]=z=>N(mt)("saturation",z.target.value)),onChange:F[53]||(F[53]=(...z)=>N(pt)&&N(pt)(...z))},null,40,R1)]),V("label",E1,[V("span",A1,"Hue "+Yt(Math.round(N(d).hue))+"deg",1),V("input",{value:N(d).hue,type:"range",min:"-180",max:"180",step:"1",onInput:F[54]||(F[54]=z=>N(mt)("hue",z.target.value)),onChange:F[55]||(F[55]=(...z)=>N(pt)&&N(pt)(...z))},null,40,F1)])])],34)],32),V("button",{class:"icon-btn","data-tip":"Crop",onClick:F[60]||(F[60]=(...z)=>N(bn)&&N(bn)(...z))},[V("span",{innerHTML:N(Mt).crop},null,8,I1)]),V("button",{class:"icon-btn","data-tip":"Flip X",onClick:F[61]||(F[61]=z=>N(St)("x"))},[V("span",{innerHTML:N(Mt).flipX},null,8,L1)]),V("button",{class:"icon-btn","data-tip":"Flip Y",onClick:F[62]||(F[62]=z=>N(St)("y"))},[V("span",{innerHTML:N(Mt).flipY},null,8,O1)])],64)):Mn("",!0),N(x)?(fe(),Ue("div",{key:1,class:"popover-anchor popover-anchor-left",onMouseenter:F[72]||(F[72]=z=>r("textedit")),onMouseleave:F[73]||(F[73]=z=>i("textedit"))},[V("button",N1,[V("span",{innerHTML:N(Mt).text},null,8,k1)]),V("div",{class:Se(["popover popover-above popover-wide",{"popover-open":e.value==="textedit"}]),onMouseenter:F[70]||(F[70]=z=>s("textedit")),onMouseleave:F[71]||(F[71]=z=>i("textedit"))},[V("div",D1,[F[118]||(F[118]=V("span",{class:"popover-heading"},"Text",-1)),V("label",G1,[V("textarea",{value:N(x).text,rows:"3",onInput:F[63]||(F[63]=z=>N(Wt)(z.target.value)),onChange:F[64]||(F[64]=(...z)=>N(Ot)&&N(Ot)(...z)),onBlur:F[65]||(F[65]=(...z)=>N(Ot)&&N(Ot)(...z))},null,40,H1)]),V("label",U1,[V("span",B1,"Size: "+Yt(N(x).fontSize)+"px",1),V("input",{value:N(x).fontSize,type:"range",min:"10",max:"160",step:"1",onInput:F[66]||(F[66]=z=>N(we)(z.target.value)),onChange:F[67]||(F[67]=(...z)=>N(Ot)&&N(Ot)(...z))},null,40,V1)]),V("label",W1,[F[117]||(F[117]=V("span",{class:"popover-label"},"Color",-1)),V("input",{value:N(x).fill,type:"color",class:"color-swatch",onInput:F[68]||(F[68]=z=>N(be)(z.target.value)),onChange:F[69]||(F[69]=(...z)=>N(Ot)&&N(Ot)(...z))},null,40,z1)])])],34)],32)):Mn("",!0)])])):Mn("",!0),V("div",q1,[Kt(Hr,{ref_key:"stageRef",ref:a,config:N(v),onMousedown:N(st),onMousemove:N(nt),onMouseup:N(dt),onTouchstart:N(st),onTouchmove:N(nt),onTouchend:N(dt),onWheel:N(ot),onDragend:N(J)},{default:Ri(()=>[Kt(Gr,null,{default:Ri(()=>[Kt(Qi,{config:N(M)},null,8,["config"]),(fe(!0),Ue(me,null,Xr(N(C),z=>(fe(),Ai(Zi,{key:z.id,config:N(j)(z),onClick:ie=>N(gt)(z.id),onTap:ie=>N(gt)(z.id),onDragend:ie=>N(lt)(z,ie),onTransformend:ie=>N(ct)(z,ie)},{default:Ri(()=>[Kt(kr,{config:N(Z)(z)},null,8,["config"]),z.lines.length>0?(fe(),Ai(Zi,{key:0,config:N(Q)(z)},{default:Ri(()=>[(fe(!0),Ue(me,null,Xr(z.lines,ie=>(fe(),Ai(Qe,{key:`${z.id}-${ie.id}`,config:N(ht)(ie)},null,8,["config"]))),128))]),_:2},1032,["config"])):Mn("",!0),Kt(Qi,{config:N(tt)(z)},null,8,["config"])]),_:2},1032,["config","onClick","onTap","onDragend","onTransformend"]))),128)),(fe(!0),Ue(me,null,Xr(N(P),z=>(fe(),Ai(Dr,{key:z.id,config:N(rt)(z),onClick:ie=>N(gt)(z.id),onTap:ie=>N(gt)(z.id),onDragend:ie=>N(lt)(z,ie),onTransformend:ie=>N(ct)(z,ie)},null,8,["config","onClick","onTap","onDragend","onTransformend"]))),128)),Kt(Re,{ref_key:"transformerRef",ref:o,config:N(L)},null,8,["config"])]),_:1})]),_:1},8,["config","onMousedown","onMousemove","onMouseup","onTouchstart","onTouchmove","onTouchend","onWheel","onDragend"])])],512)]),V("input",{ref_key:"imageInputRef",ref:u,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:F[74]||(F[74]=(...z)=>N(Jt)&&N(Jt)(...z))},null,544),V("input",{ref_key:"replaceImageInputRef",ref:c,type:"file",accept:"image/*",class:"hidden",onChange:F[75]||(F[75]=(...z)=>N(ji)&&N(ji)(...z))},null,544),V("input",{ref_key:"importJsonInputRef",ref:_,type:"file",accept:"application/json,.json",class:"hidden",onChange:F[76]||(F[76]=(...z)=>N(Ji)&&N(Ji)(...z))},null,544),N(p).visible?(fe(),Ue("div",{key:0,class:"cropper-overlay",onClick:F[95]||(F[95]=$u(z=>N(Ki)(!0),["self"]))},[V("div",Y1,[V("div",j1,[F[119]||(F[119]=V("h2",null,"Crop",-1)),V("button",{class:"icon-btn",onClick:F[77]||(F[77]=z=>N(Ki)(!0))},[V("span",{innerHTML:N(Mt).close},null,8,X1)])]),V("div",K1,[V("div",$1,[V("canvas",{ref_key:"cropPreviewRef",ref:m,class:"crop-preview"},null,512),V("p",null,Yt(N(p).sourceWidth)+"x"+Yt(N(p).sourceHeight)+" -> "+Yt(N(p).outputWidth)+"x"+Yt(N(p).outputHeight),1)]),V("div",J1,[V("label",null,[F[120]||(F[120]=Ut(" Crop X ",-1)),ae(V("input",{"onUpdate:modelValue":F[78]||(F[78]=z=>N(p).cropX=z),type:"number",min:"0",onInput:F[79]||(F[79]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).cropX,void 0,{number:!0}]])]),V("label",null,[F[121]||(F[121]=Ut(" Crop Y ",-1)),ae(V("input",{"onUpdate:modelValue":F[80]||(F[80]=z=>N(p).cropY=z),type:"number",min:"0",onInput:F[81]||(F[81]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).cropY,void 0,{number:!0}]])]),V("label",null,[F[122]||(F[122]=Ut(" Width ",-1)),ae(V("input",{"onUpdate:modelValue":F[82]||(F[82]=z=>N(p).cropWidth=z),type:"number",min:"1",onInput:F[83]||(F[83]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).cropWidth,void 0,{number:!0}]])]),V("label",null,[F[123]||(F[123]=Ut(" Height ",-1)),ae(V("input",{"onUpdate:modelValue":F[84]||(F[84]=z=>N(p).cropHeight=z),type:"number",min:"1",onInput:F[85]||(F[85]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).cropHeight,void 0,{number:!0}]])]),V("label",null,[F[124]||(F[124]=Ut(" Out W ",-1)),ae(V("input",{"onUpdate:modelValue":F[86]||(F[86]=z=>N(p).outputWidth=z),type:"number",min:"1",max:"4096",onInput:F[87]||(F[87]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).outputWidth,void 0,{number:!0}]])]),V("label",null,[F[125]||(F[125]=Ut(" Out H ",-1)),ae(V("input",{"onUpdate:modelValue":F[88]||(F[88]=z=>N(p).outputHeight=z),type:"number",min:"1",max:"4096",onInput:F[89]||(F[89]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).outputHeight,void 0,{number:!0}]])]),V("label",null,[F[126]||(F[126]=Ut(" Rotation ",-1)),ae(V("input",{"onUpdate:modelValue":F[90]||(F[90]=z=>N(p).rotation=z),type:"range",min:"-180",max:"180",step:"1",onInput:F[91]||(F[91]=(...z)=>N(ne)&&N(ne)(...z))},null,544),[[ue,N(p).rotation,void 0,{number:!0}]]),V("span",null,Yt(Math.round(N(p).rotation))+"deg",1)]),V("div",Q1,[V("button",{class:"mini-btn",onClick:F[92]||(F[92]=(...z)=>N(Sn)&&N(Sn)(...z))},[V("span",{innerHTML:N(Mt).fullImage},null,8,Z1),F[127]||(F[127]=Ut(" Full ",-1))]),V("button",{class:"mini-btn",onClick:F[93]||(F[93]=(...z)=>N(Xi)&&N(Xi)(...z))},[V("span",{innerHTML:N(Mt).squareCenter},null,8,tg),F[128]||(F[128]=Ut(" Square ",-1))])]),V("div",eg,[V("button",{class:"mini-btn accent",onClick:F[94]||(F[94]=(...z)=>N($e)&&N($e)(...z))},[V("span",{innerHTML:N(Mt).check},null,8,ng),F[129]||(F[129]=Ut(" Apply ",-1))])])])])])])):Mn("",!0),N(b)?(fe(),Ue("p",ig,Yt(N(b)),1)):Mn("",!0)])}}},sg=zf(rg,[["__scopeId","data-v-de6b8b9b"]]);Zu(sg).use(xf).mount("#app");
